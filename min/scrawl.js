const t={},e=[],i={},s=[],n={},r=[],o={},a=[],c={},l=[],h={},u={},d=[],f={},p={},m=[],g={},y=[],b={},S={},k=[],A={},v=[],P={},C=[],w={},x={},O=[],D={},R=[],F={};function H(h=""){const u=function(t,e,i=!1){t.forEach((t=>{const s=e[t];s&&s.kill&&s.kill(i)}))};if(h){u(a.filter((t=>0===t.indexOf(h))),o);u(l.filter((t=>0===t.indexOf(h))),c);u(y.filter((t=>0===t.indexOf(h))),g,!0);u(R.filter((t=>0===t.indexOf(h))),D);u(O.filter((t=>0===t.indexOf(h))),x);u(s.filter((t=>0===t.indexOf(h))),i);u(r.filter((t=>0===t.indexOf(h))),n);u(m.filter((t=>0===t.indexOf(h))),p);u(e.filter((t=>0===t.indexOf(h))),t);u(k.filter((t=>0===t.indexOf(h))),S);u(v.filter((t=>0===t.indexOf(h))),A);u(C.filter((t=>0===t.indexOf(h))),P)}}const E={DEFAULTS:{defaults:!0},b:{weight:"bold"},"/b":{weight:"normal"},strong:{weight:"bold"},"/strong":{weight:"normal"},BOLD:{weight:"bold"},"/BOLD":{weight:"normal"},i:{style:"italic"},"/i":{style:"normal"},em:{style:"italic"},"/em":{style:"normal"},ITALIC:{style:"italic"},"/ITALIC":{style:"normal"},u:{underline:!0},"/u":{underline:!1},UNDERLINE:{underline:!0},"/UNDERLINE":{underline:!1},OVERLINE:{overline:!0},"/OVERLINE":{overline:!1},"SMALL-CAPS":{variant:"small-caps"},"/SMALL-CAPS":{variant:"normal"},HIGHLIGHT:{highlight:!0},"/HIGHLIGHT":{highlight:!1}},I={};var T=Object.freeze({__proto__:null,anchor:t,anchornames:e,animation:i,animationnames:s,animationtickers:n,animationtickersnames:r,artefact:o,artefactnames:a,asset:c,assetnames:l,canvas:h,canvasnames:[],cell:u,cellnames:d,constructors:I,element:{},elementnames:[],entity:f,entitynames:[],filter:p,filternames:m,fontattribute:{},fontattributenames:[],force:S,forcenames:k,group:g,groupnames:y,palette:{},palettenames:[],particle:b,particlenames:[],purge:H,sectionClasses:E,spring:A,springnames:v,stack:w,stacknames:[],styles:D,stylesnames:R,tween:x,tweennames:O,unstackedelement:F,unstackedelementnames:[],version:"8.12.0",world:P,worldnames:C});const B=Math.abs,$=Math.acos,L=Object.assign,M=Math.atan2,N=Math.cbrt,X=Math.ceil,Y=window.getComputedStyle,G=Math.cos,j=Object.create,z=Object.entries,W=Math.exp,V=Math.floor,U=Object.freeze,Z=Math.hypot,_=180/Math.PI,K=Array.isArray,q=Number.isInteger,Q=Object.keys,J=Math.max,tt=Math.min,et=Date.now,it=JSON.parse,st=Math.PI,nt=2*Math.PI,rt=.5*Math.PI,ot=Math.pow,at=Math.PI/180,ct=Math.random,lt=Math.round,ht=Object.seal,ut=Object.setPrototypeOf,dt=Math.sin,ft=Math.sqrt,pt=JSON.stringify,mt=JSON.stringify,gt=.016,yt=Math.trunc,bt=Object.values,St="BODY",kt="image_",At="video_",vt="0",Pt="2d",Ct="a",wt="hsl",xt="hwb",Ot="lab",Dt="lch",Rt="_max",Ft="_min",Ht="oklab",Et="oklch",It="rgb",Tt="VIDEO",Bt="xyz",$t="absolute",Lt=U(["Cell","Stack"]),Mt=U(["Canvas","Stack"]),Nt="add",Xt="addEventListener",Yt="all",Gt="alpha-to-channels",jt="anchor",zt=U(["anchor","anchorHref","anchorName","anchorDescription","anchorType","anchorTarget","anchorTabOrder","anchorDisabled","anchorRel","anchorReferrerPolicy","anchorPing","anchorHreflang","anchorDownload","anchorFocusAction","anchorBlurAction","anchorClickAction"]),Wt="anchorType",Vt="animation",Ut="anonymous",Zt="area-alpha",_t=",",Kt="aria-hidden",qt="aria-live",Qt=U(["assertive","polite","off"]),Jt="asset",te=/.*\/(.*?)\./,ee="auto",ie="autofocus",se="average-channels",ne="banner",re=U(["stripes","smoothed-stripes","worley-euclidean","worley-manhattan"]),oe="bezier",ae="rgb(0 0 0 / 1)",ce="black-white",le="rgb(0 0 0 / 0)",he="blend",ue="block",de="blue",fe="bluenoise",pe="blur",me="blurAction",ge="bold",ye="bolder",be="border-box",Se="bottom",ke="button",Ae=U(["button","buttonName","buttonAutofocus","buttonDescription","buttonDisabled","buttonTabOrder","buttonForm","buttonFormAction","buttonFormEnctype","buttonFormMethod","buttonFormNoValidate","buttonFormTarget","buttonElementName","buttonPopoverTarget","buttonPopoverTargetAction","buttonElementType","buttonElementValue","buttonFocusAction","buttonBlurAction","buttonClickAction"]),ve="canvas",Pe="cellGradient",Ce="center",we="change",xe="channels-to-alpha",Oe="chroma",De="clamp-channels",Re=U(["down","round","up"]),Fe=/[\s\uFEFF\xA0]+/g,He="clear",Ee="click",Ie="clickAction",Te="close",Be="color",$e="colors-to-alpha",Le="compose",Me="contain",Ne="control",Xe="coord",Ye="copyDimensions",Ge="copyStart",je=U(["topLeft","topRight","bottomRight","bottomLeft"]),ze='[data-scrawl-corner-div="sc"]',We="corrode",Ve="cover",Ue="data-scrawl-group",Ze="data-scrawl-stack",_e="data-tab-order",Ke="rgb(250 0 0 / 1)",qe="default",Qe="any_random_string_will_do",Je="description",ti="destination-out",ei="dimensions",ii="disabled",si="displace",ni="display-p3",ri="div",oi="down",ai="download",ci="element",li="elementType",hi="elementValue",ui="emboss",di="emboss-work",fi="end",pi="endControl",mi="enter",gi="entity",yi="euclidian-distance",bi="euler",Si="fill",ki="fillStyle",Ai="filter",vi=U(["fill","contain","cover"]),Pi="flood",Ci="focus",wi="focusAction",xi="form",Oi="formAction",Di="formEnctype",Ri="formMethod",Fi="formNoValidate",Hi="formTarget",Ei="function",Ii="gaussian-blur",Ti="getBezierXY",Bi="getQuadraticXY",$i="glitch",Li=U(["Cell","CellFragment"]),Mi=U(["black-white","monochrome-4","monochrome-8","monochrome-16"]),Ni="grayscale",Xi="green",Yi="gridGradient",Gi="gridPicture",ji="rgb(0 0 0 / 0.5)",zi="handle",Wi="height",Vi="hex-grid",Ui="hidden",Zi="href",_i="hreflang",Ki="HSL",qi=U(["HSL","HWB"]),Qi=U(["Bezier","Line","Oval","Polygon","Polyline","Quadratic","Rectangle","Shape","Spiral","Star","Tetragon"]),Ji="HWB",ts=U(["IMG","PICTURE"]),es="img",is="improved-perlin",ss=U(["RGB","HSL","HWB","XYZ","LAB","LCH","OKLAB","OKLCH"]),ns="intrinsic",rs="invert-channels",os="italic",as=U(["left","right","center","full"]),cs="keydown",ls="keyup",hs=U(["none","shiftOnly","altOnly","ctrlOnly","metaOnly","shiftAlt","shiftCtrl","shiftMeta","altCtrl","altMeta","ctrlMeta","shiftAltCtrl","shiftAltMeta","shiftCtrlMeta","altCtrlMeta","all"]),us="LAB",ds="landscape",fs="large",ps="larger",ms="largest",gs="LCH",ys="leave",bs="left",Ss="lighter",ks="lineDash",As="linear",vs="lock-channels-to-levels",Ps="lockTo",Cs=U(["startX","startY","handleX","handleY","offsetX","offsetY","width","height"]),ws="loop",xs="ltr",Os="manhattan-distance",Ds="map-to-gradient",Rs=U(["a","b","c","d","e","f"]),Fs=U(["repeat","repeat-x","repeat-y","no-repeat"]),Hs="matrix",Es="mean",Is="medium",Ts="mimic",Bs="modulate-channels",$s="mouse",Ls="mousedown",Ms="mouseenter",Ns="mouseleave",Xs="mousemove",Ys="mouseup",Gs="move",js="mozOsxFontSmoothing",zs="ms",Ws="multiply",Vs="name",Us="never",Zs="newNumber",_s="newsprint",Ks="newString",qs=U(["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR","CANVAS"]),Qs=U(["random","ordered","bluenoise"]),Js=U(["AREA","BASE","BR","COL","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"]),tn="none",en="nonzero",sn="normal",nn="oblique",rn="offset",on="OKLAB",an="OKLCH",cn="~~~",ln=U(["colors","cyclic","stops"]),hn="particle",un="path",dn="%",fn="0%",pn="100%",mn="50%",gn="perlin",yn=U(["line","quadratic","bezier"]),bn="ping",Sn="pivot",kn="pixelate",An="pointerdown",vn="pointerenter",Pn="pointerleave",Cn="pointermove",wn="pointerup",xn="points-array",On="polite",Dn="popoverTarget",Rn="popoverTargetAction",Fn="portrait",Hn="process-image",En="px",In="0px",Tn="quadratic",Bn=U(["radiusTLX","radiusTRX","radiusBRX","radiusBLX","radiusTLY","radiusTRY","radiusBRY","radiusBLY"]),$n=U(["radiusBRX","radiusBRY","radiusBLX","radiusBLY"]),Ln=U(["radiusBLX","radiusBLY"]),Mn=U(["radiusBLX"]),Nn=U(["radiusBLY"]),Xn=U(["radiusBRX","radiusBRY"]),Yn=U(["radiusBRX"]),Gn=U(["radiusBRY"]),jn=U(["radiusBRX","radiusBLX"]),zn=U(["radiusBRY","radiusBLY"]),Wn=U(["radiusTLX","radiusTLY","radiusBLX","radiusBLY"]),Vn=U(["radiusTLX","radiusBLX"]),Un=U(["radiusTLY","radiusBLY"]),Zn=U(["radiusTRX","radiusTRY","radiusBRX","radiusBRY"]),_n=U(["radiusTRX","radiusBRX"]),Kn=U(["radiusTRY","radiusBRY"]),qn=U(["radiusTLX","radiusTLY","radiusTRX","radiusTRY"]),Qn=U(["radiusTLX","radiusTLY"]),Jn=U(["radiusTLX"]),tr=U(["radiusTLY"]),er=U(["radiusTRX","radiusTRY"]),ir=U(["radiusTRX"]),sr=U(["radiusTRY"]),nr=U(["radiusTLX","radiusTRX"]),rr=U(["radiusTLY","radiusTRY"]),or=U(["radiusTLX","radiusTRX","radiusBRX","radiusBLX"]),ar=U(["radiusTLY","radiusTRY","radiusBRY","radiusBLY"]),cr=U(["radiusX"]),lr=U(["radiusX","radiusY"]),hr=U(["radiusY"]),ur="random",dr="random-noise",fr="random-points",pr=U(["random","entity"]),mr="rect-grid",gr="rectangle",yr="red",br="reduce-palette",Sr="referrerpolicy",kr="regular",Ar="rel",vr="relative",Pr="remove",Cr="removeEventListener",wr=U(["RGB","HSL","HWB","LAB","LCH","OKLAB","OKLCH"]),xr="reverse",Or="reverseByDelta",Dr=U(["italic","oblique","small-caps","normal","bold","lighter","bolder","ultra-condensed","extra-condensed","semi-condensed","condensed","ultra-expanded","extra-expanded","semi-expanded","expanded","xx-small","x-small","small","medium","xxx-large","xx-large","x-large","large"]),Rr=U(["0","1","2","3","4","5","6","7","8","9"]),Fr="RGB",Hr="right",Er="root",Ir="sans-serif",Tr=":",Br="set-channel-to-level",$r=U(["startY","handleY","offsetY","height"]),Lr="simplex",Mr=U(["in","cm","mm","Q","pc","pt","px"]),Nr="skyscraper",Xr="small",Yr="small-caps",Gr="smaller",jr="smallest",zr="smoothFont",Wr="smoothed-stripes",Vr="source",Ur="source-alpha",Zr="source-in",_r="source-over",Kr=" ",qr="srgb",Qr="start",Jr="startControl",to="startX",eo="startY",io=U(["direction","fillStyle","filter","font","fontKerning","fontStretch","fontVariantCaps","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","letterSpacing","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","textRendering","wordSpacing"]),so=U(["fillStyle","filter","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle"]),no=U(["lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit"]),ro=U(["filter","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","imageSmoothingQuality","shadowBlur","shadowOffsetX","shadowOffsetY"]),oo=U(["fillStyle","shadowColor","strokeStyle"]),ao=U(["font"]),co="step-channels",lo="stripes",ho="strokeStyle",uo="styles",fo=U(["Gradient","RadialGradient","Pattern"]),po="subscribe",mo="swirl",go="Bezier",yo="Canvas",bo="Cell",So="CellFragment",ko="Color",Ao="Coordinate",vo="Filter",Po="GenericArray",Co="Group",wo="Image",xo="Line",Oo="Noise",Do="Palette",Ro="Particle",Fo="ParticleHistory",Ho="Phrase",Eo="Picture",Io="Polyline",To="Quadratic",Bo="Quaternion",$o="RawAsset",Lo="RdAsset",Mo="RenderAnimation",No="Shape",Xo="Sprite",Yo="Stack",Go="Ticker",jo="Tween",zo="Vector",Wo="Video",Vo="World",Uo="tabOrder",Zo="tabindex",_o="target",Ko=U(["artefact","group","animation","animationtickers","world","tween","styles","filter"]),qo="threshold",Qo="tilePicture",Jo="tiles",ta="tint-channels",ea="top",ia="touch",sa="touchcancel",na="touchend",ra="touchmove",oa="touchstart",aa=U(["rgb(0 0 0 / 0)","rgba(0 0 0 / 0)","rgba(0,0,0,0)","rgba(0, 0, 0, 0)","transparent","#00000000","#0000"]),ca="true",la="tween",ha="type",ua=U(["Image","Sprite","Video","Canvas","Stack"]),da=U(["width","height","zIndex","borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"]),fa=U(["borderBottomLeftRadius","borderBottomRightRadius","borderTopLeftRadius","borderTopRightRadius"]),pa="undefined",ma="unknown",ga="unnamed",ya="unset",ba="up",Sa="update",ka="updateByDelta",Aa="user-defined-legacy",va="value",Pa="vary-channels-by-weights",Ca="video",wa="webkitFontSmoothing",xa="rgb(255 255 255 / 1)",Oa="width",Da="worley-euclidean",Ra="worley-manhattan",Fa=U(["X","Y","Z","XminusY","XminusZ","YminusX","YminusZ","ZminusX","ZminusY","XaddY","XaddZ","YaddZ","XaddYminusZ","XaddZminusY","YaddZminusX","XmultiplyY","XmultiplyZ","YmultiplyZ","XmultiplyYaddZ","XmultiplyZaddY","YmultiplyZaddX","XmultiplyYminusZ","XmultiplyZminusY","YmultiplyZminusX","sum"]),Ha="x-large",Ea="x-small",Ia="xx-large",Ta="xx-small",Ba="xxx-large",$a="XYZ",La="zero",Ma="M0,0",Na="",Xa=U(["all","background","backgroundAttachment","backgroundBlendMode","backgroundClip","backgroundColor","backgroundOrigin","backgroundPosition","backgroundRepeat","border","borderBottom","borderBottomColor","borderBottomStyle","borderBottomWidth","borderCollapse","borderColor","borderLeft","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRight","borderRightColor","borderRightStyle","borderRightWidth","borderSpacing","borderStyle","borderTop","borderTopColor","borderTopStyle","borderTopWidth","borderWidth","clear","color","columns","content","counterIncrement","counterReset","cursor","direction","display","emptyCells","float","font","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontSynthesis","fontVariant","fontVariantAlternates","fontVariantCaps","fontVariantEastAsian","fontVariantLigatures","fontVariantNumeric","fontVariantPosition","fontWeight","grid","gridArea","gridAutoColumns","gridAutoFlow","gridAutoPosition","gridAutoRows","gridColumn","gridColumnStart","gridColumnEnd","gridRow","gridRowStart","gridRowEnd","gridTemplate","gridTemplateAreas","gridTemplateRows","gridTemplateColumns","imageResolution","imeMode","inherit","inlineSize","isolation","letterSpacing","lineBreak","lineHeight","listStyle","listStyleImage","listStylePosition","listStyleType","margin","marginBlockStart","marginBlockEnd","marginInlineStart","marginInlineEnd","marginBottom","marginLeft","marginRight","marginTop","marks","mask","maskType","maxWidth","maxHeight","maxBlockSize","maxInlineSize","maxZoom","minWidth","minHeight","minBlockSize","minInlineSize","minZoom","mixBlendMode","objectFit","objectPosition","offsetBlockStart","offsetBlockEnd","offsetInlineStart","offsetInlineEnd","orphans","overflow","overflowWrap","overflowX","overflowY","pad","padding","paddingBlockStart","paddingBlockEnd","paddingInlineStart","paddingInlineEnd","paddingBottom","paddingLeft","paddingRight","paddingTop","pageBreakAfter","pageBreakBefore","pageBreakInside","pointerEvents","position","prefix","quotes","rubyAlign","rubyMerge","rubyPosition","scrollBehavior","scrollSnapCoordinate","scrollSnapDestination","scrollSnapPointsX","scrollSnapPointsY","scrollSnapType","scrollSnapTypeX","scrollSnapTypeY","shapeImageThreshold","shapeMargin","shapeOutside","tableLayout","textAlign","textDecoration","textIndent","textOrientation","textOverflow","textRendering","textShadow","textTransform","textUnderlinePosition","unicodeRange","unset","verticalAlign","widows","willChange","wordBreak","wordSpacing","wordWrap","zIndex"]),Ya=U(["alignContent","alignItems","alignSelf","animation","animationDelay","animationDirection","animationDuration","animationFillMode","animationIterationCount","animationName","animationPlayState","animationTimingFunction","backfaceVisibility","backgroundImage","backgroundSize","borderBottomLeftRadius","borderBottomRightRadius","borderImage","borderImageOutset","borderImageRepeat","borderImageSlice","borderImageSource","borderImageWidth","borderRadius","borderTopLeftRadius","borderTopRightRadius","boxDecorationBreak","boxShadow","boxSizing","columnCount","columnFill","columnGap","columnRule","columnRuleColor","columnRuleStyle","columnRuleWidth","columnSpan","columnWidth","filter","flex","flexBasis","flexDirection","flexFlow","flexGrow","flexShrink","flexWrap","fontFeatureSettings","fontKerning","fontLanguageOverride","hyphens","imageRendering","imageOrientation","initial","justifyContent","linearGradient","opacity","order","orientation","outline","outlineColor","outlineOffset","outlineStyle","outlineWidth","resize","tabSize","textAlignLast","textCombineUpright","textDecorationColor","textDecorationLine","textDecorationStyle","touchAction","transformStyle","transition","transitionDelay","transitionDuration","transitionProperty","transitionTimingFunction","unicodeBidi","whiteSpace","writingMode"]),Ga=(t,e)=>{if(null!=e){bs==t||ea==t?t=fn:Hr==t||Se==t?t=pn:Ce==t&&(t=mn);const i=!(!t.substring&&!e.substring);return rc(t)?t+=rc(e)?e:parseFloat(e):t=parseFloat(t)+(rc(e)?e:parseFloat(e)),i?t+dn:t}return t},ja=function(t,e,i){return t<e?e:t>i?i:t},za=t=>{if(rc(t))return[zs,t];if(t.substring){const e=t.match(/^\d+\.?\d*(\D*)/);let i=e[1].toLowerCase?e[1].toLowerCase():zs,s=parseFloat(t);if(!isNaN(s)){switch(i){case"s":s*=1e3;break;case"%":break;default:i=zs}return[i,s]}return[zs,0]}},Wa=t=>!t.toFixed||isNaN(t)?0:((t%=360)<0&&(t+=360),t),Va=t=>{if(t.toFixed&&!isNaN(t)){if(t<-1e-6)return t;if(t>1e-6)return t}return 0},Ua=()=>{},Za=function(t){return t},_a=function(){return this},Ka=()=>Promise.resolve(!0),qa=U({}),Qa=()=>{function t(){return V(65536*(1+ct())).toString(16).substring(1)}return`${t()}${t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`},Ja=()=>performance.now().toString(36)+ct().toString(36).substr(2),tc=function(t,e,i){return e+t*(i-e)},ec=t=>"boolean"==typeof t,ic=t=>"[object HTMLCanvasElement]"==Object.prototype.toString.call(t),sc=t=>!!(t&&t.querySelector&&t.dispatchEvent),nc=t=>typeof t==Ei,rc=t=>!(null==t||!t.toFixed||Number.isNaN(t)),oc=t=>"[object Object]"==Object.prototype.toString.call(t),ac=t=>!(!t||!t.type||t.type!=Bo),cc=(t,e)=>{if(oc(t)&&oc(e))for(const i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},lc=(t,e)=>(oc(t)&&oc(e)&&z(e).forEach((([i,s])=>{null===s?delete t[i]:t[i]=e[i]})),t),hc=(t,e)=>(K(t)&&(K(e)?e.forEach((e=>hc(t,e))):t.includes(e)||t.push(e)),t),uc=(t,e)=>{if(K(t)){const i=t.indexOf(e);i>=0&&t.splice(i,1)}return t},dc=t=>typeof t!=pa,fc=(...t)=>t.every((t=>typeof t!=pa)),pc=(...t)=>t.find((t=>typeof t!=pa)),mc=(...t)=>!!t.find((t=>typeof t!=pa)),gc={out:t=>1-G(t*st/2),in:t=>dt(t*st/2),easeIn:t=>{const e=1-t;return 1-e*e},easeIn3:t=>{const e=1-t;return 1-e*e*e},easeIn4:t=>{const e=1-t;return 1-e*e*e*e},easeIn5:t=>{const e=1-t;return 1-e*e*e*e*e},easeOutIn:t=>t<.5?2*t*t:1-ot(-2*t+2,2)/2,easeOutIn3:t=>t<.5?4*t*t*t:1-ot(-2*t+2,3)/2,easeOutIn4:t=>t<.5?8*t*t*t*t:1-ot(-2*t+2,4)/2,easeOutIn5:t=>t<.5?16*t*t*t*t*t:1-ot(-2*t+2,5)/2,easeInOut:t=>{const e=.5-t;return t<.5?.5+-2*e*e:.5+ot(2*(t-.5),2)/2},easeInOut3:t=>{const e=.5-t;return t<.5?.5+-4*e*e*e:.5+ot(2*(t-.5),3)/2},easeInOut4:t=>{const e=.5-t;return t<.5?.5+-8*e*e*e*e:.5+ot(2*(t-.5),4)/2},easeInOut5:t=>{const e=.5-t;return t<.5?.5+-16*e*e*e*e*e:.5+ot(2*(t-.5),5)/2},easeOut:t=>t*t,easeOut3:t=>t*t*t,easeOut4:t=>t*t*t*t,easeOut5:t=>t*t*t*t*t,none:t=>t,linear:t=>t,cosine:t=>.5*(1+G((1-t)*st)),hermite:t=>t*t*(2*-t+3),quintic:t=>t*t*t*(t*(6*t-15)+10),easeOutSine:t=>1-G(t*st/2),easeInSine:t=>dt(t*st/2),easeOutInSine:t=>-(G(st*t)-1)/2,easeOutQuad:t=>t*t,easeInQuad:t=>1-(1-t)*(1-t),easeOutInQuad:t=>t<.5?2*t*t:1-ot(-2*t+2,2)/2,easeOutCubic:t=>t*t*t,easeInCubic:t=>1-ot(1-t,3),easeOutInCubic:t=>t<.5?4*t*t*t:1-ot(-2*t+2,3)/2,easeOutQuart:t=>t*t*t*t,easeInQuart:t=>1-ot(1-t,4),easeOutInQuart:t=>t<.5?8*t*t*t*t:1-ot(-2*t+2,4)/2,easeOutQuint:t=>t*t*t*t*t,easeInQuint:t=>1-ot(1-t,5),easeOutInQuint:t=>t<.5?16*t*t*t*t*t:1-ot(-2*t+2,5)/2,easeOutExpo:t=>0===t?0:ot(2,10*t-10),easeInExpo:t=>1===t?1:1-ot(2,-10*t),easeOutInExpo:t=>0===t||1===t?t:t<.5?ot(2,20*t-10)/2:(2-ot(2,-20*t+10))/2,easeOutCirc:t=>1-ft(1-ot(t,2)),easeInCirc:t=>ft(1-ot(t-1,2)),easeOutInCirc:t=>t<.5?(1-ft(1-ot(2*t,2)))/2:(ft(1-ot(-2*t+2,2))+1)/2,easeOutBack:t=>2.70158*t*t*t-1.70158*t*t,easeInBack:t=>1+2.70158*ot(t-1,3)+1.70158*ot(t-1,2),easeOutInBack:t=>{const e=2.5949095;return t<.5?ot(2*t,2)*(7.189819*t-e)/2:(ot(2*t-2,2)*((e+1)*(2*t-2)+e)+2)/2},easeOutElastic:t=>{const e=2*st/3;return 0===t||1===t?t:-ot(2,10*t-10)*dt((10*t-10.75)*e)},easeInElastic:t=>{const e=2*st/3;return 0===t||1===t?t:ot(2,-10*t)*dt((10*t-.75)*e)+1},easeOutInElastic:t=>{const e=2*st/4.5;return 0===t||1===t?t:t<.5?-ot(2,20*t-10)*dt((20*t-11.125)*e)/2:ot(2,-20*t+10)*dt((20*t-11.125)*e)/2+1},easeOutBounce:t=>{const e=7.5625,i=2.75;return(t=1-t)<1/i?1-e*t*t:t<2/i?1-(e*(t-=1.5/i)*t+.75):t<2.5/i?1-(e*(t-=2.25/i)*t+.9375):1-(e*(t-=2.625/i)*t+.984375)},easeInBounce:t=>{const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeOutInBounce:t=>{const e=7.5625,i=2.75;let s;return t<.5?(s=(t=1-2*t)<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375,(1-s)/2):(s=(t=2*t-1)<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375,(1+s)/2)}},yc=()=>j(Object.prototype);let bc=!1;const Sc=()=>bc,kc=t=>bc=t;let Ac=!1;const vc=()=>Ac,Pc=t=>Ac=t;let Cc=!1;const wc=()=>Cc,xc=t=>Cc=t;let Oc=!1;let Dc=!1;const Rc=()=>Dc,Fc=t=>Dc=t;let Hc=!1;const Ec=()=>Hc,Ic=t=>Hc=t;let Tc=!1;const Bc=()=>Tc,$c=t=>Tc=t;let Lc=!1;const Mc=()=>Lc,Nc=t=>Lc=t;let Xc=!0;const Yc=t=>Xc=t;let Gc=!1;const jc=t=>Gc=t;let zc=!0;const Wc=t=>zc=t,Vc=function(){Ac=!0,Cc=!0},Uc=function(){const t=[];return ut(t,Uc.prototype),t};I.GenericArray=Uc;const Zc=Uc.prototype=j(Array.prototype);Zc.constructor=Uc,Zc.type=Po;const _c=[],Kc=function(){return _c.length||_c.push(new Uc),_c.shift()},qc=function(t){t&&t.type==Po&&(t.length=0,_c.push(t),_c.length>20&&(console.log("purging genericArrayPool"),_c.length=10))},Qc=[],Jc=[],tl=t=>{hc(Jc,t),Yc(!0)},el=t=>{uc(Jc,t),Yc(!0)},il=t=>Jc.includes(t),sl=()=>{Xc&&(Yc(!1),(()=>{const t=Kc();let e,s,n,r;for(n=0,r=Jc.length;n<r;n++)e=i[Jc[n]],e&&(s=V(e.order)||0,t[s]||(t[s]=Kc()),t[s].push(e));for(Qc.length=0,n=0,r=t.length;n<r;n++)e=t[n],e&&(Qc.push(...e),qc(e));qc(t)})());for(let t=0,e=Qc.length;t<e;t++){const e=Qc[t],i=et();e.chokedAnimation?e.lastRun+825/e.maxFrameRate<i&&(e.fn(),e.lastRun=i):e.fn()}Gc&&window.requestAnimationFrame(sl)},nl=()=>{jc(!0),sl()},rl=()=>jc(!1),ol=function(t,e,i=qa){if(typeof window.IntersectionObserver==Ei&&t&&t.run){const s=new IntersectionObserver((e=>{let i,s,n;for(i=0,s=e.length;i<s;i++)n=e[i],n.isIntersecting&&!t.isRunning()?t.run():!n.isIntersecting&&t.isRunning()&&t.halt()}),i);return e&&e.domElement&&s.observe(e.domElement),function(){s.disconnect()}}return Ua},al=function(t,e,i){return t&&nc(e)&&i?(ll(t,e,i,Cr),ll(t,e,i,Xt),function(){cl(t,e,i)}):Ua},cl=function(t,e,i){t&&nc(e)&&i&&ll(t,e,i,Cr)},ll=function(t,e,i,s){const n=Kc(),r=Kc();K(t)?n.push(...t):n.push(t),i.substring?r.push(...document.body.querySelectorAll(i)):K(i)?r.push(...i):r.push(i),navigator.pointerEnabled||navigator.msPointerEnabled?ul(n,e,r,s):hl(n,e,r,s),qc(r),qc(n)},hl=function(t,e,i,s){let n,r,o,a,c,l;for(n=0,r=t.length;n<r;n++)for(c=t[n],o=0,a=i.length;o<a;o++)if(l=i[o],sc(l)||l.document||l.characterSet)switch(c){case Gs:l[s](Xs,e,!1),l[s](ra,e,{passive:!1}),l[s]("touchfollow",e,{passive:!1});break;case ba:l[s](Ys,e,!1),l[s](na,e,{passive:!1});break;case oi:l[s](Ls,e,!1),l[s](oa,e,{passive:!1});break;case ys:l[s](Ns,e,!1),l[s]("touchleave",e,{passive:!1});break;case mi:l[s](Ms,e,!1),l[s]("touchenter",e,{passive:!1})}},ul=function(t,e,i,s){let n,r,o,a,c,l;for(n=0,r=t.length;n<r;n++)for(c=t[n],o=0,a=i.length;o<a;o++)if(l=i[o],sc(l)||l.document||l.characterSet)switch(c){case Gs:l[s](Cn,e,!1);break;case ba:l[s](wn,e,!1);break;case oi:l[s](An,e,!1);break;case ys:l[s](Pn,e,!1);break;case mi:l[s](vn,e,!1)}},dl=function(t,e,i){return t&&nc(e)&&i?(pl(t,e,i,Cr),pl(t,e,i,Xt),function(){fl(t,e,i)}):Ua},fl=function(t,e,i){t&&nc(e)&&i&&pl(t,e,i,Cr)},pl=function(t,e,i,s){const n=Kc(),r=Kc();let o,a,c,l,h,u;for(K(t)?n.push(...t):n.push(t),i.substring?r.push(...document.body.querySelectorAll(i)):K(i)?r.push(...i):r.push(i),o=0,a=n.length;o<a;o++)for(h=n[o],c=0,l=r.length;c<l;c++)u=r[c],(sc(u)||u.document||u.characterSet)&&u[s](h,e,!1);qc(r),qc(n)};function ml(t=qa){t.defs={},t.getters={},t.setters={},t.deltaSetters={},t.get=function(t){let e,i;if(dc(t)){if(i=this.getters[t],i)return i.call(this);{const i=this.defs[t];if(typeof i!=pa)return e=this[t],typeof e!=pa?e:i}}return null},t.set=function(t=qa){let e,i,s,n;const r=Q(t),o=r.length;if(o){const a=this.setters,c=this.defs;for(e=0;e<o;e++)i=r[e],s=t[i],i&&i!=Vs&&null!=s&&(n=a[i],n?n.call(this,s):typeof c[i]!=pa&&(this[i]=s))}return this},t.setDelta=function(t=qa){let e,i,s,n;const r=Q(t),o=r.length;if(o){const a=this.deltaSetters,c=this.defs;for(e=0;e<o;e++)i=r[e],s=t[i],i&&i!=Vs&&null!=s&&(n=a[i],n?n.call(this,s):typeof c[i]!=pa&&(this[i]=Ga(this[i],s)))}return this};t.defs=cc(t.defs,{name:""});const e=t.getters;e.type=function(){return this.type},e.isArtefact=function(){return this.isArtefact},e.isAsset=function(){return this.isAsset},t.packetExclusions=[],t.packetExclusionsByRegex=[],t.packetCoordinates=[],t.packetObjects=[],t.packetFunctions=[],t.saveAsPacket=function(t=qa){ec(t)&&t&&(t={includeDefaults:!0});const e=this.defs,i=Q(e),s=this.packetExclusions,n=this.packetExclusionsByRegex,r=this.packetCoordinates,o=this.packetObjects,a=this.packetFunctions;let c=t.includeDefaults||!1,l={};return c&&!K(c)?c=Q(e):c||(c=[]),z(this).forEach((([t,e])=>{let h,u=!0;if(i.includes(t)||(u=!1),u&&s.includes(t)&&(u=!1),u&&(h=n.some((e=>new RegExp(e).test(t))),h&&(u=!1)),u)if(a.includes(t)){if(dc(e)&&null!=e){const i=this.stringifyFunction(e);i&&i.length&&(l[t]=i)}}else o.includes(t)&&this[t]&&this[t].name?l[t]=this[t].name:r.includes(t)?(c.includes(t)||e[0]||e[1])&&(l[t]=e):(h=this.processPacketOut(t,e,c),h&&(l[t]=e))}),this),l=this.finalizePacketOut(l,t),pt([this.name,this.type,this.lib,l])},t.stringifyFunction=function(t){const e=t.toString().match(/\(([\s\S]*?)\)[\s\S]*?\{([\s\S]*)\}/),i=e[1],s=e[2];return!!fc(i,s)&&`${i}${cn}${s}`},t.processPacketOut=function(t,e,i){let s=!0;return i.includes(t)||e!==this.defs[t]||(s=!1),s},t.finalizePacketOut=function(t){return t},t.importPacket=function(t){const e=this,i=function(t){return new Promise(((i,s)=>{let n;t.substring||s(new Error("Packet url supplied for import is not a string")),"["==t[0]?(n=e.actionPacket(t),n&&n.lib?i(n):s(n)):t.includes('"name":')?s(new Error("Bad packet supplied for import")):fetch(t).then((t=>{if(!t.ok)throw new Error(`Packet import from server failed - ${t.status}: ${t.statusText} - ${t.url}`);return t.text()})).then((t=>{if(n=e.actionPacket(t),!n||!n.lib)throw n;i(n)})).catch((t=>s(t)))}))};if(K(t)){const e=[];return t.forEach((t=>e.push(i(t)))),new Promise(((t,i)=>{Promise.all(e).then((e=>t(e))).catch((t=>i(t)))}))}if(t.substring)return i(t);Promise.reject(new Error("Argument supplied for packet import is not a string or array of strings"))},t.actionPacket=function(t){try{if(t&&t.substring){if("["==t[0]){let e,i,s,n;try{[e,i,s,n]=it(t)}catch(t){throw new Error(`Failed to process packet due to JSON parsing error - ${t.message}`)}if(fc(e,i,s,n)){if(ua.includes(i))throw new Error("Failed to process packet - Stacks, Canvases and visual assets are excluded from the packet system");let t=T[s][e];if(t)t.set(n);else{if(n.outerHTML&&n.host){const t=document.querySelector(`#${n.host}`);if(t){const i=document.createElement("div");i.innerHTML=n.outerHTML;const s=i.firstElementChild;s&&(s.id=e,t.appendChild(s),n.domElement=s)}}if(t=new I[i](n),!t)throw new Error("Failed to create Scrawl-canvas object from supplied packet")}if(t.packetFunctions.forEach((e=>this.actionPacketFunctions(t,e))),n.anchor&&t.anchor&&t.anchor.packetFunctions.forEach((e=>{t.anchor[e]=n.anchor[e],this.actionPacketFunctions(t.anchor,e),t.anchor.build()})),n.button&&t.button&&t.button.packetFunctions.forEach((e=>{t.button[e]=n.button[e],this.actionPacketFunctions(t.button,e),t.button.build()})),n.glyphStyles&&t.glyphStyles&&n.glyphStyles.forEach(((e,i)=>{oc(e)&&t.setGlyphStyles(e,i)})),t)return t;throw new Error("Failed to process supplied packet")}throw new Error("Failed to process packet - JSON string holds incomplete data")}throw new Error("Failed to process packet - JSON string does not represent an array")}throw new Error("Failed to process packet - not a JSON string")}catch(t){return console.log(t),t}},t.actionPacketFunctions=function(t,e){const i=t[e];if(dc(i)&&null!=i&&i.substring)if(i===cn)t[e]=Ua;else{let s,n,r;[s,n]=i.split(cn),s=s.split(_t),s=s.map((t=>t.trim())),n.includes("[native code]")?t[e]=Ua:(r=new Function(...s,n),t[e]=r.bind(t))}},t.clone=function(t=qa){const e=this.name;let i,s,n,r;this.name=t.name||Na,t.useNewTicker?(s=this.ticker,this.ticker=null,i=this.saveAsPacket(),this.ticker=s):(this.anchor&&(n=this.anchor,delete this.anchor),this.button&&(r=this.button,delete this.button),i=this.saveAsPacket(),n&&(this.anchor=n),r&&(this.button=r)),this.name=e;let o=this.actionPacket(i);return this.packetFunctions.forEach((t=>{this[t]&&(o[t]=this[t])})),o=this.postCloneAction(o,t),o.set(t),o},t.postCloneAction=function(t){return t},t.kill=function(){return this.deregister()},t.makeName=function(t){return t&&t.substring&&!T[`${this.lib}names`].includes(t)?this.name=t:this.name=Ja(),this},t.register=function(){if(!dc(this.name))throw new Error(`core/base error - register() name not set: ${this}`);const t=T[`${this.lib}names`],e=T[this.lib];return this.isArtefact&&(hc(a,this.name),o[this.name]=this),this.isAsset&&(hc(l,this.name),c[this.name]=this),hc(t,this.name),e[this.name]=this,this},t.deregister=function(){if(!dc(this.name))throw new Error(`core/base error - deregister() name not set: ${this}`);const t=T[`${this.lib}names`],e=T[this.lib];return this.isArtefact&&(uc(a,this.name),delete o[this.name]),this.isAsset&&(uc(l,this.name),delete c[this.name]),uc(t,this.name),delete e[this.name],this}}const Animation=function(t=qa){return this.makeName(t.name),this.order=dc(t.order)?t.order:this.defs.order,this.fn=t.fn||Ka,this.onRun=t.onRun||Ua,this.onHalt=t.onHalt||Ua,this.onKill=t.onKill||Ua,this.maxFrameRate=t.maxFrameRate||60,this.lastRun=0,this.chokedAnimation=!0,this.register(),t.delay||this.run(),this},gl=Animation.prototype=yc();gl.type="Animation",gl.lib=Vt,gl.isArtefact=!1,gl.isAsset=!1,ml(gl);gl.defs=cc(gl.defs,{order:1,maxFrameRate:60,fn:null,onRun:null,onHalt:null,onKill:null}),gl.stringifyFunction=Ua,gl.processPacketOut=Ua,gl.finalizePacketOut=Ua,gl.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},gl.clone=_a,gl.run=function(){return this.onRun(),tl(this.name),setTimeout((()=>Vc()),20),this},gl.isRunning=function(){return il(this.name)},gl.halt=function(){return this.onHalt(),el(this.name),this},gl.kill=function(){return this.onKill(),el(this.name),this.deregister(),!0};const yl=function(t){return!!t&&new Animation(t)};I.Animation=Animation;const bl=[],Sl=ht({x:0,y:0,scrollX:0,scrollY:0,w:0,h:0,type:$s,prefersReducedMotion:!1,prefersDarkColorScheme:!1,prefersReduceTransparency:!1,prefersContrast:!1,prefersReduceData:!1,displaySupportsP3Color:!1,canvasSupportsP3Color:!1,devicePixelRatio:0,rawTouches:[]}),kl=window.matchMedia("(prefers-contrast: more)");kl.addEventListener(we,(()=>{const t=kl.matches;Sl.prefersContrast!=t&&(Sl.prefersContrast=t,Oc=!0)})),Sl.prefersContrast=kl.matches;const Al=window.matchMedia("(prefers-reduced-motion: reduce)");Al.addEventListener(we,(()=>{const t=Al.matches;Sl.prefersReducedMotion!=t&&(Sl.prefersReducedMotion=t,Fc(!0))})),Sl.prefersReducedMotion=Al.matches;const vl=window.matchMedia("(prefers-color-scheme: dark)");vl.addEventListener(we,(()=>{const t=vl.matches;Sl.prefersDarkColorScheme!=t&&(Sl.prefersDarkColorScheme=t,Ic(!0))})),Sl.prefersDarkColorScheme=vl.matches;const Pl=window.matchMedia("(prefers-reduced-transparency: reduce)");Pl.addEventListener(we,(()=>{const t=Pl.matches;Sl.prefersReduceTransparency!=t&&(Sl.prefersReduceTransparency=t,$c(!0))})),Sl.prefersReduceTransparency=Pl.matches;const Cl=window.matchMedia("(prefers-reduced-data: reduce)");Cl.addEventListener(we,(()=>{const t=Cl.matches;Sl.prefersReduceData!=t&&(Sl.prefersReduceData=t,Nc(!0))})),Sl.prefersReduceData=Cl.matches;const wl=window.matchMedia("(color-gamut: p3)");wl.addEventListener(we,(()=>{const t=wl.matches;Sl.displaySupportsP3Color!=t&&(Sl.displaySupportsP3Color=t)})),Sl.displaySupportsP3Color=wl.matches;Sl.canvasSupportsP3Color=(()=>{const t=document.createElement("canvas");try{return"display-p3"==t.getContext("2d",{colorSpace:"display-p3"}).getContextAttributes().colorSpace}catch{console.log("checkCanvasSupportsDisplayP3 errored")}return!1})();const xl=()=>Sl.devicePixelRatio;let Ol=!1;const Dl=()=>Ol,Rl=t=>Ol=t;let Fl=Ua;const Hl=t=>Fl=t,El=()=>{const t=window.devicePixelRatio;Sl.devicePixelRatio=t,bt(h).forEach((t=>t.dirtyDimensions=!0)),bt(u).forEach((t=>t.dirtyDimensions=!0)),bt(f).forEach((t=>t.dirtyHost=!0)),Ol||Fl(),function(){const t=[];return(window.opr&&opr.addons||window.opera||navigator.userAgent.includes(" OPR/"))&&t.push("old-opera"),typeof InstallTrigger!=pa?t.push("firefox"):(/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"==(!window.safari||typeof safari!=pa&&safari.pushNotification).toString())&&t.push("safari"),document.documentMode&&t.push("internet-explorer"),!t.includes("internet-explorer")&&window.StyleMedia&&t.push("edge"),window.chrome&&t.push("chrome"),(t.includes("chrome")||t.includes("old-opera"))&&window.CSS&&t.push("blink"),t}().includes("safari")||matchMedia(`(resolution: ${t}dppx)`).addEventListener(we,El,{once:!0})};El();const Il=function(){const t=document.documentElement.clientWidth,e=document.documentElement.clientHeight;Sl.w==t&&Sl.h==e||(Sl.w=t,Sl.h=e,Pc(!0),xc(!0))},Tl=function(){const t=window.pageXOffset,e=window.pageYOffset;Sl.scrollX==t&&Sl.scrollY==e||(Sl.x+=t-Sl.scrollX,Sl.y+=e-Sl.scrollY,Sl.scrollX=t,Sl.scrollY=e,Pc(!0))},Bl=function(t){const e=lt(t.pageX),i=lt(t.pageY);Sl.x==e&&Sl.y==i||(Sl.type=navigator.pointerEnabled?"pointer":$s,Sl.x=e,Sl.y=i,Pc(!0))};let $l=0,Ll=16;const Ml=function(){return Ll},Nl=function(t){t&&t.toFixed&&!isNaN(t)&&(Ll=t)},Xl=function(t,e=!0){if(Sl.rawTouches.length=0,t.touches&&t.touches.length){Sl.rawTouches.push(...t.touches);const e=t.touches[0],i=lt(e.pageX),s=lt(e.pageY);Sl.x===i&&Sl.y===s||(Sl.type=ia,Sl.x=i,Sl.y=s)}else Sl.type=ia,e&&(Sl.x=0,Sl.y=0);const i=et();i>$l+Ll&&($l=i,Yl())},Yl=function(){for(let t=0,e=bl.length;t<e;t++)Gl(bl[t])},Gl=function(t){const e=o[t];if(e){e.here||(e.here={});const{here:t,domElement:i}=e;if(t.prefersContrast=Sl.prefersContrast,t.prefersReducedMotion=Sl.prefersReducedMotion,t.prefersDarkColorScheme=Sl.prefersDarkColorScheme,t.prefersReduceTransparency=Sl.prefersReduceTransparency,t.prefersReduceData=Sl.prefersReduceData,t.devicePixelRatio=Sl.devicePixelRatio,Oc&&e.contrastActions(),Rc()&&e.reducedMotionActions(),Ec()&&e.colorSchemeActions(),Bc()&&e.reducedTransparencyActions(),Mc()&&e.reducedDataActions(),i){const s=i.getBoundingClientRect(),n=lt(s.left+window.pageXOffset),r=lt(s.top+window.pageYOffset),o=s.top,a=s.height,c=window.innerHeight;t.w=lt(s.width),t.h=lt(a),t.type=Sl.type;const l=o/c,h=(o+a)/c,u=(l+h)/2;t.inViewportTop=l,t.inViewportBase=h,t.inViewportCenter=u,e.localMouseListener?(t.localListener=!0,t.active=!1,t.normX=!!t.originalWidth&&t.x/t.originalWidth,t.normY=!!t.originalHeight&&t.y/t.originalHeight,t.offsetX=n,t.offsetY=r,t.x>e.activePadding&&t.x<t.originalWidth-e.activePadding&&t.y>0+e.activePadding&&t.y<t.originalHeight-e.activePadding&&(t.active=!0)):(t.localListener=!1,t.active=!0,t.x=lt(Sl.x-n),t.y=lt(Sl.y-r),t.normX=!!t.w&&t.x/t.w,t.normY=!!t.h&&t.y/t.h,t.offsetX=n,t.offsetY=r,(t.normX<0||t.normX>1||t.normY<0||t.normY>1)&&(t.active=!1));const d=Sl.rawTouches;if(d.length){t.touches||(t.touches=[]),t.touches.length=0;for(let e=0,i=d.length;e<i;e++){const i=d[e];t.touches.push([lt(i.pageX-n),lt(i.pageY-r)])}}if(e.type==yo&&e.updateBaseHere(t,e.fit),e.checkForResize&&!e.dirtyDimensions&&!e.dirtyDomDimensions){const[i,s]=e.currentDimensions;if(e.type==yo){e.computedStyles||(e.computedStyles=Y(e.domElement));const n=e.computedStyles,r=V(t.w-parseFloat(n.borderLeftWidth)-parseFloat(n.borderRightWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)),o=V(t.h-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom));i===r&&s===o||e.set({dimensions:[r,o]})}else i===t.w&&s===t.h||e.set({dimensions:[t.w,t.h]})}}}},jl=yl({name:"coreListenersTracker",order:0,delay:!0,fn:function(){const t=Sc(),e=vc(),i=wc(),s=Rc(),n=Ec(),r=Bc(),o=Mc();if(!bl.length)return!1;(t&&e||s||n||r||o)&&Yl(),t&&e&&Pc(!1),s&&Fc(!1),n&&Ic(!1),r&&$c(!1),o&&Nc(!1),i&&(xc(!1),bt(f).forEach((t=>{t.type==Ho&&(t.dirtyDimensions=!0,t.dirtyFont=!0)})))}}),zl=function(){Vl(Cr),Vl(Xt),kc(!0),Pc(!0),jl.run()},Wl=function(){kc(!1),Pc(!1),jl.halt(),Vl(Cr)},Vl=function(t){navigator.pointerEnabled||navigator.msPointerEnabled?(window[t](Cn,Bl,!1),window[t](wn,Bl,!1),window[t](An,Bl,!1),window[t](Pn,Bl,!1),window[t](vn,Bl,!1)):(window[t](Xs,Bl,!1),window[t](Ys,Bl,!1),window[t](Ls,Bl,!1),window[t](Ns,Bl,!1),window[t](Ms,Bl,!1),window[t](ra,Xl,{passive:!0}),window[t](oa,Xl,{passive:!0}),window[t](na,Xl,{passive:!0}),window[t](sa,Xl,{passive:!0})),window[t]("scroll",Tl,{passive:!0}),window[t]("resize",Il,!1)},Ul=function(){Il(),Pc(!0),xc(!0)},Zl=[];let _l=!1;const Kl=function(t=Na){if(_l||t){const e=Kc();let i,s,n,r,a,c,l,h,u,d,f,p,m,g,y,b;t&&t.substring?e.push(t):(_l=!1,e.push(...Zl),Zl.length=0);const S=Dl(),k=xl();for(i=0,s=e.length;i<s;i++)if(n=o[e[i]],n&&(r=n.domElement,r&&(a=r.style,a))){if(n.dirtyPerspective&&(n.dirtyPerspective=!1,c=n.perspective,a.perspectiveOrigin=`${c.x} ${c.y}`,a.perspective=`${c.z}px`),n.dirtyPosition&&(n.dirtyPosition=!1,a.position=n.position),n.dirtyDomDimensions&&(n.dirtyDomDimensions=!1,l=n.currentDimensions,h=l[0],u=l[1],n.type==yo?(S?(r.width=h,r.height=u):(n.ignoreCanvasCssDimensions||(a.width=`${h}px`,a.height=`${u}px`),r.width=h*k,r.height=u*k),n.renderOnResize&&n.render()):(a.width=`${h}px`,a.height=u?`${u}px`:ee)),n.dirtyTransformOrigin&&(n.dirtyTransformOrigin=!1,a.transformOrigin=n.currentTransformOriginString),n.dirtyTransform&&(n.dirtyTransform=!1,a.transform=n.currentTransformString),n.dirtyVisibility&&(n.dirtyVisibility=!1,a.display=n.visibility?ue:tn),n.dirtySmoothFont&&(n.dirtySmoothFont=!1,n.smoothFont?(a[wa]=ee,a[js]=ee,a[zr]=ee):(a[wa]=tn,a[js]=Ni,a[zr]=Us)),n.dirtyCss)for(n.dirtyCss=!1,p=n.css||qa,m=Q(p),d=0,f=m.length;d<f;d++)g=m[d],b=p[g],Ya.includes(g)?(y=`${g[0].toUpperCase}${g.substr(1)}`,a[`webkit${y}`]=b,a[`moz${y}`]=b,a[`ms${y}`]=b,a[`o${y}`]=b,a[g]=b):Xa.includes(g)&&(a[g]=b);n.dirtyClasses&&(n.dirtyClasses=!1,r.className.substring&&(r.className=n.classes))}qc(e)}},ql=document.createElement("div");ql.style.padding=0,ql.style.border=0,ql.style.margin=0,ql.style.width="4500px",ql.style.boxSizing="border-box",ql.style.position="absolute",ql.style.top="-5000px",ql.style.left="-5000px",ql.id="Scrawl-ARIA-default-hold",document.body.appendChild(ql);const Ql=[],Jl=[],th=t=>{hc(Ql,t),Wc(!0)},eh=t=>{uc(Ql,t),Wc(!0)},ih=()=>(zc&&sh(),Jl),sh=function(){Wc(!1);const t=Kc();let e,i,s,n;for(s=0,n=Ql.length;s<n;s++)e=o[Ql[s]],e&&(i=V(e.order)||0,t[i]||(t[i]=Kc()),t[i].push(e.name));for(Jl.length=0,s=0,n=t.length;s<n;s++)e=t[s],e&&(Jl.push(...e),qc(e));qc(t)},nh=216/24389,rh=24389/27,oh=null!=N?N:t=>ot(t,1/3),ah=U([.3457/.3585,1,.2958/.3585]),ch=U([U([1.0479298208405488,.022946793341019088,-.05019222954313557]),U([.029627815688159344,.990434484573249,-.01707382502938514]),U([-.009243058152591178,.015055144896577895,.7518742899580008])]),lh=U([U([.9554734527042182,-.023098536874261423,.0632593086610217]),U([-.028369706963208136,1.0099954580058226,.021041398966943008]),U([.012314001688319899,-.020507696433477912,1.3303659366080753])]),hh=U([U([506752/1228815,87881/245763,12673/70218]),U([87098/409605,175762/245763,12673/175545]),U([7918/409605,87881/737289,1001167/1053270])]),uh=U([U([12831/3959,-329/214,-1974/3959]),U([-851781/878810,1648619/878810,36519/878810]),U([705/12673,-2585/12673,705/667])]),dh=U([U([.8190224432164319,.3619062562801221,-.12887378261216414]),U([.0329836671980271,.9292868468965546,.03614466816999844]),U([.048177199566046255,.26423952494422764,.6335478258136937])]),fh=U([U([.2104542553,.793617785,-.0040720468]),U([1.9779984951,-2.428592205,.4505937099]),U([.0259040371,.7827717662,-.808675766])]),ph=U([U([1.2268798733741557,-.5578149965554813,.28139105017721583]),U([-.04057576262431372,1.1122868293970594,-.07171106666151701]),U([-.07637294974672142,-.4214933239627914,1.5869240244272418])]),mh=U([U([.9999999984505198,.39633779217376786,.2158037580607588]),U([1.0000000088817609,-.10556134232365635,-.06385417477170591]),U([1.0000000546724108,-.08948418209496575,-1.2914855378640917])]),gh=document.createElement(ve);gh.width=1,gh.height=1;const yh=gh.getContext(Pt,{willReadFrequently:!0});yh.globalAlpha=1,yh.globalCompositeOperation=_r;const Color=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.rgb=[],this.rgb_max=[],this.rgb_min=[],this.hsl=[],this.hsl_max=[],this.hsl_min=[],this.hwb=[],this.hwb_max=[],this.hwb_min=[],this.xyz=[],this.xyz_max=[],this.xyz_min=[],this.lab=[],this.lab_max=[],this.lab_min=[],this.lch=[],this.lch_max=[],this.lch_min=[],this.oklab=[],this.oklab_max=[],this.oklab_min=[],this.oklch=[],this.oklch_max=[],this.oklch_min=[],this.easingFunction=Za,this.convert(le),this.convert(ae,Ft),this.convert(xa,Rt),this.set(t),this},bh=Color.prototype=yc();bh.type=ko,bh.lib=uo,bh.isArtefact=!1,bh.isAsset=!1,ml(bh);const Sh={rgb:null,rgb_max:null,rgb_min:null,hsl:null,hsl_max:null,hsl_min:null,hwb:null,hwb_max:null,hwb_min:null,xyz:null,xyz_max:null,xyz_min:null,lab:null,lab_max:null,lab_min:null,lch:null,lch_max:null,lch_min:null,oklab:null,oklab_max:null,oklab_min:null,oklch:null,oklch_max:null,oklch_min:null,easing:As,easingFunction:null,colorSpace:Fr,returnColorAs:Fr};bh.defs=cc(bh.defs,Sh),bh.packetFunctions=hc(bh.packetFunctions,["easingFunction"]),bh.kill=function(){const t=this.name;return bt(f).forEach((e=>{const i=e.state;if(i){const e=i.fillStyle,s=i.strokeStyle,n=i.shadowColor;oc(e)&&e.name==t&&(i.fillStyle=i.defs.fillStyle),oc(s)&&s.name==t&&(i.strokeStyle=i.defs.strokeStyle),oc(n)&&n.name==t&&(i.shadowColor=i.defs.shadowColor)}})),this.deregister(),this},bh.get=function(t){if(dc(t)){if(t.toFixed)return this.getRangeColor(t);if("min"==t)return this.getMinimumColor();if("max"==t)return this.getMaximumColor();if(t==ur)return this.generateRandomColor(),this.getCurrentColor();{const e=this.getters[t];if(e)return e.call(this);{const e=this.defs[t];if(typeof e!=pa){const i=this[t];return typeof i!=pa?i:e}return}}}return this.getCurrentColor()},bh.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs;let r,o,a,c;for(o=0;o<i;o++)a=e[o],c=t[a],a&&a!=Vs&&null!=c&&(r=s[a],r?r.call(this,c):typeof n[a]!=pa&&(this[a]=c));t.random&&this.generateRandomColor()}return this};const kh=bh.setters;kh.color=function(t){this.convert(t)},bh.setColor=function(t){return this.convert(t),this},kh.minimumColor=function(t){this.convert(t,Ft)},bh.setMinimumColor=function(t){return this.convert(t,Ft),this},kh.maximumColor=function(t){this.convert(t,Rt)},bh.setMaximumColor=function(t){return this.convert(t,Rt),this},kh.easing=function(t){this.setEasingHelper(t)},kh.easingFunction=kh.easing,bh.setEasing=function(t){return this.setEasingHelper(t),this},bh.setEasingFunction=bh.setEasing,bh.setEasingHelper=function(t){nc(t)?(this.easing=Ei,this.easingFunction=t):t.substring&&gc[t]?(this.easing=t,this.easingFunction=Za):(this.easing=As,this.easingFunction=Za)},kh.colorSpace=function(t){this.setColorSpaceHelper(t)},bh.setColorSpace=function(t){return this.setColorSpaceHelper(t),this},bh.setColorSpaceHelper=function(t){if(t.substring&&(t=t.toUpperCase(),ss.includes(t))){const e=this.getCurrentColor(),i=this.getMinimumColor(),s=this.getMaximumColor();this.colorSpace=t.toUpperCase(),this.updateColorConversions(e,i,s)}},kh.returnColorAs=function(t){this.setReturnColorAsHelper(t)},bh.setReturnColorAs=function(t){return this.setReturnColorAsHelper(t),this},bh.setReturnColorAsHelper=function(t){if(t.substring&&(t=t.toUpperCase(),wr.includes(t))){const e=this.getCurrentColor(),i=this.getMinimumColor(),s=this.getMaximumColor();this.returnColorAs=t.toUpperCase(),this.updateColorConversions(e,i,s)}},bh.updateColorConversions=function(t,e,i){this.convert(t),this.convert(e,Ft),this.convert(i,Rt)},bh.getData=function(){return this.getCurrentColor()},bh.getCurrentColor=function(){const{rgb:t,hsl:e,hwb:i,lab:s,lch:n,oklab:r,oklch:o}=this;return this.returnColor(t,e,i,s,n,r,o)},bh.getMinimumColor=function(){const{rgb_min:t,hsl_min:e,hwb_min:i,lab_min:s,lch_min:n,oklab_min:r,oklch_min:o}=this;return this.returnColor(t,e,i,s,n,r,o)},bh.getMaximumColor=function(){const{rgb_max:t,hsl_max:e,hwb_max:i,lab_max:s,lch_max:n,oklab_max:r,oklch_max:o}=this;return this.returnColor(t,e,i,s,n,r,o)},bh.returnColor=function(t,e,i,s,n,r,o){null==t&&({rgb:t,hsl:e,hwb:i,lab:s,lch:n,oklab:r,oklch:o}=this);const{buildColorString:a,returnColorAs:c}=this;switch(c){case Fr:return a(...t,Fr);case Ki:return a(...e,Ki);case Ji:return Ah?a(...i,Ji):a(...t,Fr);case us:return vh?a(...s,us):a(...t,Fr);case gs:return Ph?a(...n,gs):a(...t,Fr);case on:return Ch?a(...r,on):a(...t,Fr);case an:return wh?a(...o,an):a(...t,Fr);default:return le}},bh.returnColorFromValues=function(t,e,i,s){const{colorSpace:n,returnColorAs:r}=this,o=this.buildColorString(t,e,i,s,n);let a=!1;return $a==n||n!=r?a=!0:(Ji!=r||Ah)&&(us!=r||vh)&&(gs!=r||Ph)&&(on!=r||Ch)&&(an!=r||wh)||(a=!0),a?(this.setColor(o),this.returnColor()):o},bh.buildColorString=function(t,e,i,s,n){switch(n||(n=this.returnColorAs),n){case Fr:return`rgb(${lt(t)} ${lt(e)} ${lt(i)} / ${s})`;case Ki:return`hsl(${t} ${e}% ${i}% / ${s})`;case Ji:return`hwb(${t} ${e}% ${i}% / ${s})`;case us:return`lab(${t}% ${e} ${i} / ${s})`;case gs:return`lch(${t}% ${e} ${i} / ${s})`;case on:return`oklab(${100*t}% ${e} ${i} / ${s})`;case an:return`oklch(${100*t}% ${e} ${i} / ${s})`;case $a:return`xyz(${t} ${e} ${i} / ${s})`;default:return le}},bh.generateRandomColor=function(){let t=V(256*ct()),e=V(256*ct()),i=V(256*ct());t>255&&(t=255),e>255&&(e=255),i>255&&(i=255),this.setColor(`rgb(${t} ${e} ${i})`)},bh.checkColor=function(t){if(t.substring){let e=Fr;return t.includes(wt)?e=Ki:t.includes(xt)?e=Ji:t.includes(Ht)?e=on:t.includes(Et)?e=an:t.includes(Ot)?e=us:t.includes(Dt)?e=gs:t.includes(Bt)&&(e=$a),Fr==e||Ki==e?t:(this.colorSpace=e,this.returnColorAs=e,this.convert(t),this.returnColor())}return le},bh.getRangeColor=function(t,e=!1){if(dc(t)&&t.toFixed){let i=this.colorSpace;e&&(qi.includes(i)?i=Fr:gs==i?i=us:an==i&&(i=on));const s=this.calculateRangeColorValues(t,e),n=this.buildColorString(...s,i);this.setColor(n)}return this.getCurrentColor()},bh.calculateRangeColorValues=function(t,e=!1){const{colorSpace:i,easing:s,easingFunction:n}=this;let r,o,a,c,l,h=i.toLowerCase();e&&(qi.includes(i)?h=It:gs==i?h=Ot:an==i&&(h=Ht));const[u,d,f,p]=this[`${h}_min`],[m,g,y,b]=this[`${h}_max`];let S=n;!e&&s!=Ei&&gc[s]&&(S=gc[s]);const k=e?t:S(t);switch(h){case wt:case xt:return l=m-u,o=u===m?u:tc(k,l>180||l<-180?l>0?u+360:u-360:u,m),r=p===b?p:tc(k,p,b),a=d===g?d:tc(k,d,g),c=f===y?f:tc(k,f,y),[o,a,c,r];case Dt:case Et:return l=y-f,c=f===y?f:tc(k,l>180||l<-180?l>0?f+360:f-360:f,y),r=p===b?p:tc(k,p,b),a=d===g?d:tc(k,d,g),o=u===m?u:tc(k,u,m),[o,a,c,r];default:return r=p===b?p:tc(k,p,b),o=u===m?u:tc(k,u,m),a=d===g?d:tc(k,d,g),c=f===y?f:tc(k,f,y),[o,a,c,r]}},bh.getAlphaValue=function(t){let e=1;return null!=t&&(e=t.includes(dn)?parseFloat(t)/100:parseFloat(t)),isNaN(e)||e>1?e=1:e<0&&(e=0),e},bh.getHueValue=function(t){return t==tn?0:(t=t.includes("deg")?parseFloat(t):t.includes("rad")?parseFloat(t)/at:t.includes("grad")?parseFloat(t)/400*360:t.includes("turn")?360*parseFloat(t):parseFloat(t),isNaN(t)?0:Wa(t))},bh.getColorValuesFromString=function(t,e){const i=(t=(t=(t=(t=t.replace(e,Na)).replace("(",Na)).replace(")",Na)).replace("/",Na)).split(Kr).filter((t=>null!=t&&t!==Na));return null!=i[0]&&i[0]!=tn||(i[0]=vt),null!=i[1]&&i[1]!=tn||(i[1]=vt),null!=i[2]&&i[2]!=tn||(i[2]=vt),i},bh.extractFromHwbColorString=function(t){const{getAlphaValue:e,getHueValue:i,getColorValuesFromString:s}=this;let n,r,o;const a=s(t,xt),c=i(a[0]),l=parseFloat(a[1]),h=parseFloat(a[2]),u=e(a[3]);return[n,r,o]=this.convertHWBtoRGB(c,l,h),n=V(255*n),n>255&&(n=255),n<0&&(n=0),r=V(255*r),r>255&&(r=255),r<0&&(r=0),o=V(255*o),o>255&&(o=255),o<0&&(o=0),[u,n,r,o]},bh.extractFromXyzColorString=function(t){const{getAlphaValue:e,getColorValuesFromString:i}=this,s=i(t,Bt),n=parseFloat(s[0]),r=parseFloat(s[1]),o=parseFloat(s[2]);return[e(s[3]),n,r,o]},bh.extractFromLabColorString=function(t){const{getAlphaValue:e,getColorValuesFromString:i}=this;let s,n,r;const o=i(t,Ot);s=parseFloat(o[0]),s>100&&(s=100),s<0&&(s=0),n=o[1].includes(dn)?1.25*parseFloat(o[1]):parseFloat(o[1]),n>160&&(n=160),n<-160&&(n=-160),r=o[2].includes(dn)?1.25*parseFloat(o[2]):parseFloat(o[2]),r>160&&(r=160),r<-160&&(r=-160);return[e(o[3]),s,n,r]},bh.extractFromOklabColorString=function(t){const{getAlphaValue:e,getColorValuesFromString:i}=this;let s,n,r;const o=i(t,Ht);s=o[0].includes(dn)?parseFloat(o[0])/100:parseFloat(o[0]),s>1&&(s=1),s<0&&(s=0),n=o[1].includes(dn)?parseFloat(o[1])/100*.4:parseFloat(o[1]),n>.5&&(n=.5),n<-.5&&(n=-.5),r=o[2].includes(dn)?parseFloat(o[2])/100*.4:parseFloat(o[2]),r>.5&&(r=.5),r<-.5&&(r=-.5);return[e(o[3]),s,n,r]},bh.extractFromLchColorString=function(t){const{getAlphaValue:e,getHueValue:i,getColorValuesFromString:s}=this;let n,r;const o=s(t,Dt);n=parseFloat(o[0]),n>100&&(n=100),n<0&&(n=0),r=o[1].includes(dn)?1.5*parseFloat(o[1]):parseFloat(o[1]),r>230&&(r=230),r<0&&(r=0);const a=i(o[2]);return[e(o[3]),n,r,a]},bh.extractFromOklchColorString=function(t){const{getAlphaValue:e,getHueValue:i,getColorValuesFromString:s}=this;let n,r;const o=s(t,Et);n=n=o[0].includes(dn)?parseFloat(o[0])/100:parseFloat(o[0]),n>1&&(n=1),n<0&&(n=0),r=o[1].includes(dn)?parseFloat(o[1])/100*.4:parseFloat(o[1]),r>.4&&(r=.4),r<0&&(r=0);const a=i(o[2]);return[e(o[3]),n,r,a]},bh.convert=function(t,e=Na){t=t.toLowerCase();const i=this[`rgb${e}`],s=this[`hsl${e}`],n=this[`hwb${e}`],r=this[`xyz${e}`],o=this[`lab${e}`],a=this[`lch${e}`],c=this[`oklab${e}`],l=this[`oklch${e}`];if(!i)return this;let h,u,d,f;return i.length=0,s.length=0,n.length=0,r.length=0,o.length=0,a.length=0,c.length=0,l.length=0,t.includes(xt)&&!Ah?([h,u,d,f]=this.extractFromHwbColorString(t),i.push(u,d,f,h),s.push(...this.convertRGBtoHSL(u,d,f),h),n.push(...this.convertRGBHtoHWB(i[0],i[1],i[2],s[0]),h),r.push(...this.convertRGBtoXYZ(u,d,f),h),o.push(...this.convertXYZtoLAB(r[0],r[1],r[2]),h),a.push(...this.convertLABtoLCH(o[0],o[1],o[2]),h),c.push(...this.convertXYZtoOKLAB(r[0],r[1],r[2]),h),l.push(...this.convertOKLABtoOKLCH(c[0],c[1],c[2]),h)):t.includes(Bt)?([h,u,d,f]=this.extractFromXyzColorString(t),i.push(...this.convertXYZtoRGB(u,d,f),h),s.push(...this.convertRGBtoHSL(i[0],i[1],i[2]),h),n.push(...this.convertRGBHtoHWB(i[0],i[1],i[2],s[0]),h),r.push(u,d,f,h),o.push(...this.convertXYZtoLAB(u,d,f),h),a.push(...this.convertLABtoLCH(o[0],o[1],o[2]),h),c.push(...this.convertXYZtoOKLAB(r[0],r[1],r[2]),h),l.push(...this.convertOKLABtoOKLCH(c[0],c[1],c[2]),h)):t.includes(Ht)&&!Ch?([h,u,d,f]=this.extractFromOklabColorString(t),c.push(u,d,f,h),l.push(...this.convertOKLABtoOKLCH(u,d,f),h),r.push(...this.convertOKLABtoXYZ(u,d,f),h),o.push(...this.convertXYZtoLAB(r[0],r[1],r[2]),h),a.push(...this.convertLABtoLCH(o[0],o[1],o[2]),h),i.push(...this.convertXYZtoRGB(r[0],r[1],r[2]),h),s.push(...this.convertRGBtoHSL(i[0],i[1],i[2]),h),n.push(...this.convertRGBHtoHWB(i[0],i[1],i[2],s[0]),h)):t.includes(Et)&&!wh?([h,u,d,f]=this.extractFromOklchColorString(t),l.push(u,d,f,h),c.push(...this.convertOKLCHtoOKLAB(u,d,f),h),r.push(...this.convertOKLABtoXYZ(c[0],c[1],c[2]),h),o.push(...this.convertXYZtoLAB(r[0],r[1],r[2]),h),a.push(...this.convertLABtoLCH(o[0],o[1],o[2]),h),i.push(...this.convertXYZtoRGB(r[0],r[1],r[2]),h),s.push(...this.convertRGBtoHSL(i[0],i[1],i[2]),h),n.push(...this.convertRGBHtoHWB(i[0],i[1],i[2],s[0]),h)):t.includes(Ot)&&!vh?([h,u,d,f]=this.extractFromLabColorString(t),o.push(u,d,f,h),r.push(...this.convertLABtoXYZ(u,d,f),h),i.push(...this.convertXYZtoRGB(r[0],r[1],r[2]),h),s.push(...this.convertRGBtoHSL(i[0],i[1],i[2]),h),n.push(...this.convertRGBHtoHWB(i[0],i[1],i[2],s[0]),h),a.push(...this.convertLABtoLCH(u,d,f),h),c.push(...this.convertXYZtoOKLAB(r[0],r[1],r[2]),h),l.push(...this.convertOKLABtoOKLCH(c[0],c[1],c[2]),h)):t.includes(Dt)&&!Ph?([h,u,d,f]=this.extractFromLchColorString(t),a.push(u,d,f,h),o.push(...this.convertLCHtoLAB(u,d,f),h),r.push(...this.convertLABtoXYZ(o[0],o[1],o[2]),h),i.push(...this.convertXYZtoRGB(r[0],r[1],r[2]),h),s.push(...this.convertRGBtoHSL(i[0],i[1],i[2]),h),n.push(...this.convertRGBHtoHWB(i[0],i[1],i[2],s[0]),h),c.push(...this.convertXYZtoOKLAB(r[0],r[1],r[2]),h),l.push(...this.convertOKLABtoOKLCH(c[0],c[1],c[2]),h)):([u,d,f,h]=this.getColorFromCanvas(t),i.push(u,d,f,h),s.push(...this.convertRGBtoHSL(u,d,f),h),n.push(...this.convertRGBHtoHWB(u,d,f,s[0]),h),r.push(...this.convertRGBtoXYZ(u,d,f),h),o.push(...this.convertXYZtoLAB(r[0],r[1],r[2]),h),a.push(...this.convertLABtoLCH(o[0],o[1],o[2]),h),c.push(...this.convertXYZtoOKLAB(r[0],r[1],r[2]),h),l.push(...this.convertOKLABtoOKLCH(c[0],c[1],c[2]),h)),this},bh.extractRGBfromColor=function(t){let e,i,s,n;return(t=t.toLowerCase()).includes(xt)&&!Ah?([e,i,s,n]=this.extractFromHwbColorString(t),[i,s,n,e]):t.includes(Bt)?([e,i,s,n]=this.extractFromXyzColorString(t),[...this.convertXYZtoRGB(i,s,n),e]):t.includes(Ht)&&!Ch?([e,i,s,n]=this.extractFromOklabColorString(t),[...this.convertXYZtoRGB(...this.convertOKLABtoXYZ(i,s,n)),e]):t.includes(Et)&&!wh?([e,i,s,n]=this.extractFromOklchColorString(t),[...this.convertXYZtoRGB(...this.convertOKLABtoXYZ(...this.convertOKLCHtoOKLAB(i,s,n))),e]):t.includes(Ot)&&!vh?([e,i,s,n]=this.extractFromLabColorString(t),[...this.convertXYZtoRGB(...this.convertLABtoXYZ(i,s,n)),e]):t.includes(Dt)&&!Ph?([e,i,s,n]=this.extractFromLchColorString(t),[...this.convertXYZtoRGB(...this.convertLABtoXYZ(...this.convertLCHtoLAB(i,s,n))),e]):this.getColorFromCanvas(t)},bh.convertRGBtoHex=function(t,e,i){if(t.substring&&(t=parseInt(t,10)),e.substring&&(e=parseInt(e,10)),i.substring&&(i=parseInt(i,10)),!isNaN(t)&&!isNaN(e)&&!isNaN(i)){return`#${(vt+t.toString(16)).slice(-2)}${(vt+e.toString(16)).slice(-2)}${(vt+i.toString(16)).slice(-2)}`}return"#000000"},bh.getColorFromCanvas=function(t){let e=0,i=0,s=0,n=0;yh.clearRect(0,0,1,1),yh.fillStyle=t,yh.fillRect(0,0,1,1);const r=yh.getImageData(0,0,1,1);return r&&r.data&&([e,i,s,n]=r.data,n/=255),[e,i,s,n]},bh.convertRGBtoHSL=function(t,e,i){const s=J(t/=255,e/=255,i/=255),n=tt(t,e,i),r=(n+s)/2,o=s-n;let a=0,c=0;if(0!==o){switch(c=0===r||1===r?0:(s-r)/tt(r,1-r),s){case t:a=(e-i)/o+(e<i?6:0);break;case e:a=(i-t)/o+2;break;case i:a=(t-e)/o+4}a*=60}return[a,100*c,100*r]},bh.convertHSLtoRGB=function(t,e,i){t=Wa(t),e/=100,i/=100;const s=function(s){const n=(s+t/30)%12,r=e*tt(i,1-i);return i-r*J(-1,tt(n-3,9-n,1))};return[s(0),s(8),s(4)]},bh.convertRGBtoHWB=function(t,e,i){const s=this.convertRGBtoHSL(t,e,i),n=tt(t/=256,e/=256,i/=256),r=1-J(t,e,i);return[s[0],100*n,100*r]},bh.convertRGBHtoHWB=function(t,e,i,s){return[s,100*tt(t/=256,e/=256,i/=256),100*(1-J(t,e,i))]},bh.convertHWBtoRGB=function(t,e,i){if((e/=100)+(i/=100)>=1){const t=e/(e+i);return[t,t,t]}const s=this.convertHSLtoRGB(t,100,50);for(let t=0;t<3;t++)s[t]*=1-e-i,s[t]+=e;return s},bh.multiplyMatrices=function(t,e){const i=t.length;K(t[0])||(t=[t]),K(e[0])||(e=e.map((t=>[t])));const s=e[0].length,n=e[0].map(((t,i)=>e.map((t=>t[i]))));let r=t.map((t=>n.map((e=>K(t)?t.reduce(((t,i,s)=>t+i*(e[s]||0)),0):e.reduce(((e,i)=>e+i*t),0)))));return 1===i&&(r=r[0]),1===s?r.map((t=>t[0])):r},bh.lin_sRGB=function(t){return t.map((t=>{const e=t<0?-1:1,i=B(t);return i<.04045?t/12.92:e*ot((i+.055)/1.055,2.4)}))},bh.convertRGBtoXYZ=function(t,e,i){const s=Kc();s.push(t/255,e/255,i/255);const n=Kc();n.push(...this.lin_sRGB(s));const r=Kc();r.push(...hh);const o=this.multiplyMatrices(r,n);return qc(s),qc(n),qc(r),o},bh.convertRGBtoOKLAB=function(t,e,i){const s=Kc();s.push(t/255,e/255,i/255);const[n,r,o]=this.lin_sRGB(s),a=.2119034982*n+.6806995451*r+.1073969566*o,c=.0883024619*n+.2817188376*r+.6299787005*o,l=oh(.4122214708*n+.5363325363*r+.0514459929*o),h=oh(a),u=oh(c);return qc(s),[.2104542553*l+.793617785*h-.0040720468*u,1.9779984951*l-2.428592205*h+.4505937099*u,.0259040371*l+.7827717662*h-.808675766*u]},bh.gam_sRGB=function(t){return t.map((t=>{const e=t<0?-1:1,i=B(t);return i>.0031308?e*(1.055*ot(i,1/2.4)-.055):12.92*t}))},bh.convertXYZtoRGB=function(t,e,i){const s=Kc();s.push(...uh);const n=Kc();n.push(t,e,i);const r=this.multiplyMatrices(s,n),o=this.gam_sRGB(r);return qc(s),qc(n),[lt(255*o[0]),lt(255*o[1]),lt(255*o[2])]},bh.convertXYZtoLAB=function(t,e,i){const s=Kc();s.push(...ch);const n=Kc();n.push(t,e,i);const r=this.multiplyMatrices(s,n).map(((t,e)=>t/ah[e])).map((t=>t>nh?oh(t):(rh*t+16)/116));return qc(s),qc(n),[116*r[1]-16,500*(r[0]-r[1]),200*(r[1]-r[2])]},bh.convertLABtoXYZ=function(t,e,i){const s=(t+16)/116,n=e/500+s,r=s-i/200,o=Kc();o.push(ot(n,3)>nh?ot(n,3):(116*n-16)/rh,t>8?ot((t+16)/116,3):t/rh,ot(r,3)>nh?ot(r,3):(116*r-16)/rh);const a=Kc();a.push(...lh);const c=Kc();c.push(...o.map(((t,e)=>t*ah[e])));const l=this.multiplyMatrices(a,c);return qc(o),qc(a),qc(c),l},bh.convertLABtoLCH=function(t,e,i){const s=M(i,e)*_;return[t,ft(ot(e,2)+ot(i,2)),s>=0?s:s+360]},bh.convertLCHtoLAB=function(t,e,i){return[t,e*G(i*at),e*dt(i*at)]},bh.convertXYZtoOKLAB=function(t,e,i){const s=Kc();s.push(...dh);const n=Kc();n.push(t,e,i);const r=Kc();r.push(...fh);const o=this.multiplyMatrices(s,n),a=this.multiplyMatrices(r,o.map((t=>oh(t))));return qc(s),qc(n),qc(r),a},bh.convertOKLABtoXYZ=function(t,e,i){const s=Kc();s.push(...mh);const n=Kc();n.push(t,e,i);const r=Kc();r.push(...ph);const o=this.multiplyMatrices(s,n),a=this.multiplyMatrices(r,o.map((t=>t**3)));return qc(s),qc(n),qc(r),a},bh.convertOKLABtoOKLCH=function(t,e,i){const s=M(i,e)*_;return[t,ft(e**2+i**2),s>=0?s:s+360]},bh.convertOKLCHtoOKLAB=function(t,e,i){return[t,e*G(i*at),e*dt(i*at)]},bh.calculateColorBlend=function(t,e,i,s,n,r){const o=this.convertRGBtoHSL(t,e,i),a=this.convertRGBtoHSL(s,n,r),c=this.convertHSLtoRGB(o[0],o[1],a[2]);return[lt(255*c[0]),lt(255*c[1]),lt(255*c[2])]},bh.calculateHueBlend=function(t,e,i,s,n,r){const o=this.convertRGBtoHSL(t,e,i),a=this.convertRGBtoHSL(s,n,r),c=this.convertHSLtoRGB(o[0],a[1],a[2]);return[lt(255*c[0]),lt(255*c[1]),lt(255*c[2])]},bh.calculateSaturationBlend=function(t,e,i,s,n,r){const o=this.convertRGBtoHSL(t,e,i),a=this.convertRGBtoHSL(s,n,r),c=this.convertHSLtoRGB(a[0],o[1],a[2]);return[lt(255*c[0]),lt(255*c[1]),lt(255*c[2])]},bh.calculateLuminosityBlend=function(t,e,i,s,n,r){const o=this.convertRGBtoHSL(t,e,i),a=this.convertRGBtoHSL(s,n,r),c=this.convertHSLtoRGB(a[0],a[1],o[2]);return[lt(255*c[0]),lt(255*c[1]),lt(255*c[2])]};let Ah=!1,vh=!1,Ph=!1,Ch=!1,wh=!1,xh=!1;!function(){let t,e=0,i=0,s=0,n="#ffffff00";yh.fillStyle="hwb(90 10% 10%)",yh.fillRect(0,0,1,1),t=yh.getImageData(0,0,1,1),t&&t.data&&([e,i,s]=t.data),(e||i||s)&&(Ah=!0),Ah&&n===yh.fillStyle?Ah=!1:n=yh.fillStyle,yh.fillStyle="lab(29.2345% 39.3825 20.0664)",yh.clearRect(0,0,1,1),yh.fillRect(0,0,1,1),t=yh.getImageData(0,0,1,1),t&&t.data&&([e,i,s]=t.data),(e||i||s)&&(vh=!0),vh&&n===yh.fillStyle?vh=!1:n=yh.fillStyle,yh.fillStyle="lch(52.2345% 72.2 56.2)",yh.clearRect(0,0,1,1),yh.fillRect(0,0,1,1),t=yh.getImageData(0,0,1,1),t&&t.data&&([e,i,s]=t.data),(e||i||s)&&(Ph=!0),Ph&&n===yh.fillStyle?Ph=!1:n=yh.fillStyle,yh.fillStyle="oklab(59.686% 0.1009 0.1192)",yh.clearRect(0,0,1,1),yh.fillRect(0,0,1,1),t=yh.getImageData(0,0,1,1),t&&t.data&&([e,i,s]=t.data),(e||i||s)&&(Ch=!0),Ch&&n===yh.fillStyle?Ch=!1:n=yh.fillStyle,yh.fillStyle="oklch(59.686% 0.15619 49.7694)",yh.clearRect(0,0,1,1),yh.fillRect(0,0,1,1),t=yh.getImageData(0,0,1,1),t&&t.data&&([e,i,s]=t.data),(e||i||s)&&(wh=!0),wh&&n===yh.fillStyle?wh=!1:n=yh.fillStyle,yh.fillStyle="color(display-p3 0 1 0)",yh.clearRect(0,0,1,1),yh.fillRect(0,0,1,1),t=yh.getImageData(0,0,1,1),t&&t.data&&([e,i,s]=t.data),(e||i||s)&&(xh=!0),xh&&n===yh.fillStyle?xh=!1:n=yh.fillStyle}();const Oh=function(t){return!!t&&new Color(t)};I.Color=Color;const Dh=Oh({name:"SC-system-state-do-not-remove"}),State=function(){return this.set(this.defs),this.lineDash=[],this},Rh=State.prototype=yc();Rh.type="State",ml(Rh),Rh.defs={fillStyle:ae,strokeStyle:ae,globalAlpha:1,globalCompositeOperation:_r,lineWidth:1,lineCap:"butt",lineJoin:"miter",lineDash:null,lineDashOffset:0,miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:ae,font:"12px sans-serif",filter:tn,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",direction:xs,fontKerning:sn,fontStretch:sn,fontVariantCaps:sn,letterSpacing:In,textAlign:bs,textBaseline:ea,textRendering:ee,wordSpacing:In},Rh.processPacketOut=function(t,e,i){let s=!0;if(t===ks)e.length||(s=!!i.includes(ks));else i.includes(t)||e!==this.defs[t]||(s=!1);return s},Rh.finalizePacketOut=function(t){const e=t.fillStyle,i=t.strokeStyle;return e&&!e.substring&&(t.fillStyle=e.name),i&&!i.substring&&(t.strokeStyle=i.name),t},Rh.set=function(t=qa){const e=Q(t),i=e.length;let s,n;const r=this.defs;for(n=0;n<i;n++)s=e[n],s!=Vs&&typeof r[s]!=pa&&(this[s]=t[s],this.dirtyFilterIdentifier=!0);return this},Rh.get=function(t){const e=this.defs[t];if(null!=e){const i=this[t];return null!=i?i:e}};const Fh=Rh.setters;Fh.fillStyle=function(t){let e;oc(t)&&t.lib==uo?this.fillStyle=t:(e=D[t],e?this.fillStyle=e:t.includes(It)||t.includes(wt)||t.includes("#")?this.fillStyle=t:this.fillStyle=Dh.checkColor(t))},Fh.strokeStyle=function(t){let e;oc(t)&&t.lib==uo?this.strokeStyle=t:(e=D[t],e?this.strokeStyle=e:t.includes(It)||t.includes(wt)||t.includes("#")?this.strokeStyle=t:this.strokeStyle=Dh.checkColor(t))},Fh.shadowColor=function(t){t.includes(It)||t.includes(wt)||t.includes("#")?this.shadowColor=t:this.shadowColor=Dh.checkColor(t)},Fh.direction=Ua,Fh.fontKerning=Ua,Fh.fontStretch=Ua,Fh.fontVariantCaps=Ua,Fh.letterSpacing=Ua,Fh.textAlign=Ua,Fh.textBaseline=Ua,Fh.textRendering=Ua,Fh.wordSpacing=Ua,Rh.getChanges=function(t,e){let i,s,n,r,o,a,c,l,h;const u=this.defs,d={},p=function(t,e){return typeof t[e]!=pa?t[e]:u[e]};for(t.substring&&(t=f[t]),n=0,r=ro.length;n<r;n++)i=ro[n],l=p(this,i),h=p(e,i),h!==l&&(d[i]=l);if(this.lineWidth||e.lineWidth)for(n=0,r=no.length;n<r;n++)if(i=no[n],l=p(this,i),h=p(e,i),i==ks){if(l.length||h.length)if(l.length!=h.length)d.lineDash=l;else{for(c=!1,o=0,a=l.length;o<a;o++)if(l[o]!=h[o]){c=!0;break}c&&(d.lineDash=l)}}else"lineWidth"==i?t.scaleOutline?(s=(l||1)*(t.scale||1),s!==h&&(d.lineWidth=s)):l!==h&&(d.lineWidth=l):h!==l&&(d[i]=l);for(n=0,r=oo.length;n<r;n++)i=oo[n],h=p(e,i),l=p(this,i),l.substring&&h!==l?d[i]=l:l.type==ko?(l=l.getData(),h!==l&&(d[i]=l)):d[i]=l;if(t.type==Ho)for(n=0,r=ao.length;n<r;n++)i=ao[n],l=p(this,i),h=p(e,i),h!==l&&(d[i]=l);return d},Rh.setStateFromEngine=function(t){let e;for(let i=0,s=io.length;i<s;i++)e=io[i],this[e]=t[e];return this.lineDash=dc(t.lineDash)?t.lineDash:[],this.lineDashOffset=pc(t.lineDashOffset,0),t.direction=xs,this.direction=xs,t.fontKerning=sn,this.fontKerning=sn,t.fontStretch=sn,this.fontStretch=sn,t.fontVariantCaps=sn,this.fontVariantCaps=sn,t.letterSpacing=In,this.letterSpacing=In,t.textAlign=bs,this.textAlign=bs,t.textBaseline=ea,this.textBaseline=ea,t.textRendering=ee,this.textRendering=ee,t.wordSpacing=In,this.wordSpacing=In,this};const Hh=function(t){return!!t&&new State};I.State=State;var Eh=function(){var t=4022871197;return function(e){if(e){e=e.toString();for(var i=0;i<e.length;i++){var s=.02519603282416938*(t+=e.charCodeAt(i));s-=t=s>>>0,t=(s*=t)>>>0,t+=4294967296*(s-=t)}return 2.3283064365386963e-10*(t>>>0)}t=4022871197}},Ih=function(t){return function(){var e,i,s=48,n=1,r=s,o=new Array(s),a=0,c=new Eh;for(e=0;e<s;e++)o[e]=c(Math.random());var l=function(){++r>=s&&(r=0);var t=1768863*o[r]+2.3283064365386963e-10*n;return o[r]=t-(n=0|t)},h=function(t){return Math.floor(t*(l()+11102230246251565e-32*(2097152*l()|0)))};h.string=function(t){var e,i="";for(e=0;e<t;e++)i+=String.fromCharCode(33+h(94));return i};return h.cleanString=function(t){return t=(t=(t=t.replace(/(^\s*)|(\s*$)/gi,"")).replace(/[\x00-\x1F]/gi,"")).replace(/\n /,"\n")},h.hashString=function(t){for(t=h.cleanString(t),c(t),e=0;e<t.length;e++)for(a=t.charCodeAt(e),i=0;i<s;i++)o[i]-=c(a),o[i]<0&&(o[i]+=1)},h.seed=function(t){var e,i,s,n;null==t&&(t=Math.random()),"string"!=typeof t&&(e=t,i=function(t,e){return"function"==typeof e?e.toString():e},t=JSON.stringify(e,function(t,e){var i=[],s=[];return null==e&&(e=function(t,e){return i[0]===e?"[Circular ~]":"[Circular ~."+s.slice(0,i.indexOf(e)).join(".")+"]"}),function(n,r){if(i.length>0){var o=i.indexOf(this);~o?i.splice(o+1):i.push(this),~o?s.splice(o,1/0,n):s.push(n),~i.indexOf(r)&&(r=e.call(this,n,r))}else i.push(r);return null==t?r:t.call(this,n,r)}}(i,n),s)),h.initState(),h.hashString(t)},h.addEntropy=function(){var t=[];for(e=0;e<arguments.length;e++)t.push(arguments[e]);!function(){var t=Array.prototype.slice.call(arguments);for(e=0;e<t.length;e++)for(i=0;i<s;i++)o[i]-=c(t[e]),o[i]<0&&(o[i]+=1)}(a+++(new Date).getTime()+t.join("")+Math.random())},h.initState=function(){for(c(),e=0;e<s;e++)o[e]=c(" ");n=1,r=s},h.done=function(){c=null},void 0!==t&&h.seed(t),h.range=function(t){return h(t)},h.random=function(){return h(Number.MAX_VALUE-1)/Number.MAX_VALUE},h.floatBetween=function(t,e){return h.random()*(e-t)+t},h.intBetween=function(t,e){return Math.floor(h.random()*(e-t+1))+t},h}()};const Th=function(t){return new Ih(t)},Bh={},$h={};let Lh=1e3;const Mh=t=>{t.toFixed&&!isNaN(t)&&t>=200&&t<=1e4&&(Lh=t)},Nh=t=>{t.toFixed&&!isNaN(t)&&t>=200&&t<=1e4&&(Lh=t)},Xh=t=>Bh[t]?($h[t]=et(),Bh[t]):null,Yh=(t,e)=>{Bh[t]=e,$h[t]=et()},Gh=function(t,e=[]){const i=et();return Bh[t]?($h[t]=i,Bh[t]):(Bh[t]=e,$h[t]=i,Bh[t])};let jh=200,zh=0;const Wh=t=>{t.toFixed&&!isNaN(t)&&t>=10&&t<=5e3&&(jh=t)};function Vh(t=qa){t.setEngineFromState=function(t){const e=this.state,i=io.length;let s,n,r,o;for(s=0;s<i;s++)n=io[s],r=t[n],o=e[n],n==ks?(t.lineDash=o,t.setLineDash(t.lineDash)):r!==o&&(t[n]=o);return t.textAlign!=bs&&(t.textAlign=bs),t.textBaseline!=ea&&(t.textBaseline=ea),this},t.setToDefaults=function(){const t=this.state.defs,e=this.state,i=this.engine;return z(t).forEach((([t,s])=>{t===ks?(K(i.lineDash)?i.lineDash.length=0:i.lineDash=[],K(e.lineDash)?e.lineDash.length=0:e.lineDash=[]):(i[t]=s,e[t]=s)})),i.textAlign=e.textAlign=bs,i.textBaseline=e.textBaseline=ea,this},t.setEngine=function(t){const e=this.state,i=t.state;if(i){const s=i.getChanges(t,e),n=this.setEngineActions;if(Q(s).length){const i=this.engine;for(const r in s)n[r](s[r],i,fo,t,this),e[r]=s[r]}}return t},t.setEngineActions=U({fillStyle:function(t,e,i,s,n){if(t.substring){let i=!1;R.includes(t)?i=D[t]:d.includes(t)&&(i=u[t]),i?(s.state.fillStyle=i,e.fillStyle=i.getData(s,n)):e.fillStyle=t}else e.fillStyle=t.getData(s,n)},filter:function(t,e){e.filter=t},font:function(t,e){e.font=t},globalAlpha:function(t,e){e.globalAlpha=t},globalCompositeOperation:function(t,e){e.globalCompositeOperation=t},imageSmoothingEnabled:function(t,e){e.imageSmoothingEnabled=t},imageSmoothingQuality:function(t,e){e.imageSmoothingQuality=t},lineCap:function(t,e){e.lineCap=t},lineDash:function(t,e){e.lineDash=t,e.setLineDash&&e.setLineDash(t)},lineDashOffset:function(t,e){e.lineDashOffset=t},lineJoin:function(t,e){e.lineJoin=t},lineWidth:function(t,e){e.lineWidth=t},miterLimit:function(t,e){e.miterLimit=t},shadowBlur:function(t,e){e.shadowBlur=t},shadowColor:function(t,e){e.shadowColor=t},shadowOffsetX:function(t,e){e.shadowOffsetX=t},shadowOffsetY:function(t,e){e.shadowOffsetY=t},strokeStyle:function(t,e,i,s,n){if(t.substring){let i=!1;R.includes(t)?i=D[t]:d.includes(t)&&(i=u[t]),i?(s.state.strokeStyle=i,e.strokeStyle=i.getData(s,n)):e.strokeStyle=t}else e.strokeStyle=t.getData(s,n)}}),t.clearShadow=function(){return this.engine.shadowOffsetX=0,this.engine.shadowOffsetY=0,this.engine.shadowBlur=0,this.state.shadowOffsetX=0,this.state.shadowOffsetY=0,this.state.shadowBlur=0,this},t.restoreShadow=function(t){const e=t.state;return this.engine.shadowOffsetX=e.shadowOffsetX,this.engine.shadowOffsetY=e.shadowOffsetY,this.engine.shadowBlur=e.shadowBlur,this.state.shadowOffsetX=e.shadowOffsetX,this.state.shadowOffsetY=e.shadowOffsetY,this.state.shadowBlur=e.shadowBlur,this},t.setToClearShape=function(){return this.engine.fillStyle=le,this.engine.strokeStyle=le,this.engine.shadowColor=le,this.state.fillStyle=le,this.state.strokeStyle=le,this.state.shadowColor=le,this},t.saveEngine=function(){return this.engine.save(),this},t.restoreEngine=function(){return this.engine.restore(),this},t.getComputedFontSizes=function(){const t=this.getHost();if(t&&t.domElement){const e=Y(t.domElement),i=Y(document.documentElement);return[parseFloat(e.fontSize),parseFloat(i.fontSize),window.innerWidth,window.innerHeight]}return!1},t.getEntityHits=function(){const t=[],e=Kc(),i=Kc();return this.groupBuckets&&this.groupBuckets.forEach((t=>{t.visibility&&e.push(...t.getAllArtefactsAt(this.here))}),this),e.forEach((e=>{const s=e.artefact;s.visibility&&!i.includes(s.name)&&(i.push(s.name),t.push(s))})),qc(i),qc(e),t},t.rotateDestination=function(t,e,i,s){const n=s||this,r=n.mimic,o=n.pivot;let a,c,l=n.currentRotation;if(r&&r.name&&n.useMimicFlip?(a=r.flipReverse?-1:1,c=r.flipUpend?-1:1):(a=n.flipReverse?-1:1,c=n.flipUpend?-1:1),r&&r.name&&n.useMimicRotation?l=r.currentRotation:o&&o.name&&n.addPivotRotation&&(l=o.currentRotation),l){l*=at;const s=G(l),n=dt(l);t.setTransform(s*a,n*a,-n*c,s*c,e,i)}else t.setTransform(a,0,0,c,e,i);return this}}yl({name:"core-workstore-hygeine",order:998,fn:()=>(()=>{const t=et();if(zh<t-jh){const e=Q(Bh),i=t-Lh;for(let t,s=0,n=e.length;s<n;s++)t=e[s],$h[t]<i&&(delete Bh[t],delete $h[t]);zh=t}})()});const Uh=function(t,e=qr){this.name=t;const i=this.element=document.createElement(ve),s=this.engine=i.getContext(Pt,{willReadFrequently:!0,colorSpace:e});i.width=1,i.height=1;return(this.state=Hh({engine:s})).setStateFromEngine(this.engine),this},Zh=Uh.prototype=yc();Zh.type=So,ml(Zh),Vh(Zh),Zh.stringifyFunction=Ua,Zh.processPacketOut=Ua,Zh.finalizePacketOut=Ua,Zh.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},Zh.clone=_a;const _h=[];let Kh=0;const qh=function(){_h.length||_h.push(new Uh("pool_"+Kh++));const t=_h.shift();return t.engine.save(),t},Qh=function(t){t&&t.type==So&&(t.engine.restore(),_h.push(t))},Coordinate=function(t,e){const i=[0,0];return ut(i,Coordinate.prototype),ht(i),t&&i.set(t,e),i},Jh=Coordinate.prototype=j(Array.prototype);Jh.constructor=Coordinate,Jh.type=Ao,Jh.set=function(t,e){return dc(t)&&(t.type==Ao?this.setFromArray(t):t.type==zo?this.setFromVector(t):t.type==Bo?this.setFromVector(t.v):K(t)?this.setFromArray(t):dc(e)&&this.setFromArray([t,e])),this},Jh.setFromArray=function(t){return this[0]=t[0],this[1]=t[1],this},Jh.setFromVector=function(t){return this[0]=t.x,this[1]=t.y,this},Jh.zero=function(){return this[0]=0,this[1]=0,this},Jh.vectorAdd=function(t){return this[0]+=t.x,this[1]+=t.y,this},Jh.vectorSubtract=function(t){return this[0]-=t.x,this[1]-=t.y,this},Jh.add=function(t){return this[0]+=t[0],this[1]+=t[1],this},Jh.subtract=function(t){return this[0]-=t[0],this[1]-=t[1],this},Jh.multiply=function(t){return this[0]*=t[0],this[1]*=t[1],this},Jh.divide=function(t){const[e,i]=t;return e&&i&&(this[0]/=e,this[1]/=i),this},Jh.scalarMultiply=function(t){return this[0]*=t,this[1]*=t,this},Jh.scalarDivide=function(t){return t&&t.toFixed&&(this[0]/=t,this[1]/=t),this},Jh.getMagnitude=function(){return Z(...this)},Jh.rotate=function(t){const[e,i]=this;let s=M(i,e);s+=.01745329251*t;const n=Z(e,i);return this[0]=n*G(s),this[1]=n*dt(s),this},Jh.reverse=function(){return this[0]=-this[0],this[1]=-this[1],this},Jh.getDotProduct=function(t){return this[0]*t[0]+this[1]*t[1]},Jh.normalize=function(){const t=this.getMagnitude();return t>0&&(this[0]/=t,this[1]/=t),this};const tu=[],eu=function(t,e){tu.length||tu.push(new Coordinate);const i=tu.shift();return i.set(t,e),i},iu=function(t){t&&t.type==Ao&&tu.push(t.zero())},su=function(t,e){return new Coordinate(t,e)};I.Coordinate=Coordinate;const nu=new Float32Array([.37,.69,.62,.78,.06,.84,.27,.14,.46,1,.58,.28,.62,.8,.3,.7,.93,.53,.76,.24,.15,.51,.79,.28,.99,.16,.22,.45,.03,.73,.34,.96,.5,.3,.07,.84,.51,.27,.89,.8,.66,.25,.54,.94,.08,.66,.36,.85,.69,.93,.26,.79,.68,.36,.23,.5,.83,.34,.64,.91,.73,.8,.95,.59,.1,.76,.82,.03,.62,.47,.09,.55,.33,.22,.45,.04,.76,.52,.69,.24,.78,.12,.59,.37,.03,.82,.93,.69,.42,.34,.89,.62,.27,1,.53,.09,.38,.71,.13,.52,.19,.66,.33,.42,.63,.28,.36,.61,.73,.06,.56,.97,.35,.72,.91,.3,.98,.53,.2,.08,.5,.22,.87,.93,.08,.44,.91,.56,.12,.99,.01,.49,.37,.68,.89,.55,.3,.84,.17,.67,.1,.48,.89,.23,.47,.06,.29,.61,.67,.91,.2,.47,.64,.05,.77,.94,.62,.09,.58,.12,.77,.47,.93,.39,.73,.09,.47,.58,.15,.39,.02,.64,.32,.77,.98,.03,.28,.44,.11,.01,.73,.44,.88,.02,.76,.53,.41,.05,.25,.36,.02,.31,.52,.39,.28,.57,.91,.7,.98,0,.76,.94,.66,.85,.33,.18,.88,.01,.99,.46,.69,.94,.32,.51,.45,.07,.55,.22,.11,.8,.42,.17,.87,.47,.81,.23,.88,.43,.6,.11,.75,.06,.88,.72,.47,.92,.13,.31,.84,.47,.27,.16,.5,.09,.78,.44,.34,.56,.95,.69,.36,.13,.64,.29,.04,.87,.41,.53,.31,.87,.22,.6,.09,.77,.22,.72,.4,.88,.37,.75,.06,.58,.65,.86,.99,.42,.37,.58,.04,.74,.35,.57,.83,.39,.5,.91,.42,.27,.69,.02,.8,.22,.63,.97,.04,.34,.69,.97,.51,.83,.45,.24,.56,.49,.64,.81,.99,.55,.31,.17,.62,.1,.69,.15,.86,.2,.52,.67,.77,.19,.7,.85,.45,.18,.12,.4,.3,.82,.37,.53,.07,.27,.56,.64,.44,.34,.56,.25,.2,.08,.76,.64,.15,.78,.95,.72,.87,.51,.36,.02,.74,.3,.07,.64,.34,0,.82,.28,.97,.22,.5,.81,.02,.25,.41,.69,.2,.03,.76,.42,.69,.85,.59,.14,.91,.76,.28,.06,.61,.47,.73,.8,.55,.25,.61,.82,.19,.72,.13,.98,.41,.03,.64,.96,.12,.52,.27,.17,.97,.42,.13,.35,.2,.78,.11,.86,.82,.24,.95,.49,.14,.25,.17,.69,.85,.21,.95,.58,.35,.15,.44,.29,.78,.84,.2,.28,.88,.09,.2,.92,.13,.75,.17,.37,.23,.52,.89,.82,.47,1,.39,.29,.75,.59,.96,.14,.42,.92,.63,.04,1,.67,.78,.5,.24,.61,.17,.71,.92,.41,.11,.96,.74,.07,.83,.66,.89,.4,.85,.23,.55,.36,.27,.19,.04,.67,.94,.58,.63,.2,.97,.75,.55,.92,.72,.46,.55,.69,.34,.17,.67,.56,.88,.96,.52,.62,.94,.88,.21,.04,.37,.25,.72,.02,.81,.16,.91,.4,.21,1,.16,.7,.94,.1,.78,.55,.45,.7,.51,.86,.29,.48,.05,.93,.59,.81,.72,.29,.83,.59,.73,0,.49,.3,.64,.39,.11,.71,.32,.97,.78,.34,.05,.37,.49,.12,.9,.68,.56,.92,.49,.14,.55,.76,.6,.34,.72,.64,.4,.03,.88,.6,.71,.13,.65,.05,.27,.56,.22,.94,.47,.09,.33,.84,.47,.27,.09,.57,.23,.34,.07,.95,.56,.87,.11,.46,.2,.77,.87,.5,.18,.29,.79,.14,.61,.51,.29,.99,.01,.91,.65,.47,.58,.3,.23,.13,.83,.4,.49,.15,.25,.36,.17,.84,.13,.41,.07,1,.44,.77,.09,.35,.73,.3,.11,.34,.57,.47,.93,.63,.41,.53,.49,.32,.86,.55,.02,.84,.51,.34,.26,.04,.39,.92,.33,.25,.84,.17,.35,.8,.43,.67,.31,.03,.51,.47,.08,.94,.25,.55,.91,.71,.15,.45,.58,.89,.67,.02,.47,.57,.62,.82,.73,.53,.27,.81,.07,.19,.65,.4,.92,0,.44,.16,1,.53,.8,.33,.96,.29,.07,.44,.94,.34,.74,.84,.67,0,.84,.64,.71,.04,.55,.89,.39,.72,.53,.82,.42,.65,.02,.36,.94,.29,.63,0,.37,.25,.67,.93,.51,.37,.04,.74,.12,.68,.44,.81,.11,.38,.78,.99,.45,.71,.89,.33,.59,.91,.69,.51,.05,.64,.27,.89,.61,.84,.31,.24,.5,.04,.18,.44,.8,.66,.14,.75,.82,.11,.18,.99,.65,.12,.77,.25,.62,.32,.09,.75,.65,.47,.58,.16,.05,.65,.08,.94,.56,.73,.25,.84,.14,.38,.87,.64,.16,.78,.4,.64,.2,.33,.99,.02,.86,.2,.53,.42,.86,.1,.94,.14,.23,.99,.03,.4,.88,.72,.24,.07,.8,.32,.69,.83,.04,.25,.68,.22,.48,.55,.76,.86,.39,.17,.53,.09,.42,.34,.5,.26,.23,1,.18,.77,.31,.94,.15,.88,.29,.73,.21,.8,.69,.53,.95,.76,.56,.11,.6,.05,.44,.23,.96,.82,.56,.35,.21,.72,.52,.88,.16,.82,.08,.52,.27,.8,.1,.02,.84,.3,.78,.98,.43,.73,.19,.52,.14,.89,.65,.79,.6,.92,.52,.07,.98,.27,.51,.3,.78,.88,.23,.42,.7,.1,.91,.77,.43,.96,.22,.87,.71,.8,.95,.55,.76,.45,.15,.02,.99,.54,.2,.73,.96,.24,.55,.36,.05,.95,.13,.75,.55,.77,.25,.36,.13,.8,.19,.29,.71,.36,.45,.65,.33,.61,.51,.37,1,.56,.46,.89,.23,.5,.4,.91,.58,.07,.83,.65,.12,.25,.61,.79,.14,.97,.63,.78,.12,.89,.43,.38,.61,.69,0,.45,.19,.6,.02,.92,.5,.42,.09,.24,.42,.16,.89,.48,.99,.76,.66,.87,.27,.45,.16,.62,.89,.25,.04,.33,.22,.62,.37,0,.67,.18,.45,.75,.62,.42,.18,.57,.01,.36,.8,.05,.68,.4,1,.27,.86,.4,.22,.37,.83,.44,.68,.05,.56,.35,.06,.59,.94,.49,.38,.58,.16,.53,.13,.29,.36,.51,.2,.26,.36,.89,.69,.31,.42,.63,.91,.5,.04,.31,.85,.72,.47,.83,.61,.36,.48,.07,.93,.64,.72,1,.6,.49,.89,.54,.08,.76,.92,.16,.09,.82,.29,.14,.61,.18,.75,.65,.11,.29,.78,.15,.42,.36,.99,.01,.49,.69,.31,.89,.25,.18,.94,.58,.7,.85,.09,.5,.22,.85,.69,.39,.33,.78,.15,.58,.85,.04,.72,.35,.84,.28,.4,.16,.33,.56,.01,.69,.96,.06,.47,.83,.56,.69,.93,.54,.74,.94,.86,.53,.98,.38,.24,.95,.11,.67,.86,.51,.3,.96,.46,.57,.34,.05,.15,.71,.31,.77,.03,.6,.2,.94,.72,.45,.82,.17,.31,.8,.2,.05,.69,.84,.76,.01,1,.09,.84,.44,.62,.11,.22,.5,.81,.05,.29,.45,.77,.68,.09,.91,.2,.28,0,.89,.18,.69,.32,.51,.44,.03,.35,.25,.67,.03,.84,.2,.56,.46,.89,.23,.69,.78,.95,.37,.09,.55,.87,.44,.73,.95,.52,.82,.23,.73,.91,.44,.04,.55,.46,.73,.41,.03,.31,.14,.78,.36,.97,.56,.8,.11,.99,.52,.27,.91,.64,.95,.49,.19,.66,.03,.55,.85,.13,.62,.8,.41,.29,.75,.39,.13,.99,.45,.05,.27,.47,.12,.41,.63,.29,.15,.84,.54,.32,.74,.22,.13,.64,.85,.08,.16,.75,.51,.47,.64,.95,.58,.14,.91,.51,.39,.13,.25,.97,.69,.01,.56,.87,.28,.93,.38,.62,.44,.67,.57,.7,.01,.8,.98,.6,.89,.73,.16,.71,.12,.59,.36,.54,.15,.57,.67,.45,.25,.95,.83,.11,.22,.84,.09,.77,.92,.16,.41,.96,.35,.25,.75,.65,0,.44,.53,.06,.28,.83,.99,.23,0,.59,.24,.05,.63,.28,.55,.36,.16,.83,.72,.31,.08,.66,.81,.53,.22,.9,.62,.28,.05,.45,.64,.22,.71,.07,.35,.45,.31,.1,.77,.6,.95,.24,.73,.49,.99,.22,.1,.55,.91,.63,.24,.74,.41,.79,.16,.81,.33,.22,.04,.81,.67,.48,.04,.8,.44,.99,.41,.78,.25,.6,.94,.28,.82,.91,.2,.11,.44,.73,.34,.79,.06,.85,.63,.51,.42,.9,.73,.44,.64,.05,.49,.24,.9,.2,.33,.93,.15,.48,.34,.19,0,.45,.34,.97,.84,.21,.95,.26,.41,.82,.98,.72,.54,.34,.62,.39,.57,.93,.69,.53,.44,.8,.64,.53,.71,.11,.94,.37,.58,.87,.2,.73,.47,.42,.67,.34,.49,.91,.38,.72,.13,.89,.77,.08,.96,.64,.19,1,.85,.47,.25,.96,.71,.47,.12,.76,.16,.91,.3,.51,.85,.8,.15,.75,.55,.89,.36,.46,.07,.89,.43,.04,.36,.87,.48,.85,.17,.02,.52,.31,.09,.87,.64,.97,.58,.71,.91,.51,.1,.9,.59,.27,.16,.62,.57,.01,.49,.38,.73,.42,0,.6,.38,.86,.28,.64,.24,1,.56,.3,.76,.18,.1,.35,.23,.14,.98,.31,.8,.72,.15,.84,.53,.25,.4,.73,.85,.55,.67,.91,.25,.55,.51,.03,.69,.88,.75,.03,.34,.09,.16,.78,.05,.75,.88,.28,.2,.37,.13,.3,.22,.04,.87,.44,.54,.15,.25,1,.32,.64,.93,.25,.13,.64,.8,.16,.55,.97,.41,.48,.24,.61,.4,.27,.53,.12,.36,.16,.6,.36,.05,.4,.58,.82,.37,.69,.95,0,.56,.39,.66,.23,0,.81,.18,.69,.32,.8,.28,.67,.62,.26,.73,.58,.27,.67,.83,.94,.55,.2,.36,.5,.08,.84,.42,.35,.2,.74,.38,.93,.71,.08,.3,.97,.83,.19,.88,.15,.67,.24,.8,.07,.51,.84,.02,.18,.69,.45,.04,.91,.58,.8,.47,.71,.6,.08,.56,.41,.04,.36,.77,.09,.9,.58,.05,.31,.39,.09,.75,.63,.31,.82,.45,.12,.61,.51,.22,.63,.93,.51,.2,.47,.32,.06,.66,.59,.97,.9,.69,.58,.16,.31,.82,.06,.76,.41,.1,.82,.02,.58,.89,.05,.28,.84,.08,.3,.77,.02,.67,.33,.81,.02,.67,.75,.57,.91,.8,.09,.85,.67,.99,.25,.51,.13,.45,.25,.12,.88,.46,.95,.6,.28,.98,.49,.16,.57,.18,.95,.81,.16,.04,.98,.44,.35,.77,.04,.61,.7,.29,.01,.67,.16,.27,.99,.63,.47,0,.2,.83,.47,.88,.13,.66,.54,.08,.98,.5,.32,.56,.97,.69,.4,.61,.48,.94,.37,.83,.6,.29,.94,.03,.87,.37,.16,.91,.65,.49,.97,.45,.64,.67,.22,.13,1,.84,.49,.16,.94,.07,.42,.19,.28,.94,.36,.89,.46,.83,.29,.7,.91,.14,.42,.8,.73,.07,.47,.75,.38,.97,.63,.69,.91,.47,.69,.56,.14,.47,.76,.52,.97,.44,.75,.5,.64,.19,.84,.99,.13,.5,.91,.86,.32,.05,.23,.42,.52,.3,.17,.33,.04,.89,.61,.73,.34,.93,.75,.15,.31,.7,.41,.07,.64,.84,.75,.41,.08,.48,.32,.39,.7,.11,.87,.14,.47,.27,.95,.77,.47,.93,.62,.53,.77,.12,.31,.96,.67,.49,.38,.73,.24,.4,.33,.6,.78,.39,.85,.15,.44,.2,.11,.89,.78,.09,.24,.73,.14,.45,.67,.22,.53,.83,.27,.75,.3,.2,.85,0,.28,.83,.37,.52,.78,.71,.6,.22,.37,.89,.66,.78,.57,.03,.68,.74,.17,.38,.03,.59,.81,.63,.98,.52,.22,.35,.27,.12,.85,.01,.25,.35,.19,.6,.3,.92,.8,.35,.3,.17,.36,.7,.23,.1,.88,.38,.55,.28,.72,.57,.17,.38,.47,.98,.72,.63,.89,.75,.55,.93,.64,.08,.78,.82,.19,.62,.53,.37,.05,.84,.49,.94,.23,.35,.01,.99,.53,.66,.76,.95,.57,.23,.64,.31,.89,.4,.12,.86,.16,.41,.31,.81,.03,.86,.56,.81,.25,.11,.58,.19,.8,.93,.05,.84,.25,.11,.73,.02,.67,.93,.36,.55,.31,.66,.2,.51,.41,.86,.06,.33,.63,.42,.01,.98,.59,.1,.7,.57,.18,.44,.92,.64,.27,.42,.04,.81,.54,.71,.25,.99,.49,.82,.11,.25,.55,.66,.95,.12,.24,.38,.03,.28,.88,.57,.92,.42,.53,.59,.77,.44,.12,.88,.02,.24,.7,.09,.86,.67,.03,.93,.58,.33,.95,.6,.06,.44,.9,.08,.24,.63,.14,.79,.28,.16,.02,.39,.12,.8,.44,.36,.28,.49,.42,.02,.24,.91,.66,.13,.59,.2,.73,.47,.6,.3,.21,.89,.26,.07,.48,.79,.01,.95,.52,.66,.07,.55,.73,.89,.07,.2,.49,.38,.61,.17,.4,.78,.97,.01,.62,.48,.69,.22,.47,.97,.59,.52,.8,.26,.72,.05,.42,.89,.8,.03,1,.76,.17,.93,.78,.09,.69,.45,.89,.39,.82,.34,.98,.75,.1,.04,.34,.17,.9,.32,.11,.49,.05,.15,.33,.38,.61,.97,.07,.85,.34,.44,.77,.54,.73,.17,.69,.8,.05,.65,.19,.93,.09,.83,.51,.97,.36,.53,.43,.62,.97,.51,.81,.16,.45,.03,.75,.27,.16,.8,.35,.67,.77,.85,.53,.11,.56,.36,.96,.6,.24,.48,.69,.23,.91,.12,1,.69,.8,.55,.44,.98,.31,.8,.08,.89,.69,.84,.39,.12,.62,.18,.88,.31,.7,.56,.2,.78,.35,.62,.24,.58,.97,.65,.7,.95,.04,.49,.91,.33,.68,.47,.29,.38,.95,.16,.67,.37,.29,.19,.89,.49,.61,.16,.95,.56,.48,.27,.62,.34,.56,.48,.28,.92,.55,.15,.77,.05,.63,.24,.12,.49,.59,.84,.97,.53,.75,.64,.97,.44,.86,.62,.91,.22,.79,.44,.31,.72,.52,.19,.93,.09,.88,.49,.41,.11,.98,.31,.72,.28,.41,.58,.3,.74,.66,.15,.84,.05,.2,.41,.27,.62,.87,.82,.53,.67,.47,.86,.58,.04,.42,.94,.33,.69,.88,.45,.83,.67,.05,.86,.98,.01,.66,.57,.3,.85,.05,.22,.27,.71,.03,.37,.53,.27,.16,.03,.57,.69,.82,.42,.53,.99,.36,.09,.83,.28,.98,.02,.46,.15,.33,.43,.18,.28,.75,.24,.82,.08,.22,.89,.85,.13,.76,.58,.07,.89,.77,.07,.42,.04,.83,.22,.7,.34,.13,.9,.7,.06,.25,.74,.11,.83,.35,.25,.52,.43,.94,.53,.86,.72,.31,.2,.7,.56,.36,.27,.2,.58,.36,.74,.1,.5,.69,.16,.93,.04,.78,.6,.28,.65,.34,.96,.23,.62,.36,.47,.88,.06,.72,.95,.21,.04,.79,.27,.91,.59,.33,.77,.1,.69,.31,.21,.36,.12,.95,.31,.2,1,.28,.48,.03,.24,.76,.07,.19,.34,.76,.15,.33,.55,.39,.76,.16,.48,.37,.94,.51,.84,.62,.92,.67,.42,.94,.79,.45,.97,.36,.03,.75,.13,.24,.46,.73,.14,.4,.85,.69,.5,.83,.76,.09,.89,.45,.68,.56,.4,.64,.52,.05,.23,.53,.34,.81,.44,.24,.67,.56,.98,.37,.52,.78,.02,.4,.21,.81,.45,.87,.59,.4,.2,.66,1,.08,.29,.2,.67,.01,.39,.27,.79,.45,.09,0,.78,.94,.07,.8,.28,.66,.02,.88,.39,.58,.23,.42,.91,.13,.38,.82,.03,.56,.77,.16,.82,.54,.16,.61,.33,.12,.63,.44,.37,.48,.73,0,.91,.56,1,.44,.07,.92,.63,0,.77,.52,.12,.8,.18,.59,.4,.99,.29,.56,.52,.94,.42,.62,.84,.08,.95,.25,.6,.74,.65,.11,.16,.45,.21,.06,.76,.32,.49,.18,.07,.66,.27,.61,.86,.66,.91,.48,.61,.89,.19,.75,.29,.04,.91,.54,.6,.34,.01,.99,.14,.31,.72,.81,.41,.99,.62,.05,.49,.96,.73,.33,.13,.67,.27,.88,.59,.94,.65,.16,.37,.99,.05,.81,.53,0,.73,.6,.85,.8,.36,.47,.09,.94,.64,.13,.91,.84,.47,.67,.53,.22,.42,.96,.55,.34,.76,.12,.48,.69,.04,.75,.53,.47,.2,.71,.9,.26,0,.67,.85,.42,.91,.78,.55,.87,.19,.11,.97,.66,.37,.48,.16,.65,.8,.56,.27,.72,.4,.61,.47,.71,.92,.67,.83,.15,.64,.92,.05,.47,.12,.28,.73,.2,.51,.82,.42,0,.32,.77,.56,.29,.8,.98,.59,.11,.63,.27,.87,.54,.92,.19,.42,.02,.8,.18,.07,.53,.32,.13,.99,.63,.38,.24,.15,.84,.77,.18,.85,.49,.93,.59,.16,.69,.27,.84,.12,.59,.18,.89,.45,.83,.19,.44,.11,.75,.5,.56,.09,.31,.65,.25,.92,.44,.35,.7,.13,.55,.97,.76,.59,.86,.55,.36,.25,.62,.17,.32,.11,.61,.85,.13,.45,.23,.64,.84,.99,.34,.86,.29,.98,.78,.09,.63,.31,.5,1,.38,.22,.08,.49,.26,.02,.99,.71,.59,.31,.22,.13,.84,.24,.04,.35,.84,.44,.17,.89,.05,.86,.38,.25,.07,.53,.45,.36,.25,.7,.8,.66,.91,.5,.36,.06,.69,.89,.2,.82,1,.39,.7,.09,.36,.19,.91,.72,.37,.78,.16,.47,.81,.34,.56,.29,.95,.37,.8,.67,.44,.58,.2,.49,.71,.96,.29,.49,.71,.44,.25,.11,.34,.01,.46,.91,.22,.37,.55,.28,.01,.79,.59,.05,.98,.36,.29,.23,.85,.78,.71,.47,.11,.76,.87,.22,.96,.39,.28,.09,.23,.17,.31,.05,.46,1,.69,.39,.88,.77,.98,.36,.05,.73,.94,.06,.18,.44,.57,.1,.17,.59,.25,.35,.94,.42,.08,.59,.74,.33,.95,.61,.81,.41,.33,.08,.52,.79,.45,.91,.72,.58,.95,.75,.49,.17,.99,.33,.23,.65,.15,.55,.31,.84,0,.76,.87,.17,.38,.22,0,.87,.99,.63,.3,.11,.54,.5,.05,.24,.86,.52,.64,.47,.4,0,1,.61,.33,.69,.08,.98,.52,.12,.71,.43,.25,.92,.02,.86,.35,.78,.05,.65,.41,.1,.63,.05,.77,.65,.96,.4,.81,.66,.09,.78,.71,.86,.42,.35,.22,.72,.52,.86,.71,.04,.97,.4,.19,.95,.15,.37,.57,.06,.79,.46,.65,.72,.51,.93,.69,.82,.74,.07,.57,.28,.03,.43,.72,.56,.3,.81,.52,.4,.7,.28,.81,.66,.42,.91,.67,.12,.82,.55,.87,.18,.45,.77,.09,.69,.16,.77,.65,.24,.92,.39,.64,.08,.51,.32,.41,.23,.09,.7,.58,.8,.49,.1,.79,.96,.72,.2,.95,.53,.09,.61,.98,.52,.33,.54,.15,.78,.39,.94,.73,.17,.66,.6,.12,.92,.77,.27,.83,.57,.11,.23,.43,.03,.87,.25,.75,.63,.84,.08,.61,.76,.15,.53,.94,.27,.08,.91,.53,.22,.94,.36,.9,.5,.21,.56,.16,.56,.34,.97,.49,.1,.62,.67,.93,.49,.14,.62,.2,.58,.12,.34,.63,.55,.84,.68,.3,.51,.2,.91,.02,.89,.38,.45,.13,.27,.41,.18,.79,.94,.52,.11,.25,.19,.66,.89,.14,.59,.88,.02,.49,.21,.78,.51,0,.47,.75,.21,.03,.7,.84,.27,.54,.38,.22,.91,.56,.84,.02,.73,.18,.28,.83,.02,.92,.64,.88,.29,.04,.44,.75,.93,.45,.39,.61,.11,.67,.42,.28,.47,.82,.06,.75,.69,.43,.23,.04,.58,.33,.45,.96,.32,.41,.22,.05,.32,.16,.91,.49,.81,.95,.65,.55,.38,.21,.47,.17,1,.31,.49,.22,.69,.42,.69,.56,.84,.34,.73,.82,.56,.13,.3,.84,.73,.89,.29,.44,.03,.24,.92,.21,.84,.06,.28,.38,.81,.42,.94,.48,.82,.27,.01,.44,.23,.94,.05,.56,.33,.62,.3,.05,.8,.98,.61,.51,.86,.14,.36,.62,.81,.94,.48,.08,.4,.22,.31,.95,.73,.35,.99,.06,.3,.87,.62,.37,.27,.92,.36,.12,.64,.02,.88,.47,.29,.13,.44,.36,.88,.49,.99,.6,.7,.12,.47,.8,.36,.95,.65,.28,.19,.02,.27,.86,.49,.27,.77,.92,.15,.63,.43,.29,.12,.84,.94,.48,.8,.86,.06,.77,.37,.58,.8,.98,.62,.75,.68,.27,.18,.35,.73,.14,.9,.8,.01,.35,.56,.89,.36,.08,.84,.3,.12,.21,.44,.16,0,.29,.47,.17,.71,.04,.27,.06,.94,.62,.83,.69,.53,.36,.15,.56,.77,.97,0,.25,.75,.09,.67,.76,.89,.09,.72,.59,.83,.69,.23,.84,.16,.72,.56,.33,0,.25,.91,.67,.47,.22,.74,.38,.59,.96,.7,.77,.55,.11,.62,.14,.82,.58,.27,.72,.15,.98,.58,.67,.52,.43,.99,.57,.76,.95,.03,.61,.78,.18,.58,.09,.23,.42,.36,.2,.55,.25,.6,.18,.13,.55,.84,.63,.7,.06,.18,.84,.35,.04,.7,.2,.88,.97,.36,.62,.08,.64,.19,.27,.1,.63,.89,.01,.71,.53,.47,.04,.4,.58,.78,.51,.08,.26,.68,.49,.6,.83,.7,.11,.67,.57,.97,.64,.76,.48,1,.6,.76,.66,.88,.99,.61,.4,.47,.69,.51,.17,.13,.32,.58,.78,1,.45,.33,.59,.88,.52,.31,1,.37,.14,.59,.96,.42,.32,.12,.99,.42,.54,.95,.49,.18,.83,.64,.73,.37,.09,.84,.03,.3,.16,.84,.34,.01,.84,.17,.44,.29,.54,.39,.66,.89,.43,.11,.83,.06,.78,.2,.88,.3,.15,.41,.33,.73,.51,.97,.67,.31,.92,.65,.75,.84,.98,.74,0,.9,.49,.77,.36,.89,.4,.52,.96,.75,.42,.58,1,.5,.33,.01,.67,.18,.53,.33,.7,.39,.55,.93,.22,.51,.15,.28,.35,.23,.89,.13,.96,0,.88,.44,.99,.33,.09,.95,.28,.21,.45,.78,.16,.33,0,.91,.36,.82,.08,.4,.53,.09,.35,.53,.78,.93,.34,.84,.76,.43,.87,.08,.27,.02,.66,.22,.69,.1,.16,.64,.55,.22,.47,.31,.51,.18,.78,.46,.09,.8,.03,.67,.26,.4,.88,.12,.45,.28,.58,.97,.48,.79,.65,.11,.5,.27,.47,.94,.67,.86,.94,.19,.06,.8,.2,.53,.33,.47,.41,.09,.71,.81,.23,.71,.1,.83,.25,.14,.37,.81,.03,.51,.11,.33,.06,.42,.82,.31,.69,1,.08,.25,.12,.81,.33,.09,.65,.24,.09,.75,.86,.58,.47,.78,.27,.89,.06,1,.47,.79,.68,.42,.86,.95,.06,.83,.77,.55,.31,.23,.67,.63,.8,.2,.73,.41,.65,.04,.98,.84,.27,.47,.53,.09,.24,.69,.31,.94,.2,.24,.85,.03,.16,.22,.1,.38,.01,.66,.95,.48,.73,.88,.4,.12,.89,.45,.8,.4,.85,.03,.89,.8,.66,.01,.88,.25,.58,.18,.36,.75,.91,.08,.52,.76,.97,.18,.75,.24,.42,.55,1,.22,.77,.63,.38,.05,.58,.23,.02,.75,.48,.35,.59,.93,.74,.24,.96,.62,.02,.52,.46,.88,.22,.56,.42,.05,.86,.58,.45,.18,.88,.27,.63,.58,.41,.09,.21,.44,.58,.73,.47,.2,.92,.56,.37,.91,.46,.17,.26,.38,.95,.09,.83,.42,.74,.15,.6,.31,.04,.33,.73,.56,.46,.66,.18,.44,.73,.48,.16,.38,.51,.03,.59,.13,.88,.52,.35,.14,.62,.95,.8,.73,.44,.57,.15,.76,.59,.73,.44,.78,.89,.66,.6,1,.27,.55,.22,.36,.16,.53,.63,.84,.35,.28,.95,.05,.7,.61,.13,.7,.25,.95,.55,.69,.92,.49,.86,.14,.31,.58,.22,.33,.04,.55,.68,.12,.88,.06,.35,.45,.93,.83,.15,.7,.32,.77,.42,.69,.98,.12,.86,0,.66,.16,.82,.44,.33,.93,.58,.05,.99,.64,.75,.93,.26,.71,.34,1,.69,.51,.92,.7,.16,.95,.64,.81,.02,.86,.68,.59,.28,.02,.84,.69,.31,.82,.63,.06,.69,.16,.56,.63,.36,.22,.87,.09,.97,.18,.62,.11,.32,1,.02,.64,.94,.84,.11,.91,.22,.84,.93,.45,.73,.31,.58,.71,.05,.38,.29,.19,.97,.87,0,.46,.93,.11,.39,.57,.28,.49,.73,.45,.8,.06,.72,.84,.78,.31,.92,.05,.57,.73,.53,.24,.33,.98,.49,.41,.34,.06,.44,.31,.71,.07,.64,.44,.81,.7,.95,.65,.42,.91,.81,.33,.62,.16,.72,.59,.28,.09,.51,.97,.88,.12,.53,.28,.61,.25,.4,.52,.3,.58,.89,.22,.76,.18,.38,.7,.29,.36,.47,.18,.55,.11,.22,.8,.39,.14,.05,.24,.86,.53,.33,.51,.27,.37,.11,.98,.4,.75,.14,.49,.02,.92,.54,.73,.31,.96,.45,.02,.84,.49,.67,.44,.53,.84,.89,.25,.52,.8,.39,.25,.06,.77,.29,.67,.61,.42,.34,.25,.8,.07,.18,.91,.49,.87,.67,.12,.62,.33,.52,.81,.32,.66,.19,.96,.06,.35,.08,.2,.9,.64,.48,.13,.05,.44,.22,.5,.18,.65,.13,.45,.78,.16,.25,.76,.92,.63,.84,.15,.38,.22,.98,.27,.53,.01,.16,.79,.62,.27,.06,.41,.53,.94,.26,.03,.87,.42,.24,.6,.35,.21,.83,.56,.04,.78,.7,.97,.07,.37,.11,.53,.65,.08,.85,.5,.12,.8,.01,.87,.41,.75,.63,.01,.56,.77,.36,.45,.8,.04,.69,.14,.95,.44,.83,.16,.53,.67,.24,.99,.61,.41,.23,.12,.38,.78,.21,.3,.92,.11,.8,.27,.72,.37,.45,.04,.73,.87,.16,.6,.51,.34,.56,.02,.76,.12,.69,0,.63,1,.42,.77,.24,.56,.02,.46,.84,.27,.69,.07,.23,.84,.48,.76,.68,.85,.94,.53,.16,.31,.38,.98,.6,.67,.76,.96,.08,.88,.38,.95,.67,.56,.87,.06,.2,.52,.11,.77,.47,.55,.69,.09,.91,.39,.48,.24,.13,.45,.91,.19,.84,.75,.48,.78,.55,.66,.75,.02,.44,.65,.96,.16,.91,.34,.45,.19,.84,.7,.78,.41,.28,.93,.42,.74,.24,.91,.6,.68,.31,.84,.95,.48,.29,.86,.94,.61,.29,.41,.72,.87,.2,.58,.77,.3,.05,.88,.44,.35,.19,.77,.96,.49,.91,.62,.53,.7,.38,.58,.31,.95,.06,.16,.65,.93,.21,.42,.67,.95,.21,.89,.46,.97,.27,.49,.95,.88,.17,.51,.36,.84,.16,.31,.7,.96,.2,.75,.42,.15,.98,.55,.01,.31,.22,.42,.6,.25,.76,.44,.89,.23,.55,.16,.33,.85,.28,.71,.59,.03,.3,.09,.63,.34,.58,.7,.23,.96,0,.33,.82,.18,.74,.31,.87,.98,.56,.77,.7,.58,.06,.3,.12,.98,.19,.13,.95,.31,.8,.09,.49,.39,.76,.08,.55,.28,.62,.46,1,.13,.84,.57,.03,.64,.34,.52,.09,.22,.46,.16,.07,.24,.66,.18,.12,.7,.21,.99,.07,.34,.62,.04,.73,.38,.94,.62,.81,.09,.69,.07,.66,.27,0,.83,.09,.99,.66,.05,.19,.75,.61,.5,.78,.31,.56,.08,.48,.33,.82,.12,.71,.16,.86,.2,.36,.55,.45,.28,.69,.09,.61,.94,.78,.37,.53,.05,.9,.57,.71,.36,.88,.63,.09,.48,.82,.02,.72,.67,.11,.74,.84,.4,0,.62,.47,.36,.2,.82,.49,.92,.41,.82,1,.45,.31,.88,.66,.14,.94,.45,.58,.64,.07,.69,.37,.02,.33,.96,.43,.67,.56,.35,.4,.84,.5,.56,.71,.9,.26,.67,.23,.64,.82,.93,.04,.23,.34,.07,.49,.31,.96,.17,.83,.39,.73,.99,.8,.36,.55,.92,.73,.44,.53,.02,.85,.56,.47,.79,.26,.97,.49,.22,.12,.57,.28,.38,.87,.53,.84,.44,.57,.35,.24,.14,.77,.47,.91,.41,.25,1,.35,.13,.73,.96,.61,0,.73,.24,.59,.42,.62,.75,.08,.82,.1,.74,.96,.01,.5,.42,.17,.09,.3,.63,.45,.81,.28,.11,.44,.77,1,.71,.36,.18,.96,.49,.03,.29,.93,.52,.7,.89,.13,.54,.99,.76,.13,.69,.25,.17,0,.77,.09,.59,.55,.42,.71,.24,.05,.93,.19,.44,.82,.14,.51,.23,.82,.16,.91,.61,.04,.7,.24,.05,.17,.34,.55,.03,.98,.5,.13,.39,.71,.57,.91,.64,.75,.21,.7,.11,.45,.92,.26,.04,.51,.63,.87,.02,.33,.8,.93,.39,.31,.65,.15,.43,.87,.11,.67,.35,.85,.72,.01,.95,.45,.31,.13,.19,.75,.68,.86,.44,.26,.58,.86,.09,.55,.83,.02,.88,.53,.38,.16,.9,.53,.37,.95,.09,.3,.55,.67,.33,.23,.86,.4,.62,.25,.85,.58,.66,.98,.86,.12,.19,.66,.94,.2,.53,.16,.06,.58,.87,.33,.54,.86,.36,.17,.11,.45,.23,.79,.07,.42,.27,.48,.36,.88,.55,.66,.4,.22,.84,.18,.29,.87,.5,.33,.78,.51,.27,.95,.62,.88,.09,.4,.77,.27,.47,.8,.91,.32,.64,.98,.41,.84,.78,.42,.31,.88,.1,.77,.43,.18,.85,.55,.39,.88,.78,.56,.15,.64,.3,.75,.18,.69,.42,.21,.6,.15,.74,.25,.89,.05,.71,.3,.56,.92,.44,.78,.2,.5,.69,.22,.64,1,.38,.93,.05,.53,.95,.35,.02,.69,.33,.15,.67,.45,.27,.81,.23,.84,.31,.66,.05,.83,.49,.89,.01,.44,1,.6,.48,.14,.91,.32,.74,.03,.45,.24,.72,.35,.41,.51,.04,.74,.33,.84,.27,.75,.44,.24,.16,.61,.76,.64,.99,.75,.31,.94,.65,.85,.05,.64,.96,.07,.32,.57,.92,.49,.92,.7,.05,.99,.11,.6,.88,.04,.72,.11,.47,.75,.64,.53,0,.71,.22,.08,.53,.43,.76,.5,.13,.61,.06,.18,.58,.67,.25,.53,.3,.81,.02,.11,.43,.29,.04,.34,.85,.6,.44,.91,.12,.27,.5,.99,.06,.69,.45,.52,.94,.61,.79,.39,.19,.01,.61,.07,.39,.96,.16,.76,.04,.6,.78,.28,.49,.11,.64,.21,.8,.5,.96,.39,.77,.62,.08,.42,.68,.11,.49,.42,.78,.19,.71,.23,.93,.8,.18,.7,.05,.55,.77,.2,.95,.36,.82,.49,.02,.94,.57,.88,.84,.59,.41,.93,.5,.63,.02,.8,.89,.39,.47,.28,.55,.03,.6,.38,.16,.54,.31,.72,.19,.79,.84,.27,.75,.06,.34,.81,.56,.37,.75,.19,.45,.39,.85,.59,.22,.36,.27,.94,.34,.97,.59,.86,.17,.97,.03,.22,.88,.29,.7,.95,.82,.34,.92,.06,.97,.49,.34,.93,.77,.64,.96,.51,.21,.82,.02,.99,.35,.56,.88,.76,.36,.27,.87,0,.35,.12,.22,.67,1,.81,.26,.65,.89,.29,.53,.36,.86,.45,.08,.22,.67,.83,.4,.73,.91,.23,.12,.58,.89,.2,1,.55,.76,.94,.59,.15,1,.63,.35,.57,.13,.28,.41,.87,.24,.35,.69,.07,.5,.11,.89,.6,.21,.7,.08,.3,.15,.26,.04,.67,.13,.39,.98,.7,.09,.67,.05,.89,.15,.84,.48,.71,.12,.77,.95,.57,.03,.44,.58,.12,.17,.43,.63,.11,.22,.66,.31,.94,.69,.24,.33,.95,.05,.78,.13,.85,.18,.49,.42,.3,.66,.37,.59,.78,.68,.36,.52,.24,.03,.45,.15,.59,.65,.21,.7,.59,.15,.23,.67,.08,.36,.7,.23,.47,.63,.73,.04,.17,.53,.64,.8,.19,.44,.83,.57,.46,.32,.5,.75,.11,.47,.8,.03,.7,.25,.91,.51,.73,.97,.33,.05,.56,.08,.42,.78,.27,.02,.49,.3,.14,.33,.03,.88,.25,.32,0,.45,.75,.64,.51,.09,.64,.96,.45,.84,.6,.42,.66,.16,.28,.78,.43,.84,.64,.47,.73,.96,.22,.83,.29,.17,.52,.34,.22,.96,.31,.78,.36,.22,.96,.28,.44,.22,.67,.4,.98,.48,.67,.86,.97,.51,.86,.95,.45,.55,.08,.79,.15,.55,.67,.5,.91,.59,.45,.66,.09,.81,.73,.13,.84,.27,.08,.46,.91,.12,.64,.55,.75,.83,.4,.87,.27,.08,.96,.33,.83,.43,.91,.78,.14,.52,.84,.09,.22,.43,.84,.97,.09,.31,.73,.99,.66,.03,.87,.08,.16,.95,.35,.22,.58,.78,.42,.19,.65,.33,.16,.42,.58,.18,.95,.35,.66,.62,.85,.36,.75,.92,.84,.64,.47,.38,.74,.55,.89,.81,.16,.98,.38,.78,.57,.11,.31,.19,.87,.25,.98,.73,.39,.55,.11,.99,.18,.38,.89,.53,.45,.76,.58,.87,.46,.78,.58,.73,.5,.42,.67,.08,.63,.87,.5,.09,.91,.14,.29,.21,.36,.77,.24,.3,.74,.15,.03,.83,.27,.63,.99,0,.41,.26,.73,.04,.25,.56,.9,0,.22,.55,.48,.94,.64,.33,.17,.83,.4,.99,.21,.33,.11,.73,.53,.43,.78,.48,.09,.55,.31,.59,.95,.31,.75,.4,.92,.67,.33,.24,.43,.61,.53,.15,.41,.28,.94,.71,.61,.38,.83,.7,.09,.98,.51,.11,.94,.8,.03,.87,.27,.75,.86,.48,.15,.99,.07,.44,.68,.11,.56,.22,.86,.18,.64,.8,.08,.39,.27,.05,.84,.23,.91,.73,.5,.01,.76,.33,.09,.46,.02,.91,.27,.49,.73,.01,.56,.09,.31,.7,.02,.24,.1,.93,.39,.01,.62,.11,.89,.55,.73,.02,.81,.35,.77,.62,.83,.73,.01,.55,.06,.38,.48,.67,.35,.89,.42,.49,.33,.77,.88,.18,.46,.98,.38,.76,.29,.63,1,.4,.76,.2,.01,.98,.58,.77,.05,.3,.68,.5,0,.94,.19,.65,.05,.88,.37,.73,0,.18,.47,.07,.65,.27,.86,.13,.51,.71,.87,.03,.92,.24,.77,.49,.34,.2,.78,.02,.49,.91,.16,.32,.75,.59,.28,.39,.55,.95,.65,.46,0,.7,.31,.23,.8,.2,.53,.25,.39,0,.51,.95,.11,.22,.5,.94,.62,.69,.47,.33,.16,.41,.96,.64,.54,.91,.59,.8,.69,.87,.62,.31,.67,.8,.28,.85,.15,.48,1,.6,.66,.29,.15,.86,.2,.99,.27,.33,.16,.4,.66,.19,.58,.07,.54,.94,.45,.63,.81,.59,.04,.25,.57,.76,.08,.18,.59,.8,.09,.29,.64,.81,.15,.53,.86,.45,.32,.05,.89,.66,.42,.72,.24,.48,.35,.88,.61,.81,.45,.58,.84,.36,.25,.63,.22,.99,.66,.84,.36,.91,.56,.15,.45,.59,.02,.79,.2,.47,.37,.82,.59,.06,.86,.44,.56,.31,.53,.25,.62,.44,.01,.82,.2,.69,.48,.09,.37,.21,.82,.42,.9,.58,.45,.93,.64,.87,.98,.75,.7,.29,.44,.58,.31,.72,.18,.55,.88,0,.61,.27,.82,.19,.38,.13,.27,.45,.19,.34,.15,.08,.4,.96,.23,.64,.91,.41,.2,.81,.42,.92,.75,.49,.35,.75,.52,.45,.89,.96,.29,.45,.94,.24,.33,.13,.27,.99,.19,.9,.79,.96,.22,.71,.86,.94,.24,.45,.69,.91,.58,.33,.07,.69,.18,.12,.71,.59,.14,.52,.3,.83,.15,.86,.62,.09,.16,.97,.23,.29,.91,.12,.78,.94,.44,.15,.53,.8,.24,.72,.05,.96,.81,.29,.37,1,.64,.27,.07,.69,.15,.97,.64,.11,.8,.98,.07,.88,.73,.37,.89,.55,1,.06,.77,.15,.88,.55,.07,.63,.11,.34,.75,.05,.33,.12,.46,.36,.05,.62,.82,.97,.03,.87,.11,.28,.42,.78,.93,.7,.06,.45,.67,.9,.63,.07,.97,.53,.77,.92,.48,.12,.36,.53,.8,.04,.7,.34,.06,.53,.23,.66,.59,.08,.82,.69,.05,.55,.09,.86,.69,.43,.78,.86,.7,.38,.14,.33,.63,.52,.4,.13,.31,.67,.04,.39,.52,.21,.02,.75,.92,.61,.42,.95,.8,.25,.86,.34,.94,.05,.45,.69,.22,.75,.44,.38,.71,.05,.66,.46,.53,.7,.03,.57,.29,.11,.61,.42,.52,.19,.69,.92,.07,.55,.85,.41,.95,.79,.45,.3,.4,.24,.69,.15,.42,.79,.2,.11,.67,.14,.28,.42,.61,.31,.69,.98,.3,.76,.94,.52,.85,.09,.59,.7,.19,.57,.91,.23,.15,.75,.37,.47,.79,.99,.62,.09,.5,.36,.56,.86,.01,.25,.75,.39,.81,.65,.22,.58,.87,.72,.02,.62,.44,.28,.92,.5,.12,.85,.33,.04,.94,.4,.14,.23,.6,.8,.24,.73,.02,.16,.6,.5,.04,.55,.72,.44,.07,.86,0,.6,.47,.54,.84,.95,.14,.86,.41,.48,.24,.29,.54,.01,.65,.48,.09,.74,.2,.61,.37,1,.31,.91,.55,.06,.86,.58,.4,.21,.09,.31,.82,.4,.87,.49,.93,.76,.33,.11,.44,.64,.22,.14,.73,.32,.12,.58,.5,.01,.86,.93,.51,.36,.6,.3,.56,.95,.34,.48,.85,.73,.92,.24,.81,.41,.57,.15,.22,.68,.27,.41,.78,.95,.29,.84,.68,.49,.41,.09,.65,.58,.24,.05,.38,.84,.23,.13,.97,.3,.77,.51,.96,.31,.1,.46,.03,.39,.29,.18,.82,.97,.3,.17,.67,.76,.6,.99,.44,.8,.26,.89,.31,.73,.38,.92,.34,.52,.39,.99,.3,.91,.23,.67,.94,.28,.17,.73,.36,1,.77,.27,.07,.75,.28,.61,.99,.8,.11,.84,.91,.36,.22,.98,.38,.68,.56,.78,.11,.53,0,.66,.25,.76,.17,.49,.99,.81,.89,.6,.25,.95,.75,.05,.17,.27,.84,.56,.88,.35,.84,.45,.52,.62,.2,.86,.27,.73,.59,.17,.75,.05,.92,.71,.09,.51,.75,.63,.09,.36,.02,.5,.13,.04,.49,.87,.38,.02,.99,.54,.23,.5,.39,.02,.13,.8,.27,.9,.51,.19,.85,.69,.54,.17,.76,.64,.43,.6,.18,.45,.13,.58,.91,.27,.8,.99,.67,.51,.72,.08,.88,.56,.08,.39,.28,.2,.7,.09,.56,.64,.51,1,.08,.48,.13,.63,.87,.54,.09,.8,.35,.1,.58,.81,.48,.92,.57,.22,.15,.9,.42,.48,.68,.09,.36,.17,.64,.58,.73,.16,.78,.55,.29,.03,.93,.27,.85,.72,.17,.81,.45,.92,.31,.64,0,.28,.72,.16,.53,.08,.36,.69,.59,1,.01,.49,.16,.76,.06,.27,.95,.02,.99,.68,.36,.11,.67,.08,.47,.81,.26,.44,.86,.02,.25,.91,.19,.56,.84,.65,.95,.73,.31,.8,.62,.45,.72,.16,.87,.09,.76,.61,.99,.34,.71,.95,.03,.73,.3,.42,.94,.58,.88,.33,.09,.94,.85,.34,.66,.87,.18,.72,.62,.16,.08,.42,.24,.34,.47,.69,.85,.96,.02,.5,.89,.36,.17,.75,.01,.82,.2,.67,.96,.04,.75,.27,.15,.63,.47,.89,.39,.23,.65,.35,.83,.04,.66,.79,.32,.18,.55,.77,.25,.53,.39,.05,.33,.45,.09,.62,.89,.48,.14,.44,.33,.95,.41,.6,.35,.11,.7,.22,.84,.38,.47,.44,.66,.82,.22,.45,.54,.38,.86,.69,.28,.95,.55,.68,.81,.39,.16,.77,.42,.91,.84,.42,.32,.64,.13,.19,.98,.61,.39,.8,.69,.3,.46,.26,.37,.6,.22,.95,.05,.31,.89,.59,.36,.66,.88,.43,.22,.56,.45,.17,.61,.34,.91,.12,.07,.24,.47,.8,.56,.05,.69,.23,.06,.53,.4,.48,.36,.84,.56,.91,.64,.97,.13,.2,.43,.24,.79,.62,.72,.4,.97,.47,.24,.58,.42,.3,.81,.22,.45,.69,.36,.84,.71,.15,1,.02,.52,.11,.29,.43,.49,.11,.61,.95,.86,.01,.92,.71,.88,.97,.27,.69,.93,.84,.17,.35,.78,.65,.05,.51,.14,.88,.04,.73,.96,.43,.58,.13,.96,.04,.86,.31,.94,.14,.77,.23,.09,.64,.2,.47,.37,.12,.6,.31,.49,.09,.56,.3,.22,.52,.97,.87,.56,.74,.38,.28,.12,.53,.98,.14,.75,.09,.87,.17,.55,.69,.12,.52,.8,.19,.05,.29,.51,.15,.73,.03,.86,.38,.11,.8,.47,.66,.77,.41,.01,.71,.18,.27,.49,.79,1,.75,.25,0,.95,.2,.76,.33,.03,.8,.59,.75,.55,.34,.89,.15,.55,.22,.07,.78,.33,.94,.72,.59,.35,.55,.85,.03,.98,.5,.05,.31,.6,.76,.18,.69,.88,.75,.97,.24,.71,.37,.14,.43,.32,.6,.12,.22,.75,.5,.02,.24,.44,.7,.56,.89,.21,.69,.76,.28,.62,.22,.53,.07,.82,.67,.25,.75,.59,.4,.49,.91,.72,.32,.42,.94,.8,.02,.91,.71,.2,.84,.91,.63,.03,1,.8,.06,.16,.72,.01,.48,.78,.66,.89,.43,.03,.36,.93,.67,.81,.01,.44,.92,.24,.65,.4,.47,.74,.96,.23,.8,.92,.32,.65,.25,.58,.97,.19,.28,.61,.86,.99,.36,.61,.94,.41,.58,.31,.15,.95,.68,.44,.09,.48,.72,.16,.4,.29,.91,.03,.67,.47,.07,.3,.91,.68,.6,.85,.12,.05,.77,.08,.93,.29,.13,.57,.2,.75,.26,.44,.85,.95,.41,.63,.15,.55,.84,.04,.46,.75,.53,.83,.05,.47,.56,.82,.36,.59,.75,.13,.95,.08,.28,.85,.55,.08,.99,.48,.88,.37,.75,.3,.91,.2,.36,.07,.64,.17,.01,.62,.85,.55,.15,.58,.34,.85,.44,.07,.55,.26,.73,.38,.6,.45,.67,.37,.27,.43,.1,.94,.19,.07,.73,.63,.21,.53,.58,.3,.48,.77,.37,.84,.15,.96,.08,.89,.69,.37,.57,.07,.48,.78,.88,.7,.43,.05,.94,.55,.14,.22,.5,.76,.11,.88,.04,.46,.64,.53,.82,.29,.61,.91,.24,.84,.52,.65,.11,.95,.19,.56,.99,.83,.42,.02,.52,.19,.39,.51,.84,.15,.47,.62,.8,.42,.89,.65,.95,.37,.08,.22,.48,.01,.27,.36,.19,.64,.28,1,.18,.24,.67,.96,.36,.06,.16,.97,.31,.52,.78,.38,.48,.16,.4,.83,.36,.19,.65,.12,.18,.45,.61,.5,.95,.82,.23,.78,.45,.27,.05,.96,.39,.69,.23,.53,.17,.77,.98,.36,.14,.84,.2,.12,.73,.58,.99,.81,.62,.32,.24,.56,.81,.27,.87,.41,.05,.92,.25,.62,.08,.76,.56,.33,.62,.42,0,.16,.63,.39,.97,.19,.16,.03,.53,.33,.74,.39,.69,.09,.84,.44,.17,.67,.73,.2,.36,.09,.89,.16,.69,.37,.06,.58,.97,.24,.36,.8,.4,.26,.77,.36,.16,.75,.31,.98,.65,.27,.97,.41,.68,.25,.73,.32,.12,.51,.02,.72,.58,.88,.82,.67,.93,.42,.91,.8,.11,.58,.89,.38,.76,.31,.71,.92,.64,.44,.84,.2,.62,.02,.99,.72,.64,.45,.03,.71,.8,.6,1,.02,.72,.09,.42,.71,.32,.98,.88,.37,.73,.18,.51,.77,.03,1,.62,.41,0,.67,.47,.94,.52,.32,.89,.48,.23,.14,.89,.52,.78,.39,1,.49,.12,.77,.18,.68,.13,1,.2,.52,.05,.27,.78,.22,.54,.82,.92,.11,.27,.53,.37,.77,.89,.24,.85,.03,.47,.31,.96,.57,.25,.34,.97,.85,.27,.76,.59,.03,.5,.99,.74,.44,0,.73,.47,.6,.71,.01,.49,.66,.59,.25,.88,.45,.1,.71,.21,.55,0,.9,.09,1,.48,.18,.82,.63,.29,.34,.11,.53,.75,.05,.7,.49,.33,.69,0,.84,.44,.09,.19,.5,.27,.04,.69,.15,.5,.66,.33,.24,.12,.91,.56,.26,.42,.91,.51,.3,.38,.89,.16,.54,.02,.41,.58,.66,.11,.81,.28,.88,.13,.66,.82,.29,.87,.57,.09,.77,.26,.03,.93,.09,.41,.66,.02,.47,.67,.05,.16,.31,.72,.96,.61,.36,.84,.55,.42,.67,.93,.89,.7,.13,1,.35,.47,.68,.75,.6,.94,.45,.63,.16,.58,.78,.9,.63,.73,.03,.81,.53,.59,.03,.49,.98,.41,.23,.8,.34,.16,.82,.2,.93,.3,.14,.86,.95,.21,.11,.94,.78,.06,.55,.81,.36,.9,.74,.37,.83,.28,.59,.69,.25,.92,.4,.17,.65,1,.18,.59,.29,.14,.58,.97,.27,.51,.15,.58,.95,.63,.41,.88,.77,.34,.92,.42,.81,.88,.59,.79,.31,.96,.15,.06,.35,.23,.86,.67,.78,.25,.63,.84,.11,.21,.51,.97,.59,.44,.2,.38,.48,.34,.13,.52,.2,.89,.39,.63,.7,.55,.18,.73,.86,.3,.96,.21,.89,.44,.64,.55,.02,.47,.25,.73,.05,.8,.35,.18,.47,.38,.51,.74,.27,.07,.86,.31,.02,.83,.09,.28,.98,.11,.41,.19,.26,.13,.39,.89,.22,.42,.12,.67,.32,.72,.11,.91,.64,.27,.38,.66,.51,.8,.05,.34,.45,.55,.85,.33,.4,.17,.7,.59,.13,.09,.63,.16,.51,.42,.03,.76,.39,.52,.05,.78,.45,.23,.39,.85,.47,.22,.87,.09,.36,.77,.71,.33,.01,.8,.55,.11,.58,1,.05,.27,.19,.09,.52,.05,.69,.47,.82,.71,.63,.75,.56,.04,.21,.99,.47,.31,.75,.8,.27,.33,0,.72,.91,.56,.93,.05,.74,.96,.3,.72,.07,.36,.97,.42,.8,.35,.59,.51,.13,.35,.6,.81,.08,.25,.83,.33,.9,.51,.29,.1,.88,.59,.03,.84,.07,.62,.42,.78,.15,.53,.24,.39,.67,.48,.71,.36,.67,.53,.87,.5,.67,.09,.62,.93,.8,.87,.2,.62,.47,.84,.53,.07,.59,.88,.12,.27,.58,.93,.67,.27,.03,.7,.48,.91,.28,.96,.42,.49,.31,.97,.78,.64,.22,.85,.12,.97,.71,.53,.87,.73,.04,.92,.67,.78,.42,.63,.2,.91,.44,1,.22,.76,.34,.25,.16,.45,.63,.55,.75,.36,.95,.42,.22,.36,.89,.52,.07,.95,.13,.47,.36,.58,.07,.9,.68,.05,.91,.42,.15,.64,.08,.78,.19,.69,.6,.4,.8,.53,.17,.83,.22,.05,.64,.27,.98,.07,.73,.78,.52,.93,.31,.75,.96,.17,.11,.64,.97,.4,.71,.25,.66,.31,.95,.22,.92,.55,.64,.98,.77,.9,.17,.03,.83,.24,.94,.02,.79,.34,1,.77,.29,.07,.36,.55,.09,.9,.36,0,.21,.79,.44,.94,.36,.72,.64,.41,.15,.78,.89,.57,.12,.63,.02,.23,.77,.88,.7,.25,.1,.94,.34,.56,.65,.31,.22,.08,.32,.63,.13,.55,.28,0,.95,.73,.51,.05,.27,.66,.47,.09,.94,.65,.73,.83,.31,.92,.69,.12,.84,.63,.73,.09,.25,.39,.2,.44,.3,.91,.82,.75,.16,.45,.37,.61,.53,.75,.87,.5,.33,.28,.42,.84,.23,.12,.03,.45,.93,.59,.5,.88,.11,.55,.16,.83,.41,.25,.16,.02,.38,.59,.49,.68,.42,.8,.56,.19,.77,.97,.53,.16,.77,.48,.02,.31,.38,.12,.44,.59,.34,.96,.58,.47,.74,.11,.6,.22,.45,.16,.58,.71,.25,.45,.77,.28,.56,.74,1,.69,.33,.03,.17,.47,.99,.2,.09,.51,.36,.22,.76,.86,.51,.37,.66,.2,.03,.45,.37,.68,.06,.89,.46,.4,.8,.93,.49,.69,.19,.8,.36,.49,.16,.34,.82,.61,.12,.86,.56,.38,.9,.49,.03,.38,.09,.2,.57,.47,.27,.15,.92,.57,1,.76,.6,.84,.7,.64,.08,.32,.55,.97,.22,.14,.28,1,.2,.67,.83,.98,0,.55,.48,.88,.64,.27,.76,.13,.32,.4,.71,.89,.47,.68,.57,.97,.66,.84,.71,.12,.22,.86,.01,.28,.33,.14,.49,.08,.44,.87,.36,.59,.82,.71,.95,.05,.25,.62,.12,.78,.22,.13,.42,.31,.71,.86,.04,.39,.9,.48,.97,.64,.05,.95,.18,.42,.28,.14,.86,.63,.76,.84,.01,.87,.76,.65,.97,.05,.44,.31,1,.1,.83,.56,.91,.59,.84,.55,.27,.16,.75,0,.58,.15,.37,.91,.42,.98,.65,.87,.58,.1,.42,.98,.35,.76,.18,.69,.14,.31,.6,.95,.78,.42,0,.99,.81,.3,.49,.04,.45,.15,.3,.02,.49,.23,.4,.69,.85,0,.67,.83,.48,.08,.39,.11,.45,.58,.15,.79,.34,.71,1,.38,.2,.67,.96,.78,.27,.2,.37,0,.29,.09,.34,.55,.45,1,.36,.6,.76,.92,.69,.88,.64,.37,.81,.21,.69,.11,.4,.18,.5,.67,.86,.74,.5,.36,.69,.87,.65,.98,.18,.52,.95,.66,.8,.2,.11,.83,.33,.69,.5,.86,.65,.55,.39,.23,.5,.27,.39,.55,.33,.25,.47,.82,.2,.61,.71,.16,.3,.73,.34,.14,.2,.76,.99,.62,.25,.95,.67,.27,.05,.78,.09,.3,.05,.24,.7,.92,.22,.69,.49,.03,.31,.8,.44,.85,.2,.71,.51,.87,.34,.67,.07,.4,.87,.71,.82,.67,.95,.55,.78,.12,1,.19,.49,.78,.28,.94,.73,.56,.8,.25,.36,.73,.66,.91,.29,.17,.04,.81,.58,.08,.46,.03,.55,.87,.75,.95,.8,.5,.86,.2,.04,.78,.31,.08,.51,.18,.44,.84,.03,.27,.67,.05,1,.26,.9,.86,.34,.22,.97,.42,.06,.92,.27,.02,.77,.49,.26,.57,.1,.3,0,.59,.27,.41,.54,.21,.82,.11,.02,.48,.78,.92,.07,.61,.7,.11,.92,.59,.15,.72,.9,.05,.58,.48,.42,.06,.97,.64,.44,.02,.37,.51,.83,.13,.54,.83,.22,.56,.63,.75,.46,.81,.55,.4,.13,.85,.25,.92,.62,.95,.08,.56,.36,.12,.25,.59,.17,.75,.53,.61,.12,.37,.29,.22,.07,.88,.35,.58,.89,.03,.56,.38,.11,.45,.33,.03,.64,.95,.84,.03,.21,.42,.06,.61,.52,.43,.87,.33,.89,.64,.14,.42,.09,.6,.2,.4,.74,.92,.28,.64,.83,.91,.39,.13,.59,.25,.53,.93,.79,.57,.45,.51,.65,.08,.61,.57,.16,.29,.82,.16,.55,.61,.35,.06,.84,.42,.69,.34,.76,.52,.85,.91,.02,.75,.38,.6,.31,.95,.11,.67,.35,.97,.45,.19,.85,.03,.38,.55,.28,.35,.94,.75,.89,.25,.49,.8,.31,.91,.71,.06,.42,.35,.74,.45,.86,.97,.52,.19,.14,.98,.31,.05,.77,.47,.57,.06,.41,.51,.25,.91,.64,.8,.08,.45,.94,.84,.24,.93,.2,.96,.52,.59,.41,.18,.46,.27,.75,.65,.31,.95,.62,.18,.75,.89,.48,.15,.53,.31,.95,.56,.76,.94,.7,.13,.23,.73,.53,.25,.97,.69,.31,.51,.65,.16,.05,.59,.53,.13,.22,.67,.56,.79,.99,.09,.75,.17,.39,.12,.33,.77,.03,.73,.4,.8,.01,.72,.47,.67,1,.45,.89,.16,.76,.92,.2,.82,.95,.45,.09,.67,.47,.97,.25,.89,.73,.19,.43,.74,.17,.86,.24,.73,.49,.77,1,.65,.08,.79,.23,.14,.62,0,.59,.73,.09,.23,.55,.87,.18,.59,.93,.13,.4,.33,.28,.69,.41,.84,.63,.25,.95,.67,.35,.75,.2,.67,.76,0,.48,.99,.73,.3,.14,.37,.05,.47,.78,.65,0,.76,.95,.72,.84,.09,.51,.43,.14,.87,.52,.81,.22,.31,.11,.42,.76,.63,.09,.49,.24,.35,.78,.29,.94,.04,.8,.38,.19,.75,.88,.11,.98,.78,.38,.69,.97,.43,.47,.03,.34,.27,.66,.44,.32,.48,.7,.89,.2,.96,.44,.23,.92,.44,.88,.64,.35,.24,.12,.7,.21,.53,.38,.03,.64,.47,.16,.25,.71,.31,.18,.59,.14,.45,.53,.84,.29,.57,.01,.52,.64,.09,.37,.28,.21,.88,.44,.51,.69,.38,.84,.95,.34,.16,.85,.64,.47,.76,.96,.3,.64,.02,.77,.07,.82,.95,.01,.57,.18,.73,.43,.09,.16,.99,.84,.12,.37,.32,.18,.41,.87,.52,.7,.64,.56,.27,.41,.1,.33,.85,.48,.04,.63,.2,.97,.8,.25,.7,.01,.47,.99,.68,.58,.89,.24,.39,.78,.87,.13,.4,0,.55,.64,.45,.11,.6,.48,.03,.54,.34,.44,.27,.87,.31,0,.82,.75,.94,.88,.2,.78,.02,.92,.85,.08,.59,.82,.1,.67,.29,.11,.51,.19,.09,.95,.78,.4,.07,.81,.95,.68,.31,.55,.07,.88,.37,.55,.09,.78,.85,.41,.07,.69,.05,1,.39,.79,.31,.81,.92,.69,.58,.12,.63,.16,.95,.05,.29,.47,.18,.53,.42,.98,.37,.13,.32,.07,.22,.49,.71,.17,.56,.65,.46,.35,.89,.08,.51,.87,.81,.54,.29,.47,.92,.59,.87,.67,.56,.04,.22,.94,.09,.82,.98,.72,.89,.58,.15,.26,.31,.55,.89,.35,.04,.59,.93,.38,.09,.56,.36,.02,.72,.96,.05,.69,.19,.98,.58,.82,.89,.2,.73,.31,.92,.85,.28,.95,.22,.81,.64,.09,.55,.18,.36,.26,.6,.13,.72,.47,.55,.63,.22,.28,.52,.35,.72,.53,.88,.59,.98,.69,.29,.55,.89,.52,.31,.61,.46,.25,.12,1,.75,.27,.67,.89,.99,.52,.3,.64,.93,.32,.2,.61,.89,.47,.23,.13,.42,.05,.86,.75,.41,.32,.72,.91,.59,.75,.11,.69,.78,.27,.02,.51,.73,.8,.57,.92,.45,.28,1,.11,.22,.78,.28,.67,.39,.24,0,.36,.65,.09,.53,.04,.8,.27,.17,.62,.34,.77,.42,.31,.15,.66,.2,.45,.98,.7,.39,.77,.13,.67,.47,.16,.33,.67,.28,.76,.84,.2,.48,.14,.56,.35,.51,.67,.29,.47,.09,.38,1,.56,.05,.64,.42,.7,.58,.05,.71,.5,.93,.77,.64,.11,.53,.4,.05,.95,.36,.14,.69,.99,.41,0,.47,.17,.79,.02,.35,.75,.44,.14,.02,.73,.2,.85,.09,.76,.91,.4,.49,.79,.02,.45,.34,.19,0,.72,.88,.48,.77,.26,.08,.71,.59,.99,.55,.27,.49,.94,0,.81,.27,.56,.16,.81,.24,.91,.08,.62,.84,.93,.68,.43,.06,.37,.84,.23,.87,.44,.73,.53,.16,1,.76,.6,.95,.71,.83,.24,.73,.33,.45,.92,.71,.82,.48,.1,.92,.55,0,.5,.34,.06,.78,.53,.03,.95,.43,.28,.95,.55,.78,.89,.61,.17,.43,.94,.33,.81,.22,.45,.91,.09,.74,.16,.69,.26,.83,.51,.15,.23,.78,.14,.36,.89,.16,.41,.22,.88,.44,1,.84,.67,.25,.85,.29,.79,.44,.16,.77,.86,.96,.27,.39,.83,.05,.25,.84,.5,.63,.98,.36,.64,.42,.58,.19,.68,.34,.22,.62,.16,.76,.68,.42,.25,.56,.13,.37,.53,.92,.05,.36,.84,.72,.17,.35,.56,.2,.64,.49,.08,.35,.99,.41,.47,.31,.67,.21,.33,.15,.27,.98,.12,.64,.03,.58,.37,.05,.91,.64,.44,.11,.33,.18,.48,.42,.15,.99,.17,.51,.09,.39,1,.27,.2,.73,.61,.27,.95,.84,.64,.28,.9,.66,.15,.84,.6,.73,.04,.22,.13,.5,.97,.08,.52,.67,.61,.86,.73,.03,.4,.84,.94,.63,.42,.05,.76,.3,.87,.53,.02,.47,.99,.3,.69,.03,.57,.29,.07,.33,.16,.5,.73,.07,.58,.89,.09,.64,.3,.58,.15,.67,.45,.56,.64,.94,.31,.7,.25,.13,.93,0,.29,.84,.04,.94,.11,.86,.56,.95,.09,.89,.8,.04,.97,.67,.82,.3,.42,.65,.23,.02,.8,.91,.7,.12,.76,.87,.42,.71,.64,.03,.57,.87,.44,.11,.56,.48,.85,.63,.75,.51,.8,.93,.7,.31,.83,.25,.06,.8,.55,.84,.04,.91,.56,.77,.67,.86,.22,.02,.56,.67,.06,.39,.84,.69,.12,.77,.41,.09,.21,.35,.49,.24,.09,.4,.86,.47,.33,.81,.6,.25,.79,.04,.37,.09,.98,.3,.57,.23,.33,.54,.14,.92,.63,.38,.96,.6,.74,.82,.25,.55,.8,.73,.13,.48,.69,.78,.91,.63,.44,.2,.93,.35,.7,.23,.52,.07,.75,.91,.33,.97,.09,.16,.78,.09,.4,.55,.8,.51,.73,.39,.62,.53,.79,.27,.38,.3,.61,.51,.35,.28,.58,.21,.07,.73,.19,.87,.5,.41,.63,.3,.45,1,.38,.05,.95,.2,.28,.84,.75,.15,1,.69,.78,.89,.04,.31,.38,.16,.29,.45,.13,.19,.48,.57,.39,.94,.65,.23,.69,.34,.27,.05,.45,.61,.31,.73,.89,.49,.79,.97,.45,.33,.2,.58,.47,.71,.82,.58,.98,.72,.34,.64,.96,.55,.7,.02,.39,.72,.2,.89,.29,.48,.17,.67,.79,.51,.01,.89,.8,.19,.69,.47,.09,.33,.22,.42,.64,.09,.34,.96,.38,.86,.22,.56,.01,.36,.83,.65,.03,.48,.37,.81,1,.41,.84,.2,.6,.27,.71,.38,.58,.84,.45,.89,.22,.33,.96,.1,.23,.45,.99,.7,.49,.06,.8,.16,.45,.72,.91,.4,.49,.96,.56,.11,.68,.94,.11,.58,.06,.23,.54,.3,.8,.45,.53,.1,.23,.36,.3,.01,.39,.22,.72,.47,.93,.7,.05,.55,.91,.66,.77,.85,.17,.31,.45,.75,.09,.6,.92,.4,.15,.95,.83,.44,.13,.35,.16,.22,.03,.53,.92,.04,.96,.31,.14,.41,0,.8,.46,.2,.11,.27,.92,.16,.32,.99,.45,.57,.72,.8,.6,.39,.11,.96,.64,.36,.3,.59,.25,.02,.85,.15,.69,.94,.04,.86,.19,.5,.66,.27,.97,.41,.11,.29,1,.15,.28,.56,.85,.19,.03,.58,.37,.11,.53,0,.87,.48,.23,1,.04,.71,.62,.13,.67,.91,.58,.31,.16,.01,.64,.91,.24,1,.2,.85,.11,.32,.78,.62,.28,.89,.33,.2,.48,.71,.88,.82,.67,.61,.14,.9,.68,.96,.72,.51,.81,.92,.64,.33,.07,.56,.2,.83,.63,.41,.24,.98,.1,.34,.71,.04,1,.36,.88,.44,.82,.69,.2,.55,.05,.67,.29,.65,.87,.58,.68,.85,.37,.65,.23,.87,.62,.69,.93,.14,.58,.89,.67,.42,.78,.61,.86,.65,.12,.34,.94,0,.22,.91,.47,.2,.08,.75,.43,.95,.53,.77,.9,.56,.49,.28,.77,.59,.43,.91,.1,.05,.62,.74,.88,.6,.51,.77,.69,.96,.11,.61,.73,.28,.69,.96,.79,.42,.81,.67,.12,.31,.53,.11,.26,.84,.47,.03,.79,.71,.88,.38,.2,.75,.42,.58,.68,.01,.56,.83,.14,.03,.37,.71,.06,.78,.98,.25,.36,.17,.41,.74,.02,.25,.34,.4,.63,.07,.6,.11,.53,.86,.78,.99,.14,.35,.75,.83,.33,.03,.52,.43,.89,.59,.08,.53,.26,.17,.02,.49,.91,.33,.18,.93,.46,.95,.07,.42,.76,.15,.27,.81,.44,.18,.53,.23,.37,.28,.52,.82,.04,.25,.52,.09,.47,.04,.24,.78,.42,.09,.88,.31,.71,.83,.62,.85,.16,.07,.35,.63,.42,.25,.97,.36,.67,.12,.23,.7,.33,.81,.53,.33,.2,.25,.05,.89,.41,.22,.46,.33,.92,.49,.23,.16,.63,.07,.34,.95,.59,.76,.36,.94,.78,.41,.55,.2,.28,.51,.11,.6,.83,.53,.07,.31,.77,.39,.65,.51,.25,1,.47,.82,.53,.41,.12,.54,.63,.05,.95,.49,.87,.56,.08,.87,.18,.31,.85,.47,.25,.17,.66,.44,.53,.88,.05,.15,.48,.68,.79,.27,.65,.22,.84,.77,.63,.97,.31,.58,.75,.41,.8,.56,.22,.75,.52,.3,.97,.1,.49,.73,.59,.03,.76,.95,.09,.67,.75,.4,.33,1,.73,.35,.79,.94,.55,.67,.17,.51,.63,.56,.06,.36,.28,.48,.69,.99,.83,.12,.19,.71,0,.1,.84,.54,1,.39,.76,.16,.47,.94,.67,.78,.48,.31,.07,.64,.77,.15,.87,.06,.76,.39,.92,.55,.24,.18,.04,.67,.5,.23,.7,.01,.34,.95,.81,.41,.93,.47,.27,.88,.14,.49,.96,.27,.2,.92,.75,.66,.11,.22,.58,.3,.87,.75,.45,.82,.28,.2,.36,.8,.64,.47,.77,.94,.2,.73,.97,.38,.01,.31,.22,.66,.27,.97,.6,.86,.18,.97,.11,.5,.33,.4,.13,.47,.67,.84,.09,.27,.66,.11,.38,0,.82,.2,.56,.4,.89,.05,.98,.32,.39,.82,.44,.2,.92,.09,.16,.58,.89,.2,.26,.4,.86,.32,.98,.83,.38,.78,.17,.99,.53,0,.24,.57,.31,.47,.88,.6,.8,.47,.2,.31,.8,.01,.58,.93,.29,.06,.11,.64,.39,.85,.58,.95,.35,.56,.66,.4,.58,.83,.3,.47,.75,.84,.42,.91,.83,.17,.57,.88,.64,.07,.72,.15,.65,.05,.34,.62,.73,.9,.09,.82,.45,.05,.58,.36,.87,.92,.67,.01,.67,.22,.09,.92,.58,.7,.11,.99,.16,.27,0,.66,.4,.05,.67,.56,.82,.75,.93,.5,.38,.77,.11,.28,.55,.37,.77,.67,.93,.03,.73,.9,.21,.38,.04,.98,.48,.86,.69,.91,.34,.65,.88,.6,.25,.69,.2,.55,.89,.62,0,.56,.85,.63,.49,.69,0,.56,.12,.71,.49,.08,.22,.72,.27,.12,.89,.43,.75,.91,.38,.79,.08,.67,.93,.33,.38,.95,.74,.61,.08,.49,.2,.65,.84,.42,.55,.99,.13,.72,.2,.01,.83,.24,.09,.99,.19,.03,.69,.09,.88,.58,.28,.07,.31,.45,1,.08,.5,.25,.56,.86,.23,.75,.99,.19,.41,.24,.67,.6,.13,.86,.41,.28,.06,.43,.17,.97,.37,.89,.33,.51,.01,.42,.76,.31,.5,.92,.55,.84,.35,.49,.11,.9,.47,.15,.09,.57,.2,.91,.42,.72,.05,.45,.06,.28,.85,.56,.35,.05,.55,.93,.44,.58,.16,.29,.53,.14,.23,.45,.05,.15,.35,.84,.47,.11,.28,.16,.73,.33,.41,.24,.8,.37,.97,.44,.63,.76,.05,.35,.59,.45,.03,.49,.67,.31,.11,.62,.16,.73,.52,.22,.06,.53,.16,.23,.67,.44,.95,.87,.37,.14,.72,.31,.78,.24,.88,.51,.28,.67,.46,.77,.31,.7,.5,.59,.95,.15,.36,.71,.48,.81,.13,.73,.2,.38,.78,.92,.43,.32,.51,.07,.8,.56,.01,.53,.36,.31,.97,.77,.19,.64,.8,.52,.73,.27,.47,.62,.8,.25,.67,.88,.19,.61,.73,.39,.24,.11,.61,.86,.2,.31,.25,.61,.82,.72,.01,.51,.25,.64,.85,.92,.62,.53,.15,.22,.67,.8,.28,.76,.7,.24,.77,.93,.44,.63,1,.78,.71,.95,.45,.77,.66,.95,.78,.69,.51,.99,.13,.91,.28,.07,.8,.33,.92,.18,.97,.81,.66,.94,.84,.58,.94,.2,.8,.47,.9,.34,.97,.84,.3,.69,.56,.86,.04,.36,.16,.26,.56,.98,.52,.19,.59,0,.34,.45,.95,.12,.57,.91,.16,.87,.35,.27,.78,.44,.22,0,.97,.6,.68,.53,.85,.29,.66,.12,.18,.97,.6,.48,.38,.29,.85,.95,.76,.47,.05,.68,.49,.93,.13,.57,.34,.84,.08,.55,.14,.41,.96,.34,.54,.1,.91,.03,.67,.95,.29,.79,.66,1,.54,.4,.95,.31,.66,.81,.98,.35,.08,.22,.79,.41,1,.44,.91,.49,.17,.11,.52,.87,.02,.37,.73,.06,.2,.51,.3,.11,.55,.02,.28,.4,.06,.34,.24,.82,.04,.58,.71,.53,.2,.11,.68,.38,.25,.53,.14,.31,.08,.4,.73,.06,.53,.27,.03,.4,.11,.61,.45,.99,.76,.11,.48,.83,.77,.69,.07,.8,.05,.94,.47,.81,.7,.09,.63,.85,.37,.05,.62,.41,.8,.05,.91,.52,.63,.83,.17,.34,.25,.95,.04,.59,.81,.47,.01,.67,.83,.14,.92,.72,.63,.1,.16,.83,.2,.55,.36,.02,.87,.23,.97,.03,.69,.92,.73,.06,.82,.14,.27,.83,.44,.32,.8,.16,.48,.41,.02,.8,.07,.73,.13,.44,.61,.09,.16,.7,.5,.31,.66,.02,.76,.29,.09,.62,.95,.41,.31,.64,.09,.48,.28,.84,.6,.38,.88,.63,.23,.97,.59,.18,.87,.56,.43,.62,.78,.47,.15,.88,.43,.84,.57,.49,.08,.88,.42,.76,.28,.17,.65,.37,1,.84,.69,.56,.77,.17,.36,0,.25,.41,.92,.55,.31,.47,.61,.38,.35,.64,.27,.89,.55,.22,.78,.34,.49,.73,.22,.47,.12,.57,.65,.32,.75,.93,.41,.06,.87,.41,.15,.34,.9,.53,.35,.75,.28,.2,.44,.07,.26,.42,.58,.91,.65,.29,.83,.3,.7,.42,.64,.2,.38,.31,.22,.51,.63,.7,.59,.97,.19,.63,.51,.91,.08,.56,.23,.35,.62,.18,.29,.9,.36,.49,.27,.78,.42,.96,.55,.15,.87,.69,.36,0,.85,.67,.25,.99,.58,.84,.68,.17,.91,.09,.8,.35,.73,.13,.85,.53,.71,.98,.09,.19,.37,.97,.31,.61,.75,0,.28,.95,.73,.59,.2,.52,.81,.95,.78,.42,.13,.6,.09,.22,.95,.51,.69,.89,.8,.16,.66,.22,.01,.91,.16,.85,.22,.74,.1,.16,.39,.95,.02,.27,.18,1,.85,.69,.97,.18,.4,.04,.13,.25,.53,.73,.66,.78,.48,.2,.71,.26,.99,.1,.58,.89,.66,.97,.51,.78,.34,.03,.43,.11,.96,.61,.17,.47,.81,.51,.89,.66,.44,1,.19,.3,.38,.47,.06,.78,.25,.38,.75,.64,.95,.88,.49,.85,.56,.78,.02,.86,.94,.57,.12,.85,.2,.47,.28,.58,.78,.2,.47,.58,.13,.75,.18,.39,.96,.34,.5,.44,.04,.53,.9,.47,.38,.24,0,.77,.29,.85,.67,.03,.25,.12,.97,.45,.69,.16,.35,.04,.99,.7,.1,.56,0,.25,.51,.76,.33,.88,.64,.28,.08,.6,.47,.33,.64,.99,.38,.69,.25,.94,.45,.58,.85,.49,.66,.6,.75,.89,.55,.64,.03,.31,.33,.88,.71,.49,.96,.61,.45,.08,.31,.58,.1,.91,.62,.05,.84,.42,.52,.34,.02,.73,.16,.88,.29,.99,.75,.51,.77,.39,.06,.91,.1,.59,.05,.77,.11,.56,.87,.01,.92,.75,.14,.87,.56,.01,.84,.31,.16,.42,.69,.05,.96,.24,.67,.41,.18,.64,.05,.73,.34,.64,.93,.09,.51,.98,.29,.8,.06,.89,.45,.01,.55,.12,.75,.7,.27,.18,.69,.05,.62,.81,.34,.47,.16,.5,.93,.55,.8,.65,.36,.51,.24,.79,.84,.65,.46,.25,.35,.46,.89,.71,.92,.2,.45,.39,.04,.82,.91,.22,.53,.85,.07,.73,.09,.58,.51,.73,.02,.37,.99,.3,.06,.35,.45,.14,.43,.36,.1,.53,.62,.78,.23,.85,.16,.69,.89,.21,1,.83,.38,.75,.45,.31,.18,.64,.8,.16,.54,.39,.6,.09,.49,.64,.14,.2,.86,.55,.25,.76,.28,.36,.16,.91,.26,.35,.78,.69,.23,.6,.32,.66,.42,1,.22,.47,.78,.1,.25,.33,.42,.16,.75,.53,.33,.99,.25,.39,.91,.01,.8,.41,.19,.88,.33,.71,.41,.54,.27,.73,.64,.25,.94,.62,.84,.99,.4,.29,.12,.96,.64,.92,.59,.73,.09,.42,.2,.91,.06,.86,.11,.4,.53,.32,.12,.91,.72,.62,.13,.33,.65,.03,.97,.72,.53,.16,.35,.72,.12,.95,.29,.48,.88,.81,.19,.32,.63,.07,.69,.2,.81,.87,.23,.72,.8,.91,.76,.45,.16,.06,.43,.58,.3,.38,.79,.02,.34,.69,.23,0,.96,.56,.73,.87,.09,.95,.3,.85,.94,.24,.7,.83,.35,.59,.08,.32,.69,.98,.66,.83,.45,.69,.6,.42,.51,.07,.47,.54,.95,.08,.28,.7,.08,.58,.54,.95,.71,.81,.62,.89,.28,.8,.01,.45,.83,.52,.6,.7,.31,.45,.75,.64,.03,.13,.61,.92,.34,.87,.8,.08,.41,.15,.35,.55,.78,.89,.73,.53,.21,.09,.37,.25,.31,.84,.48,.71,.29,.56,.96,.62,.03,.93,.78,.37,.06,.86,.21,.42,.84,.57,.27,.12,.9,.62,.44,.78,.02,.4,.59,.23,.43,.34,.09,.95,.81,.53,.91,.42,.61,.52,.95,.08,.31,.58,.2,.92,.85,.64,1,0,.75,.11,.51,.63,.48,.16,.9,.52,.13,.37,.25,.47,.23,.63,.7,.45,.11,.56,.39,.01,.25,.95,.42,.9,.49,.01,.4,.22,.54,.95,.02,.21,.97,.14,.82,.36,.18,.83,.49,.91,.75,.34,.87,.19,.01,.59,.49,.1,.96,.62,.12,.7,.77,.1,.2,.14,.99,.08,.23,.56,.48,.95,.22,.65,.09,.18,.49,.29,.89,.53,.01,.22,.09,.49,.17,.27,.42,.88,.8,.66,.98,.02,.6,.14,.43,.75,.2,.27,.49,.71,.2,.52,.27,.8,.55,.97,.08,.38,.78,.69,.47,.25,.99,.31,.67,.9,.78,.16,.94,.64,.77,.26,.45,.11,.25,.77,0,.16,.38,.64,.02,.5,.24,.68,.27,.35,.5,.22,.86,.93,.25,.74,.96,.31,.6,.78,.64,.84,.93,.04,.41,.76,.08,.26,.78,.17,.93,.88,.5,.73,.79,.18,.64,.14,.56,.89,.11,.31,.73,.86,.64,.28,.9,.76,0,.62,.37,.16,.25,.44,.65,.41,.28,.94,.2,.38,.47,.24,.91,.42,.27,.95,.37,.48,.57,.83,.91,.37,.8,.42,.84,.31,.55,1,.67,.44,.59,.96,.72,.63,.34,.94,.67,.56,.75,.01,.49,.14,.45,.77,.27,.95,.05,.82,.67,.36,.84,.09,.59,.98,.65,.44,.16,.7,.49,.62,.16,.33,.02,.84,.09,.55,.19,.51,.06,.69,.53,.01,.4,.58,.69,.85,.33,.48,.98,.29,.72,.83,.34,.96,.73,.4,.09,.55,.84,.67,.45,.58,.4,.19,.05,.86,.42,.21,.08,.31,.7,.58,.99,.53,.87,.36,.49,.73,.33,.64,.12,.22,.04,.38,.28,.85,.76,.45,.25,.67,.17,.47,.35,.71,.59,.44,.25,.72,.97,.58,.02,.81,.13,.91,.73,.42,.84,.05,.71,.86,.2,.55,.06,.62,.87,.78,.67,.32,.02,.7,.27,.16,.05,.75,.4,.07,.82,.2,.1,.28,.78,.44,.89,.05,.38,.1,.97,.34,.62,.92,.18,.36,.88,.66,.39,.49,.12,.91,.42,.78,.25,.31,.02,.9,.09,.28,.78,.24,.97,.87,.52,.39,.66,.79,.45,.95,.31,.24,.61,.84,.09,.89,.17,.37,.74,.09,.67,.44,.85,.55,.48,.14,.8,.62,.04,.94,.18,.29,.08,.15,.66,.83,.53,.12,.69,.45,.9,.15,.5,.12,.33,.19,.67,.01,.97,.63,.08,.44,.55,.84,.67,.99,.53,.71,.33,.04,.99,.8,.4,.54,.04,.23,.09,.94,.12,.33,.45,.86,.69,.53,.33,.04,.61,.15,.53,.78,.02,.38,.64,1,.35,.71,.05,.26,.11,.42,.19,.64,.98,.55,.69,.9,.51,.25,.63,.75,.91,.36,.16,.85,.26,.6,.8,.45,.86,.22,.71,.3,.56,.73,.13,.53,.2,.33,1,.03,.62,.16,.89,.47,.76,.62,.35,.93,.45,.04,.59,.44,.74,.18,.92,.27,.13,.85,.37,.75,.97,.3,.21,.52,1,.05,.59,.91,.54,.12,.27,.2,.08,.89,.31,.44,.91,.77,.38,.72,.89,.97,.33,.77,.36,.27,.78,.98,.56,.37,.75,.81,.24,.84,.44,.56,.2,.83,.25,.39,.95,.31,.6,.42,.07,.94,.2,.65,.49,.61,.12,.86,.75,.98,.46,.66,.53,.81,.22,.09,.28,.95,.77,.56,.99,.26,.65,.33,.57,.29,.12,.79,.51,.16,.45,.89,.95,.58,.5,.88,.11,.33,.45,.21,.95,.13,.34,.55,.01,.49,.66,.08,.53,.2,.72,.31,.16,.54,.08,.82,.05,.47,.94,.25,.69,.8,.58,.24,.71,.37,.55,.12,.82,.22,.56,.84,.67,.15,.89,.29,.07,.71,.35,.01,.71,.58,.05,.48,.12,.43,.71,.35,.78,.45,.28,.18,.83,.34,.95,.78,.58,.67,.17,.52,.25,.13,.58,.46,.24,.53,.02,.46,.93,.62,.15,.34,.04,.86,.42,.64,.04,.72,.92,.12,.3,.72,.89,.05,.75,.19,.1,.8,.25,.47,.13,.88,.36,.24,.95,.31,.42,.78,.18,.38,.84,.05,.62,.75,.38,.17,.47,.22,.34,.81,.11,.95,.89,.45,.75,.04,.9,.58,.65,.2,.36,.73,.07,.77,.4,.8,.59,.01,.66,.83,.44,.96,.71,.33,.58,.99,.75,.43,.93,.01,.67,.88,.42,.98,.42,.63,.83,0,.44,.87,.07,.46,.93,.66,.29,.96,.4,.51,.02,.28,.39,.72,.51,.22,.8,.55,.98,.48,.6,.89,.19,.67,.9,.79,.6,.06,.65,.23,.94,.7,.42,.62,.02,.72,.39,1,.05,.87,.7,.35,.82,.06,.63,.82,.69,.2,.87,.07,.52,.73,.22,.61,.11,.96,.27,.55,.37,.8,.47,.52,.15,.6,.82,.48,.37,.91,.61,.68,.55,.78,.03,.7,.17,.64,.08,.61,.25,.9,.51,.3,1,.43,.58,.84,.66,.08,.45,.85,.5,.19,.43,.61,.83,.23,.31,.42,.1,.82,.52,.85,.3,.23,.64,.17,.89,.28,.71,.37,.05,.2,.82,.88,.23,.05,.33,.13,.49,.78,.36,.58,.21,.76,.25,.13,.35,.6,.75,.15,.63,.31,.19,.77,.03,.85,.14,.71,.78,.17,.99,.32,.64,.92,.47,.15,.83,.22,.41,.29,.8,.53,.04,.27,.15,.87,.53,.83,.12,.47,.06,.91,.5,.27,.47,.35,.22,.59,.48,.96,.19,.92,.44,.35,.11,.58,.25,.44,.67,.84,.29,.91,.2,.34,.49,.76,.08,.23,.99,.05,.69,.43,.28,.89,.21,.73,0,.32,.4,.96,.3,.46,.84,.53,.92,.34,.05,.71,.15,.67,.24,.89,.02,.13,.78,.91,.63,0,.29,.74,.06,.15,.36,.53,.67,.96,.76,.28,.04,.15,.45,.96,.5,.93,.11,.41,.79,.5,.59,.29,.12,.41,.48,.64,.9,.84,.61,.27,.95,.12,.31,.67,.53,.91,.18,.97,.29,.39,.94,.81,.07,.45,.58,.24,.63,.31,.91,.47,.55,.09,.01,.37,.65,.31,.05,.75,.07,.95,.16,.35,.42,.98,.74,.31,.41,.02,.77,.57,.31,.77,.15,.86,.09,.75,.82,.41,.01,.67,.11,.27,.73,.16,.78,.91,.39,.75,.97,.01,.36,.78,.53,.69,.83,.15,.65,.61,.39,.85,.32,.95,.03,.65,.55,.44,.86,.18,.84,.08,.58,.76,.38,.13,.69,.43,.81,.56,.41,.09,.49,.82,.56,.31,.27,.4,.72,.35,.56,.91,.23,.69,.98,.11,.86,.16,.5,.69,.63,.89,.58,.67,.01,.35,.53,.23,.97,.16,.91,.76,.65,.95,.16,.8,.28,.55,.18,.05,.69,.47,.84,.02,.73,.37,.8,.64,.51,.11,.69,.53,.89,.35,.5,.74,.95,.37,.06,.67,.86,.75,.81,.23,.97,.58,.89,.53,.69,.47,.65,.84,.59,.5,.66,.19,.47,.91,.27,.68,.98,.22,.38,.64,.93,.53,.92,.14,.72,.38,.85,.55,.9,.48,.65,.31,.55,.16,.11,.58,.48,.66,.14,.97,.03,.43,.95,.29,.74,.19,.78,.56,.4,.15,.79,.09,1,.24,.66,.52,.2,.94,.02,.25,.84,.5,.2,.97,.86,.76,.35,.19,.64,.97,.52,.08,.99,.22,.8,.66,.36,.5,.78,.45,.61,0,.37,.22,1,.4,.34,.13,.75,.83,.62,.67,.05,.47,.2,.55,.31,.5,0,.7,.37,.07,.46,.91,.38,.8,.16,.95,.58,.1,.44,.06,.89,.22,.37,.25,.72,.15,.87,.01,.41,.54,.15,.28,.22,.42,.53,.12,.71,.19,.44,.35,.13,.89,.27,.05,.22,.11,.82,.05,.96,.6,.37,.11,.44,.81,.6,.3,.05,.2,.62,.27,.78,.31,.46,.6,.24,.01,1,.05,.84,.34,.8,.26,.92,.06,.41,.24,.33,.56,.9,0,.52,.11,.48,.24,.71,.92,.29,.48,.59,.35,.74,.44,.88,.31,.68,.55,.98,.09,.3,.63,0,.25,.94,.71,.04,.44,.75,.6,.16,.45,.12,.86,.56,.03,.19,.27,.34,.89,.56,.84,.08,.78,.2,.86,.27,.45,.16,.88,.3,.84,.69,.39,.08,.84,.56,.22,.98,.74,.85,.65,.25,.55,.34,.27,.44,.23,.7,.31,.77,.56,.84,.03,.62,.3,.99,.2,.69,.82,.93,.46,.62,.98,.3,.89,.46,.05,.64,.99,.21,.78,.58,.93,.76,.89,.34,.54,.69,.24,.87,.17,.54,0,.88,.73,.51,.42,.37,.07,.52,.98,.15,.09,.77,.37,.42,.2,.72,.48,.63,.86,.18,.7,.83,.62,.75,.22,.8,.35,.64,.84,.98,.06,.62,.83,.4,.2,.69,.05,.82,.11,.15,.61,.8,.29,.74,.38,.15,.68,.53,.44,.61,.15,.88,.35,.22,.83,.67,.89,.52,.31,.95,.88,.73,.93,.64,.73,.19,.43,.53,.03,.66,.59,.98,.04,.75,.51,.36,.01,.81,.99,.26,.77,.93,.42,.11,.52,.33,.12,1,.05,.62,.74,.92,.84,.6,1,.15,.45,.75,.96,.44,.51,.66,.1,.25,.59,.16,.8,.71,.04,.17,.58,.76,.85,.29,.73,.51,.01,.31,.4,.52,.43,.29,.79,.14,.43,.75,.64,.96,.47,.24,.14,.98,.81,.87,.69,.91,.22,.82,.72,.93,.53,.82,.6,.1,.95,.04,.44,.3,.58,.36,.91,.06,.5,.7,.12,.41,.27,.67,.33,.17,.53,.02,.88,.94,.55,.29,.97,.5,.39,.05,.46,.05,.64,.78,.92,.23,.06,.83,.31,.55,.11,.91,.29,.01,.35,.73,.08,.66,.15,.55,.4,.05,.13,.96,.29,.72,.92,.47,.31,.53,.4,.13,.96,.61,.58,.44,.16,.12,.62,.36,.18,.67,.8,.28,.6,.42,.69,.83,.13,.51,.05,.27,.4,.02,.64,.28,.11,.18,.81,.76,.33,.47,.73,.39,.09,.33,.84,.39,.67,.24,.36,.07,.4,.81,.63,.18,.72,.07,.17,.64,.99,.01,.51,.31,.08,.74,.34,.42,.69,.08,.31,.59,0,.45,.58,.4,.04,.33,.67,.16,.92,.41,.23,.53,.75,.98,.01,.51,.16,.94,.27,.58,1,.17,.53,.8,.89,.42,.75,.23,.65,.13,.45,.23,.64,.91,.73,.19,.95,.88,.5,.35,.89,.41,.74,.38,.96,.68,.78,.48,.39,.55,.94,.22,.42,.27,.84,.36,.24,.51,.66,.85,.57,.36,.16,.89,.07,.24,.81,.73,.28,.09,.23,.91,.52,.72,.47,.29,.9,.56,.03,.95,.2,.87,.08,.33,.37,.18,.66,.83,.53,.92,.88,.33,.58,.92,.05,.36,.91,.83,.02,.97,.24,.52,.59,.94,.02,.45,.98,.6,.16,.93,.45,.85,.98,.67,.82,.25,.6,.37,.84,.94,.26,.61,.2,.91,.76,.55,.22,.75,.28,.13,.33,.65,.26,.49,.14,.27,.77,.73,.33,.67,.15,.8,.23,.66,.4,.76,.45,.03,.85,.72,.09,.38,.03,.58,.99,.31,.81,.37,.77,.71,0,.36,.25,.82,.59,.22,.14,.56,.03,.19,.67,.13,.47,.2,.04,.65,.71,.14,.81,.61,.48,.76,.08,.61,.99,.76,.47,.22,.01,.62,.25,.69,.77,.61,.93,.45,.53,.85,.76,.33,.67,.95,.02,.82,.08,.48,.37,.72,.45,.78,.53,.95,.47,.89,.76,.31,.11,.7,.5,.22,.67,.47,.55,.23,.62,.15,.52,.64,.89,.75,.13,.28,.8,.17,.71,.87,.55,.24,.08,.36,.26,.55,.03,.47,.91,.72,.19,.56,.05,.83,.52,.11,.86,.16,.39,1,.81,.68,.87,.95,.75,.84,.98,.45,0,.57,.09,.85,.36,.45,.58,.87,.09,.66,.22,.36,.64,.31,.51,.96,.22,.7,.11,.49,.59,.07,.53,.16,.86,.56,.11,.69,.34,.43,.7,.28,.99,.6,.83,.25,.58,.93,.33,.18,.99,.27,.04,.86,.18,.32,.57,.03,.88,.3,.09,.41,.89,.8,.46,.41,.12,.34,.19,0,.67,.14,.42,.05,.22,.37,.6,.25,.69,1,.22,.65,.05,.34,.14,.65,.22,.01,.58,.44,.25,.15,.8,.08,.84,.29,.73,.09,.44,.96,.21,.33,.42,.17,.48,.93,.63,.33,.52,.11,.29,.67,.73,.6,.14,.87,.41,.76,.31,.11,.45,.71,.4,.99,.44,.3,.6,.47,.64,.44,.1,.51,.18,.02,.44,.09,.62,.35,.88,.49,.94,.2,.96,.07,.73,.26,.33,.97,.83,.58,.9,.24,.75,.61,.8,.29,.41,.91,.19,.87,1,.41,.3,.94,.45,.49,.97,0,.78,.85,.36,.1,.49,.9,.02,.74,.55,.81,.47,.37,.69,.52,.98,.71,.93,.45,.18,.69,.6,.95,.75,.09,.52,1,.84,.66,.5,.89,.38,.8,.5,1,.8,.13,.44,.86,.77,.12,.42,.85,.91,.26,.56,.85,.71,.29,.94,.55,.96,.36,.6,.4,1,.14,.91,.8,.29,.69,.56,.05,.81,.67,.06,.56,.42,.07,.84,.77,.37,.47,.9,.79,.32,.51,.94,.2,.06,.62,.89,.25,.78,.14,.73,0,.68,.95,.05,.24,.92,.35,.62,.37,.55,.22,.7,.19,.65,.25,.6,.43,.29,.63,.12,.91,.54,.18,0,.49,.14,.06,.46,.35,.16,.65,.85,0,.67,.35,.25,.58,.66,.05,.88,.17,.75,.08,.64,.45,.54,.76,.31,.71,.42,.37,.88,.08,.62,.91,.3,.1,.41,.64,.12,.25,.55,.84,.16,.34,.54,.19,.29,.02,.56,.25,.96,.06,.3,.62,.25,.69,.58,.93,.53,.18,.33,.53,.58,.16,.78,.38,.98,.08,.42,.79,.16,.04,.85,.73,.28,.52,0,.64,.39,.51,.05,.77,.88,.47,1,.36,.79,.22,.71,.96,.25,.16,1,.01,.19,.45,.04,.71,.65,.34,.58,.97,.51,.33,.07,.59,.36,.89,.2,.34,.77,.58,.83,.48,.75,.88,.28,.79,.94,.42,.05,.8,.16,.72,.55,.78,.48,.82,.44,.62,.75,.4,.8,1,.7,.04,.93,.49,.56,.24,.44,.75,.12,.8,.09,.76,.24,.61,.33,.91,.25,.21,.15,.92,.06,.22,.17,.64,.28,.13,.22,.73,.55,.85,.22,.47,.88,.39,.77,.48,.05,.42,.64,.85,.73,.92,.17,.39,.75,.58,.8,.94,.1,.35,.04,.3,.64,.73,.01,.92,.28,.08,.48,.7,.03,.61,.52,.35,.69,.65,.45,.07,.89,.66,.77,.25,.55,.18,.94,.35,.14,.27,.11,.63,.29,.92,.03,.61,.45,.69,.59,.81,.29,.63,.98,.16,.25,.84,.78,.12,.42,.83,.65,.95,.27,.45,.8,.53,.14,.7,.02,.22,.14,.98,.7,.06,.53,.34,.75,1,.09,.34,.88,.02,.24,.37,.05,.29,.95,.25,.67,.41,.53,.21,.84,.37,.09,.78,.63,.93,.52,.91,.47,.34,.55,.82,.38,.48,.59,.96,.4,.68,.61,.84,.99,.78,.53,.68,.93,.4,.16,.04,.78,.53,.72,.01,.98,.27,.92,.79,.23,.05,.6,.32,.78,.64,.08,.45,.2,.16,.53,.77,.45,.83,.09,.39,.69,.45,.83,.64,.72,.24,.31,.89,.23,.11,1,.22,.34,.56,.12,.18,.36,.95,.11,.83,.62,.41,.56,.67,.85,.4,.15,.48,.86,.35,.21,.49,.12,.36,.73,.52,.84,.07,.53,.45,0,.28,.73,.19,.48,.11,.56,.85,.07,.41,.28,.97,.36,.65,.43,.1,.58,.47,.16,.91,.58,.44,.52,.84,.4,.17,.99,.67,.87,.72,.56,.09,.18,.88,.31,.75,.27,.63,1,.33,.15,.05,.28,.39,.19,.64,.99,.14,.05,.87,.71,.02,.82,.28,.37,.55,.44,.07,.34,.83,.02,.49,.97,.64,.27,.19,.33,.11,.62,.68,.12,.58,.98,.44,.38,.12,.47,.87,.25,.51,.85,.67,.42,.9,.23,.98,.61,.25,.89,.2,.97,.36,.13,.54,.95,.43,.77,.84,.51,.37,.94,.82,.45,.86,.5,.69,.31,.47,.02,.73,.95,.2,.51,.78,.7,.56,.09,.66,.78,.95,.88,.07,.92,.22,.41,.33,.76,.9,.38,.98,.63,.05,.93,.3,.76,.16,.61,.67,.89,.46,.56,.85,.78,.23,.35,.87,.64,.25,.11,.2,.69,.25,.64,.74,.59,.5,.15,.22,.46,.91,.35,.6,.06,.81,.47,.05,.72,.42,.89,.56,.67,.84,.01,.73,.27,.44,.65,.17,.33,.78,.1,.52,.73,.03,.2,.94,.42,.59,.26,.66,.76,.38,.91,.95,.6,.84,.22,.41,.36,.52,.17,.76,.88,.53,.23,.97,.03,.71,.36,.95,.02,.32,.72,.15,.49,.76,.11,.56,.03,.44,.78,.86,.18,.66,.06,.27,.59,.01,.75,.16,.28,.94,.04,.6,.77,.9,.23,.83,.3,.09,.89,0,.24,.97,.82,.27,.03,.42,.3,.64,.45,.13,.69,.97,.6,.19,.66,.22,.52,.87,.42,.69,.39,.99,.3,.06,.75,.18,.1,.3,.49,.95,.71,.02,.81,.4,.73,.86,.05,.95,.11,.42,.29,.08,.93,.41,.83,0,.76,.52,.98,.13,.58,.89,.19,.53,.82,.33,.22,.76,.52,.95,.09,.78,.91,.56,.29,.47,.64,.95,.18,.88,.72,.63,.12,.9,.2,.33,.08,.45,.11,.68,.42,.53,.79,.9,.71,.02,.84,.27,.04,.69,.83,.57,.31,.75,.12,.25,.78,.63,.55,.05,.42,.87,.33,.52,.71,.24,.61,.3,.02,.57,.74,.47,.87,.09,.66,.51,.71,.56,.08,.4,.16,.53,.12,.6,.41,.68,.45,.31,.63,.36,.44,.18,.59,.7,.23,.53,.77,.86,.27,.05,.5,.09,.31,.78,.11,.34,.8,.02,.21,.64,.49,.92,.24,.82,.62,.03,.89,.17,.61,.22,.53,.95,.34,.63,.48,.36,.55,.82,.89,.25,.76,.56,.65,.27,.71,.45,.22,.34,.69,.4,.11,.25,.66,.08,.95,.42,.16,.33,.6,.5,.22,.76,.98,.16,.85,.24,.42,.33,.49,.28,.76,.53,.86,.72,.56,.8,.23,.77,.07,.29,.16,.1,.96,.6,.32,.64,.92,.35,.07,.19,.39,.95,.59,.49,.19,.37,.81,.27,.94,.64,.18,.82,.91,.09,.98,.47,.41,.92,.35,.25,.96,.34,.78,.11,.37,.23,.82,.96,.27,.87,.35,.7,.49,.17,.8,.93,.56,.06,.75,.94,.49,.84,.99,.15,.04,.59,.37,.8,.9,.42,.71,.94,.48,.58,.25,.9,.55,.12,.78,.36,.44,.55,.99,.39,.66,.46,.12,.75,.44,.06,.18,.78,.28,.9,.2,.06,.7,.36,.61,.07,.33,.18,.95,.06,.64,.85,.28,.78,.97,.47,.73,.04,.47,.61,.86,.25,.7,.36,.04,.42,.09,.58,.37,.05,.67,.78,.89,.09,.36,.05,.42,.94,.02,.51,.86,.27,.63,.99,.55,.44,.25,.75,.46,.15,.43,.5,.61,.8,.46,.85,.56,.07,.86,1,.51,.11,.74,.46,.02,.6,.38,.15,.75,.65,.22,.8,.15,.69,.42,.17,.87,.44,.61,.91,.32,.64,.67,.45,.09,1,.89,.03,.27,.73,.14,.22,.87,.52,.13,.06,.35,.67,.42,.95,.2,.64,.24,.56,.03,.83,.17,.66,.05,.73,.45,.86,.27,0,.69,.13,.33,.71,.27,.77,.37,.31,.91,.67,.59,.93,.11,.75,.6,.42,.95,.5,.16,1,.85,.6,.38,.82,.17,.94,.53,.02,.61,.36,.88,.3,.8,.12,.55,.91,.07,.81,.63,.89,.69,.49,.71,.94,.54,0,.59,.24,1,.68,.17,.63,.29,.38,.15,.92,.37,0,.83,.67,.4,.06,.87,.2,1,.78,.24,.93,.05,.14,.28,.68,.43,.7,.16,.6,.36,.23,.97,.29,.69,.45,.34,.88,.08,.84,.54,0,.63,.58,.27,.99,.03,.75,.15,.5,0,.55,.76,.21,.62,.54,.85,.41,.49,.8,.31,.66,.25,.38,.6,.91,.3,.51,.71,.12,.31,.99,.63,.38,.27,.89,.42,.33,1,.19,.61,.94,.75,.57,.22,.92,.08,.55,1,.83,.1,.48,.25,.4,.01,.52,.68,.22,.1,.78,.4,.73,.45,.12,.52,.75,.49,.11,.45,.2,.84,.13,.58,.24,.98,.36,.66,.2,.45,.97,.16,.27,.85,.3,.19,.81,.37,.16,.45,.84,.56,.8,.47,.22,.97,.69,.6,.21,.71,.5,.78,.19,.94,.53,.81,.69,.55,.13,.28,.66,.38,.74,.98,.33,.24,0,.3,.91,.86,.58,.76,.12,.83,.55,.05,.27,.57,.44,.29,.75,.92,.09,.5,.72,.23,.54,.42,.87,.17,.82,.31,.05,.42,.33,.11,.6,.98,.07,.62,.42,.89,.7,.82,.21,.79,.07,.41,.87,.76,.45,.2,.09,.96,.55,.77,.14,.69,.39,.56,.11,.39,.8,.05,.87,.45,.69,.02,.62,.2,.75,.86,.69,.47,.99,.34,.85,.28,.57,.01,.21,.27,.91,.04,.31,.24,.62,.79,.33,.93,.39,.7,.18,.49,.72,0,.27,.77,.5,.35,.56,.03,.44,.08,.62,.27,.97,.73,.33,.11,.27,.72,.34,.83,.06,.46,.09,.81,.33,.12,.28,.63,.09,.36,.3,.01,.41,.89,.49,.56,.21,.61,.78,.89,.58,.75,.47,.17,.06,.5,.41,.96,.2,.79,.92,.73,.11,.98,.33,.83,.19,.67,.37,.81,.27,.06,.99,.71,.37,.94,.65,.79,.95,.19,.7,.35,.23,.91,.03,.17,.53,.02,.47,.15,.59,.93,.02,.53,.15,.84,.73,.51,.22,.01,.82,.49,.05,.26,.84,.47,.3,.52,.6,.16,.23,.4,.51,.95,.36,.04,.31,.82,.17,.09,.93,.64,.53,.89,.82,.63,.77,.68,.95,.87,.4,.72,.05,.65,.53,.92,.05,.8,.33,.6,.95,.43,.06,.73,.62,.95,.78,.91,.53,.11,.88,.68,.19,.41,.94,.03,.58,.13,.89,.55,.96,.61,.41,.94,.84,.47,.22,.97,.65,.83,.71,.18,.95,.03,.82,.11,.45,.09,.52,.79,.4,.67,.33,.89,.65,.01,.31,.62,.51,.38,.19,.61,.47,.23,.41,.88,.04,.95,.57,.64,.36,.26,.53,.12,.5,.27,.71,.46,.07,.84,.58,.46,.73,.98,.33,.85,.25,.95,.66,.37,.22,.68,.28,.43,.65,.34,.6,.94,.31,.62,.9,.69,.94,.16,.66,.96,.35,.78,.94,.72,.29,.16,.58,.91,.64,.22,.55,.4,.75,.44,.2,.69,.32,.08,.44,.36,.18,.58,.14,.99,.5,.25,.09,.29,.64,.44,.92,.13,.84,.64,.22,.86,.13,.36,.25,.69,.32,.42,.55,.06,.5,.62,.91,.66,.51,.8,.42,.31,.77,.13,.23,.7,.56,.01,.78,.44,.15,.5,.26,.61,.44,.33,.93,.5,.37,.2,.96,.25,.04,1,.22,.78,.44,.73,.16,.87,.42,.04,.78,.89,.05,.77,.56,.31,.47,.13,.7,.44,.84,.1,.61,.8,.17,.08,.88,.53,.92,.15,.3,.8,.39,.12,.65,.44,.56,.74,.3,.5,.82,.59,.91,.96,.02,.81,.11,.45,.4,.19,.78,.44,.33,.2,.02,.74,.25,.09,.49,.05,.88,.8,.43,.11,.49,.77,.86,.61,.03,.26,.12,.99,.46,.56,.15,.86,.51,.05,.83,.35,.18,.76,.86,.39,.8,.2,.24,.56,.37,.16,.48,.32,.69,.45,.17,.84,.02,.73,.24,.82,.3,.76,.17,.25,.39,.19,.67,.27,.64,.51,.07,.73,.34,.64,.89,.7,.57,.06,.9,.77,.08,.7,.24,.66,.86,.71,.33,.65,.13,.71,.6,.09,.25,.36,.59,.97,.67,.25,.55,.27,.69,.13,.97,.62,.8,.25,.9,.18,.01,.74,.91,.41,.96,.56,.35,.25,.41,.66,.01,.52,.19,.6,.76,.07,.39,.1,.89,.16,.1,.38,.06,.49,.17,.26,.87,.71,1,.11,.54,.04,.6,.8,.55,.87,.42,.58,.84,.63,.33,.55,.67,.25,.99,.03,.29,.47,.95,.8,.37,.86,.07,.65,.95,.27,.75,.45,.29,.62,.91,.56,.67,.13,.99,.53,.69,.05,.89,.72,1,.81,.08,.93,.55,.6,.98,.49,.89,.36,.97,0,.47,.88,.08,1,.83,.03,.92,.87,.42,1,.18,.11,.3,.19,.38,.99,.34,.2,.53,.87,.16,.59,.28,.02,.55,.86,.49,.4,.88,.53,.95,.82,.48,.07,.14,.82,.94,.43,.5,.37,.19,.72,.01,.53,.38,.77,.56,.49,.22,.28,.68,.64,.02,.78,.74,.6,.98,.86,.69,.26,.87,.94,.2,.69,.45,.98,.79,.72,.64,.32,.76,.53,.66,.06,.57,.31,.85,.27,.72,.39,.99,.06,.67,.15,.38,.22,.95,.07,.19,.74,.43,.35,.13,.7,.19,.53,.58,.73,.24,.39,.73,.02,.87,.64,.22,.7,.02,.44,.22,.35,.74,.06,.33,.76,.47,.27,.02,.58,.42,.75,.06,.34,.14,.27,.62,.09,.67,.41,.59,.73,.33,.55,.49,.37,.57,.33,.27,.79,.52,.4,.93,.5,.81,.09,.47,.69,.38,.8,.42,.1,.99,.8,.44,.16,.93,.29,.33,.18,.02,.67,.22,.3,.52,.34,.63,0,.75,.84,.25,.94,.43,.09,.98,.33,.64,.94,.35,.05,.83,.47,.22,.94,.12,.44,.31,.08,.41,.15,.46,.31,.81,.61,.03,.53,.27,.47,.22,.84,.92,.44,.36,.23,.77,.16,.66,.92,.11,.18,.47,.3,.52,.91,.05,.75,.47,.37,.85,.9,.6,.55,.83,.89,.33,.64,.03,.29,.94,.5,.18,.6,.35,.1,.95,.8,.47,.09,.95,.61,.44,.58,.91,.41,.61,.2,.36,.64,.25,.89,.28,.81,.71,.42,.8,.18,.53,.27,.93,.21,.8,.65,.09,.16,.78,.12,.65,.01,.61,.85,.71,.04,.62,.75,.88,.56,.01,.28,.91,.5,.67,.36,.22,.75,.05,.8,.55,.73,.64,.37,.93,.76,.88,.7,.16,.22,.9,.58,.15,.53,.84,.67,.6,.16,.25,.86,.14,.55,.76,.14,.52,.85,.28,.17,.48,.77,.91,.55,.01,.65,.48,.24,.34,.67,.14,.9,.01,.56,.11,.14,.83,.95,.45,.88,.4,.49,.83,.64,.78,.24,.84,.6,.8,.27,.58,.71,0,.29,.14,.23,.69,.41,.09,1,.45,.13,.63,.81,.29,.98,.55,.4,.14,.51,.33,.89,.27,.78,0,.2,.83,.12,.53,.96,.8,.13,.5,.19,.63,.46,.9,.06,.51,.92,.74,.83,.14,.05,.43,.94,.25,.71,.95,.2,.38,.94,.47,.24,.16,.55,.31,.28,.13,.16,.96,.74,.61,.21,.06,.53,.96,.6,.67,.09,.47,.99,.12,.83,.43,.58,.04,.42,1,.31,.47,.09,.34,.65,.29,.21,.81,.45,.05,.79,.67,.41,.99,.33,.71,.37,.56,.67,.84,.25,.63,.35,.98,.77,.11,.88,.95,.78,.51,.4,.75,.61,.29,.71,.49,.01,.28,.6,.05,.23,.58,.36,.01,.95,.12,.34,.44,.97,.13,.89,.51,.63,.8,.99,.03,.49,.26,.78,.87,.35,.71,.05,.44,.08,.78,.67,.24,.98,.73,.16,.51,.67,.97,.39,.24,.88,.05,.73,.44,.85,.7,.98,0,.54,.21,.67,.33,.03,.25,.47,.36,.67,.52,.29,.87,.42,.49,.55,.71,.82,.07,.34,.7,.89,.45,.94,.66,.41,.52,.09,.34,.77,.25,.88,.11,.32,.41,.19,.89,.25,.31,.51,.19,.09,.24,.66,.53,.78,.69,.92,.82,.49,.05,.73,.36,.95,.52,.59,.19,.89,.07,.25,.64,.01,.9,.09,1,.03,.72,.19,.83,.38,.17,.58,.39,.04,.85,.18,.99,.34,.8,.9,.21,.64,.75,.13,.79,.99,.08,.91,.42,.65,.54,.74,.03,.19,.67,.35,.25,.43,.11,.33,.76,.62,.15,.72,.51,.21,.56,.84,.91,.49,.31,.86,.61,.08,.6,.41,.72,.11,.3,.44,.65,.71,.35,.29,.61,.09,.4,.33,.75,.13,.95,.84,.6,.44,.99,.63,.91,.61,.83,.16,0,.63,.08,.89,.15,.29,.56,.75,.96,0,.22,.53,.82,.71,.23,.84,.55,.96,.62,.44,.72,.47,.84,.56,.73,.64,0,.8,.69,.95,.87,.47,.12,.37,.03,.25,.41,.98,.13,.91,.57,0,.72,.29,.35,.47,.58,.81,.92,.49,.75,.34,.39,.47,.54,.3,.05,.69,.45,.74,.2,.62,.29,.69,.08,.23,.47,.41,.07,.53,.92,.37,.43,.69,.28,.51,.73,.18,.27,.87,.49,.61,.82,.05,.96,.72,.46,.87,.57,.37,.96,.29,.09,.94,.42,.13,.25,.73,.18,.02,.45,.36,.82,.05,.23,.56,.84,.78,.54,.09,.49,.92,.16,.24,.9,.47,.84,.44,.25,.36,.15,.78,.11,.31,.04,.17,.37,.97,.67,.32,.8,.25,.44,.93,.19,.49,.39,.63,.77,.08,.35,.04,.94,.45,.15,.01,.37,.18,.83,.03,.95,.35,.08,.42,.89,.55,.36,.58,.28,.81,.19,.87,.6,.7,.19,.58,.68,.33,.19,.42,.92,.1,.84,.73,.16,.42,.23,.11,.55,.18,.61,.86,.14,.95,.58,.93,.28,.07,.98,.47,.13,.45,.53,.88,.15,.66,.98,.33,.23,.84,.17,.65,.87,.13,.58,1,.36,.08,.92,.4,.3,.53,.83,.16,.65,.27,.2,.03,.83,.66,.49,0,.75,.67,.33,.59,.95,.58,.92,.28,.78,.99,.48,.89,.15,.04,.99,.22,.81,.41,.67,.77,.05,.58,.18,.64,.04,.72,.89,.67,.42,.81,.55,.73,.25,.51,.77,.18]),ru=new Float32Array([0,.5,.13,.63,.03,.53,.16,.66,.75,.25,.88,.38,.78,.28,.91,.41,.19,.69,.06,.56,.22,.72,.09,.59,.94,.44,.81,.31,.97,.47,.84,.34,.05,.55,.17,.67,.02,.52,.14,.64,.8,.3,.92,.42,.77,.27,.89,.39,.23,.73,.11,.61,.2,.7,.08,.58,.98,.48,.86,.36,.95,.45,.83,.33]),ou=U([new Uint8Array([0,0,0,0]),new Uint8Array([0,0,0,180]),new Uint8Array([180,0,0,0]),new Uint8Array([180,0,0,180]),new Uint8Array([0,180,180,180]),new Uint8Array([180,180,180,0]),new Uint8Array([180,180,180,180]),new Uint8Array([180,180,180,255]),new Uint8Array([255,180,180,180]),new Uint8Array([255,180,180,255]),new Uint8Array([180,255,255,255]),new Uint8Array([255,255,255,180]),new Uint8Array([255,255,255,255])]),au=new Uint8Array([0,255,0]),cu=new Uint8Array([0,255,255]),lu=Oh({name:"SC-system-filter-do-not-remove"}),FilterEngine=function(){return this.cache=null,this.actions=[],this},hu=FilterEngine.prototype=yc();hu.type="FilterEngine",hu.action=function(t){const{identifier:e,filters:i,image:s}=t,{actions:n,theBigActionsObject:r}=this;let o,a,c,l;const h=Xh(e);if(h)return h;for(n.length=0,o=0,a=i.length;o<a;o++)n.push(...i[o].actions);const u=n.length;if(u){for(this.unknit(s),o=0;o<u;o++)c=n[o],l=r[c.action],l&&l.call(this,c);return e&&Yh(e,this.cache.work),this.cache.work}return s},hu.colorSpaceIndices=function(){this.tfx||(this.tfx=256,this.tfx2=256*this.tfx,this.tfx3=256*this.tfx2,this.indicesLen=3*this.tfx3,this.labIndicesMultiplier=512,this.rgbIndices=new Uint8ClampedArray(this.indicesLen),this.labIndices=new Float32Array(this.indicesLen),this.indicesMemoRecord=new Uint8ClampedArray(this.tfx3))},hu.unknit=function(t){this.cache={};const e=this.cache,{width:i,height:s,data:n}=t;e.source=new ImageData(n,i,s),e.work=new ImageData(n,i,s)},hu.getAlphaData=function(t){const{width:e,height:i,data:s}=t,n=s.length,r=new ImageData(e,i),o=r.data;let a,c;for(c=0;c<n;c+=4)a=s[c+3],o[c]=0,o[c+1]=0,o[c+2]=0,o[c+3]=a>0?255:0;return r},hu.buildImageGrid=function(t){const{cache:e}=this;t||(t=e.source);const{width:i,height:s}=t;if(i&&s){const t=`grid-${i}-${s}`,e=Xh(t);if(e)return e;const n=[];let r,o,a,c=0;for(a=0;a<s;a++){for(r=[],o=0;o<i;o++)r.push(c),c++;n.push(U(r))}return U(n),Yh(t,n),n}return!1},hu.getRandomNumbers=function(t={}){const{seed:e=Qe,length:i=0,imgWidth:s=0,type:n=ur}=t,r=`random-${e}-${i}-${n}`,o=Xh(r);if(o)return o;const a=Kc();let c,l,h,u,d;if(n==fe&&s){const t=nu.length,e=ft(t),n=i/s,r=Kc();for(c=0;c<t;c+=e)u=nu.slice(c,c+e),r.push(u);for(c=n;c>0;c-=e)for(l=0;l<e;l++)for(d=r[l],h=s;h>0;h-=e)h<e?a.push(...d.slice(0,h)):a.push(...d);qc(r)}else if("ordered"==n&&s){const t=ru.length,e=ft(t),n=i/s,r=Kc();for(c=0;c<t;c+=e)u=ru.slice(c,c+e),r.push(u);for(c=n;c>0;c-=e)for(l=0;l<e;l++)for(d=r[l],h=s;h>0;h-=e)h<e?a.push(...d.slice(0,h)):a.push(...d);qc(r)}else{const t=Th(e);for(c=0;c<i;c++)a.push(t.random())}const f=new Float32Array(a);return qc(a),Yh(r,f),f},hu.buildImageCoordinateLookup=function(t){const{cache:e}=this;t||(t=e.source);const{width:i,height:s}=t;if(i&&s){const t=`coords-lookup-${i}-${s}`,e=Xh(t);if(e)return e;const n=[];for(let t=0;t<s;t++)for(let e=0;e<i;e++)n.push(U([e,t]));return U(n),Yh(t,n),n}return!1},hu.buildAlphaTileSets=function(t,e,i,s,n,r,o,a){const{cache:c}=this;a||(a=c.source);const{width:l,height:h}=a;if(l&&h){(t=t.toFixed&&!isNaN(t)?t:1)<1&&(t=1),(e=e.toFixed&&!isNaN(e)?e:1)<1&&(e=1),t+(i=i.toFixed&&!isNaN(i)?i:1)>=l&&(t=l-i-1),e+(s=s.toFixed&&!isNaN(s)?s:1)>=h&&(e=h-s-1),t<1&&(t=1),e<1&&(e=1),t+i>=l&&(i=l-t-1),e+s>=h&&(s=h-e-1);const o=t+i,a=e+s;(n=n.toFixed&&!isNaN(n)?n:0)<0&&(n=0),n>=o&&(n=o-1),(r=r.toFixed&&!isNaN(r)?r:0)<0&&(r=0),r>=a&&(r=a-1);const c=`alphatileset-${l}-${h}-${t}-${e}-${i}-${s}-${n}-${r}`,u=Xh(c);if(u)return u;const d=[];let f,p,m,g,y,b,S,k,A;for(g=r-a,y=h;g<y;g+=a)for(p=n-o,m=l;p<m;p+=o){for(f=[],k=g,A=g+e;k<A;k++)if(k>=0&&k<h)for(b=p,S=p+t;b<S;b++)b>=0&&b<l&&f.push(4*(k*l+b)+3);for(d.push(U([].concat(f))),f=[],k=g+e,A=g+e+s;k<A;k++)if(k>=0&&k<h)for(let e=p,i=p+t;e<i;e++)e>=0&&e<l&&f.push(4*(k*l+e)+3);for(d.push(U([].concat(f))),f=[],k=g,A=g+e;k<A;k++)if(k>=0&&k<h)for(let e=p+t,s=p+t+i;e<s;e++)e>=0&&e<l&&f.push(4*(k*l+e)+3);for(d.push(U([].concat(f))),f=[],k=g+e,A=g+e+s;k<A;k++)if(k>=0&&k<h)for(let e=p+t,s=p+t+i;e<s;e++)e>=0&&e<l&&f.push(4*(k*l+e)+3);d.push(U([].concat(f)))}return U(d),Yh(c,d),d}return!1},hu.buildImageTileSets=function(t,e,i,s,n){const{cache:r}=this;n||(n=r.source);const{width:o,height:a}=n;if(o&&a){(t=t.toFixed&&!isNaN(t)?t:1)<1&&(t=1),t>=o&&(t=o-1),(e=e.toFixed&&!isNaN(e)?e:1)<1&&(e=1),e>=a&&(e=a-1),(i=i.toFixed&&!isNaN(i)?i:0)<0&&(i=0),i>=t&&(i=t-1),(s=s.toFixed&&!isNaN(s)?s:0)<0&&(s=0),s>=e&&(s=e-1);const n=`simple-tileset-${o}-${a}-${t}-${e}-${i}-${s}`,r=Xh(n);if(r)return r;const c=[];let l,h,u,d,f,p,m,g,y;for(u=s-e,d=a;u<d;u+=e)for(l=i-t,h=o;l<h;l+=t){for(y=[],m=u,g=u+e;m<g;m++)if(m>=0&&m<a)for(f=l,p=l+t;f<p;f++)f>=0&&f<o&&y.push(4*(m*o+f));y.length&&c.push(U(y))}return U(c),Yh(n,c),c}return!1},hu.buildGeneralTileSets=function(t,e,i,s,n,r,o,a,c){const{cache:l}=this;c||(c=l.source);const{width:h,height:u}=c;if(h&&u){let c=1,l=1,d=1,f=0,p=0,m=0,g=ya;if(t.substring?g=t:K(t)?g=xn:t.toFixed&&!isNaN(t)&&(g=fr),g==ya)return[];e.substring?c=lt(parseFloat(e)/100*h):e.toFixed&&!isNaN(e)&&(c=e),c<1&&(c=1),i.substring?l=lt(parseFloat(i)/100*u):i.toFixed&&!isNaN(i)&&(l=i),l<1&&(l=1),s.substring?d=lt(parseFloat(s)/100*h):s.toFixed&&!isNaN(s)&&(d=s),d<1&&(d=1),n.substring?f=lt(parseFloat(n)/100*h):n.toFixed&&!isNaN(n)&&(f=n),f<0?f=0:f>=h&&(f=h-1),r.substring?p=lt(parseFloat(r)/100*u):r.toFixed&&!isNaN(r)&&(p=r),p<0?p=0:p>=u&&(p=u-1),o.toFixed&&!isNaN(o)&&(m=o);let y=`${g}-tileset-${h}-${u}-${c}-${l}-${d}-${f}-${p}-${m}`;g==xn?y+=`-${t.join(_t)}`:g==fr&&(y+=`-${t}-${a}`);const b=Xh(y);if(b)return b;if(g==mr&&1===c&&1===l)return Gh(y);const S=eu(),k=[f,p],A=[0,0];let v,P=[];const C=[],w=[];let x,O,D,R,F,H,E,I,T=Na;g==Vi&&l/d<1.05&&(l=1.05*d);const B=V(c/2),$=V(l/2),L=2*d,M=lt(l/d*d);let N,X,Y,G,j,z,W,Z,_,q=0,Q=0;switch(g){case mr:if(T=`rect-grid-points-${h}-${u}-${c}-${l}-${f}-${p}`,v=Xh(T),!v){const t=[];for(E=p-2*u+$,I=p+2*u+$;E<I;E+=l)for(F=f-2*h+B,H=f+2*h+B;F<H;F+=c)t.push(F,E);U(t),v=Gh(T,t)}break;case Vi:if(T=`hex-grid-points-${h}-${u}-${d}-${f}-${p}`,v=Xh(T),!v){const t=[];for(q=0,E=p-2*u+d,I=p+2*u+d;E<I;E+=M){for(Q=q%2==0?d:0,F=f-2*h+d+Q,H=f+2*h+d;F<H;F+=L)t.push(F,E);q++}U(t),v=Gh(T,t)}c=2*L,l=2*M;break;case fr:if(T=`random-points-${h}-${u}-${d}-${f}-${p}-${v}-${a}`,v=Xh(T),!v){const e=[],i=this.getRandomNumbers({seed:a,length:3*t});let s=-1;for(N=0;N<t;N++)S.zero().add([i[++s],i[++s]]).rotate(360*i[++s]).rotate(m).scalarMultiply(d),[F,E]=S,e.push(lt(F),lt(E));U(e),v=Gh(T,e)}c=d,l=d;break;case xn:if(T=`defined-points-${h}-${u}-${d}-${t}`,v=Xh(T),!v){const e=[...t];U(e),v=Gh(T,e)}c=d,l=d}for(q=0,N=0,X=v.length;N<X;N+=2)if(A[0]=v[N],A[1]=v[N+1],S.zero().add(A).rotate(m).add(k),[F,E]=S,F=lt(F),E=lt(E),F>-c&&F<h+c&&E>-l&&E<u+l){for(Y=2*h*(2*u)+(E+V(u/2))*h+(F+V(h/2)),C[q]=[F,E,Y],P[Y]=[],x=E-l,O=E+l;x<O;x++)for(D=F-c,R=F+c;D<R;D++)if(D>=0&&D<h&&x>=0&&x<u){if(g==fr&&S.zero().subtract(k).add([D,x]).getMagnitude()>d)continue;G=x*h+D,w[G]||(w[G]=[]),w[G].push(q)}q++}if(!C.length)return C;for(x=0;x<u;x++)for(D=0;D<h;D++)W=x*h+D,A[0]=D,A[1]=x,Z=w[W],j=-1,z=0,Z&&Z.forEach((t=>{[F,E,Y]=C[t],_=S.zero().add(A).subtract([F,E]).getMagnitude(),(j<0||_<z)&&(j=Y,z=_)})),j>=0&&P[j].push(W);return iu(S),P=P.filter((t=>null!=t)),U(P),Yh(y,P),P}return[]},hu.buildHorizontalBlur=function(t,e){e&&e.toFixed&&!isNaN(e)||(e=0);const i=t.length,s=t[0].length,n=`blur-h-${s}-${i}-${e}`,r=Xh(n);if(r)return r;const o=[];let a,c,l,h,u;for(c=0;c<i;c++)for(a=0;a<s;a++){for(u=[],l=a-e,h=a+e+1;l<h;l++)l>=0&&l<s&&u.push(4*t[c][l]);o[c*s+a]=U(u)}return U(o),Yh(n,o),o},hu.buildVerticalBlur=function(t,e){e&&e.toFixed&&!isNaN(e)||(e=0);const i=t.length,s=t[0].length,n=`blur-v-${s}-${i}-${e}`,r=Xh(n);if(r)return r;const o=[];let a,c,l,h,u;for(a=0;a<s;a++)for(c=0;c<i;c++){for(u=[],l=c-e,h=c+e+1;l<h;l++)l>=0&&l<i&&u.push(4*t[l][a]);o[c*s+a]=U(u)}return U(o),Yh(n,o),o},hu.buildMatrixGrid=function(t,e,i,s,n){const{cache:r}=this;n||(n=r.source);const{width:o,height:a,data:c}=n;(null==t||t<1)&&(t=1),(null==e||e<1)&&(e=1),null==i||i<0?i=0:i>=t&&(i=t-1),null==s||s<0?s=0:s>=e&&(s=e-1);const l=`matrix-${o}-${a}-${t}-${e}-${i}-${s}`,h=Xh(l);if(h)return h;const u=c.length,d=[],f=[];let p,m,g,y,b,S,k,A,v;for(g=-s,y=e-s;g<y;g++)for(p=-i,m=t-i;p<m;p++)d.push(4*(g*o+p));for(g=0;g<a;g++)for(p=0;p<o;p++){for(k=4*(g*o+p),A=[],b=0,S=d.length;b<S;b++)v=k+d[b],v<0?v+=u:v>=u&&(v-=u),A.push(U(v));f.push(U(A))}return U(f),Yh(l,f),f},hu.checkChannelLevelsParameters=function(t){const e=function(t,e=!1){if(t.toFixed)return t<0?[au]:t>255?[cu]:isNaN(t)?e?[cu]:[au]:[[0,255,t]];if(t.substring&&(t=t.split(_t)),K(t)){if(!t.length)return t;if(K(t[0]))return t;if((t=t.map((t=>parseInt(t,10)))).sort(((t,e)=>t-e)),1==t.length)return[[0,255,t[0]]];const e=[];let i,s,n,r;for(n=0,r=t.length;n<r;n++)i=0,s=255,0!=n&&(i=X(t[n-1]+(t[n]-t[n-1])/2)),n!=r-1&&(s=V(t[n]+(t[n+1]-t[n])/2)),e.push([i,s,t[n]]);return e}return e?[cu]:[au]};t.red=e(t.red),t.green=e(t.green),t.blue=e(t.blue),t.alpha=e(t.alpha,!0)},hu.cacheOutput=function(t,e){this.cache[t]=e},hu.getInputAndOutputLines=function(t){const{cache:e}=this,i=e.source;let s,n=e.work,r=!1,o=!1;return t.lineIn!=Ur&&t.lineMix!=Ur||(o=this.getAlphaData(i)),t.lineIn&&(t.lineIn==Vr?n=i:t.lineIn==Ur?n=o:e[t.lineIn]&&(n=e[t.lineIn])),t.lineMix&&(t.lineMix==Vr?r=i:t.lineMix==Ur?r=o:"current"==t.lineMix?r=e.work:e[t.lineMix]&&(r=e[t.lineMix])),t.lineOut&&e[t.lineOut]?s=e[t.lineOut]:(s=new ImageData(n.width,n.height),t.lineOut&&(e[t.lineOut]=s)),[n,s,r]},hu.getGrayscaleValue=function(t,e,i){return V(.2126*t+.7152*e+.0722*i)},hu.processResults=function(t,e,i){const s=t.data,n=e.data;let r,o,a;if(1==i)for(o=0,a=s.length;o<a;o++)s[o]=n[o];else if(i>0)for(r=1-i,o=0,a=s.length;o<a;o++)s[o]=s[o]*r+n[o]*i},hu.getGradientData=function(t){const e=`gradient-data-${t.name}`,i=Xh(e);if(!i||t.dirtyFilterIdentifier||t.animateByDelta){const i=qh(),{engine:s,element:n}=i;n.width=256,n.height=1;const r=s.createLinearGradient(0,0,255,0);t.addStopsToGradient(r,t.paletteStart,t.paletteEnd,t.cyclePalette),s.fillStyle=r,s.fillRect(0,0,256,1);const o=s.getImageData(0,0,256,1).data;return Qh(i),function(t,e=[]){return Bh[t]=e,$h[t]=et(),Bh[t]}(e,o)}return i||[]},hu.transferDataUnchanged=function(t,e,i){let s,n,r,o,a;for(a=0;a<i;a+=4)s=a,n=s+1,r=n+1,o=r+1,t[s]=e[s],t[n]=e[n],t[r]=e[r],t[o]=e[o]},hu.theBigActionsObject=U({[Gt]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,includeRed:a=!0,includeGreen:c=!0,includeBlue:l=!0,excludeRed:h=!0,excludeGreen:u=!0,excludeBlue:d=!0,lineOut:f}=t;let p,m,g,y,b,S;for(S=0;S<r;S+=4)p=S,m=p+1,g=m+1,y=g+1,b=s[y],b&&(n[p]=a?b:h?0:s[p],n[m]=c?b:u?0:s[m],n[g]=l?b:d?0:s[g],n[y]=255);f?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[Zt]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,tileWidth:a=1,tileHeight:c=1,offsetX:l=0,offsetY:h=0,gutterWidth:u=1,gutterHeight:d=1,areaAlphaLevels:f=[255,0,0,0],lineOut:p}=t,m=this.buildAlphaTileSets(a,c,u,d,l,h,f);let g,y,b,S;this.transferDataUnchanged(n,s,r),m.forEach(((t,e)=>{for(g=f[e%4],y=0,b=t.length;y<b;y++)S=t[y],s[S]&&(n[S]=g)})),p?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[se]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,includeRed:a=!0,includeGreen:c=!0,includeBlue:l=!0,excludeRed:h=!1,excludeGreen:u=!1,excludeBlue:d=!1,lineOut:f}=t;let p,m,g,y,b,S,k=0;for(a&&k++,c&&k++,l&&k++,p=0;p<r;p+=4)g=p,y=g+1,b=y+1,S=b+1,s[S]?k?(m=0,a&&(m+=s[g]),c&&(m+=s[y]),l&&(m+=s[b]),m=V(m/k),n[g]=h?0:m,n[y]=u?0:m,n[b]=d?0:m,n[S]=s[S]):(n[g]=h?0:s[g],n[y]=u?0:s[y],n[b]=d?0:s[b],n[S]=s[S]):(n[g]=s[g],n[y]=s[y],n[b]=s[b],n[S]=s[S]);f?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[he]:function(t){const e=function(t,e,i){const s=t+1,n=s+1,r=n+1,o=e+1,a=o+1,c=a+1;u[e]=i[t],u[o]=i[s],u[a]=i[n],u[c]=i[r]},i=function(t,e){const i=t-y,s=e-b;let n=-1;return i>=0&&i<d&&s>=0&&s<f&&(n=4*(s*d+i)),[4*(e*c+t),n]},s=function(t,e){const i=t+1,s=i+1,n=s+1,r=e+1,o=r+1,a=o+1;return[h[t]/255,h[i]/255,h[s]/255,h[n]/255,p[e]/255,p[r]/255,p[o]/255,p[a]/255]},n=(t,e)=>255*(t+e*(1-t)),[r,o,a]=this.getInputAndOutputLines(t),{width:c,height:l,data:h}=r,{data:u}=o,{width:d,height:f,data:p}=a,{opacity:m=1,blend:g=Na,offsetX:y=0,offsetY:b=0,lineOut:S}=t,k=(t,e)=>1==e?255:0==t?0:255*(1-tt(1,(1-e)/t)),A=(t,e)=>0==e?0:1==t?255:255*tt(1,e/(1-t)),v=(t,e)=>t<e?t:e,P=(t,e)=>255*B(t-e),C=(t,e)=>255*(t+e-2*e*t),w=(t,e)=>t<=.5?t*e*255:255*(e+(t-e*t)),x=(t,e)=>t>e?t:e,O=(t,e)=>255*(t+e),D=(t,e)=>t*e*255,R=(t,e)=>t>=.5?t*e*255:255*(e+(t-e*t)),F=(t,e)=>255*(e+(t-e*t)),H=(t,e)=>{const i=e<=.25?((16*e-12)*e+4)*e:ft(e);return t<=.5?255*(e-(1-2*t)*e*(1-e)):255*(e+(2*t-1)*(i-e))},E=(t,e,i,s)=>e*t+s*i*(1-e);let I,T,$,L,M,N,X,Y,G,j,z,W,V,U,Z,_,K,q,Q,J,et;switch(g){case"color-burn":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,q=Z+3,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=k($,X),u[W]=k(L,Y),u[V]=k(M,G),u[U]=n(N,j)):e(z,z,h):e(Z,z,p));break;case"color-dodge":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,q=Z+3,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=A($,X),u[W]=A(L,Y),u[V]=A(M,G),u[U]=n(N,j)):e(z,z,h):e(Z,z,p));break;case"darken":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,q=Z+3,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?(W=z+1,V=W+1,_=Z+1,K=_+1,u[z]=v(h[z],p[Z]),u[W]=v(h[W],p[_]),u[V]=v(h[V],p[K]),u[U]=n(h[U]/255,p[q]/255)):e(z,z,h):e(Z,z,p));break;case"difference":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[U]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=P($,X),u[W]=P(L,Y),u[V]=P(M,G),u[U]=n(N,j)):e(Z,z,p));break;case"exclusion":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[U]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=C($,X),u[W]=C(L,Y),u[V]=C(M,G),u[U]=n(N,j)):e(Z,z,p));break;case"hard-light":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[U]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=w($,X),u[W]=w(L,Y),u[V]=w(M,G),u[U]=n(N,j)):e(Z,z,p));break;case"lighten":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[z]?(W=z+1,V=W+1,_=Z+1,K=_+1,q=K+1,u[z]=x(h[z],p[Z]),u[W]=x(h[W],p[_]),u[V]=x(h[V],p[K]),u[U]=n(h[U]/255,p[q]/255)):e(Z,z,p));break;case Ss:for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[U]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=O($,X),u[W]=O(L,Y),u[V]=O(M,G),u[U]=n(N,j)):e(Z,z,p));break;case Ws:for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,q=Z+3,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=D($,X),u[W]=D(L,Y),u[V]=D(M,G),u[U]=n(N,j)):e(z,z,h):e(Z,z,p));break;case"overlay":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[U]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=R($,X),u[W]=R(L,Y),u[V]=R(M,G),u[U]=n(N,j)):e(Z,z,p));break;case"screen":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[U]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=F($,X),u[W]=F(L,Y),u[V]=F(M,G),u[U]=n(N,j)):e(Z,z,p));break;case"soft-light":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,q=Z+3,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([$,L,M,N,X,Y,G,j]=s(z,Z),W=z+1,V=W+1,u[z]=H($,X),u[W]=H(L,Y),u[V]=H(M,G),u[U]=n(N,j)):e(z,z,h):e(Z,z,p));break;case Be:for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),W=z+1,V=W+1,U=V+1,_=Z+1,K=_+1,q=K+1,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([Q,J,et]=lu.calculateColorBlend(h[z],h[W],h[V],p[Z],p[_],p[K]),u[z]=Q,u[W]=J,u[V]=et,u[U]=n(h[U]/255,p[q]/255)):e(z,z,h):e(Z,z,p));break;case"hue":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),W=z+1,V=W+1,U=V+1,_=Z+1,K=_+1,q=K+1,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([Q,J,et]=lu.calculateHueBlend(h[z],h[W],h[V],p[Z],p[_],p[K]),u[z]=Q,u[W]=J,u[V]=et,u[U]=n(h[U]/255,p[q]/255)):e(z,z,h):e(Z,z,p));break;case"luminosity":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),W=z+1,V=W+1,U=V+1,_=Z+1,K=_+1,q=K+1,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([Q,J,et]=lu.calculateLuminosityBlend(h[z],h[W],h[V],p[Z],p[_],p[K]),u[z]=Q,u[W]=J,u[V]=et,u[U]=n(h[U]/255,p[q]/255)):e(z,z,h):e(Z,z,p));break;case"saturation":for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),W=z+1,V=W+1,U=V+1,_=Z+1,K=_+1,q=K+1,h[U]&&(Z<0?e(z,z,h):h[U]?p[q]?([Q,J,et]=lu.calculateSaturationBlend(h[z],h[W],h[V],p[Z],p[_],p[K]),u[z]=Q,u[W]=J,u[V]=et,u[U]=n(h[U]/255,p[q]/255)):e(z,z,h):e(Z,z,p));break;default:for(T=0;T<l;T++)for(I=0;I<c;I++)[z,Z]=i(I,T),U=z+3,h[U]&&(Z<0?e(z,z,h):h[U]?(W=z+1,V=W+1,_=Z+1,K=_+1,q=K+1,N=h[U]/255,j=p[q]/255,u[z]=E(h[z],N,p[Z],j),u[W]=E(h[W],N,p[_],j),u[V]=E(h[V],N,p[K],j),u[U]=n(N,j)):e(Z,z,p))}S?this.processResults(o,r,1-m):this.processResults(this.cache.work,o,m)},[pe]:function(t){const e=function(t,e,i,s,n){if(t){const t=e[i];if(null!=t){const e=t.length;let i,r,o=0,a=0;for(r=0;r<e;r+=b)i=t[r]+n,a+=s[i],o++;return a/o}}return s[4*i+n]},[i,s]=this.getInputAndOutputLines(t),n=i.data,r=s.data,o=n.length,a=V(o/4),{opacity:c=1,radius:l=0,passes:h=1,processVertical:u=!0,processHorizontal:d=!0,includeRed:f=!0,includeGreen:p=!0,includeBlue:m=!0,includeAlpha:g=!1,excludeTransparentPixels:y=!1,step:b=1,lineOut:S}=t;let k,A;if(d||u){const t=this.buildImageGrid(i);d&&(k=this.buildHorizontalBlur(t,l)),u&&(A=this.buildVerticalBlur(t,l))}r.set(n);const v=new Uint8ClampedArray(n),P=y?function(t,e,i,s,n){if(t){const t=e[i];if(null!=t){const e=t.length;let i,r,o,a,c=0,l=0;for(r=0;r<e;r+=b)a=t[r],o=a+3,s[o]&&(i=a+n,l+=s[i],c++);if(c)return l/c}}return s[4*i+n]}:e;let C,w,x,O,D,R;for(R=0;R<h;R++){if(d){for(C=0;C<a;C++)w=4*C,x=w+1,O=x+1,D=O+1,(g||v[D])&&(r[w]=P(f,k,C,v,0),r[x]=P(p,k,C,v,1),r[O]=P(m,k,C,v,2),r[D]=e(g,k,C,v,3));(u||R<h-1)&&v.set(r)}if(u){for(C=0;C<a;C++)w=4*C,x=w+1,O=x+1,D=O+1,(g||v[D])&&(r[w]=P(f,A,C,v,0),r[x]=P(p,A,C,v,1),r[O]=P(m,A,C,v,2),r[D]=e(g,A,C,v,3));R<h-1&&v.set(r)}}S?this.processResults(s,i,1-c):this.processResults(this.cache.work,s,c)},[xe]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,includeRed:a=!0,includeGreen:c=!0,includeBlue:l=!0,lineOut:h}=t;let u,d,f,p,m,g,y,b,S,k=0;for(a&&k++,c&&k++,l&&k++,b=0;b<r;b+=4)u=b,d=u+1,f=d+1,p=f+1,m=s[u],g=s[d],y=s[f],n[u]=m,n[d]=g,n[f]=y,k?(S=0,a&&(S+=m),c&&(S+=g),l&&(S+=y),n[p]=V(S/k)):n[p]=s[p];h?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[Oe]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,ranges:a=[],lineOut:c}=t;let l,h,u,d,f,p,m,g,y,b,S;for(b=0;b<r;b+=4){for(S=!1,l=b,h=l+1,u=h+1,d=u+1,f=s[l],p=s[h],m=s[u],g=0,y=a.length;g<y;g++){const[t,e,i,s,n,r]=a[g];if(f>=t&&f<=s&&p>=e&&p<=n&&m>=i&&m<=r){S=!0;break}}n[l]=f,n[h]=p,n[u]=m,n[d]=S?0:s[d]}c?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[De]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,lowRed:a=0,lowGreen:c=0,lowBlue:l=0,highRed:h=255,highGreen:u=255,highBlue:d=255,lineOut:f}=t,p=h-a,m=u-c,g=d-l;let y,b,S,k,A,v,P,C,w;for(w=0;w<r;w+=4)y=w,b=y+1,S=b+1,k=S+1,A=s[y],v=s[b],P=s[S],C=s[k],C?(A/=255,v/=255,P/=255,n[y]=a+A*p,n[b]=c+v*m,n[S]=l+P*g):(n[y]=A,n[b]=v,n[S]=P),n[k]=C;f?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[$e]:function(t){const e=function(t,e,i){const s=(B(c-t)+B(l-e)+B(h-i))/3;return s<m?0:s>g?255:(s-m)/y*255},[i,s]=this.getInputAndOutputLines(t),n=i.data,r=s.data,o=n.length,{opacity:a=1,red:c=0,green:l=255,blue:h=0,opaqueAt:u=1,transparentAt:d=0,lineOut:f}=t,p=J((c+l+h)/3,(255-c+(255-l)+(255-h))/3),m=d*p,g=u*p,y=g-m;let b,S,k,A,v,P,C,w;for(w=0;w<o;w+=4)b=w,S=b+1,k=S+1,A=k+1,n[A]&&(v=n[b],P=n[S],C=n[k],r[b]=v,r[S]=P,r[k]=C,r[A]=e(v,P,C));f?this.processResults(s,i,1-a):this.processResults(this.cache.work,s,a)},[Le]:function(t){const e=function(t,e,i){const s=t+1,n=s+1,r=n+1,o=e+1,a=o+1,c=a+1;l[e]=i[t],l[o]=i[s],l[a]=i[n],l[c]=i[r]},i=function(t,e){const i=t-m,s=e-g;let n=-1;return i>=0&&i<h&&s>=0&&s<u&&(n=4*(s*h+i)),[4*(e*o+t),n]},[s,n,r]=this.getInputAndOutputLines(t),{width:o,height:a,data:c}=s,{data:l}=n,{width:h,height:u,data:d}=r,{opacity:f=1,compose:p=Na,offsetX:m=0,offsetY:g=0,lineOut:y}=t,b=(t,e,i,s)=>e*t*s+s*i*(1-e),S=(t,e,i)=>e*t*i,k=(t,e,i)=>e*t*(1-i),A=(t,e,i,s)=>e*t*(1-s)+s*i*e,v=(t,e,i,s)=>e*t*(1-s)+s*i,P=(t,e,i)=>e*t*i,C=(t,e,i)=>i*t*(1-e),w=(t,e,i,s)=>e*t*(1-s)+s*i*(1-e),x=(t,e,i,s)=>e*t+s*i*(1-e);let O,D,R,F,H,E,I,T,B,$,L,M;switch(p){case"source-only":n.data.set(c);break;case"source-atop":for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H>=0&&(D=O+1,R=D+1,F=R+1,E=H+1,I=E+1,T=I+1,L=c[F]/255,M=d[T]/255,l[O]=b(c[O],L,d[H],M),l[D]=b(c[D],L,d[E],M),l[R]=b(c[R],L,d[I],M),l[F]=255*(L*M+M*(1-L)));break;case Zr:for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H>=0&&(D=O+1,R=D+1,F=R+1,T=H+3,L=c[F]/255,M=d[T]/255,l[O]=S(c[O],L,M),l[D]=S(c[D],L,M),l[R]=S(c[R],L,M),l[F]=L*M*255);break;case"source-out":for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H<0?e(O,O,c):(D=O+1,R=D+1,F=R+1,T=H+3,L=c[F]/255,M=d[T]/255,l[O]=k(c[O],L,M),l[D]=k(c[D],L,M),l[R]=k(c[R],L,M),l[F]=L*(1-M)*255);break;case"destination-only":for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H>=0&&e(H,O,d);break;case"destination-atop":for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H<0?e(O,O,c):(D=O+1,R=D+1,F=R+1,E=H+1,I=E+1,T=I+1,L=c[F]/255,M=d[T]/255,l[O]=A(c[O],L,d[H],M),l[D]=A(c[D],L,d[E],M),l[R]=A(c[R],L,d[I],M),l[F]=255*(L*(1-M)+M*L));break;case"destination-over":for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H<0?e(O,O,c):(D=O+1,R=D+1,F=R+1,E=H+1,I=E+1,T=I+1,L=c[F]/255,M=d[T]/255,l[O]=v(c[O],L,d[H],M),l[D]=v(c[D],L,d[E],M),l[R]=v(c[R],L,d[I],M),l[F]=255*(L*(1-M)+M));break;case"destination-in":for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H>=0&&(D=O+1,R=D+1,F=R+1,E=H+1,I=E+1,T=I+1,L=c[F]/255,M=d[T]/255,l[O]=P(d[H],L,M),l[D]=P(d[E],L,M),l[R]=P(d[I],L,M),l[F]=L*M*255);break;case ti:for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H>=0&&(D=O+1,R=D+1,F=R+1,E=H+1,I=E+1,T=I+1,L=c[F]/255,M=d[T]/255,l[O]=C(d[H],L,M),l[D]=C(d[E],L,M),l[R]=C(d[I],L,M),l[F]=M*(1-L)*255);break;case He:break;case"xor":for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H<0?e(O,O,c):(D=O+1,R=D+1,F=R+1,E=H+1,I=E+1,T=I+1,L=c[F]/255,M=d[T]/255,l[O]=w(c[O],L,d[H],M),l[D]=w(c[D],L,d[E],M),l[R]=w(c[R],L,d[I],M),l[F]=255*(L*(1-M)+M*(1-L)));break;default:for($=0;$<a;$++)for(B=0;B<o;B++)[O,H]=i(B,$),H<0?e(O,O,c):(D=O+1,R=D+1,F=R+1,E=H+1,I=E+1,T=I+1,L=c[F]/255,M=d[T]/255,l[O]=x(c[O],L,d[H],M),l[D]=x(c[D],L,d[E],M),l[R]=x(c[R],L,d[I],M),l[F]=255*(L+M*(1-L)))}y?this.processResults(n,s,1-f):this.processResults(this.cache.work,n,f)},[We]:function(t){const e=function(t,e,i){let s,n,r=0,o=255;const a=e.length;for(n=0;n<a;n++)s=t[e[n]+i],s<o?o=s:s>r&&(r=s);switch(d){case"lowest":return o;case"highest":return r;default:return V(o+(r-o)/2)}},[i,s]=this.getInputAndOutputLines(t),n=i.data,r=s.data,o=n.length,{opacity:a=1,includeRed:c=!1,includeGreen:l=!1,includeBlue:h=!1,includeAlpha:u=!0,operation:d=Es,lineOut:f}=t;let p=t.width;(isNaN(p)||p<1)&&(p=3),p=V(p);let m=t.height;(isNaN(m)||m<1)&&(m=3),m=V(m);let g=t.offsetX;(isNaN(g)||g<1)&&(g=1),g=V(g);let y=t.offsetY;(isNaN(y)||y<1)&&(y=1),y=V(y);const b=this.buildMatrixGrid(p,m,g,y,i),S=V(o/4);let k,A,v,P,C;for(C=0;C<S;C++)k=4*C,A=k+1,v=A+1,P=v+1,r[k]=c?e(n,b[C],0):n[k],r[A]=l?e(n,b[C],1):n[A],r[v]=h?e(n,b[C],2):n[v],r[P]=u?e(n,b[C],3):n[P];f?this.processResults(s,i,1-a):this.processResults(this.cache.work,s,a)},[si]:function(t){const e=function(t,e,i){t<0?l[e+3]=0:(l[e]=i[t],t++,e++,l[e]=i[t],t++,e++,l[e]=i[t],t++,e++,l[e]=i[t])},i=function(t,e){const i=t+b,s=e+S;let n=-1;return i>=0&&i<h&&s>=0&&s<u&&(n=4*(s*h+i)),[4*(e*o+t),n]},[s,n,r]=this.getInputAndOutputLines(t),{width:o,height:a,data:c}=s,{data:l}=n,{width:h,height:u,data:d}=r,{opacity:f=1,channelX:p=yr,channelY:m=Xi,scaleX:g=1,scaleY:y=1,offsetX:b=0,offsetY:S=0,transparentEdges:k=!1,lineOut:A}=t;let v=3;p==yr?v=0:p==Xi?v=1:p==de&&(v=2);let P,C,w,x,O,D,R,F=3;for(m==yr?F=0:m==Xi?F=1:m==de&&(F=2),C=0;C<a;C++)for(P=0;P<o;P++)[D,R]=i(P,C),R>=0?(w=V(P+(127-d[R+v])/127*g),x=V(C+(127-d[R+F])/127*y),k?O=w<0||w>=o||x<0||x>=a?-1:4*(x*o+w):(w<0&&(w=0),w>=o&&(w=o-1),x<0&&(x=0),x>=a&&(x=a-1),O=4*(x*o+w)),e(O,D,c)):e(D,D,c);A?this.processResults(n,s,1-f):this.processResults(this.cache.work,n,f)},[ui]:function(t){const e=function(t,e,i){let s=0;for(let n=0,r=e.length;n<r;n++)g[n]&&(s+=t[e[n]+i]*g[n]);return s},[i,s]=this.getInputAndOutputLines(t),n=i.data,r=s.data,o=n.length,{opacity:a=1,tolerance:c=0,keepOnlyChangedAreas:l=!1,postProcessResults:h=!1,lineOut:u}=t,d=B(t.strength||1),f=Wa(t.angle||0),p=V(f/45),m=f%45/45*d,g=new Array(9);g.fill(0,0,9),g[4]=1,0==p?(g[5]=d-m,g[8]=m,g[3]=-g[5],g[0]=-g[8]):1==p?(g[8]=d-m,g[7]=m,g[0]=-g[8],g[1]=-g[7]):2==p?(g[7]=d-m,g[6]=m,g[1]=-g[7],g[2]=-g[6]):3==p?(g[6]=d-m,g[3]=m,g[2]=-g[6],g[5]=-g[3]):4==p?(g[3]=d-m,g[0]=m,g[5]=-g[3],g[8]=-g[0]):5==p?(g[0]=d-m,g[1]=m,g[8]=-g[0],g[7]=-g[1]):6==p?(g[1]=d-m,g[2]=m,g[7]=-g[1],g[6]=-g[2]):(g[2]=d-m,g[5]=m,g[6]=-g[2],g[3]=-g[5]);const y=this.buildMatrixGrid(3,3,1,1,i);let b,S,k,A,v,P,C,w,x,O,D,R,F;for(b=0;b<o;b+=4)S=b,k=S+1,A=k+1,v=A+1,P=n[S],C=n[k],w=n[A],x=n[v],x&&(F=V(b/4),r[S]=e(n,y[F],0),r[k]=e(n,y[F],1),r[A]=e(n,y[F],2),r[v]=n[v],h&&(O=r[S],D=r[k],R=r[A],O>=P-c&&O<=P+c&&D>=C-c&&D<=C+c&&R>=w-c&&R<=w+c&&(l?r[v]=0:(r[S]=127,r[k]=127,r[A]=127))));u?this.processResults(s,i,1-a):this.processResults(this.cache.work,s,a)},[Pi]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,red:a=0,green:c=0,blue:l=0,alpha:h=255,excludeAlpha:u=!1,lineOut:d}=t;let f,p,m;for(f=0;f<r;f+=4)m=f+3,s[m]&&(p=f,n[p]=a,p++,n[p]=c,p++,n[p]=l,p++,n[p]=u?s[m]:h);d?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[Ii]:function(t){let e,i,s,n,r,o,a,c;const l=function(t,e,i,s,n,r){let o,a,c,l,h,u,d,f,p,m,g,y,b,S,k,A,v,P,C,w,x,O,D,R,F,H,E,I,T,B;for(F=0;F<r;F++){for(O=F*n,D=F,R=0,o=t[O],a=255&o,c=o>>8&255,l=o>>16&255,h=o>>24&255,P=a*s[6],C=c*s[6],w=l*s[6],x=h*s[6],S=P,k=C,A=w,v=x,E=s[0],I=s[1],T=s[4],B=s[5],H=0;H<n;H++)o=t[O],u=255&o,d=o>>8&255,f=o>>16&255,p=o>>24&255,m=u*E+a*I+S*T+P*B,g=d*E+c*I+k*T+C*B,y=f*E+l*I+A*T+w*B,b=p*E+h*I+v*T+x*B,P=S,C=k,w=A,x=v,S=m,k=g,A=y,v=b,a=u,c=d,l=f,h=p,i[R]=S,i[R+1]=k,i[R+2]=A,i[R+3]=v,R+=4,O++;for(O--,R-=4,D+=r*(n-1),o=t[O],a=255&o,c=o>>8&255,l=o>>16&255,h=o>>24&255,P=a*s[7],C=c*s[7],w=l*s[7],x=h*s[7],S=P,k=C,A=w,v=x,u=a,d=c,f=l,p=h,E=s[2],I=s[3],H=n-1;H>=0;H--)m=u*E+a*I+S*T+P*B,g=d*E+c*I+k*T+C*B,y=f*E+l*I+A*T+w*B,b=p*E+h*I+v*T+x*B,P=S,C=k,w=A,x=v,S=m,k=g,A=y,v=b,a=u,c=d,l=f,h=p,o=t[O],u=255&o,d=o>>8&255,f=o>>16&255,p=o>>24&255,o=(i[R]+S<<0)+(i[R+1]+k<<8)+(i[R+2]+A<<16)+(i[R+3]+v<<24),e[D]=o,O--,R-=4,D-=r}},[h,u]=this.getInputAndOutputLines(t),d=h.data,f=u.data,{width:p,height:m}=h,{opacity:g=1,radius:y=1,lineOut:b}=t,S=new Uint8ClampedArray(d),k=new Uint32Array(S.buffer),A=new Uint32Array(k.length),v=new Float32Array(4*J(p,m)),P=function(t){t<.5&&(t=.5);const l=W(.527076)/t,h=W(-l),u=W(-2*l),d=(1-h)*(1-h)/(1+2*l*h-u);return e=d,i=d*(l-1)*h,s=d*(l+1)*h,n=-d*u,r=2*h,o=-u,a=(e+i)/(1-r-o),c=(s+n)/(1-r-o),new Float32Array([e,i,s,n,r,o,a,c])}(y);l(k,A,v,P,p,m),l(A,k,v,P,m,p),f.set(S),b?this.processResults(u,h,1-g):this.processResults(this.cache.work,u,g)},[$i]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,o=e.width,a=e.height,{opacity:c=1,useMixedChannel:l=!0,seed:h=Qe,level:u=0,offsetMin:d=0,offsetMax:f=0,offsetRedMin:p=0,offsetRedMax:m=0,offsetGreenMin:g=0,offsetGreenMax:y=0,offsetBlueMin:b=0,offsetBlueMax:S=0,offsetAlphaMin:k=0,offsetAlphaMax:A=0,transparentEdges:v=!1,lineOut:P}=t;let C=V(t.step);C<1&&(C=1);const w=this.getRandomNumbers({seed:h,length:5*a}),x=f-d,O=m-p,D=y-g,R=S-b,F=A-k;let H=-1;const E=[];let I,T,B,$,L,M,N,X,Y,G,j,z,W,U,Z,_,K,q,Q,J,tt,et,it,st,nt;for(I=0;I<a;I+=C)if(B=w[++H]<u,B)if(l)for($=4*(d+V(w[++H]*x)),T=0;T<C;T++)E.push($,$,$,$);else for(L=4*(p+V(w[++H]*O)),M=4*(g+V(w[++H]*D)),N=4*(b+V(w[++H]*R)),X=4*(k+V(w[++H]*F)),T=0;T<C;T++)E.push(L,M,N,X);else for(T=0;T<C;T++)E.push(0,0,0,0);for(I=0;I<r;I+=4)Y=I,G=Y+1,j=G+1,z=j+1,W=4*o,U=V(I/W),K=4*U,q=E[K],Q=E[++K],J=E[++K],tt=E[++K],et=Y+q,it=G+Q,st=j+J,nt=z+tt,n[Y]=s[et],n[G]=s[it],n[j]=s[st],v?(Z=U*W,_=Z+W,n[z]=et<Z||et>_||it<Z||it>_||st<Z||st>_||nt<Z||nt>_?0:s[nt]):n[z]=s[nt];P?this.processResults(i,e,1-c):this.processResults(this.cache.work,i,c)},[Ni]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,lineOut:a}=t,c=this.getGrayscaleValue;let l,h,u,d,f,p;for(f=0;f<r;f+=4)l=f,h=l+1,u=h+1,d=u+1,p=c(s[l],s[h],s[u]),n[l]=p,n[h]=p,n[u]=p,n[d]=s[d];a?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[rs]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,includeRed:a=!0,includeGreen:c=!0,includeBlue:l=!0,includeAlpha:h=!1,lineOut:u}=t;let d,f,p,m,g;for(g=0;g<r;g+=4)d=g,f=d+1,p=f+1,m=p+1,n[d]=a?255-s[d]:s[d],n[f]=c?255-s[f]:s[f],n[p]=l?255-s[p]:s[p],n[m]=h?255-s[m]:s[m];u?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[vs]:function(t){const e=function(t,e){if(!e.length)return t;for(let i=0,s=e.length;i<s;i++){const[s,n,r]=e[i];if(t>=s&&t<=n)return r}};this.checkChannelLevelsParameters(t);const[i,s]=this.getInputAndOutputLines(t),n=i.data,r=s.data,o=n.length,{opacity:a=1,red:c=[0],green:l=[0],blue:h=[0],alpha:u=[255],lineOut:d}=t;let f,p,m,g,y;for(y=0;y<o;y+=4)f=y,p=f+1,m=p+1,g=m+1,r[f]=e(n[f],c),r[p]=e(n[p],l),r[m]=e(n[m],h),r[g]=e(n[g],u);d?this.processResults(s,i,1-a):this.processResults(this.cache.work,s,a)},[Ds]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,useNaturalGrayscale:a=!1,gradient:c=!1,lineOut:l}=t;if(c){let t,e,i,o,l,h,u;const d=this.getGradientData(c);if(d.length){const c=this.getGrayscaleValue;for(t=0;t<r;t+=4)i=t,o=i+1,l=o+1,h=l+1,s[h]&&(e=a?c(s[i],s[o],s[l]):V(.3333*s[i]+.3333*s[o]+.3333*s[l]),u=4*e,n[i]=d[u],u++,n[o]=d[u],u++,n[l]=d[u],u++,n[h]=d[u])}else this.transferDataUnchanged(n,s,r)}else this.transferDataUnchanged(n,s,r);l?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[Hs]:function(t){const e=function(t,e,i){let s,n=0;for(let r=0,o=e.length;r<o;r++)y[r]&&(s=e[r]+i,n+=t[s]*y[r]);return n},[i,s]=this.getInputAndOutputLines(t),n=i.data,r=s.data,o=n.length,{opacity:a=1,includeRed:c=!0,includeGreen:l=!0,includeBlue:h=!0,includeAlpha:u=!1,offsetX:d=1,offsetY:f=1,lineOut:p}=t;let m=t.width;(isNaN(m)||m<1)&&(m=3),m=V(m);let g=t.height;(isNaN(g)||g<1)&&(g=3),g=V(g);let y=t.weights;y&&y.length==m*g||(y=[].fill(0,0,m*g-1),y[V(y.length/2)+1]=1);const b=this.buildMatrixGrid(m,g,d,f,i);let S,k,A,v,P;const C=V(o/4);for(P=0;P<C;P++)S=4*P,k=S+1,A=k+1,v=A+1,n[v]&&(r[S]=c?e(n,b[P],0):n[S],r[k]=l?e(n,b[P],1):n[k],r[A]=h?e(n,b[P],2):n[A],r[v]=u?e(n,b[P],3):n[v]);p?this.processResults(s,i,1-a):this.processResults(this.cache.work,s,a)},[Bs]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,red:a=1,green:c=1,blue:l=1,alpha:h=1,saturation:u=!1,lineOut:d}=t;let f,p,m,g,y,b,S,k,A;if(u){const t=this.getGrayscaleValue;for(A=0;A<r;A+=4)f=A,p=f+1,m=p+1,g=m+1,b=s[f],S=s[p],k=s[m],y=t(b,S,k),n[f]=y+(b-y)*a,n[p]=y+(S-y)*c,n[m]=y+(k-y)*l,n[g]=s[g]*h}else for(A=0;A<r;A+=4)f=A,p=f+1,m=p+1,g=m+1,n[f]=s[f]*a,n[p]=s[p]*c,n[m]=s[m]*l,n[g]=s[g]*h;d?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[_s]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,{opacity:r=1,lineOut:o}=t;let a=V(t.width||1);a<1&&(a=1);const c=2*a,l=this.buildImageTileSets(c,c,0,0),h=this.getGrayscaleValue,u=ou,d=[],f=[];l.forEach((t=>function(t,e,i){d.length=0,f.length=0;let s,n,r,o,c,l,p=0;const m=i.length;for(s=0;s<m;s++)n=i[s],r=n+1,o=r+1,l=h(t[n],t[r],t[o]),p+=l;p/=m;const g=u[V(p/255*13)];if(1==a)d.push(...g);else{for(l=g[0],s=0;s<a;s++)f.push(l);for(l=g[1],s=0;s<a;s++)f.push(l);for(s=0;s<a;s++)d.push(...f);for(l=g[2],f.length=0,s=0;s<a;s++)f.push(l);for(l=g[3],s=0;s<a;s++)f.push(l);for(s=0;s<a;s++)d.push(...f)}for(s=0;s<m;s++)l=d[s],n=i[s],r=n+1,o=r+1,c=o+1,e[n]=l,e[r]=l,e[o]=l,e[c]=t[c]}(s,n,t))),o?this.processResults(i,e,1-r):this.processResults(this.cache.work,i,r)},[rn]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,{opacity:r=1,offsetRedX:o=0,offsetRedY:a=0,offsetGreenX:c=0,offsetGreenY:l=0,offsetBlueX:h=0,offsetBlueY:u=0,offsetAlphaX:d=0,offsetAlphaY:f=0,lineOut:p}=t;if(o||c||h||d||a||l||u||f){let t=!1;o==c&&o==h&&o==d&&a==l&&a==u&&a==f&&(t=!0);const i=this.buildImageGrid(e),r=i[0].length,p=i.length;let m,g,y,b,S,k,A,v,P,C;for(let e=0;e<p;e++)for(let w=0;w<r;w++)P=4*i[e][w],t?(m=w+o,g=e+a,m>=0&&m<r&&g>=0&&g<p&&(C=4*i[g][m],n[C]=s[P],n[C+1]=s[P+1],n[C+2]=s[P+2],n[C+3]=s[P+3])):(m=w+o,g=e+a,y=w+c,b=e+l,S=w+h,k=e+u,A=w+d,v=e+f,m>=0&&m<r&&g>=0&&g<p&&(C=4*i[g][m],n[C]=s[P]),y>=0&&y<r&&b>=0&&b<p&&(C=4*i[b][y],n[C+1]=s[P+1]),S>=0&&S<r&&k>=0&&k<p&&(C=4*i[k][S],n[C+2]=s[P+2]),A>=0&&A<r&&v>=0&&v<p&&(C=4*i[v][A],n[C+3]=s[P+3]))}p?this.processResults(i,e,1-r):this.processResults(this.cache.work,i,r)},[kn]:function(t){const e=function(t,e,i,s){let n=i.reduce(((e,i)=>e+t[i+s]),0);n=V(n/i.length);for(let t=0,r=i.length;t<r;t++)e[i[t]+s]=n},i=function(t,e,i,s){let n;for(let r=0,o=i.length;r<o;r++)n=i[r],e[n+s]=t[n+s]},[s,n]=this.getInputAndOutputLines(t),r=s.data,o=n.data,{opacity:a=1,tileWidth:c=1,tileHeight:l=1,offsetX:h=0,offsetY:u=0,includeRed:d=!0,includeGreen:f=!0,includeBlue:p=!0,includeAlpha:m=!1,lineOut:g}=t;this.buildImageTileSets(c,l,h,u).forEach((t=>{d?e(r,o,t,0):i(r,o,t,0),f?e(r,o,t,1):i(r,o,t,1),p?e(r,o,t,2):i(r,o,t,2),m?e(r,o,t,3):i(r,o,t,3)})),g?this.processResults(n,s,1-a):this.processResults(this.cache.work,n,a)},[Hn]:function(t){const{assetData:e,lineOut:i}=t;if(i&&i.substring&&i.length){let{width:t,height:s,data:n}=e;if(t&&s&&n){const{width:e,height:r}=this.cache.source;if(e!=t||r!=s){const i=new ImageData(e,r).data;let o,a,c,l,h=(e-t)/2,u=(r-s)/2;for(h<0&&(h=0),u<0&&(u=0),a=0;a<r;a++)for(o=0;o<e;o++)o<t&&a<s&&(c=4*((a+u)*e+(o+h)),l=4*(a*t+o),i[c]=n[l],c++,l++,i[c]=n[l],c++,l++,i[c]=n[l],c++,l++,i[c]=n[l]);n=i,t=e,s=r}this.cache[i]=new ImageData(n,t,s)}}},[dr]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,o=e.width,{opacity:a=1,width:c=1,height:l=1,level:h=.5,seed:u=Qe,noiseType:d=ur,noWrap:f=!1,includeRed:p=!0,includeGreen:m=!0,includeBlue:g=!0,includeAlpha:y=!0,excludeTransparentPixels:b=!0,lineOut:S}=t,k=this.getRandomNumbers({seed:u,length:X(r/4*3),imgWidth:o,type:d});let A,v,P,C,w,x,O,D,R,F,H,E=-1;const I=c/2,T=l/2;for(D=0;D<r;D+=4){if(C=D,w=C+1,x=w+1,O=x+1,d==ur)A=k[++E],v=k[++E],P=k[++E];else{const t=k[++E];A=t,v=t,P=t}A<h?(R=V(v*c-I),F=V(P*l-T),H=D+4*(F*o+R),f&&(H<0||H>=r)?(n[C]=s[C],n[w]=s[w],n[x]=s[x],n[O]=s[O]):(H<0?H+=r:H>=r&&(H-=r),!b||s[O]&&s[H+3]?(n[C]=p?s[H]:s[C],H++,n[w]=m?s[H]:s[w],H++,n[x]=g?s[H]:s[x],H++,n[O]=y?s[H]:s[O]):(n[C]=s[C],n[w]=s[w],n[x]=s[x],n[O]=s[O]))):(n[C]=s[C],n[w]=s[w],n[x]=s[x],n[O]=s[O])}S?this.processResults(i,e,1-a):this.processResults(this.cache.work,i,a)},[br]:function(t){this.predefinedPalette||(this.predefinedPalette={});const e=Mi;this.colorSpaceIndices();const{rgbIndices:i,labIndices:s,indicesMemoRecord:n,predefinedPalette:r,getGrayscaleValue:o,tfx:a,tfx2:c,labIndicesMultiplier:l}=this;let h;const u=(t,e)=>{if(t||(t=e.join(_t)),t&&r[t])return r[t];const o=[];return e.forEach((t=>{lu.convert(t);const[e,r,h]=lu.rgb,u=e*c+r*a+h;if(o.push(u),!n[u]){n[u]=1;const[t,o,a]=lu.convertRGBtoOKLAB(e,r,h);let c=3*u;i[c]=e,s[c]=t*l,c++,i[c]=r,s[c]=o*l,c++,i[c]=h,s[c]=a*l}})),r[t]=o.sort(((t,e)=>t-e)),o};r[ce]||(u(ce,["#000","#fff"]),u("monochrome-4",["#222","#777","#bbb","#fff"]),u("monochrome-8",["#000","#333","#555","#777","#999","#bbb","#ddd","#fff"]),u("monochrome-16",["#000","#111","#222","#333","#444","#555","#666","#777","#888","#999","#aaa","#bbb","#ccc","#ddd","#eee","#fff"]));const d=function(t,e){const s=e.length;if(!s)return 0;if(1===s)return e[0];const n=i[3*t];let r,o,a;const c=[];for(let t=0;t<s;t++)o=e[t],r=i[3*o],a=n-r,c.push([o,ft(a*a*3)]);c.sort(((t,e)=>t[1]-e[1]));const[l,h]=c[0],[u,d]=c[1],f=h+d,p=f-h;return V[Y]*f<p?l:u},f=function(t,e){const i=e.length;let n,r,o,a,c,l,h,u,d,f;if(!i)return 0;if(1===i)return e[0];r=3*t;const p=s[r];r++;const m=s[r];r++;const g=s[r],y=[];for(f=0;f<i;f++)n=e[f],r=3*n,o=s[r],r++,a=s[r],r++,c=s[r],h=p-o,u=m-a,d=g-c,l=h*h+u*u+d*d,y.push([n,l]);y.sort(((t,e)=>t[1]-e[1]));const[b,S]=y[0],[k,A]=y[1];let v=V[Y];const P=S+A;return v*=P,v<P-S?b:k},[p,m]=this.getInputAndOutputLines(t),g=p.data,y=p.width,b=p.height,S=m.data,k=g.length,A=k/4,{opacity:v=1,palette:P=ce,seed:C=Qe,useBluenoise:w=!1,minimumColorDistance:x=1e3,useLabForPaletteDistance:O=!1,lineOut:D}=t,R=w?fe:t.noiseType||ur;let F,H,E,I,T,B,$,L,M,N,X,Y,G,j,W;const V=this.getRandomNumbers({seed:C,length:A,imgWidth:y,type:R});Y=-1;const U=e.includes(P),Z=new ImageData(y,b).data;for(F=0;F<k;F+=4)E=F,I=E+1,T=I+1,B=T+1,U?(X=o(g[E],g[I],g[T]),Z[E]=X,Z[I]=X,Z[T]=X,Z[B]=g[B]):(Z[E]=g[E],Z[I]=g[I],Z[T]=g[T],Z[B]=g[B]);const _=new Int32Array(k/4),q={};for(F=0;F<A;F++)E=4*F,I=E+1,T=I+1,B=T+1,$=Z[E],L=Z[I],M=Z[T],N=Z[B],N?(H=$*c+L*a+M,_[F]=H,null==q[H]&&(q[H]=0,n[H]||(n[H]=1,h=lu.convertRGBtoOKLAB($,L,M),G=3*H,i[G]=$,s[G]=h[0]*l,G++,i[G]=L,s[G]=h[1]*l,G++,i[G]=M,s[G]=h[2]*l)),q[H]=q[H]+1):_[F]=-1;for(W=P.substring?r[P]||[]:K(P)?u(Na,P):P.toFixed?function(t,e,n){const r=[],o=[];let a,c,l,h,u,d,f,p,m,g,y,b,S,k,A,v;for(const[e,i]of z(t))i&&r.push([e,i]);for(r.sort(((t,e)=>e[1]-t[1])),f=0,p=r.length;f<p;f++){const t=r[f];if(f)if(m=3*t[0],O){for(g=s[m],m++,y=s[m],m++,b=s[m],v=!0,a=0,c=o.length;a<c;a++)if(l=3*o[a],h=s[l],l++,u=s[l],l++,d=s[l],S=g-h,k=y-u,A=b-d,S*S+k*k+A*A<e){v=!1;break}if(v&&o.push(t[0]),o.length>=n)break}else{for(g=i[m],m++,y=i[m],m++,b=i[m],v=!0,a=0,c=o.length;a<c;a++)if(l=3*o[a],h=i[l],l++,u=i[l],l++,d=i[l],S=g-h,k=y-u,A=b-d,S*S+k*k+A*A<e){v=!1;break}if(v&&o.push(t[0]),o.length>=n)break}else o.push(t[0])}return o}(q,x,P):[],W.length||(W=r[ce]),F=0;F<A;F++)Y++,H=_[F],j=4*F,H<0?(S[j]=Z[j],j++,S[j]=Z[j],j++,S[j]=Z[j],j++,S[j]=Z[j]):(G=U?3*d(H,W):3*f(H,W),S[j]=i[G],j++,G++,S[j]=i[G],j++,G++,S[j]=i[G],j++,S[j]=Z[j]);D?this.processResults(m,p,1-v):this.processResults(this.cache.work,m,v)},[Br]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,includeRed:a=!1,includeGreen:c=!1,includeBlue:l=!1,includeAlpha:h=!1,level:u=0,lineOut:d}=t;let f,p,m,g,y;for(y=0;y<r;y+=4)f=y,p=f+1,m=p+1,g=m+1,n[f]=a?u:s[f],n[p]=c?u:s[p],n[m]=l?u:s[m],n[g]=h?u:s[g];d?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[co]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,red:a=1,green:c=1,blue:l=1,clamp:h=oi,lineOut:u}=t;let d,f,p,m,g;for(g=0;g<r;g+=4){switch(d=g,f=d+1,p=f+1,m=p+1,h){case ba:n[d]=X(s[d]/a)*a,n[f]=X(s[f]/c)*c,n[p]=X(s[p]/l)*l;break;case"round":n[d]=lt(s[d]/a)*a,n[f]=lt(s[f]/c)*c,n[p]=lt(s[p]/l)*l;break;default:n[d]=V(s[d]/a)*a,n[f]=V(s[f]/c)*c,n[p]=V(s[p]/l)*l}n[m]=s[m]}u?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[mo]:function(t){const e=function(t,e){return t.substring?V(parseFloat(t)/100*e):t},[i,s]=this.getInputAndOutputLines(t),n=i.data,r=s.data,o=n.length,a=i.width,c=i.height,l=new ImageData(a,c),h=l.data,u=l.width,d=l.height,{opacity:f=1,swirls:p=[],lineOut:m}=t;let g,y,b,S,k,A,v,P,C,w,x,O,D,R,F,H,E,I,T,B,$;for(O=0;O<o;O+=4)g=O,y=g+1,b=y+1,S=b+1,h[g]=n[g],h[y]=n[y],h[b]=n[b],h[S]=n[S],r[g]=n[g],r[y]=n[y],r[b]=n[b],r[S]=n[S];if(K(p)&&p.length){const t=this.buildImageGrid(i);for(k=0,A=p.length;k<A;k++){const[i,s,n,o,l,f]=p[k],m=e(i,a),A=e(s,c);let L=e(o,a),M=e(n,a);if(M>L){const t=M;M=L,L=t}const N=L-M;if(P=m-L,P<0&&(P=0),w=m+L,w>u&&(w=u),C=A-L,C<0&&(C=0),x=A+L,x>=d&&(x=d),P<w&&C<x&&P<u&&w>0&&C<d&&x>0){let e=f,u=f;nc(e)?u=`ude-${e(0)}-${e(.1)}-${e(.2)}-${e(.3)}-${e(.4)}-${e(.5)}-${e(.6)}-${e(.7)}-${e(.8)}-${e(.9)}-${e(1)}`:e=null!=gc[e]?gc[e]:gc.linear;const d=Gh(`swirl-${i}-${s}-${n}-${o}-${l}-${u}-${a}-${c}`);if(!d.length){const i=eu(),s=eu();for(i.setFromArray([m,A]),O=C;O<x;O++)for(D=P;D<w;D++)v=[D,O],g=4*t[O][D],R=s.set(v).subtract(i).getMagnitude(),R>L?F=g:R<M?(s.rotate(l).add(i),T=V(s[0]),B=V(s[1]),T<0?T+=a:T>=a&&(T-=a),B<0?B+=c:B>=c&&(B-=c),F=4*t[B][T]):($=1-(R-M)/N,$=e($),s.rotate(l*$).add(i),T=V(s[0]),B=V(s[1]),T<0?T+=a:T>=a&&(T-=a),B<0?B+=c:B>=c&&(B-=c),F=4*t[B][T]),d.push(F);iu(s),iu(i)}let p=-1;for(O=C;O<x;O++)for(D=P;D<w;D++)g=4*t[O][D],y=g+1,b=y+1,S=b+1,F=d[++p],H=F+1,E=H+1,I=E+1,r[g]=h[F],r[y]=h[H],r[b]=h[E],r[S]=h[I];for(O=C;O<x;O++)for(D=P;D<w;D++)g=4*t[O][D],y=g+1,b=y+1,S=b+1,h[g]=r[g],h[y]=r[y],h[b]=r[b],h[S]=r[S]}}}m?this.processResults(s,i,1-f):this.processResults(this.cache.work,s,f)},[qo]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,low:a=[0,0,0,0],high:c=[255,255,255,255],level:l=128,red:h=128,green:u=128,blue:d=128,alpha:f=128,includeRed:p=!0,includeGreen:m=!0,includeBlue:g=!0,includeAlpha:y=!1,useMixedChannel:b=!0,lineOut:S}=t,[k,A,v,P]=a,[C,w,x,O]=c,D=this.getGrayscaleValue;let R,F,H,E,I,T,B,$,L,M;for(I=0;I<r;I+=4)R=I,F=R+1,H=F+1,E=H+1,T=s[R],B=s[F],$=s[H],L=s[E],b?(M=D(T,B,$),M<l?(n[R]=p?k:T,n[F]=m?A:B,n[H]=g?v:$,n[E]=y?P:L):(n[R]=p?C:T,n[F]=m?w:B,n[H]=g?x:$,n[E]=y?O:L)):(n[R]=p?T<h?k:C:T,n[F]=m?B<u?A:w:B,n[H]=g?$<d?v:x:$,n[E]=y?L<f?P:O:L);S?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[Jo]:function(t){const e=function(t,e,i,s){let n=i.reduce(((e,i)=>e+t[4*i+s]),0);n=V(n/i.length);for(let t=0,r=i.length;t<r;t++)e[4*i[t]+s]=n},i=function(t,e,i,s){let n;for(let r=0,o=i.length;r<o;r++)n=4*i[r]+s,e[n]=t[n]},[s,n]=this.getInputAndOutputLines(t),r=s.data,o=n.data,a=r.length,{opacity:c=1,tileWidth:l=1,tileHeight:h=1,tileRadius:u=1,offsetX:d=0,offsetY:f=0,angle:p=0,points:m=mr,seed:g=Qe,includeRed:y=!0,includeGreen:b=!0,includeBlue:S=!0,includeAlpha:k=!1,lineOut:A}=t,v=this.buildGeneralTileSets(m,l,h,u,d,f,p,g);v.length?v.forEach((t=>{y?e(r,o,t,0):i(r,o,t,0),b?e(r,o,t,1):i(r,o,t,1),S?e(r,o,t,2):i(r,o,t,2),k?e(r,o,t,3):i(r,o,t,3)})):this.transferDataUnchanged(o,r,a),A?this.processResults(n,s,1-c):this.processResults(this.cache.work,n,c)},[ta]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,redInRed:a=1,redInGreen:c=0,redInBlue:l=0,greenInRed:h=0,greenInGreen:u=1,greenInBlue:d=0,blueInRed:f=0,blueInGreen:p=0,blueInBlue:m=1,lineOut:g}=t;let y,b,S,k,A,v,P,C;for(A=0;A<r;A+=4)y=A,b=y+1,S=b+1,k=S+1,v=s[y],P=s[b],C=s[S],n[y]=V(v*a+P*h+C*f),n[b]=V(v*c+P*u+C*p),n[S]=V(v*l+P*d+C*m),n[k]=s[k];g?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)},[Aa]:function(t){const[e,i]=this.getInputAndOutputChannels(t),{opacity:s=1,lineOut:n}=t;this.transferDataUnchanged(e,i),n?this.processResults(i,e,1-s):this.processResults(this.cache.work,i,s)},[Pa]:function(t){const[e,i]=this.getInputAndOutputLines(t),s=e.data,n=i.data,r=s.length,{opacity:o=1,weights:a=[],useMixedChannel:c=!0,lineOut:l}=t;1024!=a.length&&(a.length=1024,a.fill(0));const h=this.getGrayscaleValue;let u,d,f,p,m,g,y,b,S,k,A,v,P,C;for(u=0;u<r;u+=4)d=u,f=d+1,p=f+1,m=p+1,g=s[d],y=s[f],b=s[p],S=s[m],c?(k=h(g,y,b),A=a[4*k+3],v=.2126*A,P=.7152*A,C=.0722*A,n[d]=g+v,n[f]=y+P,n[p]=b+C,n[m]=s[m]):(n[d]=g+a[4*g],n[f]=y+a[4*y+1],n[p]=b+a[4*b+2],n[m]=S+a[4*S+3]);l?this.processResults(i,e,1-o):this.processResults(this.cache.work,i,o)}}),yl({name:"filters-cleanup-action",order:999,fn:function(){m.forEach((t=>{const e=p[t];e&&(e.dirtyFilterIdentifier=!1)})),R.forEach((t=>{const e=D[t];e&&(e.dirtyFilterIdentifier=!1)}))}}),I.FilterEngine=FilterEngine;const uu=new FilterEngine;function du(t=qa){t.defs=cc(t.defs,{sourceLoaded:!1,source:null,subscribers:null}),t.packetExclusions=hc(t.packetExclusions,["sourceLoaded","source","subscribers"]),t.finalizePacketOut=function(t){return this.subscribers&&this.subscribers.length&&(t.subscribers=this.subscribers.map((t=>t.name))),t},t.kill=function(t=!1){return t&&this.source&&this.source.remove(),this.deregister()};const e=t.setters;e.source=function(t){t&&this.sourceLoaded&&this.notifySubscribers()},e.subscribers=Ua,t.assetConstructor=function(t){return this.makeName(t.name),this.register(),this.subscribers=[],this.set(this.defs),this.set(t),t.subscribe&&this.subscribers.push(t.subscribe),this},t.subscribe=function(t){if(t&&t.name){const e=t.name;this.subscribers.every((t=>t.name!==e))&&this.subscribeAction(t)}},t.subscribeAction=function(t){t&&(this.subscribers.push(t),t.asset=this,t.source=this.source,this.notifySubscriber(t))},t.unsubscribe=function(t){if(t&&t.name){const e=t.name,i=this.subscribers.findIndex((t=>t.name==e));i>=0&&(t.source=null,t.asset=null,t.sourceNaturalHeight=0,t.sourceNaturalWidth=0,t.sourceLoaded=!1,this.subscribers.splice(i,1))}},t.notifySubscribers=function(){this.subscribers.forEach((t=>this.notifySubscriber(t)),this)},t.notifySubscriber=function(t){t.sourceNaturalWidth=this.sourceNaturalWidth,t.sourceNaturalHeight=this.sourceNaturalHeight,t.sourceLoaded=this.sourceLoaded,t.source=this.source,t.dirtyImage=!0,t.dirtyCopyStart=!0,t.dirtyCopyDimensions=!0,t.dirtyImageSubscribers=!0,t.dirtyFilterIdentifier=!0}}const ImageAsset=function(t=qa){return this.assetConstructor(t)},fu=ImageAsset.prototype=yc();fu.type=wo,fu.lib=Jt,fu.isArtefact=!1,fu.isAsset=!0,ml(fu),du(fu);fu.defs=cc(fu.defs,{intrinsicDimensions:null}),fu.saveAsPacket=function(){return[this.name,this.type,this.lib,{}]},fu.stringifyFunction=Ua,fu.processPacketOut=Ua,fu.finalizePacketOut=Ua,fu.clone=_a;const pu=fu.getters,mu=fu.setters;pu.width=function(){return this.sourceNaturalWidth||this.source.naturalWidth||0},pu.height=function(){return this.sourceNaturalHeight||this.source.naturalHeight||0},mu.source=function(t){t&&(ts.includes(t.tagName.toUpperCase())&&(this.source=t,this.sourceNaturalWidth=t.naturalWidth,this.sourceNaturalHeight=t.naturalHeight,this.sourceLoaded=t.complete),this.sourceLoaded&&this.notifySubscribers())},mu.currentSrc=function(t){this.currentSrc=t,this.currentFile=this.currentSrc.split("/").pop()},fu.checkSource=function(t,e){const i=this.source;let s=ci;if(this.sourceLoaded){let n=this.intrinsicDimensions[this.currentFile];switch(this.currentSrc!==i.currentSrc?(this.set({currentSrc:i.currentSrc}),n=this.intrinsicDimensions[this.currentFile],s=n?ns:La):n&&(s=ns),s){case La:this.sourceNaturalWidth=0,this.sourceNaturalHeight=0,this.notifySubscribers();break;case ns:this.sourceNaturalWidth===n[0]&&this.sourceNaturalHeight===n[1]||(this.sourceNaturalWidth=n[0],this.sourceNaturalHeight=n[1],this.notifySubscribers());break;default:this.sourceNaturalWidth===i.naturalWidth&&this.sourceNaturalHeight===i.naturalHeight&&this.sourceNaturalWidth===t&&this.sourceNaturalHeight===e||(this.sourceNaturalWidth=i.naturalWidth,this.sourceNaturalHeight=i.naturalHeight,this.notifySubscribers())}}};const gu=[],yu=[],bu=function(...t){const e=[];return t.forEach((t=>{let i,s,n,r,o=!1,a=!1;if(t.substring){const e=te.exec(t);i=e&&e[1]?e[1]:Na,s=t,n=Na,r=!1,a=!0}else(t=!!oc(t)&&t)&&t.src&&(i=t.name||Na,s=t.src,n=t.className||Na,r=t.visibility||!1,t.parent&&(o=document.querySelector(t.parent)),a=!0);if(a){const t=Pu({name:i,intrinsicDimensions:{}}),a=document.createElement(es);a.name=i,a.className=n,a.crossorigin=Ut,a.style.display=r?ue:tn,o&&o.appendChild(a),a.onload=()=>{t.set({source:a})},a.src=s,t.set({source:a}),e.push(i)}else e.push(!1)})),e},Su=function(t){document.querySelectorAll(t).forEach((t=>{let e;if(ts.includes(t.tagName.toUpperCase())){if(t.id||t.name)e=t.id||t.name;else{const i=te.exec(t.src);e=i&&i[1]?i[1]:Na}let i=t.dataset.dimensions||{};i.substring&&(i=it(i));const s=Pu({name:e,source:t,intrinsicDimensions:i,currentSrc:t.currentSrc});t.onload=()=>{s.set({source:t})}}}))},ku=function(t,e=!1){let i=t.substring?u[t]||h[t]:t;i.type==yo&&(i=i.base),i.type==bo&&(i.stashOutput=!0,e&&(i.stashOutputAsAsset=e))},Au=function(t,e=!1){let i;t&&!t.substring?t.type==Co?i=t:t.type==bo?i=g[t.name]:t.type==yo&&(i=g[t.base.name]):t&&t.substring&&(i=g[t]),i&&(i.stashOutput=!0,e&&(i.stashOutputAsAsset=e))},vu=function(t,e=!1){const i=t.substring?o[t]:t;i.isArtefact&&(i.stashOutput=!0,e&&(i.stashOutputAsAsset=e))},Pu=function(t){return!!t&&new ImageAsset(t)};function Cu(t=qa){t.defs=cc(t.defs,{filters:null,isStencil:!1,memoizeFilterOutput:!1});const e=t.setters;e.filters=function(t){K(this.filters)||(this.filters=[]),t&&(K(t)?(this.filters=t,this.dirtyFilters=!0,this.dirtyImageSubscribers=!0):t.substring&&(hc(this.filters,t),this.dirtyFilters=!0,this.dirtyImageSubscribers=!0),this.dirtyFilterIdentifier=!0)},e.memoizeFilterOutput=function(t){this.memoizeFilterOutput=t,this.updateFilterIdentifier(!!t)},t.updateFilterIdentifier=function(t){this.dirtyFilterIdentifier=!1,this.state&&(this.state.dirtyFilterIdentifier=!1),this.memoizeFilterOutput&&t?this.filterIdentifier=Qa():this.filterIdentifier=Na},t.cleanFilters=function(){this.dirtyFilters=!1,this.dirtyFiltersCache=!0,this.filters||(this.filters=[]),this.currentFilters||(this.currentFilters=[]);const{filters:t,currentFilters:e}=this;if(t.length){const i=Kc();let s,n,r,o,a,c;for(s=0,n=t.length;s<n;s++)o=t[s],r=p[o],r&&(a=V(r.order)||0,i[a]||(i[a]=Kc()),i[a].push(r));for(e.length=0,s=0,n=i.length;s<n;s++)c=i[s],c&&(e.push(...c),qc(c));qc(i)}else e.length=0},t.addFilters=function(...t){return K(this.filters)||(this.filters=[]),t.forEach((t=>{t&&t.type===vo&&(t=t.name),hc(this.filters,t)}),this),this.dirtyFilters=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0,this},t.removeFilters=function(...t){return K(this.filters)||(this.filters=[]),t.forEach((t=>{t&&t.type===vo&&(t=t.name),uc(this.filters,t)}),this),this.dirtyFilters=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0,this},t.clearFilters=function(){return K(this.filters)||(this.filters=[]),this.filters.length=0,this.dirtyFilters=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0,this},t.preprocessFilters=function(t){let e,i,s,n,r,o,a,l,h,u,d,f,p,m,g,y;for(e=0,i=t.length;e<i;e++){h=t[e];for(let t=0,e=h.actions.length;t<e;t++)if(u=h.actions[t],u.action==Hn){if(s=!0,n=c[u.asset],n&&(wo!==n.type&&(n.checkSource(),this.dirtyFilterIdentifier=!0),n.type!==Wo&&n.type!==Xo&&n.type!==Oo&&n.type!==bo&&n.type!==$o&&n.type!==Lo||n.checkSource(),r=n.sourceNaturalWidth,o=n.sourceNaturalHeight,a=n.sourceNaturalDimensions,l=n.currentDimensions,r&&o||(a&&a[0]&&a[1]?(r=r||a[0],o=o||a[1]):l&&l[0]&&l[1]&&(r=r||l[0],o=o||l[1])),r&&o)){s=!1,d=u.copyX||0,f=u.copyY||0,p=u.copyWidth||1,m=u.copyHeight||1,g=u.width||1,y=u.height||1,d.substring&&(d=parseFloat(d)/100*r),f.substring&&(f=parseFloat(f)/100*o),p.substring&&(p=parseFloat(p)/100*r),m.substring&&(m=parseFloat(m)/100*o),g.substring&&(g=parseFloat(g)/100*r),y.substring&&(y=parseFloat(y)/100*o),d=B(d),f=B(f),p=B(p),m=B(m),g=B(g),y=B(y),d>r&&(d=r-2,p=1),f>o&&(f=o-2,m=1),p>r&&(p=r-1,d=0),m>o&&(m=o-1,f=0),d+p>r&&(d=r-p-1),f+m>o&&(f=o-m-1);const t=qh(),e=t.engine,i=t.element;i.width=g,i.height=y,e.setTransform(1,0,0,1,0,0),e.globalCompositeOperation=_r,e.globalAlpha=1;const a=n.source||n.element;e.drawImage(a,~~d,~~f,~~p,~~m,0,0,~~g,~~y),u.assetData=e.getImageData(0,0,~~g,~~y),Qh(t)}s&&(u.assetData={width:1,height:1,data:new Uint8ClampedArray(4)})}h.dirtyFilterIdentifier&&(this.dirtyFilterIdentifier=!0)}const b=this.state;if(b)if(b.dirtyFilterIdentifier)this.dirtyFilterIdentifier=!0;else{const{fillStyle:t,strokeStyle:e}=b;(D[t]&&D[t].dirtyFilterIdentifier||D[e]&&D[e].dirtyFilterIdentifier)&&(this.dirtyFilterIdentifier=!0)}(this.dirtyFilterIdentifier||this.state&&this.state.dirtyFilterIdentifier)&&this.updateFilterIdentifier(!0)}}I.ImageAsset=ImageAsset;const Group=function(t=qa){return this.makeName(t.name),this.register(),this.artefacts=[],this.artefactCalculateBuckets=[],this.artefactStampBuckets=[],this.set(this.defs),this.onEntityHover=Ua,this.onEntityNoHover=Ua,this.isHovering=null,this.set(t),this},wu=Group.prototype=yc();wu.type=Co,wu.lib="group",wu.isArtefact=!1,wu.isAsset=!1,ml(wu),Cu(wu);wu.defs=cc(wu.defs,{artefacts:null,order:0,visibility:!0,regionRadius:0,checkForEntityHover:!1,onEntityHover:null,onEntityNoHover:null}),wu.packetExclusions=hc(wu.packetExclusions,["artefactCalculateBuckets","artefactStampBuckets","batchResort"]),wu.packetFunctions=hc(wu.packetFunctions,["onEntityHover","onEntityNoHover"]),wu.postCloneAction=function(t,e){let i;return i=e.host?o[e.host]:this.currentHost?this.currentHost:!!this.host&&o[this.host],i&&(i.addGroups(t.name),t.host||(t.host=i.name)),this.onEntityHover&&(t.onEntityHover=this.onEntityHover),this.onEntityNoHover&&(t.onEntityNoHover=this.onEntityNoHover),t},wu.kill=function(t=!1){t&&this.artefactCalculateBuckets.forEach((t=>t.kill()));const e=this.name;return bt(o).forEach((t=>{K(t.groups)&&t.groups.includes(e)&&(uc(t.groups,e),t.batchResort=!0)})),bt(u).forEach((t=>{K(t.groups)&&t.groups.includes(e)&&(uc(t.groups,e),t.batchResort=!0)})),this.deregister()},wu.killArtefacts=function(){return this.artefactCalculateBuckets.forEach((t=>t.kill())),this};const xu=wu.getters,Ou=wu.setters;xu.artefacts=function(){return[].concat(this.artefacts)},Ou.artefacts=function(t){this.artefacts||(this.artefacts=[]),this.artefacts.length=0,this.addArtefacts(t)},Ou.host=function(t){const e=this.getHost(t);e&&e.addGroups&&(this.host=t,e.addGroups(this.name),this.dirtyHost=!0)},Ou.order=function(t){const e=this.getHost(this.host);this.order=t,e&&e.set({batchResort:!0})},Ou.noFilters=function(t){this.noFilters=t,this.dirtyFilterIdentifier=!0},wu.getHost=function(t){if(t){if(t.type&&Lt.includes(t.type))return t;if(t.substring)return o[t]||u[t]}const e=this.currentHost;return e&&e.substring?o[e]||u[e]:e},wu.forceStamp=function(){const t=this.visibility;this.visibility=!0,this.stamp(),this.visibility=t},wu.stamp=function(){if(this.dirtyHost||!this.currentHost){this.dirtyHost=!1;const t=this.getHost(this.host);t?this.currentHost=t:this.dirtyHost=!0}if(this.visibility){const{currentHost:t,stashOutput:e,noFilters:i,filters:s}=this;if(t){this.sortArtefacts();const n=!!(e||!i&&s&&s.length)&&qh();if(n&&n.element){const e=t.currentDimensions,i=n.element;e&&i&&(i.width=e[0],i.height=e[1])}else t.engine&&t.engine.save();this.prepareStamp(n),this.stampAction(n),n?Qh(n):t.engine&&(t.engine.restore(),t.setEngineFromState(t.engine))}}},wu.sortArtefacts=function(){if(this.batchResort){this.batchResort=!1;const t=Kc(),e=Kc(),{artefacts:i,artefactCalculateBuckets:s,artefactStampBuckets:n}=this;let r,a,c,l,h,u;for(c=0,l=i.length;c<l;c++)h=i[c],r=o[h],r&&(a=V(r.calculateOrder),t[a]||(t[a]=Kc()),t[a].push(r),a=V(r.stampOrder),e[a]||(e[a]=Kc()),e[a].push(r));for(s.length=0,c=0,l=t.length;c<l;c++)u=t[c],u&&(s.push(...u),qc(u));for(qc(t),n.length=0,c=0,l=e.length;c<l;c++)u=e[c],u&&(n.push(...u),qc(u));qc(e)}},wu.prepareStamp=function(t){let e=this.currentHost;t&&(e=t),this.artefactCalculateBuckets.forEach((i=>{i.lib==gi&&(i.currentHost&&i.currentHost.name==e.name||(i.currentHost=e,t||(i.dirtyHost=!0))),i.noDeltaUpdates||i.updateByDelta(),i.prepareStamp()}))},wu.stampAction=function(t){const{dirtyFilters:e,currentFilters:i,artefactStampBuckets:s,noFilters:n,filters:r,stashOutput:o,currentHost:a}=this;if(!e&&i||this.cleanFilters(),s.forEach((t=>{t&&t.stamp&&t.stamp()})),t)if(!n&&r&&r.length){const e=this.applyFilters(t);this.stashAction(e)}else if(o){const e=t.element,i=t.engine,s=!(!a||!a.engine)&&a.engine;if(s){s.save(),s.globalCompositeOperation=_r,s.globalAlpha=1,s.setTransform(1,0,0,1,0,0),s.drawImage(e,0,0),s.restore();const t=i.getImageData(0,0,e.width,e.height);this.stashAction(t)}}},wu.applyFilters=function(t){const e=this.currentHost;if(!e||!t)return!1;const i=e.element,s=e.engine,n=t.element,r=t.engine;this.isStencil&&(r.save(),r.globalCompositeOperation=Zr,r.globalAlpha=1,r.setTransform(1,0,0,1,0,0),r.drawImage(i,0,0),r.restore(),this.dirtyFilterIdentifier=!0),r.setTransform(1,0,0,1,0,0);const o=r.getImageData(0,0,n.width,n.height);this.preprocessFilters(this.currentFilters);const a=uu.action({identifier:this.filterIdentifier,image:o,filters:this.currentFilters});return a&&(r.globalCompositeOperation=_r,r.globalAlpha=1,r.setTransform(1,0,0,1,0,0),r.putImageData(a,0,0)),s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(n,0,0),s.restore(),a},wu.stashAction=function(t){if(!t)return!1;if(this.stashOutput){this.stashOutput=!1;const[e,i,s,n]=this.getCellCoverage(t),r=qh(),o=r.engine,a=r.element;if(a.width=s,a.height=n,o.putImageData(t,-e,-i),this.stashedImageData=o.getImageData(0,0,s,n),this.stashOutputAsAsset){const t=this.stashOutputAsAsset.substring?this.stashOutputAsAsset:`${this.name}-groupimage`;if(this.stashOutputAsAsset=!1,this.stashedImage)this.stashedImage.src=a.toDataURL();else{const e=this.stashedImage=document.createElement("img");e.id=t,e.onload=function(){ql.appendChild(e),Su(`#${t}`)},e.src=a.toDataURL()}}Qh(r)}},wu.getCellCoverage=function(t){const{width:e,height:i,data:s}=t;let n,r,o,a,c=0,l=0,h=e,u=i,d=3;for(o=0,a=e*i;o<a;o++)s[d]&&(r=V(o/e),n=o-r*e,h>n&&(h=n),c<n&&(c=n),u>r&&(u=r),l<r&&(l=r)),d+=4;return h<c&&u<l?[h,u,c-h,l-u]:[0,0,e,i]},wu.addArtefacts=function(...t){return t&&K(t[0])&&(t=t[0]),t.forEach((t=>{t&&(t.substring?hc(this.artefacts,t):t.name&&hc(this.artefacts,t.name))}),this),this.batchResort=!0,this},wu.getArtefact=function(t){return this.artefacts.includes(t)&&o[t]||!1},wu.removeArtefacts=function(...t){return t.forEach((t=>{t&&(t.substring?uc(this.artefacts,t):t.name&&uc(this.artefacts,t.name))}),this),this.batchResort=!0,this},wu.moveArtefactsIntoGroup=function(...t){let e,i;return t.forEach((t=>{t&&(i=t.substring?o[t]:t,i&&i.isArtefact&&(e=i.group?i.group:!!i.host&&g[i.host]),e&&(e.removeArtefacts(t),e.batchResort=!0),hc(this.artefacts,t))}),this),this.batchResort=!0,this},wu.clearArtefacts=function(){return this.artefacts.length=0,this.artefactCalculateBuckets.length=0,this.artefactStampBuckets.length=0,this.batchResort=!0,this},wu.updateArtefacts=function(t){return this.cascadeAction(t,"setDelta"),this},wu.setArtefacts=function(t){return this.cascadeAction(t,"set"),this},wu.updateByDelta=function(){return this.cascadeAction(!1,ka),this},wu.reverseByDelta=function(){return this.cascadeAction(!1,Or),this},wu.addArtefactClasses=function(t){return this.cascadeAction(t,"addClasses"),this},wu.removeArtefactClasses=function(t){return this.cascadeAction(t,"removeClasses"),this},wu.cascadeAction=function(t,e){let i;return this.artefacts.forEach((s=>{i=o[s],i&&i[e]&&i[e](t)})),this},wu.setDeltaValues=function(t=qa){return this.artefactCalculateBuckets.forEach((e=>e.setDeltaValues(t))),this},wu.addFiltersToEntitys=function(...t){let e;return this.artefacts.forEach((i=>{e=f[i],e&&e.addFilters&&e.addFilters(t)})),this},wu.removeFiltersFromEntitys=function(...t){let e;return this.artefacts.forEach((i=>{e=f[i],e&&e.removeFilters&&e.removeFilters(t)})),this},wu.clearFiltersFromEntitys=function(){let t;return this.artefacts.forEach((e=>{t=f[e],t&&t.clearFilters&&t.clearFilters()})),this},wu.getArtefactAt=function(t){this.sortArtefacts();const e=qh(),i=this.artefactStampBuckets;let s,n;for(let r=i.length-1;r>=0;r--)if(s=i[r],s&&(n=s.checkHit(t,e),n))return Qh(e),n;return Qh(e),!1},wu.getAllArtefactsAt=function(t){this.sortArtefacts();const e=qh(),i=this.artefactStampBuckets,s=Kc(),n=[];let r,o,a;for(let c=i.length-1;c>=0;c--)r=i[c],r&&(o=r.checkHit(t,e),o&&o.artefact&&(a=o.artefact,s.includes(a.name)||(s.push(a.name),n.push(o))));if(Qh(e),qc(s),this.checkForEntityHover){const t=!!n.length;this.isHovering!=t&&(this.isHovering=t,t?this.onEntityHover():this.onEntityNoHover())}return n};const Du=function(t){return!!t&&new Group(t)};function Ru(t=qa){t.defs=cc(t.defs,{group:null,visibility:!0,calculateOrder:0,stampOrder:0,start:null,handle:null,offset:null,dimensions:null,pivoted:null,mimicked:null,particle:null,lockTo:null,bringToFrontOnDrag:!0,ignoreDragForX:!1,ignoreDragForY:!1,scale:1,roll:0,noUserInteraction:!1,noPositionDependencies:!1,noCanvasEngineUpdates:!1,noFilters:!1,noPathUpdates:!1,purge:null}),t.packetExclusions=hc(t.packetExclusions,["pathObject","mimicked","pivoted"]),t.packetExclusionsByRegex=hc(t.packetExclusionsByRegex,["^(local|dirty|current)","Subscriber$"]),t.packetCoordinates=hc(t.packetCoordinates,["start","handle","offset"]),t.packetObjects=hc(t.packetObjects,["group"]),t.processPacketOut=function(t,e,i){let s=!0;if(t===Ps)e[0]==Qr&&e[1]==Qr&&(s=!!i.includes(Ps));else this.lib==gi?s=this.processEntityPacketOut(t,e,i):this.isArtefact&&(s=this.processDOMPacketOut(t,e,i));return s},t.handlePacketAnchor=function(t,e){if(this.anchor){const i=it(this.anchor.saveAsPacket(e))[3];t.anchor=i}if(this.button){const i=it(this.button.saveAsPacket(e))[3];t.button=i}return t},t.kill=function(t=!1,e=!1){const i=this.name;return bt(g).forEach((t=>{t.artefacts.includes(i)&&t.removeArtefacts(i)})),this.anchor&&this.demolishAnchor(),this.button&&this.demolishButton(),bt(o).forEach((t=>{t.name!==i&&(t.pivot&&t.pivot.name===i&&t.set({pivot:!1}),t.mimic&&t.mimic.name===i&&t.set({mimic:!1}),t.path&&t.path.name===i&&t.set({path:!1}),t.generateAlongPath&&t.generateAlongPath.name===i&&t.set({generateAlongPath:!1}),t.generateInArea&&t.generateInArea.name===i&&t.set({generateInArea:!1}),t.artefact&&t.artefact.name===i&&t.set({artefact:!1}),K(t.pins)&&t.pins.forEach(((e,s)=>{oc(e)&&e.name===i&&t.removePinAt(s)})))})),bt(x).forEach((t=>{t.checkForTarget(i)&&t.removeFromTargets(this)})),this.factoryKill(t,e),this.deregister(),this},t.factoryKill=Ua;const e=t.getters,i=t.setters,s=t.deltaSetters;e.positionX=function(){return this.currentStampPosition[0]},e.positionY=function(){return this.currentStampPosition[1]},e.position=function(){return[].concat(this.currentStampPosition)},e.startX=function(){return this.currentStart[0]},e.startY=function(){return this.currentStart[1]},e.start=function(){return[].concat(this.currentStart)},i.startX=function(t){null!=t&&(this.start[0]=t,this.dirtyStart=!0)},i.startY=function(t){null!=t&&(this.start[1]=t,this.dirtyStart=!0)},i.start=function(t,e){this.setCoordinateHelper(Qr,t,e),this.dirtyStart=!0},s.startX=function(t){const e=this.start;e[0]=Ga(e[0],t),this.dirtyStart=!0},s.startY=function(t){const e=this.start;e[1]=Ga(e[1],t),this.dirtyStart=!0},s.start=function(t,e){this.setDeltaCoordinateHelper(Qr,t,e),this.dirtyStart=!0},e.handleX=function(){return this.currentHandle[0]},e.handleY=function(){return this.currentHandle[1]},e.handle=function(){return[].concat(this.currentHandle)},i.handleX=function(t){null!=t&&(this.handle[0]=t,this.dirtyHandle=!0)},i.handleY=function(t){null!=t&&(this.handle[1]=t,this.dirtyHandle=!0)},i.handle=function(t,e){this.setCoordinateHelper(zi,t,e),this.dirtyHandle=!0},s.handleX=function(t){const e=this.handle;e[0]=Ga(e[0],t),this.dirtyHandle=!0},s.handleY=function(t){const e=this.handle;e[1]=Ga(e[1],t),this.dirtyHandle=!0},s.handle=function(t,e){this.setDeltaCoordinateHelper(zi,t,e),this.dirtyHandle=!0},e.offsetX=function(){return this.currentOffset[0]},e.offsetY=function(){return this.currentOffset[1]},e.offset=function(){return[].concat(this.currentOffset)},i.offsetX=function(t){null!=t&&(this.offset[0]=t,this.dirtyOffset=!0)},i.offsetY=function(t){null!=t&&(this.offset[1]=t,this.dirtyOffset=!0)},i.offset=function(t,e){this.setCoordinateHelper(rn,t,e),this.dirtyOffset=!0},s.offsetX=function(t){const e=this.offset;e[0]=Ga(e[0],t),this.dirtyOffset=!0},s.offsetY=function(t){const e=this.offset;e[1]=Ga(e[1],t),this.dirtyOffset=!0},s.offset=function(t,e){this.setDeltaCoordinateHelper(rn,t,e),this.dirtyOffset=!0},e.width=function(){return this.currentDimensions[0]},e.height=function(){return this.currentDimensions[1]},e.dimensions=function(){return[].concat(this.currentDimensions)},i.width=function(t){null!=t&&(this.dimensions[0]=t,this.dirtyDimensions=!0)},i.height=function(t){null!=t&&(this.dimensions[1]=t,this.dirtyDimensions=!0)},i.dimensions=function(t,e){this.setCoordinateHelper(ei,t,e),this.dirtyDimensions=!0},s.width=function(t){const e=this.dimensions;e[0]=Ga(e[0],t),this.dirtyDimensions=!0},s.height=function(t){const e=this.dimensions;e[1]=Ga(e[1],t),this.dirtyDimensions=!0},s.dimensions=function(t,e){this.setDeltaCoordinateHelper(ei,t,e),this.dirtyDimensions=!0},e.order=function(){return this.stampOrder},i.order=function(t){this.calculateOrder=t,this.stampOrder=t},i.particle=function(t){ec(t)&&!t?(this.particle=null,this.lockTo[0]==hn&&(this.lockTo[0]=Qr),this.lockTo[1]==hn&&(this.lockTo[1]=Qr),this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0):(this.particle=t,this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0)},i.lockTo=function(t){K(t)?(this.lockTo[0]=t[0],this.lockTo[1]=t[1]):(this.lockTo[0]=t,this.lockTo[1]=t),this.dirtyLock=!0,this.dirtyStampPositions=!0},i.lockXTo=function(t){this.lockTo[0]=t,this.dirtyLock=!0,this.dirtyStampPositions=!0},i.lockYTo=function(t){this.lockTo[1]=t,this.dirtyLock=!0,this.dirtyStampPositions=!0},e.roll=function(){return this.currentRotation},i.roll=function(t){this.roll=t,this.dirtyRotation=!0},s.roll=function(t){this.roll+=t,this.dirtyRotation=!0},e.scale=function(){return this.currentScale},i.scale=function(t){this.scale=t,this.dirtyScale=!0},s.scale=function(t){this.scale+=t,this.dirtyScale=!0},i.host=function(t){if(t){const e=o[t];e&&e.here?this.host=e.name:this.host=t}else this.host=Na;this.dirtyDimensions=!0,this.dirtyHandle=!0,this.dirtyStart=!0,this.dirtyOffset=!0},i.group=function(t){if(t)if(this.group&&this.group.type==Co&&this.group.removeArtefacts(this.name),t.substring){const e=g[t];this.group=e||t}else this.group=t;this.group&&this.group.type==Co&&this.group.addArtefacts(this.name)},i.noFilters=function(t){this.noFilters=t,this.dirtyFilterIdentifier=!0},t.purgeArtefact=function(t){return t.substring&&(t=t===Yt?[Sn,Ts,un,Ai]:[t]),K(t)&&t.forEach((t=>function(t,e){switch(e){case Sn:delete t.pivot,delete t.pivotCorner,delete t.pivotPin,delete t.addPivotHandle,delete t.addPivotOffset,delete t.addPivotRotation;break;case Ts:delete t.mimic,delete t.useMimicDimensions,delete t.useMimicScale,delete t.useMimicStart,delete t.useMimicHandle,delete t.useMimicOffset,delete t.useMimicRotation,delete t.useMimicFlip,delete t.addOwnDimensionsToMimic,delete t.addOwnScaleToMimic,delete t.addOwnStartToMimic,delete t.addOwnHandleToMimic,delete t.addOwnOffsetToMimic,delete t.addOwnRotationToMimic;break;case un:delete t.path,delete t.pathPosition,delete t.addPathHandle,delete t.addPathOffset,delete t.addPathRotation,delete t.constantPathSpeed;break;case Ai:delete t.filter,delete t.filters,delete t.isStencil}}(this,t))),this},t.initializePositions=function(){this.dimensions=su(),this.start=su(),this.handle=su(),this.offset=su(),this.currentDimensions=su(),this.currentStart=su(),this.currentHandle=su(),this.currentOffset=su(),this.currentDragOffset=su(),this.currentDragCache=su(),this.currentStartCache=su(),this.currentStampPosition=su(),this.currentStampHandlePosition=su(),this.delta={},this.deltaConstraints={},this.lockTo=[Qr,Qr],this.pivoted=[],this.mimicked=[],this.dirtyScale=!0,this.dirtyDimensions=!0,this.dirtyLock=!0,this.dirtyStart=!0,this.dirtyOffset=!0,this.dirtyHandle=!0,this.dirtyRotation=!0,this.isBeingDragged=!1,this.initializeDomPositions()},t.initializeDomPositions=Ua,t.setCoordinateHelper=function(t,e,i){const s=this[t];K(e)?(s[0]=e[0],s[1]=e[1]):oc(e)?mc(e.x,e.y)?(s[0]=pc(e.x,s[0]),s[1]=pc(e.y,s[1])):(s[0]=pc(e.width,e.w,s[0]),s[1]=pc(e.height,e.h,s[1])):(s[0]=e,s[1]=i)},t.setDeltaCoordinateHelper=function(t,e,i){const s=this[t],n=s[0],r=s[1];K(e)?(s[0]=Ga(n,e[0]),s[1]=Ga(r,e[1])):oc(e)?mc(e.x,e.y)?(s[0]=Ga(n,pc(e.x,0)),s[1]=Ga(r,pc(e.y,0))):(s[0]=Ga(n,pc(e.width,e.w,0)),s[1]=Ga(r,pc(e.height,e.h,0))):(s[0]=Ga(n,e),s[1]=Ga(r,i))},t.getHost=function(){if(this.currentHost)return this.currentHost;if(this.host){const t=o[this.host];if(t)return this.currentHost=t,this.dirtyHost=!0,this.currentHost}return Sl},t.getHere=function(){const t=this.getHost();if(t){if(t.here&&Q(t.here))return t.here;if(t.currentDimensions){const e=t.currentDimensions;if(e)return{w:e[0],h:e[1]}}}return Sl},t.cleanPosition=function(t,e,i){for(let s=0;s<2;s++){const n=e[s],r=i[s];n.toFixed?t[s]=n:t[s]=n==bs||n==ea?0:n==Hr||n==Se?r:n==Ce?r/2:parseFloat(n)/100*r}this.dirtyFilterIdentifier=!0},t.cleanScale=function(){this.dirtyScale=!1;const t=this.scale,e=this.mimic,i=this.currentScale;let s=0;e&&this.useMimicScale?e.currentScale?(s=e.currentScale,this.addOwnScaleToMimic&&(s+=t)):(s=t,this.dirtyMimicScale=!0):s=t,this.currentScale=s,this.dirtyDimensions=!0,this.dirtyHandle=!0,i!==this.currentScale&&(this.dirtyPositionSubscribers=!0),this.mimicked&&this.mimicked.length&&(this.dirtyMimicScale=!0),this.dirtyFilterIdentifier=!0},t.cleanDimensions=function(){this.dirtyDimensions=!1;const t=this.getHost(),e=this.currentDimensions;if(t){let i,s,n;i=t.currentDimensions?t.currentDimensions:[t.w,t.h],[s,n]=this.dimensions;const[r,o]=e;s.substring&&(s=parseFloat(s)/100*i[0]),n.substring&&(n=n===ee?0:parseFloat(n)/100*i[1]);const a=this.mimic;i=a&&a.name&&this.useMimicDimensions?a.currentDimensions:null,i?(e[0]=this.addOwnDimensionsToMimic?i[0]+s:i[0],e[1]=this.addOwnDimensionsToMimic?i[1]+n:i[1]):(e[0]=s,e[1]=n),this.cleanDimensionsAdditionalActions(),this.dirtyStart=!0,this.dirtyHandle=!0,this.dirtyOffset=!0,r===e[0]&&o===e[1]||(this.dirtyPositionSubscribers=!0),this.mimicked&&this.mimicked.length&&(this.dirtyMimicDimensions=!0),this.dirtyFilterIdentifier=!0}else this.dirtyDimensions=!0},t.cleanDimensionsAdditionalActions=Ua,t.cleanLock=function(){this.dirtyLock=!1,this.dirtyStart=!0,this.dirtyHandle=!0},t.cleanStart=function(){const t=this.getHost();let e=0,i=0;t&&(this.dirtyStart=!1,fc(t.w,t.h)?(e=t.w,i=t.h):t.currentDimensions?[e,i]=t.currentDimensions:this.dirtyStart=!0),this.dirtyStart||(this.cleanPosition(this.currentStart,this.start,[e,i]),this.dirtyStampPositions=!0)},t.cleanOffset=function(){const t=this.getHost();let e=0,i=0;t&&(this.dirtyOffset=!1,fc(t.w,t.h)?(e=t.w,i=t.h):t.currentDimensions?[e,i]=t.currentDimensions:this.dirtyOffset=!0),this.dirtyOffset||(this.cleanPosition(this.currentOffset,this.offset,[e,i]),this.dirtyStampPositions=!0,this.mimicked&&this.mimicked.length&&(this.dirtyMimicOffset=!0))},t.cleanHandle=function(){this.dirtyHandle=!1,this.cleanPosition(this.currentHandle,this.handle,this.currentDimensions),this.dirtyStampHandlePositions=!0,this.mimicked&&this.mimicked.length&&(this.dirtyMimicHandle=!0)},t.cleanRotation=function(){this.dirtyRotation=!1;const t=this.roll,e=this.currentRotation,i=this.path,s=this.mimic,n=this.pivot,r=this.lockTo;let o=0;if(i&&r.includes(un)){if(o=t,this.addPathRotation){const t=this.getPathData();t&&(o+=t.angle)}}else s&&this.useMimicRotation&&r.includes(Ts)?dc(s.currentRotation)?(o=s.currentRotation,this.addOwnRotationToMimic&&(o+=t)):this.dirtyMimicRotation=!0:(o=t,n&&this.addPivotRotation&&r.includes(Sn)&&(dc(n.currentRotation)?o+=n.currentRotation:this.dirtyPivotRotation=!0));this.currentRotation=o,o!==e&&(this.dirtyPositionSubscribers=!0),this.mimicked&&this.mimicked.length&&(this.dirtyMimicRotation=!0),this.dirtyFilterIdentifier=!0},t.cleanStampPositions=function(){this.dirtyStampPositions=!1;const{currentDragOffset:t,currentOffset:e,currentStampPosition:i,currentStart:s,currentStartCache:n}=this,[r,o]=i;if(this.noPositionDependencies)i[0]=s[0],i[1]=s[1];else{const{addOwnOffsetToMimic:r,addOwnStartToMimic:o,addPathOffset:a,addPivotOffset:c,ignoreDragForX:l,ignoreDragForY:h,isBeingDragged:u,lockTo:d,mimic:f,path:p,pivot:m,pivotCorner:g,pivotPin:y,useMimicOffset:S,useMimicStart:k}=this;let A=this.particle;const v=function(t){return(t!=Sn||m)&&(t!=un||p)&&(t!=Ts||f)&&(t!=hn||b)?t:Qr},P={[Qr]:function(t){t.setFromArray(s).add(e)},[un]:function(t){O?(t.setFromVector(O),a||t.subtract(p.currentOffset)):t.setFromArray(s).add(e)},[Sn]:function(t){g&&m.getCornerCoordinate?t.setFromArray(m.getCornerCoordinate(g)):m.type==Io?t.setFromArray(m.getPinAt(y)):t.setFromArray(m.currentStampPosition),c||t.subtract(m.currentOffset),t.add(e)},[Ts]:function(t){k||S?(t.setFromArray(f.currentStampPosition),k&&o&&t.add(s),S&&r&&t.add(e),k||t.subtract(f.currentStart).add(s),S||t.subtract(f.currentOffset).add(e)):t.setFromArray(s).add(e)},[hn]:function(t){A.substring&&(A=b[A]),A?t.setFromVector(A.position):t.setFromArray(s).add(e)},[$s]:function(i){i.setFromVector(x),u&&(n.setFromArray(i),i.add(t)),i.add(e)}},C=eu();let w,x,O,D=!1;if(u)C[0]=l?v(d[0]):$s,C[1]=h?v(d[1]):$s,D=!0,this.getCornerCoordinate&&this.cleanPathObject();else for(let t=0;t<2;t++)w=v(d[t]),w==$s&&(D=!0),Qr!=w&&(this.dirtyFilterIdentifier=!0),C[t]=w;D&&(x=this.getHere()),C.includes(un)&&(O=this.getPathData());const[R,F]=C,H=eu(),E=eu();P[R](H),R==F?E.setFromArray(H):P[F](E),i[0]=H[0],i[1]=E[1],iu(C)}r==i[0]&&o==i[1]||(this.dirtyPositionSubscribers=!0)},t.cleanStampHandlePositions=function(){this.dirtyStampHandlePositions=!1;const t=this.currentStampHandlePosition,e=this.currentHandle,[i,s]=t;if(this.noPositionDependencies)t[0]=e[0],t[1]=e[1];else{const i=this.lockTo,s=this.pivot,n=this.path,r=this.mimic;let o,a;for(let c=0;c<2;c++){switch(o=i[c],o!=Sn||s||(o=Qr),o!=un||n||(o=Qr),o!=Ts||r||(o=Qr),a=e[c],Qr!==o&&(this.dirtyFilterIdentifier=!0),o){case Sn:this.addPivotHandle&&(a+=s.currentHandle[c]);break;case un:this.addPathHandle&&(a+=n.currentHandle[c]);break;case Ts:this.useMimicHandle&&(a=r.currentHandle[c],this.addOwnHandleToMimic&&(a+=e[c]))}t[c]=a}}this.cleanStampHandlePositionsAdditionalActions(),i==t[0]&&s==t[1]||(this.dirtyPositionSubscribers=!0)},t.cleanStampHandlePositionsAdditionalActions=Ua,t.checkHit=function(t=[],e){if(this.noUserInteraction)return!1;this.pathObject&&!this.dirtyPathObject||this.cleanPathObject();const i=K(t)?t:[t];let s=!1,n=0,r=0;e||(e=qh(),s=!0);const o=e.engine,a=this.currentStampPosition,c=this.pathObject,l=this.winding;if(i.some((t=>{if(K(t))n=t[0],r=t[1];else{if(!fc(t,t.x,t.y))return!1;n=t.x,r=t.y}return!(!n.toFixed||!r.toFixed||isNaN(n)||isNaN(r))&&(e.rotateDestination(o,...a,this),o.isPointInPath(c,n,r,l))}),this)){const t=this.checkHitReturn(n,r,e);return s&&Qh(e),t}return s&&Qh(e),!1},t.checkHitReturn=function(t,e){return{x:t,y:e,artefact:this}},t.pickupArtefact=function(t=qa){const{x:e,y:i}=t;return fc(e,i)&&(this.isBeingDragged=!0,this.currentDragCache.set(this.currentDragOffset),this.relativeCoordinates=[...this.start],this.lockTo[0]===Qr?this.currentDragOffset[0]=this.currentStart[0]-e:this.lockTo[0]===Sn&&this.pivot?this.currentDragOffset[0]=this.pivot.get(to)-e:this.lockTo[0]===Ts&&this.mimic&&(this.currentDragOffset[0]=this.mimic.get(to)-e),this.lockTo[1]===Qr?this.currentDragOffset[1]=this.currentStart[1]-i:this.lockTo[1]===Sn&&this.pivot?this.currentDragOffset[1]=this.pivot.get(eo)-i:this.lockTo[1]===Ts&&this.mimic&&(this.currentDragOffset[1]=this.mimic.get(eo)-i),this.bringToFrontOnDrag&&(this.stampOrder+=9999,this.group.batchResort=!0),dc(this.dirtyPathObject)&&(this.dirtyPathObject=!0)),this},t.dropArtefact=function(){this.start.set(this.currentStartCache).add(this.currentDragOffset),this.dirtyStart=!0;const t=this.currentHost;if(t){const[e,i]=t.get(ei),[s,n]=this.start,[r,o]=this.relativeCoordinates;r.substring&&(this.start[0]=s/e*100+"%"),o.substring&&(this.start[1]=n/i*100+"%")}return delete this.relativeCoordinates,this.currentDragOffset.set(this.currentDragCache),this.bringToFrontOnDrag&&(this.stampOrder-=9999,this.stampOrder<0&&(this.stampOrder=0),this.group.batchResort=!0),dc(this.dirtyPathObject)&&(this.dirtyPathObject=!0),this.isBeingDragged=!1,this},t.updatePositionSubscribers=function(){this.dirtyPositionSubscribers=!1,this.pivoted&&this.pivoted.length&&this.updatePivotSubscribers(),this.mimicked&&this.mimicked.length&&this.updateMimicSubscribers(),this.pathed&&this.pathed.length&&this.updatePathSubscribers()},t.updatePivotSubscribers=Ua,t.updateMimicSubscribers=Ua,t.updatePathSubscribers=Ua,t.updateImageSubscribers=Ua}function Fu(t=qa){t.defs=cc(t.defs,{delta:null,noDeltaUpdates:!1,deltaConstraints:null,checkDeltaConstraints:!1,performDeltaChecks:!1});const e=t.setters;e.delta=function(t=qa){t&&(this.delta=lc(this.delta,t))},e.deltaConstraints=function(t=qa){t&&(this.deltaConstraints=lc(this.deltaConstraints,t))},t.updateByDelta=function(){return this.setDelta(this.delta),this.checkDeltaConstraints&&this.performDeltaConstraintsChecks(),this},t.reverseByDelta=function(){const t={},e=this.delta,i=Q(e),s=i.length;let n,r,o;for(n=0;n<s;n++)r=i[n],o=e[r],o=o.substring?-parseFloat(o)+dn:-o,t[r]=o;return this.setDelta(t),this.checkDeltaConstraints&&this.performDeltaConstraintsChecks(),this},t.performDeltaConstraintsChecks=function(){const{delta:t,deltaConstraints:e}=this;if(this.performDeltaChecks){const i=Q(e),s=i.length;let n,r,o,a,c,l,h,u,d,f,p,m,g,y,b;for(m=0;m<s;m++)if(n=i[m],o=e[n],K(o)&&3==o.length)if([a,c,l]=e[n],a.substring){if(r=Cs.indexOf(n),d=!1,f=0,r>=0?(r<2?d=this.start:r<4?d=this.handle:r<6?d=this.offset:r<8&&(d=this.dimensions),$r.includes(n)&&(f=1),p=d[f]):p=this.get(n),g=parseFloat(a),y=parseFloat(c),b=parseFloat(p),h=Na,b<g?(h=l,u=0):b>y&&(h=l,u=1),h)switch(h){case xr:t[n]=-parseFloat(t[n])+dn,this.set({[n]:b+parseFloat(t[n])+dn});break;case ws:u?this.set({[n]:b-(y-g)+dn}):this.set({[n]:b+(y-g)+dn})}}else if(p=this.get(n),h=Na,p<a?(h=l,u=0):p>c&&(h=l,u=1),h)switch(h){case xr:t[n]=-t[n],this.set({[n]:p+t[n]});break;case ws:u?this.set({[n]:p-(c-a)}):this.set({[n]:p+(c-a)})}}else this.performDeltaChecks=!0},t.setDeltaValues=function(t=qa){const e=this.delta,i=Q(t),s=i.length;let n,r,o,a,c,l;for(n=0;n<s;n++)switch(r=i[n],o=t[r],l=e[r],o.includes(Tr)?[a,c]=o.split(Tr):(a=o,c=!1),a){case Ks:null!=c&&(e[r]=c);break;case Zs:null!=c&&(e[r]=parseFloat(c));break;case Pr:delete e[r];break;case Sa:null!=c&&(e[r]=l.substring?c:parseFloat(c));break;case xr:c=l.substring?-parseFloat(l)+dn:-l,e[r]=c;break;case Nt:l.substring?c=parseFloat(l)+parseFloat(c)+dn:c+=l,e[r]=c;break;case Ws:l.substring?c=parseFloat(l)*parseFloat(c)+dn:c*=l,e[r]=c}return this}}function Hu(t=qa){const e={pivot:Na,pivotCorner:Na,pivotPin:0,addPivotHandle:!1,addPivotOffset:!0,addPivotRotation:!1};t.defs=cc(t.defs,e),t.packetObjects=hc(t.packetObjects,["pivot"]);const i=t.setters;i.pivot=function(t){if(ec(t)&&!t)this.pivot=null,this.lockTo[0]===Sn&&(this.lockTo[0]=Qr),this.lockTo[1]===Sn&&(this.lockTo[1]=Qr),this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0;else{const e=this.pivot,i=this.name;let s=t.substring?o[t]:t;s||(s=c[t],s&&s.type!=bo&&(s=!1)),s&&s.name&&(e&&e.name!=s.name&&uc(e.pivoted,i),hc(s.pivoted,i),this.pivot=s,this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0)}},i.pivotCorner=function(t){je.includes(t)&&(this.pivotCorner=t)},i.addPivotHandle=function(t){this.addPivotHandle=t,this.dirtyHandle=!0},i.addPivotOffset=function(t){this.addPivotOffset=t,this.dirtyOffset=!0},i.addPivotRotation=function(t){this.addPivotRotation=t,this.dirtyRotation=!0},t.updatePivotSubscribers=function(){let t;this.pivoted.forEach((e=>{t=o[e],t||(t=c[e],t&&t.type===bo||(t=!1)),t&&(t.dirtyStart=!0,t.addPivotHandle&&(t.dirtyHandle=!0),t.addPivotOffset&&(t.dirtyOffset=!0),t.addPivotRotation&&(t.dirtyRotation=!0),t.type==Io?t.dirtyPins=!0:t.type!=xo&&t.type!=To&&t.type!=go||t.dirtyPins.push(this.name))}),this)}}function Eu(t=qa){const e={mimic:Na,useMimicDimensions:!1,useMimicScale:!1,useMimicStart:!1,useMimicHandle:!1,useMimicOffset:!1,useMimicRotation:!1,useMimicFlip:!1,addOwnDimensionsToMimic:!1,addOwnScaleToMimic:!1,addOwnStartToMimic:!1,addOwnHandleToMimic:!1,addOwnOffsetToMimic:!1,addOwnRotationToMimic:!1};t.defs=cc(t.defs,e),t.packetObjects=hc(t.packetObjects,["mimic"]);const i=t.setters;i.mimic=function(t){if(ec(t)&&!t)this.mimic=null,this.lockTo[0]===Ts&&(this.lockTo[0]=Qr),this.lockTo[1]===Ts&&(this.lockTo[1]=Qr),this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0;else{const e=this.mimic,i=this.name;let s=t.substring?o[t]:t;s||(s=c[t],s&&s.type!=bo&&(s=!1)),s&&s.name&&(e&&e.name!=s.name&&uc(e.mimicked,i),hc(s.mimicked,i),this.mimic=s,this.useMimicDimensions&&(this.dirtyDimensions=!0),this.useMimicScale&&(this.dirtyScale=!0),this.useMimicStart&&(this.dirtyStart=!0),this.useMimicHandle&&(this.dirtyHandle=!0),this.useMimicOffset&&(this.dirtyOffset=!0),this.useMimicRotation&&(this.dirtyRotation=!0))}},i.useMimicDimensions=function(t){this.useMimicDimensions=t,this.dirtyDimensions=!0},i.useMimicScale=function(t){this.useMimicScale=t,this.dirtyScale=!0},i.useMimicStart=function(t){this.useMimicStart=t,this.dirtyStart=!0},i.useMimicHandle=function(t){this.useMimicHandle=t,this.dirtyHandle=!0},i.useMimicOffset=function(t){this.useMimicOffset=t,this.dirtyOffset=!0},i.useMimicRotation=function(t){this.useMimicRotation=t,this.dirtyRotation=!0},i.addOwnDimensionsToMimic=function(t){this.addOwnDimensionsToMimic=t,this.dirtyDimensions=!0},i.addOwnScaleToMimic=function(t){this.addOwnScaleToMimic=t,this.dirtyScale=!0},i.addOwnStartToMimic=function(t){this.addOwnStartToMimic=t,this.dirtyStart=!0},i.addOwnHandleToMimic=function(t){this.addOwnHandleToMimic=t,this.dirtyHandle=!0},i.addOwnOffsetToMimic=function(t){this.addOwnOffsetToMimic=t,this.dirtyOffset=!0},i.addOwnRotationToMimic=function(t){this.addOwnRotationToMimic=t,this.dirtyRotation=!0},t.updateMimicSubscribers=function(){const t=this.dirtyMimicHandle,e=this.dirtyMimicOffset,i=this.dirtyMimicRotation,s=this.dirtyMimicScale,n=this.dirtyMimicDimensions;let r;this.mimicked.forEach((a=>{r=o[a],r||(r=c[a],r&&r.type===bo||(r=!1)),r&&(r.useMimicStart&&(r.dirtyStart=!0),t&&r.useMimicHandle&&(r.dirtyHandle=!0),e&&r.useMimicOffset&&(r.dirtyOffset=!0),i&&r.useMimicRotation&&(r.dirtyRotation=!0),s&&r.useMimicScale&&(r.dirtyScale=!0),n&&r.useMimicDimensions&&(r.dirtyDimensions=!0))})),this.dirtyMimicHandle=!1,this.dirtyMimicOffset=!1,this.dirtyMimicRotation=!1,this.dirtyMimicScale=!1,this.dirtyMimicDimensions=!1}}function Iu(t=qa){const e={path:Na,pathPosition:0,addPathHandle:!1,addPathOffset:!0,addPathRotation:!1,constantSpeedAlongPath:!1};t.defs=cc(t.defs,e),t.packetObjects=hc(t.packetObjects,["path"]);const i=t.setters,s=t.deltaSetters;i.path=function(t){if(ec(t)&&!t)this.path=null,this.lockTo[0]===un&&(this.lockTo[0]=Qr),this.lockTo[1]===un&&(this.lockTo[1]=Qr),this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0;else{const e=this.path,i=t.substring?o[t]:t,s=this.name;i&&i.name&&i.useAsPath&&(e&&e.name!=i.name&&uc(e.pathed,s),hc(i.pathed,s),this.path=i,this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0)}},i.pathPosition=function(t){t<0&&(t=B(t)),t>1&&(t%=1),this.pathPosition=parseFloat(t.toFixed(6)),this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0,this.currentPathData=!1},s.pathPosition=function(t){let e=this.pathPosition+t;e<0&&(e+=1),e>1&&(e%=1),this.pathPosition=parseFloat(e.toFixed(6)),this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0,this.currentPathData=!1},i.addPathHandle=function(t){this.addPathHandle=t,this.dirtyHandle=!0},i.addPathOffset=function(t){this.addPathOffset=t,this.dirtyOffset=!0},i.addPathRotation=function(t){this.addPathRotation=t,this.dirtyRotation=!0},t.getPathData=function(){if(this.currentPathData)return this.currentPathData;const t=this.pathPosition,e=this.path;if(e){const i=this.constantSpeedAlongPath||this.constantPathSpeed||!1,s=e.getPathPositionData(t,i);return this.addPathRotation&&(this.dirtyRotation=!0),this.currentPathData=s,s}return!1}}function Tu(t=qa){t.getCanvasNavElement=function(){const t=this.currentHost;if(t){if(t.type===yo)return t.navigation;if(t.type===bo){const e=t.currentHost?t.currentHost:h[t.host];if(e&&e.type===yo)return e.navigation}}return null},t.getCanvasWrapper=function(){const t=this.currentHost;if(t){if(t.type===yo)return t;if(t.type===bo){const e=t.currentHost?t.currentHost:h[t.host];if(e&&e.type===yo)return e}}return null},t.prepareStampTabsHelper=function(){this.anchor&&this.rebuildAnchor(),this.button&&this.rebuildButton()},t.modifyConstructorInputForAnchorButton=function(t){const e=Q(t);let i=!1;for(let t=0,s=zt.length;t<s;t++)if(e.includes(zt[t])){i=!0;break}let s=!1;for(let t=0,i=Ae.length;t<i;t++)if(e.includes(Ae[t])){s=!0;break}if(i){const e=t.anchor||{};null!=t.anchorHref&&(e.href=t.anchorHref,delete t.anchorHref),null!=t.anchorName&&(e.name=t.anchorName,delete t.anchorName),null!=t.anchorDescription&&(e.description=t.anchorDescription,delete t.anchorDescription),null!=t.anchorType&&(e.anchorType=t.anchorType,delete t.anchorType),null!=t.anchorTarget&&(e.target=t.anchorTarget,delete t.anchorTarget),null!=t.anchorTabOrder&&(e.tabOrder=t.anchorTabOrder,delete t.anchorTabOrder),null!=t.anchorDisabled&&(e.disabled=t.anchorDisabled,delete t.anchorDisabled),null!=t.anchorRel&&(e.rel=t.anchorRel,delete t.anchorRel),null!=t.anchorReferrerPolicy&&(e.referrerPolicy=t.anchorReferrerPolicy,delete t.anchorReferrerPolicy),null!=t.anchorPing&&(e.ping=t.anchorPing,delete t.anchorPing),null!=t.anchorHreflang&&(e.hrefLang=t.anchorHreflang,delete t.anchorHreflang),null!=t.anchorDownload&&(e.download=t.anchorDownload,delete t.anchorDownload),null!=t.anchorFocusAction&&(e.focusAction=t.anchorFocusAction,delete t.anchorFocusAction),null!=t.anchorBlurAction&&(e.blurAction=t.anchorBlurAction,delete t.anchorBlurAction),null!=t.anchorClickAction&&(e.clickAction=t.anchorClickAction,delete t.anchorClickAction),t.anchor=e}if(s){const e=t.button||{};null!=t.buttonName&&(e.name=t.buttonName,delete t.buttonName),null!=t.buttonAutofocus&&(e.autofocus=t.buttonAutofocus,delete t.buttonAutofocus),null!=t.buttonDescription&&(e.description=t.buttonDescription,delete t.buttonDescription),null!=t.buttonDisabled&&(e.disabled=t.buttonDisabled,delete t.buttonDisabled),null!=t.buttonTabOrder&&(e.tabOrder=t.buttonTabOrder,delete t.buttonTabOrder),null!=t.buttonForm&&(e.form=t.buttonForm,delete t.buttonForm),null!=t.buttonFormAction&&(e.formAction=t.buttonFormAction,delete t.buttonFormAction),null!=t.buttonFormEnctype&&(e.formEncType=t.buttonFormEnctype,delete t.buttonFormEnctype),null!=t.buttonFormMethod&&(e.formMethod=t.buttonFormMethod,delete t.buttonFormMethod),null!=t.buttonFormNoValidate&&(e.formNoValidate=t.buttonFormNoValidate,delete t.buttonFormNoValidate),null!=t.buttonFormTarget&&(e.formTarget=t.buttonFormTarget,delete t.buttonFormTarget),null!=t.buttonElementName&&(e.elementName=t.buttonElementName,delete t.buttonElementName),null!=t.buttonPopoverTarget&&(e.popoverTarget=t.buttonPopoverTarget,delete t.buttonPopoverTarget),null!=t.buttonPopoverTargetAction&&(e.popoverTargetAction=t.buttonPopoverTargetAction,delete t.buttonPopoverTargetAction),null!=t.buttonElementType&&(e.elementType=t.buttonElementType,delete t.buttonElementType),null!=t.buttonElementValue&&(e.elementValue=t.buttonElementValue,delete t.buttonElementValue),null!=t.buttonFocusAction&&(e.focusAction=t.buttonFocusAction,delete t.buttonFocusAction),null!=t.buttonBlurAction&&(e.blurAction=t.buttonBlurAction,delete t.buttonBlurAction),null!=t.buttonClickAction&&(e.clickAction=t.buttonClickAction,delete t.buttonClickAction),t.button=e}}}I.Group=Group;const Anchor=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.host=t.host,this.controller=t.controller,this.hold=t.hold,this.set(t),this.dirtyAnchor=!0,this},Bu=Anchor.prototype=yc();Bu.type="Anchor",Bu.lib=jt,Bu.isArtefact=!1,Bu.isAsset=!1,ml(Bu);const $u={host:null,description:Na,disabled:!1,tabOrder:0,download:Na,href:Na,hreflang:Na,ping:Na,referrerpolicy:Na,rel:"noreferrer",target:"_blank",anchorType:Na,clickAction:null,focusAction:!0,blurAction:!0};Bu.defs=cc(Bu.defs,$u),Bu.packetExclusions=hc(Bu.packetExclusions,["domElement"]),Bu.packetObjects=hc(Bu.packetObjects,["host"]),Bu.packetFunctions=hc(Bu.packetFunctions,["clickAction"]),Bu.demolish=function(){const{host:t,controller:e,domElement:i,hold:s,clickAction:n,focusAction:r,blurAction:o}=this;i&&n&&i.removeEventListener(Ee,n,!1),t&&i&&r&&i.removeEventListener(Ci,(()=>t.onEnter()),!1),t&&i&&o&&i.removeEventListener(pe,(()=>t.onLeave()),!1),s&&i&&s.removeChild(i),e&&(e.dirtyNavigationTabOrder=!0),t&&(t.anchor=null),this.deregister()},Bu.set=function(t=qa){let e,i,s,n;const r=Q(t),o=r.length;if(o){const a=this.setters,c=this.defs;for(e=0;e<o;e++)i=r[e],s=t[i],i&&i!=Vs&&null!=s&&(n=a[i],n?n.call(this,s):typeof c[i]!=pa&&(this[i]=s));this.dirtyAnchor=!0}return this},Bu.build=function(){const{host:t}=this;if(t){this.controller||(this.controller=t.getCanvasWrapper()),this.hold||(this.hold=t.getCanvasNavElement());const{hold:e,controller:i}=this;if(e&&i){const{anchorType:s,blurAction:n,clickAction:r,description:o,disabled:a,download:c,focusAction:l,href:h,hreflang:u,name:d,ping:f,referrerpolicy:p,rel:m,tabOrder:g,target:y}=this;let b=this.domElement;b&&(r&&b.removeEventListener(Ee,r,!1),l&&b.removeEventListener(Ci,(()=>t.onEnter()),!1),n&&b.removeEventListener(pe,(()=>t.onLeave()),!1),e.removeChild(b),this.domElement=null),a||(b=document.createElement(Ct),b.id=d,c&&b.setAttribute(ai,c),h&&b.setAttribute(Zi,h),u&&b.setAttribute(_i,u),f&&b.setAttribute(bn,f),p&&b.setAttribute(Sr,p),m&&b.setAttribute(Ar,m),y&&b.setAttribute(_o,y),s&&b.setAttribute(ha,s),b.setAttribute(_e,g),r&&nc(r)&&b.addEventListener(Ee,r,!1),o&&(b.textContent=o),l&&b.addEventListener(Ci,(()=>t.onEnter()),!1),n&&b.addEventListener(pe,(()=>t.onLeave()),!1),this.domElement=b,e.appendChild(b)),i.dirtyNavigationTabOrder=!0}}},Bu.rebuild=function(){this.dirtyAnchor&&(this.build(),this.dirtyAnchor=!1)},Bu.click=function(){if(this.hasBeenRecentlyClicked)return!1;{const t=new MouseEvent(Ee,{view:window,bubbles:!0,cancelable:!0});this.hasBeenRecentlyClicked=!0;const e=this;return setTimeout((()=>e.hasBeenRecentlyClicked=!1),200),this.domElement.dispatchEvent(t)}};const Lu=function(t){return!!t&&new Anchor(t)};function Mu(t=qa){t.defs=cc(t.defs,{anchor:null}),t.demolishAnchor=function(){this.anchor&&this.anchor.demolish()};const e=t.getters,i=t.setters;e.anchorName=function(){return this.anchorGetHelper(Vs)},e.anchorDescription=function(){return this.anchorGetHelper(Je)},i.anchorDescription=function(t){this.anchorSetHelper(Je,t)},e.anchorType=function(){return this.anchorGetHelper(Wt)},i.anchorType=function(t){this.anchorSetHelper(Wt,t)},e.anchorTarget=function(){return this.anchorGetHelper(_o)},i.anchorTarget=function(t){this.anchorSetHelper(_o,t)},e.anchorTabOrder=function(){return this.anchorGetHelper(Uo)},i.anchorTabOrder=function(t){this.anchorSetHelper(Uo,t)},e.anchorDisabled=function(){return this.anchorGetHelper(ii)},i.anchorDisabled=function(t){this.anchorSetHelper(ii,t)},e.anchorRel=function(){return this.anchorGetHelper(Ar)},i.anchorRel=function(t){this.anchorSetHelper(Ar,t)},e.anchorReferrerPolicy=function(){return this.anchorGetHelper(Sr)},i.anchorReferrerPolicy=function(t){this.anchorSetHelper(Sr,t)},e.anchorPing=function(){return this.anchorGetHelper(bn)},i.anchorPing=function(t){this.anchorSetHelper(bn,t)},e.anchorHreflang=function(){return this.anchorGetHelper(_i)},i.anchorHreflang=function(t){this.anchorSetHelper(_i,t)},e.anchorHref=function(){return this.anchorGetHelper(Zi)},i.anchorHref=function(t){this.anchorSetHelper(Zi,t)},e.anchorDownload=function(){return this.anchorGetHelper(ai)},i.anchorDownload=function(t){this.anchorSetHelper(ai,t)},i.anchorFocusAction=function(t){this.anchorSetHelper(wi,t)},i.anchorBlurAction=function(t){this.anchorSetHelper(me,t)},i.anchorClickAction=function(t){this.anchorSetHelper(Ie,t)},i.anchor=function(t){this.anchor?this.anchor.set(t):this.buildAnchor(t)},t.anchorGetHelper=function(t){return this.anchor?this.anchor.get(t):null},t.anchorSetHelper=function(t,e){this.anchor||this.buildAnchor({[t]:e}),this.anchor&&this.anchor.set({[t]:e})},t.buildAnchor=function(t={}){this.anchor&&this.anchor.demolish(),t.anchorName||(t.anchorName=`${this.name}-anchor`),t.description||(t.description=`Anchor link for ${this.name} ${this.type}`),t.host=this,t.controller=this.getCanvasWrapper(),t.hold=this.getCanvasNavElement(),this.anchor=Lu(t)},t.rebuildAnchor=function(){this.anchor&&this.anchor.rebuild()},t.clickAnchor=function(){this.anchor&&this.anchor.click()}}I.Anchor=Anchor;const Nu=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.host=t.host,this.controller=t.controller,this.hold=t.hold,this.set(t),this.dirtyButton=!0,this},Xu=Nu.prototype=yc();Xu.type="Button",Xu.lib=jt,Xu.isArtefact=!1,Xu.isAsset=!1,ml(Xu);const Yu={host:null,description:Na,tabOrder:0,autofocus:!1,disabled:!1,form:Na,formAction:Na,formEnctype:Na,formMethod:Na,formNoValidate:!1,formTarget:Na,popoverTarget:Na,popoverTargetAction:Na,elementType:ke,elementValue:Na,clickAction:null,focusAction:!0,blurAction:!0};Xu.defs=cc(Xu.defs,Yu),Xu.packetExclusions=hc(Xu.packetExclusions,["domElement"]),Xu.packetObjects=hc(Xu.packetObjects,["host"]),Xu.packetFunctions=hc(Xu.packetFunctions,["clickAction"]),Xu.demolish=function(){const{host:t,controller:e,domElement:i,hold:s,clickAction:n,focusAction:r,blurAction:o}=this;i&&n&&i.removeEventListener(Ee,n,!1),t&&i&&r&&i.removeEventListener(Ci,(()=>t.onEnter()),!1),t&&i&&o&&i.removeEventListener(pe,(()=>t.onLeave()),!1),s&&i&&s.removeChild(i),e&&(e.dirtyNavigationTabOrder=!0),t&&(t.button=null),this.deregister()},Xu.set=function(t=qa){let e,i,s,n;const r=Q(t),o=r.length;if(o){const a=this.setters,c=this.defs;for(e=0;e<o;e++)i=r[e],s=t[i],i&&i!=Vs&&null!=s&&(n=a[i],n?n.call(this,s):typeof c[i]!=pa&&(this[i]=s));this.dirtyButton=!0}return this},Xu.build=function(){const{host:t}=this;if(t){this.controller||(this.controller=t.getCanvasWrapper()),this.hold||(this.hold=t.getCanvasNavElement());const{hold:e,controller:i}=this;if(e&&i){const{autofocus:s,blurAction:n,clickAction:r,description:o,disabled:a,elementType:c,elementValue:l,focusAction:h,form:u,formAction:d,formEnctype:f,formMethod:p,formNoValidate:m,formTarget:g,name:y,popoverTarget:b,popoverTargetAction:S,tabOrder:k}=this;let A=this.domElement;A&&e&&(r&&A.removeEventListener(Ee,r,!1),h&&A.removeEventListener(Ci,(()=>t.onEnter()),!1),n&&A.removeEventListener(pe,(()=>t.onLeave()),!1),e.removeChild(A),this.domElement=null),a||(A=document.createElement(ke),A.id=y,s&&A.setAttribute(ie,Na),a&&A.setAttribute(ii,Na),u&&A.setAttribute(xi,u),d&&A.setAttribute("formaction",d),f&&A.setAttribute("formenctype",f),p&&A.setAttribute("formmethod",p),m&&A.setAttribute("formnovalidate",Na),g&&A.setAttribute(_o,g),b&&A.setAttribute("popovertarget",b),S&&A.setAttribute("popovertargetaction",S),null!=l&&A.setAttribute(va,l),c?A.setAttribute(ha,c):A.setAttribute(ha,ke),A.setAttribute(_e,k),r&&nc(r)&&A.addEventListener(Ee,r,!1),o&&(A.textContent=o),h&&A.addEventListener(Ci,(()=>t.onEnter()),!1),n&&A.addEventListener(pe,(()=>t.onLeave()),!1),this.domElement=A,e.appendChild(A)),i.dirtyNavigationTabOrder=!0}}},Xu.rebuild=function(){this.dirtyButton&&(this.build(),this.dirtyButton=!1)},Xu.click=function(){if(this.hasBeenRecentlyClicked)return!1;{const t=new MouseEvent(Ee,{view:window,bubbles:!0,cancelable:!0});this.hasBeenRecentlyClicked=!0;const e=this;return setTimeout((()=>e.hasBeenRecentlyClicked=!1),200),this.domElement.dispatchEvent(t)}};const Gu=function(t){return!!t&&new Nu(t)};function ju(t=qa){t.defs=cc(t.defs,{button:null}),t.demolishButton=function(){this.button&&this.button.demolish()};const e=t.getters,i=t.setters;e.buttonName=function(){return this.buttonGetHelper(Vs)},e.buttonAutofocus=function(){return this.buttonGetHelper(ie)},i.buttonAutofocus=function(t){this.buttonSetHelper(ie,t)},e.buttonDescription=function(){return this.buttonGetHelper(Je)},i.buttonDescription=function(t){this.buttonSetHelper(Je,t)},e.buttonDisabled=function(){return this.buttonGetHelper(ii)},i.buttonDisabled=function(t){this.buttonSetHelper(ii,t)},e.buttonTabOrder=function(){return this.buttonGetHelper(Uo)},i.buttonTabOrder=function(t){this.buttonSetHelper(Uo,t)},e.buttonForm=function(){return this.buttonGetHelper(xi)},i.buttonForm=function(t){this.buttonSetHelper(xi,t)},e.buttonFormAction=function(){return this.buttonGetHelper(Oi)},i.buttonFormAction=function(t){this.buttonSetHelper(Oi,t)},e.buttonFormEnctype=function(){return this.buttonGetHelper(Di)},i.buttonFormEnctype=function(t){this.buttonSetHelper(Di,t)},e.buttonFormMethod=function(){return this.buttonGetHelper(Ri)},i.buttonFormMethod=function(t){this.buttonSetHelper(Ri,t)},e.buttonFormNoValidate=function(){return this.buttonGetHelper(Fi)},i.buttonFormNoValidate=function(t){this.buttonSetHelper(Fi,t)},e.buttonFormTarget=function(){return this.buttonGetHelper(Hi)},i.buttonFormTarget=function(t){this.buttonSetHelper(Hi,t)},e.buttonPopoverTarget=function(){return this.buttonGetHelper(Dn)},i.buttonPopoverTarget=function(t){this.buttonSetHelper(Dn,t)},e.buttonPopoverTargetAction=function(){return this.buttonGetHelper(Rn)},i.buttonPopoverTargetAction=function(t){this.buttonSetHelper(Rn,t)},e.buttonElementType=function(){return this.buttonGetHelper(li)},i.buttonElementType=function(t){this.buttonSetHelper(li,t)},e.buttonElementValue=function(){return this.buttonGetHelper(hi)},i.buttonElementValue=function(t){this.buttonSetHelper(hi,t)},i.buttonFocusAction=function(t){this.buttonSetHelper(wi,t)},i.buttonBlurAction=function(t){this.buttonSetHelper(me,t)},i.buttonClickAction=function(t){this.buttonSetHelper(Ie,t)},i.button=function(t){this.button?this.button.set(t):this.buildButton(t)},t.buttonGetHelper=function(t){return this.button?this.button.get(t):null},t.buttonSetHelper=function(t,e){this.button||this.buildButton({[t]:e}),this.button&&this.button.set({[t]:e})},t.buildButton=function(t={}){this.button&&this.button.demolish(),t.buttonName||(t.buttonName=`${this.name}-button`),t.description||(t.description=`Button for ${this.name} ${this.type}`),t.host=this,t.controller=this.getCanvasWrapper(),t.hold=this.getCanvasNavElement(),this.button=Gu(t)},t.rebuildButton=function(){this.button&&this.button.rebuild()},t.clickButton=function(){this.button&&this.button.click()}}function zu(t=qa){t.defs=cc(t.defs,{groups:null,groupBuckets:null,batchResort:!0});const e=t.getters,i=t.setters;e.groups=function(){return[].concat(this.groups)},i.groups=function(t){this.groups.length=0,this.addGroups(t)},t.sortGroups=function(){if(this.batchResort){this.batchResort=!1;const{groups:t,groupBuckets:e}=this,i=Kc();let s,n,r,o,a,c;for(s=0,n=t.length;s<n;s++)o=t[s],r=g[o],r&&(a=V(r.order)||0,i[a]||(i[a]=Kc()),i[a].push(r));for(e.length=0,s=0,n=i.length;s<n;s++)c=i[s],c&&(e.push(...c),qc(c));qc(i)}},t.initializeCascade=function(){this.groups=[],this.groupBuckets=[]},t.addGroups=function(...t){const e=this.groups;return t.forEach((t=>{t.substring?hc(e,t):g[t]&&hc(e,t.name)}),this),this.batchResort=!0,this},t.removeGroups=function(...t){const e=this.groups;return t.forEach((t=>{t.substring?uc(e,t):g[t]&&uc(e,t.name)}),this),this.batchResort=!0,this},t.cascadeAction=function(t,e){let i;return this.groups.forEach((s=>{i=g[s],i&&i[e](t)}),this),this},t.updateArtefacts=function(t){return this.cascadeAction(t,"updateArtefacts"),this},t.setArtefacts=function(t){return this.cascadeAction(t,"setArtefacts"),this},t.addArtefactClasses=function(t){return this.cascadeAction(t,"addArtefactClasses"),this},t.removeArtefactClasses=function(t){return this.cascadeAction(t,"removeArtefactClasses"),this},t.updateByDelta=function(){return this.cascadeAction(!1,ka),this},t.reverseByDelta=function(){return this.cascadeAction(!1,Or),this},t.getArtefactAt=function(t){if(t=pc(t,this.here,!1)){let e,i;for(let s=this.groups.length-1;s>=0;s--)if(e=g[this.groups[s]],e&&(i=e.getArtefactAt(t),i))return i}return!1},t.getAllArtefactsAt=function(t){const e=[];if(t=pc(t,this.here,!1)){let i,s;for(let n=this.groups.length-1;n>=0;n--)i=g[this.groups[n]],i&&(s=i.getAllArtefactsAt(t),s&&e.push(...s))}return e}}function Wu(t=qa){const e={repeat:"repeat",patternMatrix:null};t.defs=cc(t.defs,e);const i=t.setters;i.repeat=function(t){Fs.includes(t)?this.repeat=t:this.repeat=this.defs.repeat},t.updateMatrixNumber=function(t,e){this.patternMatrix||(this.patternMatrix=new DOMMatrix),t=t.substring?parseFloat(t):t;const i=Rs.includes(e);rc(t)&&i&&(this.patternMatrix[e]=t)},i.matrixA=function(t){this.updateMatrixNumber(t,Ct)},i.matrixB=function(t){this.updateMatrixNumber(t,"b")},i.matrixC=function(t){this.updateMatrixNumber(t,"c")},i.matrixD=function(t){this.updateMatrixNumber(t,"d")},i.matrixE=function(t){this.updateMatrixNumber(t,"e")},i.matrixF=function(t){this.updateMatrixNumber(t,"f")},i.stretchX=function(t){this.updateMatrixNumber(t,Ct)},i.skewY=function(t){this.updateMatrixNumber(t,"b")},i.skewX=function(t){this.updateMatrixNumber(t,"c")},i.stretchY=function(t){this.updateMatrixNumber(t,"d")},i.shiftX=function(t){this.updateMatrixNumber(t,"e")},i.shiftY=function(t){this.updateMatrixNumber(t,"f")},i.patternMatrix=function(t){if(K(t)){const e=this.updateMatrixNumber;e(t[0],Ct),e(t[1],"b"),e(t[2],"c"),e(t[3],"d"),e(t[4],"e"),e(t[5],"f")}},t.buildStyle=function(t){if(t){t.substring&&(t=u[t]);let e=this.source,i=this.sourceLoaded;const s=this.repeat,n=t.engine;if(this.type!=bo&&this.type!=Oo||(e=this.element,i=!0),n&&i){const t=n.createPattern(e,s);return t.setTransform(this.patternMatrix),t}}return le}}I.Button=Nu;const Cell=function(t=qa){this.makeName(t.name),this.register(),this.initializePositions(),this.initializeCascade(),this.modifyConstructorInputForAnchorButton(t);let e=t.element;return delete t.element,ic(e)||(e=document.createElement(ve),e.id=this.name,e.width=300,e.height=150),this.set(this.defs),this.set(t),this.installElement(e,t.canvasColorSpace),this.state.setStateFromEngine(this.engine),Du({name:this.name,host:this.name}),this.subscribers=[],this.sourceNaturalDimensions=su(),this.dirtyDimensionsOverride=!0,this.sourceLoaded=!0,this.here={},this},Vu=Cell.prototype=yc();Vu.type=bo,Vu.lib="cell",Vu.isArtefact=!1,Vu.isAsset=!0,ml(Vu),Vh(Vu),du(Vu),Ru(Vu),Fu(Vu),Hu(Vu),Eu(Vu),Iu(Vu),Tu(Vu),Mu(Vu),ju(Vu),zu(Vu),Wu(Vu),Cu(Vu);const Uu={cleared:!0,compiled:!0,shown:!0,compileOrder:0,showOrder:0,backgroundColor:Na,clearAlpha:0,alpha:1,composite:_r,scale:1,flipReverse:!1,flipUpend:!1,filter:tn,isBase:!1,useAsPattern:!1,controller:null,includeInCascadeEventActions:!1,willReadFrequently:!0};Vu.defs=cc(Vu.defs,Uu),delete Vu.defs.source,delete Vu.defs.sourceLoaded,Vu.stringifyFunction=Ua,Vu.processPacketOut=Ua,Vu.finalizePacketOut=Ua,Vu.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},Vu.clone=_a,Vu.factoryKill=function(){const t=this.name;bt(h).forEach((e=>{e.cells.includes(t)&&e.removeCell(t),e.base&&e.base.name==t&&e.set({visibility:!1})})),bt(o).forEach((e=>{if(e.name!==t){const i=e.state;if(i){const e=i.fillStyle,s=i.strokeStyle;e.name&&e.name==t&&(i.fillStyle=i.defs.fillStyle),s.name&&s.name==t&&(i.strokeStyle=i.defs.strokeStyle)}}})),g[t]&&g[t].kill()};const Zu=Vu.getters,_u=Vu.setters,Ku=Vu.deltaSetters;Vu.get=function(t){const e=this.getters[t];if(e)return e.call(this);{let e,i=this.defs[t];const s=this.state;return null!=i?(e=this[t],null!=e?e:i):(i=s.defs[t],null!=i?(e=s[t],null!=e?e:i):void 0)}},Zu.width=function(){return this.currentDimensions[0]||this.element.getAttribute(Oa)},_u.width=function(t){null!=t&&(this.dimensions[0]=t,this.dirtyDimensions=!0,this.dirtyDimensionsOverride=!0)},Zu.height=function(){return this.currentDimensions[1]||this.element.getAttribute(Wi)},_u.height=function(t){null!=t&&(this.dimensions[1]=t,this.dirtyDimensions=!0,this.dirtyDimensionsOverride=!0)},Zu.dimensions=function(){return[this.currentDimensions[0]||this.element.getAttribute(Oa),this.currentDimensions[1]||this.element.getAttribute(Wi)]},_u.dimensions=function(t,e){this.setCoordinateHelper(ei,t,e),this.dirtyDimensions=!0,this.dirtyDimensionsOverride=!0},_u.source=function(){},_u.engine=function(){},_u.state=function(){},_u.element=function(t){ic(t)&&this.installElement(t)},_u.backgroundColor=function(t){aa.includes(t)&&(t=Na),this.backgroundColor=t},_u.cleared=function(t){this.cleared=t,this.updateControllerCells()},_u.compiled=function(t){this.compiled=t,this.updateControllerCells()},_u.shown=function(t){this.shown=t,this.updateControllerCells()},_u.compileOrder=function(t){this.compileOrder=t,this.updateControllerCells()},_u.showOrder=function(t){this.showOrder=t,this.updateControllerCells()},_u.stashX=function(t){this.stashCoordinates||(this.stashCoordinates=[0,0]),this.stashCoordinates[0]=t},_u.stashY=function(t){this.stashCoordinates||(this.stashCoordinates=[0,0]),this.stashCoordinates[1]=t},_u.stashWidth=function(t){if(!this.stashDimensions){const t=this.currentDimensions;this.stashDimensions=[t[0],t[1]]}this.stashDimensions[0]=t},_u.stashHeight=function(t){if(!this.stashDimensions){const t=this.currentDimensions;this.stashDimensions=[t[0],t[1]]}this.stashDimensions[1]=t},Ku.stashX=function(t){this.stashCoordinates||(this.stashCoordinates=[0,0]);const e=this.stashCoordinates;e[0]=Ga(e[0],t)},Ku.stashY=function(t){this.stashCoordinates||(this.stashCoordinates=[0,0]);const e=this.stashCoordinates;e[1]=Ga(e[1],t)},Ku.stashWidth=function(t){if(!this.stashDimensions){const t=this.currentDimensions;this.stashDimensions=[t[0],t[1]]}const e=this.stashDimensions;e[0]=Ga(e[0],t)},Ku.stashHeight=function(t){if(!this.stashDimensions){const t=this.currentDimensions;this.stashDimensions=[t[0],t[1]]}const e=this.stashDimensions;e[1]=Ga(e[1],t)},_u.clearAlpha=function(t){t.toFixed&&(t>1?t=1:t<0&&(t=0),this.clearAlpha=t)},Ku.clearAlpha=function(t){t.toFixed&&((t+=this.clearAlpha)>1?t=1:t<0&&(t=0),this.clearAlpha=t)},_u.smoothFont=function(t){const{element:e}=this;if(e){const{style:i}=e;i&&(t?(i[wa]=ee,i[js]=ee,i[zr]=ee):(i[wa]=tn,i[js]=Ni,i[zr]=Us))}},_u.checkForEntityHover=function(t){g[this.name].set({checkForEntityHover:t})},_u.onEntityHover=function(t){g[this.name].set({onEntityHover:t})},_u.onEntityNoHover=function(t){g[this.name].set({onEntityNoHover:t})},Zu.group=function(){return g[this.name]},Vu.checkSource=function(t,e){this.currentDimensions[0]==t&&this.currentDimensions[1]==e||this.notifySubscribers()},Vu.getData=function(t,e){return this.checkSource(this.sourceNaturalDimensions[0],this.sourceNaturalDimensions[1]),this.buildStyle(e)},Vu.updateArtefacts=function(t=qa){const e=this.groupBuckets;let i,s,n,r,o,a;for(n=0,r=e.length;n<r;n++)for(s=e[n].artefactCalculateBuckets,o=0,a=s.length;o<a;o++)i=s[o],t.dirtyScale&&(i.dirtyScale=!0),t.dirtyDimensions&&(i.dirtyDimensions=!0),t.dirtyLock&&(i.dirtyLock=!0),t.dirtyStart&&(i.dirtyStart=!0),t.dirtyOffset&&(i.dirtyOffset=!0),t.dirtyHandle&&(i.dirtyHandle=!0),t.dirtyRotation&&(i.dirtyRotation=!0),t.dirtyPathObject&&(i.dirtyPathObject=!0)},Vu.cleanDimensionsAdditionalActions=function(){const t=this.element;if(t){const e=this.controller,i=this.currentDimensions,s=this.isBase,n=Dl(),r=xl();let o,a,c,l;(this.cleared||this.dirtyDimensionsOverride)&&(this.dirtyDimensionsOverride=!1,n?(s&&e&&(e.baseMatchesCanvasDimensions||e.isComponent)&&(o=this.controller.currentDimensions,a=this.dimensions,a[0]=i[0]=o[0],a[1]=i[1]=o[1]),[c,l]=i,t.width=c,t.height=l):(s&&e&&(e.baseMatchesCanvasDimensions||e.isComponent)&&(o=this.controller.currentDimensions,a=this.dimensions,a[0]=i[0]=o[0],a[1]=i[1]=o[1]),[c,l]=i,n?(t.width=c,t.height=l):(t.width=c*r,t.height=l*r)),this.setEngineFromState(this.engine),s&&e&&e.updateBaseHere(),this.groupBuckets&&this.updateArtefacts({dirtyDimensions:!0}))}},Vu.notifySubscriber=function(t){t.sourceNaturalDimensions||(t.sourceNaturalDimensions=[]),t.sourceNaturalWidth=this.currentDimensions[0],t.sourceNaturalHeight=this.currentDimensions[1],t.sourceLoaded=!0,t.dirtyImage=!0,t.dirtyCopyStart=!0,t.dirtyCopyDimensions=!0},Vu.subscribeAction=function(t={}){this.subscribers.push(t),t.asset=this,t.source=this.element,this.notifySubscriber(t)},Vu.installElement=function(t,e=qr){return this.element=t,this.engine=this.element.getContext(Pt,{willReadFrequently:this.willReadFrequently,colorSpace:e}),this.state=Hh({engine:this.engine}),this},Vu.updateControllerCells=function(){const{controller:t,currentHost:e}=this;if(t)t.dirtyCells=!0;else if(e){const t=e.getHost();t&&(t.dirtyCells=!0)}},Vu.clear=function(){const{element:t,engine:e,backgroundColor:i,clearAlpha:s,currentDimensions:n}=this;let[r,o]=n;r=yt(r),o=yt(o),this.prepareStamp();const a=qu(e),c=yt(r*a),l=yt(o*a);if(this.useAsPattern&&(t.width=r,t.height=o),i)e.save(),e.fillStyle=i,e.globalCompositeOperation=_r,e.globalAlpha=1,e.fillRect(0,0,r,o),e.restore();else if(s){e.save();const i=qh(),{engine:n,element:a}=i;this.useAsPattern?(a.width=r,a.height=o,n.drawImage(t,0,0,r,o,0,0,r,o),e.clearRect(0,0,r,o),e.globalAlpha=s,e.drawImage(a,0,0,r,o,0,0,r,o)):(a.width=c,a.height=l,n.drawImage(t,0,0,r,o,0,0,r,o),e.clearRect(0,0,r,o),e.globalAlpha=s,e.drawImage(a,0,0,c,l,0,0,r,o)),e.restore(),Qh(i)}else e.clearRect(0,0,r,o)},Vu.compile=function(){this.sortGroups(),this.cleared||this.prepareStamp(),!this.dirtyFilters&&this.currentFilters||this.cleanFilters(),qu(this.engine);const t=this.groupBuckets,e=t.length;for(let i,s=0;s<e;s++)i=t[s],i&&i.stamp&&i.stamp();!this.noFilters&&this.filters&&this.filters.length&&this.applyFilters(),this.stashOutputAction()},Vu.show=function(){const t=this.getHost(),e=!(!t||!t.engine)&&t.engine;if(e){const i=t.currentDimensions,s=~~i[0],n=~~i[1];if(!s||!n)return!1;const{currentScale:r,currentDimensions:o,composite:a,alpha:c,controller:l,element:h,isBase:u,currentStampHandlePosition:d,currentStampPosition:f}=this,p=~~o[0],m=~~o[1];let g;if(e.save(),qu(e),e.filter=this.filter,u){this.basePaste||(this.basePaste=[]),g=this.basePaste,this.cleared||this.compiled||this.prepareStamp(),e.globalCompositeOperation=_r,e.globalAlpha=1,e.clearRect(0,0,s,n),e.globalCompositeOperation=a,e.globalAlpha=c;let t,i;switch(l?l.fit:tn){case Me:t=s/(p||1),i=n/(m||1),t>i?(g[0]=~~((s-p*i)/2),g[1]=0,g[2]=~~(p*i),g[3]=~~(m*i)):(g[0]=0,g[1]=~~((n-m*t)/2),g[2]=~~(p*t),g[3]=~~(m*t));break;case Ve:t=s/(p||1),i=n/(m||1),t<i?(g[0]=~~((s-p*i)/2),g[1]=0,g[2]=~~(p*i),g[3]=~~(m*i)):(g[0]=0,g[1]=~~((n-m*t)/2),g[2]=~~(p*t),g[3]=~~(m*t));break;case Si:g[0]=0,g[1]=0,g[2]=~~s,g[3]=~~n;break;default:g[0]=~~((s-p)/2),g[1]=~~((n-m)/2),g[2]=p,g[3]=m}}else r>0&&(this.paste||(this.paste=[]),g=this.paste,this.noDeltaUpdates||this.setDelta(this.delta),this.cleared||this.compiled||this.prepareStamp(),e.globalCompositeOperation=a,e.globalAlpha=c,g[0]=~~(-d[0]*r),g[1]=~~(-d[1]*r),g[2]=~~(p*r),g[3]=~~(m*r),this.rotateDestination(e,...f));e.drawImage(h,0,0,p,m,...g),e.restore()}},Vu.applyFilters=function(){const t=this.engine,e=t.getImageData(0,0,this.currentDimensions[0],this.currentDimensions[1]);this.preprocessFilters(this.currentFilters);const i=uu.action({identifier:this.filterIdentifier,image:e,filters:this.currentFilters});i&&t.putImageData(i,0,0)},Vu.stashOutputAction=function(){if(this.stashOutput){this.stashOutput=!1;const{currentDimensions:t,stashCoordinates:e,stashDimensions:i,engine:s}=this,[n,r]=t;let o=e?e[0]:0,a=e?e[1]:0,c=i?i[0]:n,l=i?i[1]:r;if((c.substring||l.substring||o.substring||a.substring||o||a||c!==n||l!==r)&&(c.substring&&(c=parseFloat(c)/100*n),(isNaN(c)||c<=0)&&(c=1),c>n&&(c=n),l.substring&&(l=parseFloat(l)/100*r),(isNaN(l)||l<=0)&&(l=1),l>r&&(l=r),o.substring&&(o=parseFloat(o)/100*n),(isNaN(o)||o<0)&&(o=0),o+c>n&&(o=n-c),a.substring&&(a=parseFloat(a)/100*r),(isNaN(a)||a<0)&&(a=0),a+l>r&&(a=r-l)),s.save(),s.setTransform(1,0,0,1,0,0),this.stashedImageData=s.getImageData(o,a,c,l),s.restore(),this.stashOutputAsAsset){const t=this.stashOutputAsAsset.substring?this.stashOutputAsAsset:`${this.name}-image`;this.stashOutputAsAsset=!1;const e=qh(),i=e.element;if(i.width=c,i.height=l,e.engine.putImageData(this.stashedImageData,0,0),this.stashedImage)this.stashedImage.src=i.toDataURL();else{const e=this.stashedImage=document.createElement(es);e.id=t,e.onload=function(){ql.appendChild(e),Su(`#${t}`)},e.src=i.toDataURL()}Qh(e)}}},Vu.getHost=function(){if(this.currentHost)return this.currentHost;if(this.host){const t=c[this.host]||o[this.host];return t&&(this.currentHost=t),!!t&&this.currentHost}return!1},Vu.updateBaseHere=function(t,e){if(this.isBase){this.here||(this.here={});const i=this.here,s=this.currentDimensions;let n=t.active;const r=t.localListener?t.originalWidth:t.w,o=t.localListener?t.originalHeight:t.h;if(s[0]!=r||s[1]!=o){this.basePaste||(this.basePaste=[]);const a=this.basePaste[0],c=s[0],l=s[1],h=r,u=o,d=t.x,f=t.y,p=c/h||1,m=l/u||1;let g,y;switch(i.w=c,i.h=l,e){case Me:case Ve:a?(g=(h-c/m)/2,i.x=lt((d-g)*m),i.y=lt(f*m)):(y=(u-l/p)/2,i.x=lt(d*p),i.y=lt((f-y)*p));break;case Si:i.x=lt(d*p),i.y=lt(f*m);break;default:g=(h-c)/2,y=(u-l)/2,i.x=lt(d-g),i.y=lt(f-y)}(i.x<0||i.x>c)&&(n=!1),(i.y<0||i.y>l)&&(n=!1),i.active=n}else i.x=t.x,i.y=t.y,i.w=r,i.h=o,i.active=n;t.baseActive=n}},Vu.prepareStamp=function(){(this.dirtyScale||this.dirtyDimensions||this.dirtyStart||this.dirtyOffset||this.dirtyHandle)&&(this.dirtyPathObject=!0),this.dirtyScale&&this.cleanScale(),this.dirtyDimensions&&(this.cleanDimensions(),this.dirtyAssetSubscribers=!0),this.dirtyLock&&this.cleanLock(),this.dirtyStart&&this.cleanStart(),this.dirtyOffset&&this.cleanOffset(),this.dirtyHandle&&this.cleanHandle(),this.dirtyRotation&&this.cleanRotation(),(this.isBeingDragged||this.lockTo.includes($s))&&(this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtyStampHandlePositions&&this.cleanStampHandlePositions(),this.dirtyPathObject&&this.cleanPathObject(),this.dirtyPositionSubscribers&&this.updatePositionSubscribers(),this.dirtyAssetSubscribers&&(this.dirtyAssetSubscribers=!1,this.notifySubscribers()),this.prepareStampTabsHelper()},Vu.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject){const t=this.pathObject=new Path2D,e=this.currentStampHandlePosition,i=this.currentScale,s=this.currentDimensions,n=-e[0]*i,r=-e[1]*i,o=s[0]*i,a=s[1]*i;t.rect(n,r,o,a)}},Vu.updateHere=function(){const t=this.currentHost;if(t){this.here||(this.here={});const e=this.here,[i,s]=this.currentDimensions;e.w=i,e.h=s,e.x=-1e4,e.y=-1e4,e.active=!1;const n=t.here;if(n&&n.active){const{x:t,y:i}=n;this.pathObject&&!this.dirtyPathObject||this.cleanPathObject();const s=qh(),r=s.engine,[o,a]=this.currentStampPosition;s.rotateDestination(r,o,a,this);const c=r.isPointInPath(this.pathObject,t,i);if(Qh(s),e.active=c,c){const[s,n]=this.currentStampHandlePosition,{flipUpend:r,flipReverse:c,scale:l}=this;let h=this.roll;if(l){let u=(t-o)/l,d=(i-a)/l;if(c&&(u=-u),r&&(d=-d),h){(c&&!r||!c&&r)&&(h=-h);const t=eu(u,d);t.rotate(-h),[u,d]=t,iu(t)}u+=s,d+=n,e.x=u,e.y=d}}}}};const qu=function(t){if(t){if(t.setTransform(1,0,0,1,0,0),!Dl()){const e=xl();return t.scale(e,e),e}t.scale(1,1)}return 1};I.Cell=Cell;const Vector=function(t,e,i){return this.x=0,this.y=0,this.z=0,dc(t)&&this.set(t,e,i),this},Qu=Vector.prototype=yc();Qu.type=zo,Qu.getXYCoordinate=function(){return[this.x,this.y]},Qu.getXYZCoordinate=function(){return[this.x,this.y,this.z]},Qu.setX=function(t){if(!dc(t))throw new Error(`${this.name} Vector error - setX() arguments error: ${t}`);return this.x=t,this},Qu.setY=function(t){if(!dc(t))throw new Error(`${this.name} Vector error - setY() arguments error: ${t}`);return this.y=t,this},Qu.setZ=function(t){if(!dc(t))throw new Error(`${this.name} Vector error - setZ() arguments error: ${t}`);return this.z=t,this},Qu.setXY=function(t,e){if(!fc(t,e))throw new Error(`${this.name} Vector error - setXY() arguments error: ${t}, ${e}`);return this.x=t,this.y=e,this},Qu.set=function(t,e,i){return oc(t)?this.setFromVector(t):K(t)?this.setFromArray(t):fc(t,e)?this.setFromArray([t,e,i]):this},Qu.setFromArray=function(t){if(!K(t))throw new Error(`${this.name} Vector error - setFromArray() arguments error: ${t}`);const[e,i,s]=t;return rc(e)&&(this.x=e),rc(i)&&(this.y=i),rc(s)&&(this.z=s),this},Qu.setFromVector=function(t){if(!oc(t))throw new Error(`${this.name} Vector error - setFromVector() arguments error: ${mt(t)}`);const{x:e,y:i,z:s}=t;return rc(e)&&(this.x=e),rc(i)&&(this.y=i),rc(s)&&(this.z=s),this},Qu.zero=function(){return this.x=0,this.y=0,this.z=0,this},Qu.vectorAdd=function(t=qa){if(K(t))return this.vectorAddArray(t);const{x:e,y:i,z:s}=t;return rc(e)&&(this.x+=e),rc(i)&&(this.y+=i),rc(s)&&(this.z+=s),this},Qu.vectorAddArray=function(t=[]){const[e,i,s]=t;return rc(e)&&(this.x+=e),rc(i)&&(this.y+=i),rc(s)&&(this.z+=s),this},Qu.vectorSubtract=function(t=qa){if(K(t))return this.vectorSubtractArray(t);const{x:e,y:i,z:s}=t;return rc(e)&&(this.x-=e),rc(i)&&(this.y-=i),rc(s)&&(this.z-=s),this},Qu.vectorSubtractArray=function(t){const[e,i,s]=t;return rc(e)&&(this.x-=e),rc(i)&&(this.y-=i),rc(s)&&(this.z-=s),this},Qu.scalarMultiply=function(t){if(!rc(t))throw new Error(`${this.name} Vector error - scalarMultiply() argument not a number: ${t}`);return this.x*=t,this.y*=t,this.z*=t,this},Qu.vectorMultiply=function(t=qa){if(K(t))return this.vectorMultiplyArray(t);const{x:e,y:i,z:s}=t;return rc(e)&&(this.x*=e),rc(i)&&(this.y*=i),rc(s)&&(this.z*=s),this},Qu.vectorMultiplyArray=function(t){const[e,i,s]=t;return rc(e)&&(this.x*=e),rc(i)&&(this.y*=i),rc(s)&&(this.z*=s),this},Qu.scalarDivide=function(t){if(!rc(t))throw new Error(`${this.name} Vector error - scalarDivide() argument not a number: ${t}`);if(!t)throw new Error(`${this.name} Vector error - scalarDivide() division by zero: ${t}`);return this.x/=t,this.y/=t,this.z/=t,this},Qu.getMagnitude=function(){return ft(this.x*this.x+this.y*this.y+this.z*this.z)},Qu.rotate=function(t){if(!rc(t))throw new Error(`${this.name} Vector error - rotate() argument not a number: ${t}`);let e=M(this.y,this.x);e+=.01745329251*t;const i=this.getMagnitude();return this.x=i*G(e),this.y=i*dt(e),this},Qu.reverse=function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},Qu.normalize=function(){const t=this.getMagnitude();return t>0&&(this.x/=t,this.y/=t,this.z/=t),this};const Ju=[],td=function(t,e,i){Ju.length||Ju.push(new Vector);const s=Ju.shift();return s.set(t,e,i),s},ed=function(t){t&&t.type==zo&&Ju.push(t.zero())},id=function(t,e,i){return new Vector(t,e,i)};I.Vector=Vector;const Quaternion=function(t=qa){return this.n=t.n||1,this.v=id(),ht(this),this.set(t),this},sd=Quaternion.prototype=yc();sd.type=Bo,sd.set=function(t=qa){if(ac(t))return this.setFromQuaternion(t);if(mc(t.pitch,t.yaw,t.roll))return this.setFromEuler(t);const e=this.v,i=!(!dc(t.vector)&&!dc(t.v))&&(t.vector||t.v),s=!(!dc(t.scalar)&&!dc(t.n))&&(t.scalar||t.n||0),n=i?i.x||0:t.x||!1,r=i?i.y||0:t.y||!1,o=i?i.z||0:t.z||!1;return this.n=rc(s)?s:this.n,e.x=rc(n)?n:e.x,e.y=rc(r)?r:e.y,e.z=rc(o)?o:e.z,this},sd.setFromQuaternion=function(t){if(!ac(t))throw new Error(`${this.name} Quaternion error - setFromQuaternion() bad argument: ${t}`);const e=this.v,i=t.v;return this.n=t.n,e.x=i.x,e.y=i.y,e.z=i.z,this},sd.setFromEuler=function(t=qa){const e=this.v,i=(t.pitch||t.x||0)*at,s=(t.yaw||t.y||0)*at,n=(t.roll||t.z||0)*at,r=G(i/2),o=G(s/2),a=G(n/2),c=dt(i/2),l=dt(s/2),h=dt(n/2);return e.x=c*o*a+r*l*h,e.y=r*l*a+c*o*h,e.z=r*o*h-c*l*a,this.n=r*o*a-c*l*h,this},sd.zero=function(){const t=this.v;return this.n=1,t.x=0,t.y=0,t.z=0,this},sd.getMagnitude=function(){const t=this.v;return ft(this.n*this.n+t.x*t.x+t.y*t.y+t.z*t.z)},sd.normalize=function(){const t=this.getMagnitude(),e=this.v;if(!t)throw new Error(`${this.name} Quaternion error - normalize() division by zero: ${t}`);return this.n=Va(this.n/t),e.x=Va(e.x/t),e.y=Va(e.y/t),e.z=Va(e.z/t),this},sd.quaternionMultiply=function(t){if(!ac(t))throw new Error(`${this.name} Quaternion error - quaternionMultiply() bad argument: ${t}`);const e=this.v,i=t.v,s=this.n,n=e.x,r=e.y,o=e.z,a=t.n,c=i.x,l=i.y,h=i.z;return this.n=s*a-n*c-r*l-o*h,e.x=s*c+n*a+r*h-o*l,e.y=s*l+r*a+o*c-n*h,e.z=s*h+o*a+n*l-r*c,this},sd.getAngle=function(t){let e;return t=!!dc(t)&&t,e=2*$(this.n),t&&(e*=1/at),Va(e)},sd.quaternionRotate=function(t){if(!ac(t))throw new Error(`${this.name} Quaternion error - quaternionRotate() bad argument: ${t}`);const e=rd(t),i=rd(this);return this.setFromQuaternion(e.quaternionMultiply(i)),od(e),od(i),this};const nd=[],rd=function(t){nd.length||nd.push(ad());const e=nd.shift();return e.set(t),e},od=function(t){t&&t.type==Bo&&nd.push(t.zero())},ad=function(t){return new Quaternion(t)};function cd(t=qa){Ru(t),Fu(t),Hu(t),Eu(t),Iu(t),Tu(t),Mu(t),ju(t);const e={domElement:Na,pitch:0,yaw:0,offsetZ:0,css:null,classes:Na,position:$t,smoothFont:!0,checkForResize:!1,trackHere:Na,activePadding:5,includeInTabNavigation:!1,moreContrastAction:null,otherContrastAction:null,reduceMotionAction:null,noPreferenceMotionAction:null,colorSchemeLightAction:null,colorSchemeDarkAction:null,reduceTransparencyAction:null,noPreferenceTransparencyAction:null,reduceDataAction:null,noPreferenceDataAction:null};t.defs=cc(t.defs,e),t.packetExclusions=hc(t.packetExclusions,["domElement","pathCorners","rotation"]),t.packetFunctions=hc(t.packetFunctions,["onEnter","onLeave","onDown","onUp"]),t.processDOMPacketOut=function(t,e,i){return this.processFactoryPacketOut(t,e,i)},t.processFactoryPacketOut=function(t,e,i){let s=!0;return i.includes(t)||e!==this.defs[t]||(s=!1),s},t.finalizePacketOut=function(t,e){if(sc(this.domElement)){const e=this.domElement,i=e.cloneNode(!0);i.querySelectorAll(ze).forEach((t=>i.removeChild(t))),t.outerHTML=i.outerHTML,t.host=e.parentElement.id}return t=this.handlePacketAnchor(t,e)},t.postCloneAction=function(t){return this.onEnter&&(t.onEnter=this.onEnter),this.onLeave&&(t.onLeave=this.onLeave),this.onDown&&(t.onDown=this.onDown),this.onUp&&(t.onUp=this.onUp),t};const i=t.setters,s=t.deltaSetters;i.trackHere=function(t){var e;dc(t)&&(t?(hc(bl,this.name),"local"==t&&(oc(e=this)&&(e.localMouseListener&&e.localMouseListener(),e.here||(e.here={}),e.here.originalWidth=e.currentDimensions[0],e.here.originalHeight=e.currentDimensions[1],e.localMouseListener=al(Gs,(function(t){e.here&&(e.here.x=lt(parseFloat(t.offsetX)),e.here.y=lt(parseFloat(t.offsetY)))}),e.domElement)))):(uc(bl,this.name),function(t){oc(t)&&(t.localMouseListener&&t.localMouseListener(),t.localMouseListener=!1)}(this)),this.trackHere=t)},i.position=function(t){this.position=t,this.dirtyPosition=!0},i.smoothFont=function(t){this.smoothFont=t,this.dirtySmoothFont=!0},i.visibility=function(t){this.visibility=t,this.dirtyVisibility=!0},i.offsetZ=function(t){this.offsetZ=t,this.dirtyOffsetZ=!0},s.offsetZ=function(t){this.offsetZ+=t,this.dirtyOffsetZ=!0},i.roll=function(t){this.roll=Wa(t),this.dirtyRotation=!0},s.roll=function(t){this.roll=Wa(this.roll+t),this.dirtyRotation=!0},i.pitch=function(t){this.pitch=Wa(t),this.dirtyRotation=!0},s.pitch=function(t){this.pitch=Wa(this.pitch+t),this.dirtyRotation=!0},i.yaw=function(t){this.yaw=Wa(t),this.dirtyRotation=!0},s.yaw=function(t){this.yaw=Wa(this.yaw+t),this.dirtyRotation=!0},i.css=function(t){this.css=this.css?cc(this.css,t):t,this.dirtyCss=!0},i.classes=function(t){this.classes=t,this.dirtyClasses=!0},i.domAttributes=function(t){this.updateDomAttributes(t)},i.includeInTabNavigation=function(t){const e=this.domElement;e&&(this.includeInTabNavigation=t,t?e.setAttribute(Zo,0):e.setAttribute(Zo,-1))},t.updateDomAttributes=function(t,e){const i=this.domElement;return i&&(t.substring&&dc(e)?dc(e)&&e?i.setAttribute(t,e):i.removeAttribute(t):oc(t)&&z(t).forEach((([t,e])=>{dc(e)&&e?i.setAttribute(t,e):i.removeAttribute(t)}))),this},t.initializeDomLayout=function(t){this.modifyConstructorInputForAnchorButton(t);const e=t.domElement;if(e){const i=e.style;if(i.boxSizing=be,t.setInitialDimensions){const s=e.getBoundingClientRect();this.currentDimensions[0]=s.width,this.currentDimensions[1]=s.height,t.width=s.width,t.height=s.height,e.className&&(t.classes=e.className);let n=!1;if(t&&t.host&&(n=t.host,n.substring&&o[n]&&(n=o[n])),n&&n.domElement){const e=n.domElement.getBoundingClientRect();e&&(t.startX=s.left-e.left,t.startY=s.top-e.top)}if(this.type==Yo){const e=parseFloat(i.perspective),{perspective:s,perspectiveX:n,perspectiveY:r,perspectiveZ:o}=t;fc(s,o)||(t.perspectiveZ=isNaN(e)?0:e);const a=i.perspectiveOrigin;if(a.length){const[e,i]=a.split(Kr);fc(s,n)||(t.perspectiveX=e),fc(s,r)||(t.perspectiveY=i)}}}}},t.addClasses=function(t){if(t.substring){const e=`${this.classes}  ${t}`.trim().replace(Fe,Kr);e!==this.classes&&(this.classes=e,this.dirtyClasses=!0)}return this},t.removeClasses=function(t){if(t.substring){const e=t.split();let i,s=this.classes;e.forEach((t=>{i=new RegExp(" ?"+t+" ?"),s=s.replace(i,Kr),s=s.trim(),s=s.replace(Fe,Kr)})),s!==this.classes&&(this.classes=s,this.dirtyClasses=!0)}return this},t.addPathCorners=function(){const t=this.domElement;if(t&&!this.noUserInteraction&&!qs.includes(t.tagName)){const e=function(){const t=document.createElement(ri),e=t.style;return e.width=0,e.height=0,e.position=$t,e.margin=0,e.border=0,e.padding=0,t.setAttribute("data-scrawl-corner-div","sc"),t.setAttribute(Kt,ca),t},i=this.pathCorners,s=e(),n=e(),r=e(),o=e();s.style.top=fn,s.style.left=fn,n.style.top=fn,n.style.left=pn,r.style.top=pn,r.style.left=pn,o.style.top=pn,o.style.left=fn,t.appendChild(s),t.appendChild(n),t.appendChild(r),t.appendChild(o),i.push(s),i.push(n),i.push(r),i.push(o),this.currentCornersData||(this.currentCornersData=[])}return this},t.checkCornerPositions=function(t){const e=this.pathCorners;if(4==e.length){const i=this.getHere(),s=Sl.scrollX-(i.offsetX||0),n=Sl.scrollY-(i.offsetY||0),r=[];let o,a;const c=function(t){a=t[0],a?(r.push(lt(a.left+s)),r.push(lt(a.top+n))):r.push(0,0)};switch(t){case"topLeft":return o=e[0].getClientRects(),c(o),r;case"topRight":return o=e[1].getClientRects(),c(o),r;case"bottomRight":return o=e[2].getClientRects(),c(o),r;case"bottomLeft":return o=e[3].getClientRects(),c(o),r;default:return e.forEach((t=>{sc(t)&&(o=t.getClientRects(),c(o))})),r}}},t.getCornerCoordinate=function(t){return je.includes(t)?this.checkCornerPositions(t):[].concat(this.currentStampPosition)},t.cleanPathObject=function(){if(this.dirtyPathObject=!1,this.domElement&&!this.noUserInteraction)if(this.pathCorners.length||this.addPathCorners(),this.pathCorners.length){this.currentCornersData||(this.currentCornersData=[]);const t=this.currentCornersData;t.length=0,t.push(...this.checkCornerPositions());const e=this.pathObject=new Path2D;e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.lineTo(t[6],t[7]),e.closePath()}else{const t=this.pathObject=new Path2D;t.moveTo(0,0),t.lineTo(10,0),t.lineTo(0,10),t.lineTo(-10,0),t.closePath()}},t.checkHit=function(t=[],e){if(this.noUserInteraction)return!1;this.pathObject&&!this.dirtyPathObject||this.cleanPathObject();const i=K(t)?t:[t];let s=!1;e||(e=qh(),s=!0);const n=e.engine;let r,o;return i.some((t=>{if(K(t))r=t[0],o=t[1];else{if(!fc(t,t.x,t.y))return!1;r=t.x,o=t.y}return!(!r.toFixed||!o.toFixed||isNaN(r)||isNaN(o))&&n.isPointInPath(this.pathObject,r,o)}),this)?(s&&Qh(e),{x:r,y:o,artefact:this}):(s&&Qh(e),!1)},t.cleanRotation=function(){this.dirtyRotation=!1,this.rotation&&ac(this.rotation)||(this.rotation=ad()),this.currentRotation&&ac(this.rotation)||(this.currentRotation=ad());const t=this.rotation;t.setFromEuler({pitch:this.pitch||0,yaw:this.yaw||0,roll:this.roll||0}),1!==t.getMagnitude()&&t.normalize();const e=rd(),i=this.path,s=this.mimic,n=this.pivot,r=this.lockTo;i&&r.includes(un)?e.set(t):s&&this.useMimicRotation&&r.includes(Ts)?dc(s.currentRotation)?(e.set(s.currentRotation),this.addOwnRotationToMimic&&e.quaternionRotate(t)):this.dirtyMimicRotation=!0:(e.set(t),n&&this.addPivotRotation&&r.includes(Sn)&&(dc(n.currentRotation)?e.quaternionRotate(n.currentRotation):this.dirtyPivotRotation=!0)),this.currentRotation.set(e),od(e),this.dirtyPositionSubscribers=!0,this.mimicked&&this.mimicked.length&&(this.dirtyMimicRotation=!0)},t.cleanOffsetZ=function(){this.dirtyOffsetZ=!1},t.cleanContent=function(){this.dirtyContent=!1,this.domElement&&(this.dirtyDimensions=!0)},t.cleanDisplayShape=Ua,t.cleanDisplayArea=Ua,t.prepareStamp=function(){(this.dirtyScale||this.dirtyDimensions||this.dirtyStart||this.dirtyOffset||this.dirtyHandle||this.dirtyRotation)&&(this.dirtyPathObject=!0),this.dirtyContent&&this.cleanContent(),this.dirtyScale&&this.cleanScale(),this.dirtyDimensions&&this.cleanDimensions(),this.dirtyDisplayArea&&this.cleanDisplayArea(),this.dirtyDisplayShape&&this.cleanDisplayShape(),this.dirtyLock&&this.cleanLock(),this.dirtyStart&&this.cleanStart(),this.dirtyOffset&&this.cleanOffset(),this.dirtyOffsetZ&&this.cleanOffsetZ(),this.dirtyHandle&&this.cleanHandle(),this.dirtyRotation&&this.cleanRotation(),(this.isBeingDragged||this.lockTo.includes($s)||this.lockTo.includes(hn))&&(this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0),this.pivoted.length&&(this.dirtyStampPositions=!0),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtyStampHandlePositions&&this.cleanStampHandlePositions(),this.dirtyPathObject&&this.cleanPathObject(),this.prepareStampTabsHelper()},t.stamp=function(){if(!this.domElement)return!1;const[t,e]=this.currentStampPosition,[i,s]=this.currentStampHandlePosition,n=this.currentScale,r=this.currentRotation,o=`${i}px ${s}px 0`;let a=`translate(${t-i}px,${e-s}px)`;if(this.yaw||this.pitch||this.roll||this.pivot&&this.addPivotRotation||this.mimic&&this.useMimicRotation||this.path&&this.addPathRotation){const t=r.v;a+=` rotate3d(${t.x},${t.y},${t.z},${r.getAngle(!1)}rad)`}this.offsetZ&&(a+=` translateZ(${this.offsetZ}px)`),1!==n&&(a+=` scale(${n},${n})`),a!==this.currentTransformString&&(this.currentTransformString=a,this.dirtyTransform=!0),o!==this.currentTransformOriginString&&(this.currentTransformOriginString=o,this.dirtyTransformOrigin=!0),(this.dirtyTransform||this.dirtyPerspective||this.dirtyPosition||this.dirtyDomDimensions||this.dirtyTransformOrigin||this.dirtyVisibility||this.dirtySmoothFont||this.dirtyCss||this.dirtyClasses||this.domShowRequired)&&(this.domShowRequired=!1,function(t=Na){t&&t.substring&&hc(Zl,t)}(this.name),((t=!0)=>{_l=t})(!0),Pc(!0)),this.dirtyPositionSubscribers&&this.updatePositionSubscribers(),(this.dirtyMimicRotation||this.dirtyPivotRotation)&&(this.dirtyMimicRotation=!1,this.dirtyPivotRotation=!1,this.dirtyRotation=!0),this.dirtyMimicScale&&(this.dirtyMimicScale=!1,this.dirtyScale=!0)},t.initializeAccessibility=function(){this.reduceMotionAction=Ua,this.noPreferenceMotionAction=Ua,this.colorSchemeLightAction=Ua,this.colorSchemeDarkAction=Ua,this.reduceTransparencyAction=Ua,this.noPreferenceTransparencyAction=Ua,this.reduceDataAction=Ua,this.noPreferenceDataAction=Ua,this.moreContrastAction=Ua,this.otherContrastAction=Ua},i.moreContrastAction=function(t){nc(t)&&(this.moreContrastAction=t)},t.setMoreContrastAction=function(t){nc(t)&&(this.moreContrastAction=t)},i.otherContrastAction=function(t){nc(t)&&(this.otherContrastAction=t)},t.setOtherContrastAction=function(t){nc(t)&&(this.otherContrastAction=t)},t.contrastActions=function(){const t=this.here;if(dc(t)){const e=t.prefersContrast;dc(e)&&(e?this.moreContrastAction():this.otherContrastAction())}},i.reduceMotionAction=function(t){nc(t)&&(this.reduceMotionAction=t)},t.setReduceMotionAction=function(t){nc(t)&&(this.reduceMotionAction=t)},i.noPreferenceMotionAction=function(t){nc(t)&&(this.noPreferenceMotionAction=t)},t.setNoPreferenceMotionAction=function(t){nc(t)&&(this.noPreferenceMotionAction=t)},t.reducedMotionActions=function(){const t=this.here;if(dc(t)){const e=t.prefersReducedMotion;dc(e)&&(e?this.reduceMotionAction():this.noPreferenceMotionAction())}},i.colorSchemeLightAction=function(t){nc(t)&&(this.colorSchemeLightAction=t)},t.setColorSchemeLightAction=function(t){nc(t)&&(this.colorSchemeLightAction=t)},i.colorSchemeDarkAction=function(t){nc(t)&&(this.colorSchemeDarkAction=t)},t.setColorSchemeDarkAction=function(t){nc(t)&&(this.colorSchemeDarkAction=t)},t.colorSchemeActions=function(){const t=this.here;if(dc(t)){const e=t.prefersDarkColorScheme;dc(e)&&(e?this.colorSchemeDarkAction():this.colorSchemeLightAction())}},i.reduceTransparencyAction=function(t){nc(t)&&(this.reduceTransparencyAction=t)},t.setReduceTransparencyAction=function(t){nc(t)&&(this.reduceTransparencyAction=t)},i.noPreferenceTransparencyAction=function(t){nc(t)&&(this.noPreferenceTransparencyAction=t)},t.setNoPreferenceTransparencyAction=function(t){nc(t)&&(this.noPreferenceTransparencyAction=t)},t.reducedTransparencyActions=function(){const t=this.here;if(dc(t)){const e=t.prefersReduceTransparency;dc(e)&&(e?this.reduceTransparencyAction():this.noPreferenceTransparencyAction())}},i.reduceDataAction=function(t){nc(t)&&(this.reduceDataAction=t)},t.setReduceDataAction=function(t){nc(t)&&(this.reduceDataAction=t)},i.noPreferenceDataAction=function(t){nc(t)&&(this.noPreferenceDataAction=t)},t.setNoPreferenceDataAction=function(t){nc(t)&&(this.noPreferenceDataAction=t)},t.reducedDataActions=function(){const t=this.here;if(dc(t)){const e=t.prefersReduceData;dc(e)&&(e?this.reduceDataAction():this.noPreferenceDataAction())}},t.checkAccessibilityValues=function(){this.contrastActions(),this.reducedMotionActions(),this.colorSchemeActions(),this.reducedTransparencyActions(),this.reducedDataActions()},t.apply=function(){Ul(),this.prepareStamp(),this.stamp(),Kl(this.name),this.dirtyPathObject=!0,this.cleanPathObject()}}function ld(t=qa){t.defs=cc(t.defs,{breakToBanner:3,breakToLandscape:1.5,breakToPortrait:.65,breakToSkyscraper:.35,actionBannerShape:null,actionLandscapeShape:null,actionRectangleShape:null,actionPortraitShape:null,actionSkyscraperShape:null,breakToSmallest:2e4,breakToSmaller:8e4,breakToLarger:18e4,breakToLargest:32e4,actionSmallestArea:null,actionSmallerArea:null,actionRegularArea:null,actionLargerArea:null,actionLargestArea:null}),t.packetFunctions=hc(t.packetFunctions,["actionBannerShape","actionLandscapeShape","actionRectangleShape","actionPortraitShape","actionSkyscraperShape","actionSmallestArea","actionSmallerArea","actionRegularArea","actionLargerArea","actionLargestArea"]);const e=t.getters,i=t.setters;e.displayShape=function(){return this.currentDisplayShape},e.displayShapeBreakpoints=function(){return{breakToBanner:this.breakToBanner,breakToLandscape:this.breakToLandscape,breakToPortrait:this.breakToPortrait,breakToSkyscraper:this.breakToSkyscraper,breakToSmallest:this.breakToSmallest,breakToSmaller:this.breakToSmaller,breakToLarger:this.breakToLarger,breakToLargest:this.breakToLargest}},i.displayShapeBreakpoints=function(t=qa){for(const[e,i]of z(t))if(rc(i))switch(e){case"breakToBanner":this.breakToBanner=i;break;case"breakToLandscape":this.breakToLandscape=i;break;case"breakToPortrait":this.breakToPortrait=i;break;case"breakToSkyscraper":this.breakToSkyscraper=i;break;case"breakToSmallest":this.breakToSmallest=i;break;case"breakToSmaller":this.breakToSmaller=i;break;case"breakToLarger":this.breakToLarger=i;break;case"breakToLargest":this.breakToLargest=i}this.dirtyDisplayShape=!0,this.dirtyDisplayArea=!0},t.setDisplayShapeBreakpoints=i.displayShapeBreakpoints,i.breakToBanner=function(t){rc(t)&&(this.breakToBanner=t),this.dirtyDisplayShape=!0},i.breakToLandscape=function(t){rc(t)&&(this.breakToLandscape=t),this.dirtyDisplayShape=!0},i.breakToPortrait=function(t){rc(t)&&(this.breakToPortrait=t),this.dirtyDisplayShape=!0},i.breakToSkyscraper=function(t){rc(t)&&(this.breakToSkyscraper=t),this.dirtyDisplayShape=!0},i.breakToSmallest=function(t){rc(t)&&(this.breakToSmallest=t),this.dirtyDisplayArea=!0},i.breakToSmaller=function(t){rc(t)&&(this.breakToSmaller=t),this.dirtyDisplayArea=!0},i.breakToLarger=function(t){rc(t)&&(this.breakToLarger=t),this.dirtyDisplayArea=!0},i.breakToLargest=function(t){rc(t)&&(this.breakToLargest=t),this.dirtyDisplayArea=!0},i.actionBannerShape=function(t){nc(t)&&(this.actionBannerShape=t),this.dirtyDisplayShape=!0},t.setActionBannerShape=i.actionBannerShape,i.actionLandscapeShape=function(t){nc(t)&&(this.actionLandscapeShape=t),this.dirtyDisplayShape=!0},t.setActionLandscapeShape=i.actionLandscapeShape,i.actionRectangleShape=function(t){nc(t)&&(this.actionRectangleShape=t),this.dirtyDisplayShape=!0},t.setActionRectangleShape=i.actionRectangleShape,i.actionPortraitShape=function(t){nc(t)&&(this.actionPortraitShape=t),this.dirtyDisplayShape=!0},t.setActionPortraitShape=i.actionPortraitShape,i.actionSkyscraperShape=function(t){nc(t)&&(this.actionSkyscraperShape=t),this.dirtyDisplayShape=!0},t.setActionSkyscraperShape=i.actionSkyscraperShape,i.actionSmallestArea=function(t){nc(t)&&(this.actionSmallestArea=t),this.dirtyDisplayArea=!0},t.setActionSmallestArea=i.actionSmallestArea,i.actionSmallerArea=function(t){nc(t)&&(this.actionSmallerArea=t),this.dirtyDisplayArea=!0},t.setActionSmallerArea=i.actionSmallerArea,i.actionRegularArea=function(t){nc(t)&&(this.actionRegularArea=t),this.dirtyDisplayArea=!0},t.setActionRegularArea=i.actionRegularArea,i.actionLargerArea=function(t){nc(t)&&(this.actionLargerArea=t),this.dirtyDisplayArea=!0},t.setActionLargerArea=i.actionLargerArea,i.actionLargestArea=function(t){nc(t)&&(this.actionLargestArea=t),this.dirtyDisplayArea=!0},t.setActionLargestArea=i.actionLargestArea,t.initializeDisplayShapeActions=function(){this.actionBannerShape=Ua,this.actionLandscapeShape=Ua,this.actionRectangleShape=Ua,this.actionPortraitShape=Ua,this.actionSkyscraperShape=Ua,this.currentDisplayShape=Na,this.dirtyDisplayShape=!0,this.actionSmallestArea=Ua,this.actionSmallerArea=Ua,this.actionRegularArea=Ua,this.actionLargerArea=Ua,this.actionLargestArea=Ua,this.currentDisplayArea=Na,this.dirtyDisplayArea=!0},t.cleanDisplayShape=function(){this.dirtyDisplayShape=!1;const[t,e]=this.currentDimensions;if(t>0&&e>0){const i=t/e,s=this.currentDisplayShape,n=this.breakToBanner,r=this.breakToLandscape,o=this.breakToPortrait,a=this.breakToSkyscraper;return i>n?s!=ne&&(this.currentDisplayShape=ne,this.actionBannerShape(),!0):i>r?s!=ds&&(this.currentDisplayShape=ds,this.actionLandscapeShape(),!0):i<a?s!=Nr&&(this.currentDisplayShape=Nr,this.actionSkyscraperShape(),!0):i<o?s!=Fn&&(this.currentDisplayShape=Fn,this.actionPortraitShape(),!0):s!=gr&&(this.currentDisplayShape=gr,this.actionRectangleShape(),!0)}return this.dirtyDisplayShape=!0,!1},t.cleanDisplayArea=function(){this.dirtyDisplayArea=!1;const[t,e]=this.currentDimensions;if(t>0&&e>0){const i=t*e,s=this.currentDisplayArea,n=this.breakToLargest,r=this.breakToLarger,o=this.breakToSmaller,a=this.breakToSmallest;return i>n?s!=ms&&(this.currentDisplayArea=ms,this.actionLargestArea(),!0):i>r?s!=ps&&(this.currentDisplayArea=ps,this.actionLargerArea(),!0):i<a?s!=jr&&(this.currentDisplayArea=jr,this.actionSmallestArea(),!0):i<o?s!=Gr&&(this.currentDisplayArea=Gr,this.actionSmallerArea(),!0):s!=kr&&(this.currentDisplayArea=kr,this.actionRegularArea(),!0)}return this.dirtyDisplayArea=!0,!1},t.updateDisplayShape=function(){this.currentDisplayShape=Na,this.dirtyDisplayShape=!0},t.updateDisplayArea=function(){this.currentDisplayArea=Na,this.dirtyDisplayArea=!0},t.updateDisplay=function(){this.updateDisplayShape(),this.updateDisplayArea()}}I.Quaternion=Quaternion;const Canvas=function(t=qa){this.makeName(t.name),this.register(),this.initializePositions(),this.dimensions[0]=300,this.dimensions[1]=150,this.pathCorners=[],this.css={},this.here={},this.perspective={x:mn,y:mn,z:0},this.dirtyPerspective=!0,this.initializeDomLayout(t),this.set(this.defs),t.label||(t.label=`${this.name} canvas element`),this.initializeDisplayShapeActions(),this.initializeAccessibility(),this.set(t),this.cleanDimensions();const e=this.domElement;if(e){const i=e.dataset;this.useDisplayP3WhereAvailable=i.canvasColorSpace==ni||t.canvasColorSpace==ni,this.canvasColorSpace=vd(this.useDisplayP3WhereAvailable),this.engine=this.domElement.getContext(Pt,{colorSpace:this.canvasColorSpace}),this.state=Hh({engine:this.engine}),this.cells=[],this.cellBatchesClear=[],this.cellBatchesCompile=[],this.cellBatchesShow=[];let s=this.currentDimensions[0],n=this.currentDimensions[1];if(i.isResponsive){e.style.width=pn,e.style.height=pn;let t=!0;i.baseWidth&&i.baseHeight&&(t=!1,s=parseFloat(i.baseWidth),n=parseFloat(i.baseHeight)),this.set({checkForResize:!0,baseMatchesCanvasDimensions:t,ignoreCanvasCssDimensions:!0,fit:i.fit||this.fit}),this.cleanDimensions()}const r={name:`${this.name}_base`,element:!1,width:s,height:n,cleared:!0,compiled:!0,shown:!1,isBase:!0,host:this.name,controller:this,order:10,canvasColorSpace:this.canvasColorSpace};i.baseClearAlpha&&(r.clearAlpha=parseFloat(i.baseClearAlpha)),i.baseBackgroundColor&&(r.backgroundColor=i.baseBackgroundColor),this.base=this.buildCell(r),th(this.name),e.getAttribute("role")&&(this.role=e.getAttribute("role")),e.getAttribute("title")&&(this.title=e.getAttribute("title")),i.label&&(this.label=i.label),i.description&&(this.description=i.description);const o=document.createElement("nav");o.id=`${this.name}-navigation`,o.style.width=In,o.style.height=In,o.style.maxWidth=In,o.style.maxHeight=In,o.style.border=In,o.style.padding=In,o.style.margin=In,o.style.overflow=Ui,o.setAttribute(qt,On),this.navigation=o,e.appendChild(o),this.dirtyNavigationTabOrder=!0;const a=document.createElement(ri);a.id=`${this.name}-text-hold`,a.style.width=In,a.style.height=In,a.style.maxWidth=In,a.style.maxHeight=In,a.style.border=In,a.style.padding=In,a.style.margin=In,a.style.overflow=Ui,this.textHold=a,e.appendChild(a);const c=document.createElement(ri);c.id=`${this.name}-ARIA-label`,this.ariaLabelElement=c,ql.appendChild(c),e.setAttribute("aria-labelledby",c.id),e.setAttribute(qt,On);const l=document.createElement(ri);l.id=`${this.name}-ARIA-description`,this.ariaDescriptionElement=l,ql.appendChild(l),e.setAttribute("aria-describedby",l.id),e.setAttribute(qt,On),this.cleanAria()}else this.cleanDimensions();return this.dirtyCells=!0,this.apply(),this.dirtyDomDimensions=!0,t.setAsCurrentCanvas&&this.setAsCurrentCanvas(),this},hd=Canvas.prototype=yc();hd.type=yo,hd.lib=ve,hd.isArtefact=!0,hd.isAsset=!1,ml(hd),cd(hd),ld(hd);const ud={position:vr,trackHere:po,fit:tn,isComponent:!1,baseMatchesCanvasDimensions:!1,renderOnResize:!0,ignoreCanvasCssDimensions:!1,title:Na,label:Na,description:Na,role:es,navigationAriaLive:On,canvasColorSpace:qr};hd.defs=cc(hd.defs,ud),hd.stringifyFunction=Ua,hd.processPacketOut=Ua,hd.finalizePacketOut=Ua,hd.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},hd.clone=_a,hd.factoryKill=function(){const t=this.name,e=this.host;if(eh(t),uc(bl,t),e&&e!=Er){const i=this.currentHost?this.currentHost:o[e];if(i){i.removeGroups(t);const e=g[i.name];e&&e.removeArtefacts(t)}}g[t]&&g[t].kill(),this.base.kill(),this.navigation.remove(),this.textHold.remove(),this.ariaLabelElement.remove(),this.ariaDescriptionElement.remove(),this.domElement.remove()};const dd=hd.getters,fd=hd.setters,pd=hd.deltaSetters;fd.fit=function(t){this.fit=vi.includes(t)?t:tn},fd.title=function(t){this.title=t,this.dirtyAria=!0},fd.label=function(t){this.label=t,this.dirtyAria=!0},fd.description=function(t){this.description=t,this.dirtyAria=!0},fd.role=function(t){this.role=t,this.dirtyAria=!0},fd.navigationAriaLive=function(t){t.substring&&Qt.includes(t)&&(this.navigationAriaLive=t,this.dirtyAria=!0)},dd.backgroundColor=function(){return this.base.backgroundColor},fd.backgroundColor=function(t){this.base&&this.base.set({backgroundColor:t})},dd.alpha=function(){return this.base.alpha},fd.alpha=function(t){this.base&&this.base.set({alpha:t})},pd.alpha=function(t){this.base&&this.base.deltaSet({alpha:t})},dd.composite=function(){return this.base.composite},fd.composite=function(t){this.base&&this.base.set({composite:t})},fd.checkForEntityHover=function(t){this.base.set({checkForEntityHover:t})},fd.onEntityHover=function(t){this.base.set({onEntityHover:t})},fd.onEntityNoHover=function(t){this.base.set({onEntityNoHover:t})},dd.baseGroup=function(){return g[this.base.name]},dd.baseName=function(){return this.base.name},hd.setAsCurrentCanvas=function(){return this.base&&kd(this),this},hd.setBase=function(t){return this.base&&(this.base.set(t),this.setBaseHelper()),this},hd.deltaSetBase=function(t){return this.base&&(this.base.deltaSet(t),this.setBaseHelper()),this},hd.updateBaseHere=function(){this.base&&this.base.updateBaseHere(this.here,this.fit)},hd.setBaseHelper=function(){const t={},e=this.base;e.dirtyScale&&(t.dirtyScale=!0),e.dirtyDimensions&&(t.dirtyDimensions=!0),e.dirtyLock&&(t.dirtyLock=!0),e.dirtyStart&&(t.dirtyStart=!0),e.dirtyOffset&&(t.dirtyOffset=!0),e.dirtyHandle&&(t.dirtyHandle=!0),e.dirtyRotation&&(t.dirtyRotation=!0),this.cleanCells(),e.prepareStamp(),this.updateCells(t)},hd.updateCells=function(t=qa){const e=this.cells;let i;for(let s=0,n=e.length;s<n;s++)i=u[e[s]],i&&(t.dirtyScale&&(i.dirtyScale=!0),t.dirtyDimensions&&(i.dirtyDimensions=!0),t.dirtyLock&&(i.dirtyLock=!0),t.dirtyStart&&(i.dirtyStart=!0),t.dirtyOffset&&(i.dirtyOffset=!0),t.dirtyHandle&&(i.dirtyHandle=!0),t.dirtyRotation&&(i.dirtyRotation=!0))},hd.buildCell=function(t=qa){t.host||null||(t.host=this.base.name);const e=function(t){return!!t&&new Cell(t)}(t);return this.addCell(e),this.cleanCells(),e},hd.cleanDimensionsAdditionalActions=function(){this.cells&&this.updateCells({dirtyDimensions:!0}),this.dirtyDomDimensions=!0,this.dirtyDisplayShape=!0,this.dirtyDisplayArea=!0},hd.addCell=function(t){if(t=t.substring?t:t.name||null){const e=u[t];e&&(this.base&&(e.host=this.base.name,e.currentHost=null),e.prepareStamp(),hc(this.cells,t),this.dirtyCells=!0)}return this},hd.removeCell=function(t){return(t=t.substring?t:t.name||null)&&(uc(this.cells,t),this.dirtyCells=!0),this},hd.killCell=function(t){const e=t.substring?u[t]:t;return e&&e.kill(),this.dirtyCells=!0,this},hd.clear=function(){this.dirtyCells&&this.cleanCells(),this.base&&this.base.dirtyDimensions&&this.base.cleanDimensions();const t=this.cellBatchesClear;for(let e=0,i=t.length;e<i;e++)t[e].clear()},hd.compile=function(){this.dirtyCells&&this.cleanCells(),this.base&&this.base.dirtyDimensions&&this.base.cleanDimensions();const t=this.cellBatchesCompile;for(let e=0,i=t.length;e<i;e++)t[e].compile();this.prepareStamp(),this.stamp()},hd.show=function(){this.dirtyCells&&this.cleanCells(),this.base&&this.base.dirtyDimensions&&this.base.cleanDimensions();const t=this.cellBatchesShow;for(let e=0,i=t.length;e<i;e++)t[e].show();this.base.show(),Kl(),this.dirtyAria&&this.cleanAria(),this.dirtyNavigationTabOrder&&this.reorderNavElements()},hd.reorderNavElements=function(){this.dirtyNavigationTabOrder=!1;const t=[],e=this.navigation;for(;e.firstChild;)t.push(e.removeChild(e.firstChild));t.sort(((t,e)=>{const i=parseInt(t.getAttribute(_e),10),s=parseInt(e.getAttribute(_e),10);return i<s?-1:i>s?1:0})),t.forEach((t=>e.appendChild(t)))},hd.render=function(){this.clear(),this.compile(),this.show()},hd.cleanCells=function(){this.dirtyCells=!1;const t=Kc(),e=Kc(),i=Kc(),{cells:s,cellBatchesClear:n,cellBatchesCompile:r,cellBatchesShow:o}=this;let a,c,l,h,d;for(h=0,d=s.length;h<d;h++)a=u[s[h]],a&&(a.cleared&&t.push(a),a.compiled&&(c=a.compileOrder,e[c]||(e[c]=Kc()),e[c].push(a)),a.shown&&(c=a.showOrder,i[c]||(i[c]=Kc()),i[c].push(a)));for(n.length=0,n.push(...t),qc(t),r.length=0,h=0,d=e.length;h<d;h++)l=e[h],l&&(r.push(...l),qc(l));for(qc(e),o.length=0,h=0,d=i.length;h<d;h++)l=i[h],l&&(o.push(...l),qc(l));qc(i)},hd.cascadeEventAction=function(t,e={}){this.currentActiveEntityNames||(this.currentActiveEntityNames=[]);const i=this.currentActiveEntityNames,s=Kc(),n=Kc(),r=Kc(),a=Kc(),c=Kc(),l=Kc(),h=Kc();let d,f,p,m,g,y;const b=this.cells;for(d=0,f=b.length;d<f;d++)p=u[b[d]],p&&(p.shown||p.isBase||p.includeInCascadeEventActions)&&n.push(...p.getEntityHits());for(d=0,f=n.length;d<f;d++)m=n[d],g=m.name,r.includes(g)||(r.push(g),i.includes(g)?(l.push(m),h.push(g)):(a.push(m),c.push(g)));s.push(...a,...l);const S=function(t){if(i.length){for(d=0,f=c.length;d<f;d++)uc(i,c[d]);for(d=0,f=h.length;d<f;d++)uc(i,h[d]);for(d=0,f=i.length;d<f;d++)y=o[i[d]],y&&y.onLeave(t)}},k=s.length,A=a.length;switch(t){case oi:for(d=0;d<k;d++)s[d].onDown(e);break;case ba:for(d=0;d<k;d++)s[d].onUp(e);break;case mi:for(d=0;d<A;d++)a[d].onEnter(e);break;case ys:S(e);break;case Gs:for(S(e),d=0;d<A;d++)a[d].onEnter(e)}return i.length=0,i.push(...c,...h),qc(s),qc(n),qc(r),qc(a),qc(c),qc(l),qc(h),[].concat(i)},hd.getEntityHits=function(){return this.cascadeEventAction()},hd.checkHover=function(){this.cascadeEventAction()},hd.cleanAria=function(){this.dirtyAria=!1,this.domElement.setAttribute("title",this.title),this.domElement.setAttribute("role",this.role),this.ariaLabelElement.textContent=this.label,this.ariaDescriptionElement.textContent=this.description,this.navigation.setAttribute(qt,this.navigationAriaLive)};const md=function(t){return!!t&&new Canvas(t)};I.Canvas=Canvas;const gd=function(t){let e=t.getAttribute(Ue),i=t.id||t.getAttribute(Vs),s=$t;return e&&e!==Er||(t.setAttribute(Ue,Er),e=Er,s=t.style.position),i||(i=Ja(),t.id=i),md({name:i,domElement:t,group:e,host:e,position:s,setInitialDimensions:!0})},yd=function(t){const e=document.querySelector(`#${t}`),i=h[t];if(i){if(null!=e.dataset.scrawlGroup)return kd(i),i;H(t)}if(e){const t=gd(e);return kd(t),t}};let bd=null,Sd=null;const kd=function(t){let e=!1;if(t)if(t.substring){const i=h[t];i&&(Sd=i,e=!0)}else t.type==yo&&(Sd=t,e=!0);if(e&&Sd.base){const t=g[Sd.base.name];t&&(bd=t)}},Ad=function(t=qa){const e=document.createElement(ve),i=t.name?t.name:Ja(),s=t.width||300,n=t.height||150;let r,a=Er,c=vr,l=t.host;l.substring&&(r=o[l],!r&&l?(l=document.querySelector(l),l&&(a=l.id)):l=r),l?l.type==Yo?(a=l.name,c=$t,l=l.domElement):sc(l)||(l=document.body):l=document.body,e.id=i,e.setAttribute(Ue,a),e.width=s,e.height=n,e.style.position=c,l.appendChild(e);const h=md({name:i,domElement:e,group:a,host:a,position:c,setInitialDimensions:!1,setAsCurrentCanvas:!dc(t.setAsCurrentCanvas)||t.setAsCurrentCanvas,trackHere:dc(t.trackHere)?t.trackHere:po});return delete t.group,delete t.host,delete t.name,delete t.element,delete t.position,delete t.setInitialDimensions,delete t.setAsCurrentCanvas,delete t.trackHere,h.set(t),h},vd=t=>{const{canvasSupportsP3Color:e,displaySupportsP3Color:i}=Sl;return t&&e&&i?ni:qr},Element=function(t=qa){const e=t.domElement;this.makeName(t.name),this.register(),e&&(t.text?e.textContent=t.text:t.content&&(e.innerHTML=t.content)),this.initializePositions(),this.dimensions[0]=this.dimensions[1]=100,this.pathCorners=[],this.css={},this.here={},this.initializeDomLayout(t),this.set(this.defs),this.initializeAccessibility(),this.set(t);const i=this.domElement;return i&&(i.id=this.name),this.apply(),this},Pd=Element.prototype=yc();Pd.type="Element",Pd.lib=ci,Pd.isArtefact=!0,Pd.isAsset=!1,ml(Pd),cd(Pd),Pd.factoryKill=function(){uc(bl,this.name),this.domElement.remove()};const Cd=Pd.setters;Cd.text=function(t){const e=this.domElement;if(sc(e)){const i=e.querySelectorAll(ze);e.textContent=t,i.forEach((t=>e.appendChild(t))),this.dirtyContent=!0}},Cd.content=function(t){const e=this.domElement;if(sc(e)){const i=e.querySelectorAll(ze);e.innerHTML=t,i.forEach((t=>e.appendChild(t))),this.dirtyContent=!0}},Pd.cleanDimensionsAdditionalActions=function(){this.dirtyDomDimensions=!0},Pd.addCanvas=function(t=qa){if(this.canvas)return this.canvas;{const e=document.createElement(ve),i=this.domElement;e.id=`${this.name}-canvas`;const s=i.getBoundingClientRect();i.parentNode.insertBefore(e,this.domElement);const n=md({name:`${this.name}-canvas`,domElement:e,position:$t,width:s.width,height:s.height,mimic:this.name,lockTo:Ts,useMimicDimensions:!0,useMimicScale:!0,useMimicStart:!0,useMimicHandle:!0,useMimicOffset:!0,useMimicRotation:!0,addOwnDimensionsToMimic:!1,addOwnScaleToMimic:!1,addOwnStartToMimic:!1,addOwnHandleToMimic:!1,addOwnOffsetToMimic:!1,addOwnRotationToMimic:!1});return n.set(t),this.canvas=n,n}};const wd=function(t){return!!t&&new Element(t)};I.Element=Element;const Stack=function(t=qa){this.makeName(t.name),this.register(),this.initializePositions(),this.initializeCascade(),this.dimensions[0]=300,this.dimensions[1]=150,this.pathCorners=[],this.css={},this.here={},this.perspective={x:mn,y:mn,z:0},this.dirtyPerspective=!0,this.initializeDomLayout(t);const e=Du({name:this.name,host:this.name});this.addGroups(e.name),this.set(this.defs),this.initializeDisplayShapeActions(),this.initializeAccessibility(),this.set(t);const i=this.domElement;if(i){i.dataset.isResponsive&&(this.isResponsive=!0),i.getAttribute(Ue)==Er&&th(this.name)}return this},xd=Stack.prototype=yc();xd.type=Yo,xd.lib="stack",xd.isArtefact=!0,xd.isAsset=!1,ml(xd),zu(xd),cd(xd),ld(xd);const Od={position:vr,perspective:null,trackHere:po,isResponsive:!1,containElementsInHeight:!1};xd.defs=cc(xd.defs,Od),xd.stringifyFunction=Ua,xd.processPacketOut=Ua,xd.finalizePacketOut=Ua,xd.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},xd.clone=_a,xd.factoryKill=function(){const t=this.name;eh(t),uc(bl,t),g[t]&&g[t].kill(),bt(o).forEach((e=>{e.host===t&&e.kill()})),this.domElement.remove()};const Dd=xd.getters,Rd=xd.setters,Fd=xd.deltaSetters;Dd.perspectiveX=function(){return this.perspective.x},Dd.perspectiveY=function(){return this.perspective.y},Dd.perspectiveZ=function(){return this.perspective.z},Rd.perspectiveX=function(t){this.perspective.x=t,this.dirtyPerspective=!0},Rd.perspectiveY=function(t){this.perspective.y=t,this.dirtyPerspective=!0},Rd.perspectiveZ=function(t){this.perspective.z=t,this.dirtyPerspective=!0},Rd.perspective=function(t=qa){this.perspective.x=dc(t.x)?t.x:this.perspective.x,this.perspective.y=dc(t.y)?t.y:this.perspective.y,this.perspective.z=dc(t.z)?t.z:this.perspective.z,this.dirtyPerspective=!0},Fd.perspectiveX=function(t){this.perspective.x=Ga(this.perspective.x,t),this.dirtyPerspective=!0},Fd.perspectiveY=function(t){this.perspective.y=Ga(this.perspective.y,t),this.dirtyPerspective=!0},Dd.group=function(){return g[this.name]},xd.updateArtefacts=function(t=qa){this.groupBuckets.forEach((e=>{e.artefactCalculateBuckets.forEach((e=>{t.dirtyScale&&(e.dirtyScale=!0),t.dirtyDimensions&&(e.dirtyDimensions=!0),t.dirtyLock&&(e.dirtyLock=!0),t.dirtyStart&&(e.dirtyStart=!0),t.dirtyOffset&&(e.dirtyOffset=!0),t.dirtyHandle&&(e.dirtyHandle=!0),t.dirtyRotation&&(e.dirtyRotation=!0),t.dirtyPathObject&&(e.dirtyPathObject=!0)}))}))},xd.cleanDimensionsAdditionalActions=function(){this.groupBuckets&&this.updateArtefacts({dirtyDimensions:!0,dirtyPath:!0,dirtyStart:!0,dirtyHandle:!0}),this.dirtyDomDimensions=!0,this.dirtyPath=!0,this.dirtyStart=!0,this.dirtyHandle=!0,this.dirtyDisplayShape=!0,this.dirtyDisplayArea=!0},xd.cleanPerspective=function(){this.dirtyPerspective=!1;const t=this.perspective;this.domPerspectiveString=`perspective-origin: ${t.x} ${t.y}; perspective: ${t.z}px;`,this.domShowRequired=!0,this.groupBuckets&&this.updateArtefacts({dirtyHandle:!0,dirtyPathObject:!0})},xd.checkResponsive=function(){this.isResponsive&&this.trackHere&&(this.currentVportWidth||(this.currentVportWidth=Sl.w),this.currentVportHeight||(this.currentVportHeight=Sl.h),this.dirtyHeight&&this.containElementsInHeight&&(this.dirtyHeight=!1),this.currentVportWidth!==Sl.w&&(this.currentVportWidth=Sl.w,this.containElementsInHeight&&(this.dirtyHeight=!0)),this.currentVportHeight!==Sl.h&&(this.currentVportHeight=Sl.h))},xd.clear=function(){this.checkResponsive()},xd.compile=function(){this.sortGroups(),this.prepareStamp(),this.stamp(),this.groupBuckets.forEach((t=>t.stamp()))},xd.show=function(){Kl()},xd.render=function(){this.compile(),this.show()},xd.addExistingDomElements=function(t){if(dc(t)){let e,i,s,n;const r=t.substring?document.querySelectorAll(t):[].concat(t);for(s=0,n=r.length;s<n;s++)e=r[s],sc(e)&&(i=wd({name:e.id||e.name,domElement:e,group:this.name,host:this.name,position:$t,setInitialDimensions:!0}),i&&i.domElement&&this.domElement.appendChild(i.domElement))}return this},xd.addNewElement=function(t){if(t&&t.tag){t.domElement=document.createElement(t.tag),t.domElement.setAttribute(Ue,this.name),dc(t.group)||(t.group=this.name),t.host=this.name,t.position||(t.position=$t),t.dimensions&&K(t.dimensions)&&(t.width=t.dimensions[0]||100,t.height=t.dimensions[1]||100),dc(t.width)||(t.width=100),dc(t.height)||(t.height=100);const e=wd(t);return e&&e.domElement&&(dc(t.boxSizing)||(e.domElement.style.boxSizing=be),this.domElement.appendChild(e.domElement)),e}return!1};const Hd=function(t){return!!t&&new Stack(t)};I.Stack=Stack;const Ed=function(t){let e=t.getAttribute(Ue),i=t.id||t.getAttribute(Vs),s=$t;e||(t.setAttribute(Ue,Er),e=Er,s=vr),i||(i=Ja(),t.id=i);const n=Hd({name:i,domElement:t,group:e,host:e,position:s,setInitialDimensions:!0});return Id(t,i),n},Id=function(t,e){const i=t.getBoundingClientRect();let s,n,r,o,a=0;Array.from(t.children).forEach((t=>{null!=t.getAttribute(Ze)||ic(t)||"SCRIPT"==t.tagName?t.setAttribute(Ue,e):(s=t.getBoundingClientRect(),n=Y(t),r=parseFloat(n.marginTop)+parseFloat(n.borderTopWidth)+parseFloat(n.paddingTop)+parseFloat(n.paddingBottom)+parseFloat(n.borderBottomWidth)+parseFloat(n.marginBottom),a=a||s.top-i.top,o={name:t.id||t.getAttribute(Vs),domElement:t,group:e,host:e,position:$t,width:s.width,height:s.height,startX:s.left-i.left,startY:a,classes:t.className?t.className:Na},a+=r+s.height,wd(o))}))},Td=function(t=qa){let e,i,s,n,r,a=$t;e=t.element&&t.element.substring?document.querySelector(t.element):sc(t.element)?t.element:document.createElement(ri),t.host&&t.host.substring?(i=document.querySelector(t.host),i||(i=document.body)):i=sc(t.host)?t.host:dc(e.parentElement)?e.parentElement:document.body,dc(t.width)&&(e.style.width=t.width.toFixed?`${t.width}px`:t.width),dc(t.height)&&(e.style.height=t.height.toFixed?`${t.height}px`:t.height),r=t.name||e.id||e.getAttribute(Vs)||Na,r||(r=Ja()),e.id=r,e.setAttribute(Ze,Ze),i&&null!=i.getAttribute(Ze)?(s=o[i.id],n=s?s.name:Er):n=Er,e.setAttribute(Ue,n),n==Er&&(a=vr),e.parentElement&&i.id===e.parentElement.id||i.appendChild(e);const c=Hd({name:r,domElement:e,group:n,host:n,position:a,setInitialDimensions:!0});return Id(e,r),Array.from(e.childNodes).forEach((t=>{var e;t.id&&(e=t.id,Ql.includes(e))&&eh(t.id)})),delete t.name,delete t.element,delete t.host,delete t.width,delete t.height,c.set(t),c},Bd=function(t){const e=document.querySelector(`#${t}`),i=w[t];if(i){if(null!=e.dataset.scrawlGroup)return i;H(t)}if(e){return Ed(e)}},$d=function(){!function(t="[data-scrawl-stack]"){document.querySelectorAll(t).forEach((t=>Ed(t)))}(),function(t="[data-scrawl-canvas]"){let e;document.querySelectorAll(t).forEach(((t,i)=>{e=gd(t),i||kd(e)}))}(),nl(),Ul(),Tl(),Pc(!0),zl()},Ld=function(t){return t.length?t:ih()},Md=function(t,e){let i,s,n;for(i=0,s=t.length;i<s;i++)n=o[t[i]],n&&n[e]&&n[e]()},Nd=function(...t){const e=Ld(t);Md(e,He)},Xd=function(...t){const e=Ld(t);Md(e,"compile")},Yd=function(...t){const e=Ld(t);Md(e,"show")},Gd=function(...t){const e=Ld(t);Md(e,"render")},RenderAnimation=function(t=qa){let e;if(this.noTarget=null!=t.noTarget&&t.noTarget,t.target||t.noTarget){if(K(t.target)){const e=[];return t.target.forEach((i=>{const s=L({},t);s.name=`${s.name}_${i.name}`,s.target=i,e.push(new RenderAnimation(s))})),e}e=t.target&&t.target.substring?o[t.target]:t.target}else e={clear:Nd,compile:Xd,show:Yd,checkAccessibilityValues:Ua};this.makeName(t.name),this.order=dc(t.order)?t.order:this.defs.order,this.onRun=t.onRun||Ua,this.onHalt=t.onHalt||Ua,this.onKill=t.onKill||Ua,this.maxFrameRate=t.maxFrameRate||60,this.lastRun=0,this.chokedAnimation=!0,this.target=e,this.commence=t.commence||Ua,this.afterClear=t.afterClear||Ua,this.afterCompile=t.afterCompile||Ua,this.afterShow=t.afterShow||Ua,this.afterCreated=t.afterCreated||Ua,this.error=t.error||Ua,this.readyToInitialize=!0,this.fn=function(){this.noTarget?(this.commence(),this.afterClear(),this.afterCompile(),this.afterShow(),this.readyToInitialize&&(this.afterCreated(this),this.readyToInitialize=!1)):this.isRunning()&&(this.commence(),this.target.clear(),this.afterClear(),this.target.compile(),this.afterCompile(),this.target.show(),this.afterShow(),this.readyToInitialize&&(this.target.checkAccessibilityValues(),this.afterCreated(this),this.readyToInitialize=!1))},this.register();const i=t.observer||!1;return i&&setTimeout((()=>{ec(i)?this.observer=ol(this,this.target):this.observer=ol(this,this.target,i)}),0),t.delay||this.run(),this},jd=RenderAnimation.prototype=yc();jd.type=Mo,jd.lib=Vt,jd.isArtefact=!1,jd.isAsset=!1,ml(jd);jd.defs=cc(jd.defs,{order:1,maxFrameRate:60,onRun:null,onHalt:null,onKill:null,commence:null,afterClear:null,afterCompile:null,afterShow:null,afterCreated:null,error:null,target:null}),jd.stringifyFunction=Ua,jd.processPacketOut=Ua,jd.finalizePacketOut=Ua,jd.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},jd.clone=_a,jd.kill=function(){return this.onKill(),el(this.name),this.deregister(),!0},jd.run=function(){return this.onRun(),tl(this.name),this.target&&this.target.checkAccessibilityValues(),setTimeout((()=>Vc()),20),this},jd.start=function(){return this.readyToInitialize=!0,this.run()},jd.isRunning=function(){return il(this.name)},jd.halt=function(){return this.onHalt(),el(this.name),this};const zd=function(t){return!!t&&new RenderAnimation(t)};I.RenderAnimation=RenderAnimation;const UnstackedElement=function(t){const e=t.id||t.name;return this.makeName(e),this.register(),t.setAttribute("data-scrawl-name",this.name),this.domElement=t,this.elementComputedStyles=Y(t),this.hostStyles={},this.canvasStartX=0,this.canvasStartY=0,this.canvasWidth=0,this.canvasHeight=0,this.canvasZIndex=0,this},Wd=UnstackedElement.prototype=yc();Wd.type="UnstackedElement",Wd.lib="unstackedelement",Wd.isArtefact=!1,Wd.isAsset=!1,ml(Wd);Wd.defs=cc(Wd.defs,{canvasOnTop:!1}),Wd.demolish=function(){return!0},Wd.addCanvas=function(t=qa){if(!this.canvas){const e=document.createElement(ve),i=this.domElement,s=i.style;"static"==s.position&&(s.position=vr),e.id=`${this.name}-canvas`,i.prepend(e);const n=md({name:`${this.name}-canvas`,domElement:e,position:$t});return this.canvas=n,n.set(t),this.updateCanvas(),n}},Wd.checkElementStyleValues=function(){const t={},e=this.domElement,i=this.canvas;if(e&&i&&i.domElement){const s=this.hostStyles,n=this.elementComputedStyles,r=i.domElement;let{x:o,y:a,width:c,height:l}=e.getBoundingClientRect(),{x:h,y:u}=r.getBoundingClientRect(),{width:d,height:f}=n;const p=n.zIndex;let m,g,y,b,S;o=V(o),a=V(a),h=V(h),u=V(u),c=V(c),l=V(l),d=V(parseFloat(d)),f=V(parseFloat(f)),da.forEach((e=>{switch(e){case Oa:m=J(d,c),this.canvasWidth!=m&&(this.canvasWidth=m,this.dirtyDimensions=!0);break;case Wi:g=J(f,l),this.canvasHeight!=g&&(this.canvasHeight=g,this.dirtyDimensions=!0);break;case"zIndex":y=p==ee?0:parseInt(p,10),y=this.canvasOnTop?y+1:y-1,this.canvasZIndex!=y&&(this.canvasZIndex=y,this.dirtyZIndex=!0);break;default:b=s[e],S=n[e],dc(b)&&b==S||(s[e]=S,t[e]=S)}}));const k=o-h,A=a-u;(k||A)&&(this.canvasStartX+=k,this.canvasStartY+=A,this.dirtyStart=!0)}return t},Wd.updateCanvas=function(){if(this.canvas&&this.canvas.domElement){const t=this.canvas,e=t.domElement.style,i=this.checkElementStyleValues();for(const[t,s]of z(i))fa.includes(t)&&(e[t]=s);if(this.dirtyStart&&(this.dirtyStart=!1,t.set({startX:this.canvasStartX,startY:this.canvasStartY})),this.dirtyDimensions){this.dirtyDimensions=!1;const e=this.canvasWidth,i=this.canvasHeight;t.set({width:e,height:i}),t.dirtyDimensions=!0,t.base.set({width:e,height:i}),t.base.dirtyDimensions=!0,t.cleanDimensions(),t.base.cleanDimensions()}this.dirtyZIndex&&(this.dirtyZIndex=!1,e.zIndex=this.canvasZIndex)}};I.UnstackedElement=UnstackedElement;const Vd=function(t){const e=!!sc(t.domElement)&&t.domElement,i=oc(t.animationHooks)?t.animationHooks:{},s=oc(t.canvasSpecs)?t.canvasSpecs:{},n=oc(t.observerSpecs)?t.observerSpecs:{},r=!ec(t.includeCanvas)||t.includeCanvas;return e&&e.id&&o[e.id]?Ud(e,s,i,n):Zd(e,s,i,n,r)},Ud=function(t,e,i,s){const n=o[t.id];if(!n)return!1;e.baseMatchesCanvasDimensions=!0,e.ignoreCanvasCssDimensions=!0,e.checkForResize=!0;const r=n.addCanvas(e);n.elementComputedStyles=Y(t),i.name=`${n.name}-animation`,i.target=r;const a=zd(i),c=ol(a,n,s);return{element:n,canvas:r,animation:a,demolish:()=>{c(),a.kill(),r.demolish(),n.demolish(!0)}}},Zd=function(t,e,i,s,n){if(!t||Js.includes(t.tagName))return{};const r=t.id;let o;var a;r&&F[r]?o=F[r]:o=!!(a=t)&&new UnstackedElement(a),e.baseMatchesCanvasDimensions=!0,e.checkForResize=!0;const c=!!n&&o.addCanvas(e);i.name=`${o.name}-animation`,c?(i.afterClear||(i.afterClear=()=>o.updateCanvas()),i.target=c):i.noTarget=!0;const l=zd(i),h=ol(l,o,s);return{element:o,canvas:c,animation:l,demolish:()=>{h(),l.kill(),c&&c.demolish(),o.demolish(!0)}}},_d=t=>{if(t&&t.substring){let e;return!!Ko.some((i=>(e=T[i][t],e)))&&e}return!1};function Kd(t=qa){const e={order:1,ticker:Na,targets:null,time:0,action:null,reverseOnCycleEnd:!1,reversed:!1};t.defs=cc(t.defs,e),t.kill=function(){const t=this.ticker;if(t==`${this.name}_ticker`){const e=n[t];e&&e.kill()}else t&&this.removeFromTicker(t);return this.deregister(),!0};const i=t.getters,s=t.setters;i.targets=function(){return[].concat(this.targets)},s.targets=function(t=[]){this.setTargets(t)},s.action=function(t){this.action=t,typeof this.action!=Ei&&(this.action=Ua)},t.calculateEffectiveTime=function(t){const[e,i]=za(pc(t,this.time));if(this.effectiveTime=0,e==dn&&i<=100){if(this.ticker){const t=n[this.ticker];t&&(this.effectiveTime=t.effectiveDuration*(i/100))}}else this.effectiveTime=i;return this},t.addToTicker=function(t){if(dc(t)){const e=this.ticker,i=n[t];e&&e!=t&&this.removeFromTicker(e),dc(i)&&(this.ticker=t,i.subscribe(this.name),this.calculateEffectiveTime())}return this},t.removeFromTicker=function(t){if(t=dc(t)?t:this.ticker){const e=n[t];dc(e)&&(this.ticker=Na,e.unsubscribe(this.name))}return this},t.setTargets=function(t){t=[].concat(t);const e=Kc();return t.forEach((t=>{if(nc(t))nc(t.set)&&e.push(t);else if(oc(t)&&dc(t.name))e.push(t);else{const i=_d(t);i&&e.push(i)}})),this.targets||(this.targets=[]),this.targets.length=0,this.targets.push(...e),qc(e),this},t.addToTargets=function(t){let e;return(t=[].concat(t)).forEach((t=>{typeof t==Ei?typeof t.set==Ei&&this.targets.push(t):(e=_d(t),e&&this.targets.push(e))}),this),this},t.removeFromTargets=function(t){t=[].concat(t);const e=Kc(),i=[].concat(this.targets);i.forEach((t=>{const i=t.type||ma,s=t.name||ga;i!=ma&&s!=ga&&e.push(`${i}_${s}`)})),t.forEach((t=>{let s;if(s=typeof t==Ei?t:_d(t),s){const t=s.type||ma,n=s.name||ga;if(t!=ma&&n!=ga){const s=`${t}_${n}`,r=e.indexOf(s);r>=0&&(i[r]=!1)}}})),this.targets||(this.targets=[]);const s=this.targets;return s.length=0,i.forEach((t=>{t&&s.push(t)}),this),this},t.checkForTarget=function(t){return!!t.substring&&this.targets.some((e=>e.name==t))},t.run=Ua,t.isRunning=Ua,t.halt=Ua,t.reverse=Ua,t.resume=Ua,t.seekTo=Ua,t.seekFor=Ua}const Action=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.action=Ua,this.revert=Ua,this.set(t),this.calculateEffectiveTime(),dc(t.ticker)&&this.addToTicker(t.ticker),this},qd=Action.prototype=yc();qd.type="Action",qd.lib=la,qd.isArtefact=!1,qd.isAsset=!1,ml(qd),Kd(qd);qd.defs=cc(qd.defs,{revert:null}),qd.packetExclusions=hc(qd.packetExclusions,["targets"]),qd.packetFunctions=hc(qd.packetFunctions,["revert","action"]),qd.finalizePacketOut=function(t){return K(this.targets)&&(t.targets=this.targets.map((t=>t.name))),t};const Qd=qd.setters;Qd.revert=function(t){this.revert=t,typeof this.revert!=Ei&&(this.revert=Ua)},Qd.triggered=function(t){this.triggered!==t&&(t?this.action():this.revert(),this.triggered=t)},qd.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs;let r,o,a,c;for(o=0;o<i;o++)a=e[o],c=t[a],a&&a!=Vs&&null!=c&&(r=s[a],r?r.call(this,c):typeof n[a]!=pa&&(this[a]=c));const l=!!dc(t.ticker)&&this.ticker;l?(this.ticker=l,this.addToTicker(t.ticker)):dc(t.time)&&this.calculateEffectiveTime()}return this},qd.getEndTime=function(){return this.effectiveTime},qd.update=function(t){const{tick:e,reverseTick:i,willLoop:s}=t,{reversed:n,effectiveTime:r,triggered:o}=this;return n?i>=r?o||(this.action(),this.triggered=!0):o&&(this.revert(),this.triggered=!1):e>=r?o||(this.action(),this.triggered=!0):o&&(this.revert(),this.triggered=!1),s&&(this.triggered=!this.triggered),!0};const Jd=function(t){return!!t&&new Action(t)};function tf(t=qa){Ru(t),Fu(t),Hu(t),Eu(t),Iu(t),Tu(t),Mu(t),ju(t),Cu(t);const e={method:Si,pathObject:null,winding:en,flipReverse:!1,flipUpend:!1,scaleOutline:!0,lockFillStyleToEntity:!1,lockStrokeStyleToEntity:!1,onEnter:null,onLeave:null,onDown:null,onUp:null};t.defs=cc(t.defs,e),t.packetExclusions=hc(t.packetExclusions,["state"]),t.packetFunctions=hc(t.packetFunctions,["onEnter","onLeave","onDown","onUp"]),t.processEntityPacketOut=function(t,e,i){return this.processFactoryPacketOut(t,e,i)},t.processFactoryPacketOut=function(t,e,i){let s=!0;return i.indexOf(t)||e!=this.defs[t]||(s=!1),s},t.finalizePacketOut=function(t,e){const i=it(this.state.saveAsPacket(e))[3];return t=cc(t,i),t=this.handlePacketAnchor(t,e)},t.postCloneAction=function(t,e){return this.onEnter&&(t.onEnter=this.onEnter),this.onLeave&&(t.onLeave=this.onLeave),this.onDown&&(t.onDown=this.onDown),this.onUp&&(t.onUp=this.onUp),e.sharedState&&(t.state=this.state),e.anchor&&(e.anchor.host=t,dc(e.anchor.focusAction)||(e.anchor.focusAction=this.anchor.focusAction),dc(e.anchor.blurAction)||(e.anchor.blurAction=this.anchor.blurAction),t.buildAnchor(e.anchor),e.anchor.clickAction||(t.anchor.clickAction=this.anchor.clickAction)),t};const i=t.getters,s=t.setters;i.group=function(){return this.group?this.group.name:Na},s.lockStylesToEntity=function(t){this.lockFillStyleToEntity=t,this.lockStrokeStyleToEntity=t},t.get=function(t){const e=this.getters[t];if(e)return e.call(this);{const e=this.state;let i,s=this.defs[t];return null!=s?(i=this[t],typeof i!=pa?i:s):(s=e.defs[t],null!=s?(i=e[t],typeof i!=pa?i:s):null)}},t.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs,r=this.state,o=r?r.setters:qa,a=r?r.defs:qa;let c,l,h,u;for(l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(so.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=u)):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=u)))}return this},t.setDelta=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.deltaSetters,n=this.defs,r=this.state,o=r?r.deltaSetters:qa,a=r?r.defs:qa;let c,l,h,u;for(l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(so.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=Ga(r[h],u))):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=Ga(this[h],u))))}return this},t.entityInit=function(t=qa){this.modifyConstructorInputForAnchorButton(t),this.makeName(t.name),this.register(),this.initializePositions(),this.state=Hh(qa),this.set(this.defs),t.group||(t.group=bd),this.onEnter=Ua,this.onLeave=Ua,this.onDown=Ua,this.onUp=Ua,this.set(t),this.midInitActions(t),this.purge&&this.purgeArtefact(this.purge)},t.midInitActions=Ua,t.prepareStamp=function(){this.dirtyHost&&(this.dirtyHost=!1,this.dirtyDimensions=!0),(this.dirtyScale||this.dirtyDimensions||this.dirtyStart||this.dirtyOffset||this.dirtyHandle)&&(this.dirtyPathObject=!0),this.dirtyScale&&this.cleanScale(),this.dirtyDimensions&&this.cleanDimensions(),this.dirtyLock&&this.cleanLock(),this.dirtyStart&&this.cleanStart(),this.dirtyOffset&&this.cleanOffset(),this.dirtyHandle&&this.cleanHandle(),this.dirtyRotation&&this.cleanRotation(),(this.isBeingDragged||this.lockTo.includes($s)||this.lockTo.includes(hn))&&(this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtyStampHandlePositions&&this.cleanStampHandlePositions(),this.dirtyPathObject&&this.cleanPathObject(),this.dirtyPositionSubscribers&&this.updatePositionSubscribers(),this.prepareStampTabsHelper()},t.cleanPathObject=Ua,t.stamp=function(t=!1,e,i){const s=!(this.noFilters||!this.filters||!this.filters.length);return t?(e&&Li.includes(e.type)&&(this.currentHost=e),i&&this.set(i),this.prepareStamp(),s?this.filteredStamp(s):this.regularStamp()):this.visibility?this.stashOutput||s?this.filteredStamp(s):this.regularStamp():void 0},t.regularStamp=function(){const t=this.currentHost;if(t){const e=t.engine,[i,s]=this.currentStampPosition;t.rotateDestination(e,i,s,this),this.noCanvasEngineUpdates||t.setEngine(this),this[this.method](e)}},t.filteredStamp=function(t=!1){const{dirtyFilters:e,currentHost:i,state:s}=this;!e&&this.currentFilters||this.cleanFilters();const{element:n,engine:r,currentDimensions:o}=i,a=qh(),{element:c,engine:l}=a;this.currentHost=a;const h=o?o[0]:n.width,u=o?o[1]:n.height;if(h&&u){a.w=c.width=h,a.h=c.height=u;const e=this.noCanvasEngineUpdates;if(this.noCanvasEngineUpdates=!1,this.regularStamp(),t){const t=this.currentFilters;this.isStencil&&(l.save(),l.globalCompositeOperation=Zr,l.globalAlpha=1,l.setTransform(1,0,0,1,0,0),l.drawImage(n,0,0),l.restore(),this.dirtyFilterIdentifier=!0),l.setTransform(1,0,0,1,0,0);const e=l.getImageData(0,0,h,u);this.preprocessFilters(t);const i=uu.action({identifier:this.filterIdentifier,image:e,filters:t});i&&(l.globalCompositeOperation=_r,l.globalAlpha=1,l.setTransform(1,0,0,1,0,0),l.putImageData(i,0,0))}if(r.save(),r.globalAlpha=s&&s.globalAlpha?s.globalAlpha:1,r.globalCompositeOperation=s&&s.globalCompositeOperation?s.globalCompositeOperation:_r,r.setTransform(1,0,0,1,0,0),r.drawImage(c,0,0),this.stashOutput){this.stashOutput=!1;const[t,e,i,s]=this.getCellCoverage(l.getImageData(0,0,c.width,c.height));if(this.stashedImageData=l.getImageData(t,e,i,s),this.stashOutputAsAsset){const t=this.stashOutputAsAsset.substring?this.stashOutputAsAsset:`${this.name}-image`;if(this.stashOutputAsAsset=!1,c.width=i,c.height=s,l.putImageData(this.stashedImageData,0,0),this.stashedImage)this.stashedImage.src=c.toDataURL();else{const e=this.stashedImage=document.createElement(es);e.id=t,e.onload=function(){ql.appendChild(e),Su(`#${t}`)},e.src=c.toDataURL()}}}r.restore(),this.currentHost=i,this.noCanvasEngineUpdates=e}Qh(a)},t.getCellCoverage=function(t){const{width:e,height:i,data:s}=t;let n,r,o,a,c=0,l=0,h=e,u=i,d=3;for(o=0,a=e*i;o<a;o++)s[d]&&(r=V(o/e),n=o-r*e,h>n&&(h=n),c<n&&(c=n),u>r&&(u=r),l<r&&(l=r)),d+=4;return h<c&&u<l?[h,u,c-h,l-u]:[0,0,e,i]},t.simpleStamp=function(t,e){t&&Li.includes(t.type)&&(this.currentHost=t,e&&this.set(e),this.prepareStamp(),this.regularStamp())},t.draw=function(t){t.stroke(this.pathObject)},t.fill=function(t){t.fill(this.pathObject,this.winding)},t.drawAndFill=function(t){const e=this.pathObject;t.stroke(e),t.fill(e,this.winding),this.currentHost.clearShadow(),t.stroke(e),t.fill(e,this.winding)},t.fillAndDraw=function(t){const e=this.pathObject;t.fill(e,this.winding),t.stroke(e),this.currentHost.clearShadow(),t.fill(e,this.winding),t.stroke(e)},t.drawThenFill=function(t){const e=this.pathObject;t.stroke(e),t.fill(e,this.winding)},t.fillThenDraw=function(t){const e=this.pathObject;t.fill(e,this.winding),t.stroke(e)},t.clip=function(t){t.clip(this.pathObject,this.winding)},t.clear=function(t){const e=t.globalCompositeOperation;t.globalCompositeOperation=ti,t.fill(this.pathObject,this.winding),t.globalCompositeOperation=e},t.none=function(){}}I.Action=Action;const Block=function(t=qa){return this.entityInit(t),t.dimensions||(t.width||(this.currentDimensions[0]=this.dimensions[0]=10),t.height||(this.currentDimensions[1]=this.dimensions[1]=10)),this},ef=Block.prototype=yc();ef.type="Block",ef.lib=gi,ef.isArtefact=!0,ef.isAsset=!1,ml(ef),tf(ef),ef.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject){const t=this.pathObject=new Path2D,e=this.currentStampHandlePosition,i=this.currentScale,s=this.currentDimensions,n=-e[0]*i,r=-e[1]*i,o=s[0]*i,a=s[1]*i;t.rect(n,r,o,a)}};const sf=function(t){return!!t&&new Block(t)};I.Block=Block;const nf=[],rf={x:0,y:0},of=function(t,e,i){t.x=e,t.y=i},af=function(t,e){let i=M(t.y,t.x);i+=.01745329251*e;const s=ft(t.x*t.x+t.y*t.y);t.x=s*G(i),t.y=s*dt(i)},cf=function(t,e,i){let s,n,r=[],o=[],a=0;const c=[],l=[];if(t==As){const[t,e,c,l]=i;s=c-t,n=l-e,a=ft(s*s+n*n),r=r.concat([t,c]),o=o.concat([e,l])}else if(t==oe||t==Tn){const h=t==oe?Ti:Bi;let u,d,f,p,m,g,y=!1,b=.25,S=0;for(;!y;){for(r.length=0,o.length=0,S=0,c.length=0,l.length=0,g=lf[h](0,...i),u=g.x,d=g.y,r.push(u),o.push(d),m=b;m<=1;m+=b)g=lf[h](m,...i),({x:f,y:p}=g),r.push(f),o.push(p),s=f-u,n=p-d,S+=ft(s*s+n*n),u=f,d=p,c.push(S),l.push(m);S<a+e&&(y=!0),a=S,b/=2,b<.004&&(y=!0)}}return{length:a,xPoints:r,yPoints:o,positions:l,progression:c}},lf={[Ti]:function(t,e,i,s,n,r,o,a,c){const l=1-t;return{x:ot(l,3)*e+3*t*ot(l,2)*s+3*t*t*l*r+t*t*t*a,y:ot(l,3)*i+3*t*ot(l,2)*n+3*t*t*l*o+t*t*t*c}},[Bi]:function(t,e,i,s,n,r,o){const a=1-t;return{x:a*a*e+2*a*t*s+t*t*r,y:a*a*i+2*a*t*n+t*t*o}}};function hf(t=qa){tf(t);const e={species:Na,useAsPath:!1,precision:10,constantPathSpeed:!1,pathDefinition:Na,showBoundingBox:!1,boundingBoxColor:ji,minimumBoundingBoxDimensions:20};t.defs=cc(t.defs,e),t.packetExclusions=hc(t.packetExclusions,["dimensions","pathed"]),t.finalizePacketOut=function(t,e){const i=it(this.state.saveAsPacket(e))[3];return t=cc(t,i),t=this.handlePacketAnchor(t,e)};const i=t.setters,s=t.deltaSetters;i.species=function(t){dc(t)&&(this.species=t,this.updateDirty())},i.precision=function(t){dc(t)&&t.toFixed&&(this.precision=t,this.updateDirty())},i.constantPathSpeed=function(t){this.constantPathSpeed=t,this.updateDirty()},i.width=Ua,i.height=Ua,i.dimensions=Ua,s.width=Ua,s.height=Ua,s.dimensions=Ua,i.pathDefinition=function(t){t.substring&&(this.pathDefinition=t),this.pathCalculatedOnce=!1,this.dirtyPathObject=!0},t.updateDirty=function(){this.dirtySpecies=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},t.shapeInit=function(t){this.entityInit(t),this.units=[],this.unitLengths=[],this.unitPartials=[],this.pathed=[],this.localBox=[]},t.positionPointOnPath=function(t){const e=td(t);e.vectorSubtract(this.currentStampHandlePosition),this.flipReverse&&(e.x=-e.x),this.flipUpend&&(e.y=-e.y),e.rotate(this.roll),e.vectorAdd(this.currentStampPosition);const i={x:e.x,y:e.y};return ed(e),i},t.getBezierXY=function(t,e,i,s,n,r,o,a,c){const l=1-t;return{x:ot(l,3)*e+3*t*ot(l,2)*s+3*t*t*l*r+t*t*t*a,y:ot(l,3)*i+3*t*ot(l,2)*n+3*t*t*l*o+t*t*t*c}},t.getQuadraticXY=function(t,e,i,s,n,r,o){const a=1-t;return{x:a*a*e+2*a*t*s+t*t*r,y:a*a*i+2*a*t*n+t*t*o}},t.getLinearXY=function(t,e,i,s,n){return{x:e+(s-e)*t,y:i+(n-i)*t}},t.getBezierAngle=function(t,e,i,s,n,r,o,a,c){const l=1-t,h=ot(l,2)*(s-e)+2*t*l*(r-s)+t*t*(a-r),u=ot(l,2)*(n-i)+2*t*l*(o-n)+t*t*(c-o);return(-M(h,u)+rt)/at},t.getQuadraticAngle=function(t,e,i,s,n,r,o){const a=1-t;return(-M(2*a*(s-e)+2*t*(r-s),2*a*(n-i)+2*t*(o-n))+rt)/at},t.getLinearAngle=function(t,e,i,s,n){return(-M(s-e,n-i)+rt)/at},t.getConstantPosition=function(t){if(!t||!t.toFixed||isNaN(t))return 0;if(t>=1)return.9999;const e=this.unitPositions;if(e&&e.length){const i=this.length,s=this.unitProgression,n=t*i;let r,o,a,c,l,h,u,d=-1;for(let t=0,e=s.length;t<e;t++)if(n<=s[t]){d=t-1;break}return d<0?(r=s[0],c=n/r*e[0]):(r=s[d],o=d?s[d-1]:0,a=r-o,l=e[d],h=e[d+1],u=h-l,c=l+(n-r)/a*u),c}return t},t.buildPathPositionObject=function(t,e){if(t){const[i,...s]=t;let n,r;switch(i){case As:n=this.positionPointOnPath(this.getLinearXY(e,...s)),r=this.getLinearAngle(e,...s);break;case Tn:n=this.positionPointOnPath(this.getQuadraticXY(e,...s)),r=this.getQuadraticAngle(e,...s);break;case oe:n=this.positionPointOnPath(this.getBezierXY(e,...s)),r=this.getBezierAngle(e,...s)}let o=0;return this.flipReverse&&o++,this.flipUpend&&o++,1===o&&(r=-r),r+=this.roll,n.angle=r,n}return!1},t.getPathPositionData=function(t,e=!1){if(this.useAsPath&&dc(t)&&t.toFixed){const i=this.unitPartials;let s,n,r,o,a,c,l=0,h=t%1;for(0===t?h=0:1===t&&(h=.9999),e&&(h=this.getConstantPosition(h)),r=0,o=i.length;r<o;r++)if(c=this.units[r][0],c!=Gs&&c!=Te&&c!=ma){if(s=i[r],h<=s){a=this.units[r],n=(h-l)/(s-l);break}l=s}return this.buildPathPositionObject(a,n)}return!1},t.prepareStamp=function(){this.dirtyHost&&(this.dirtyHost=!1),(this.dirtyScale||this.dirtySpecies||this.dirtyDimensions||this.dirtyStart||this.dirtyHandle)&&(this.dirtyPathObject=!0,(this.dirtyScale||this.dirtySpecies)&&(this.pathCalculatedOnce=!1)),(this.isBeingDragged||this.lockTo.includes($s)||this.lockTo.includes(hn))&&(this.dirtyStampPositions=!0),this.dirtyScale&&this.cleanScale(),this.dirtyStart&&this.cleanStart(),this.dirtyOffset&&this.cleanOffset(),this.dirtyRotation&&this.cleanRotation(),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtySpecies&&this.cleanSpecies(),this.dirtyPathObject&&this.cleanPathObject(),this.dirtyPositionSubscribers&&this.updatePositionSubscribers(),this.prepareStampTabsHelper()},t.cleanDimensions=function(){this.dirtyDimensions=!1,this.dirtyStart=!0,this.dirtyHandle=!0,this.dirtyOffset=!0},t.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject){this.dirtyDimensions&&(this.cleanSpecies(),this.pathCalculatedOnce=!1),this.calculateLocalPath(this.pathDefinition),this.dirtyDimensions&&this.cleanDimensions(),this.dirtyHandle&&this.cleanHandle(),this.dirtyStampHandlePositions&&this.cleanStampHandlePositions();const t=this.currentStampHandlePosition;this.pathObject=new Path2D(`m${-t[0]},${-t[1]}${this.localPath}`)}},t.calculateLocalPath=function(t,e){let i;if(this.pathCalculatedOnce||(i=((t,e,i,s,n,r)=>{const o=Kc(),a=Kc(),c=Kc(),l=Kc(),h=r.units,u=r.unitLengths,d=r.unitPartials,f=r.unitProgression,p=r.unitPositions,m=t.match(/([A-Za-z][0-9. ,-]*)/g),g=/(-?[0-9.]+\b)/g;let y,b,S,k,A,v=Na,P=Na,C=0,w=0,x=0,O=0,D=0,R=0,F=0;const H=t=>{a.push({c:v.toLowerCase(),p:t||null,x:O,y:D,cx:w,cy:x,rx:R,ry:F}),s||(c.push(w),l.push(x)),O=w,D=x};for(y=0,b=m.length;y<b;y++)if(v=m[y][0],o.length=0,A=m[y].match(g),A&&o.push(...A),o.length){for(S=0,k=o.length;S<k;S++)o[S]=parseFloat(o[S]);switch(0===y?"M"===v&&(O=o[0]*e-i.x,D=o[1]*e-i.y,v="m"):(O=w,D=x),v){case"H":for(S=0,k=o.length;S<k;S++)o[S]=o[S]*e-O,w+=o[S],R=F=0,H(o.slice(S,S+1));break;case"V":for(S=0,k=o.length;S<k;S++)o[S]=o[S]*e-D,x+=o[S],R=F=0,H(o.slice(S,S+1));break;case"M":for(S=0,k=o.length;S<k;S+=2)o[S]=o[S]*e-O,o[S+1]=o[S+1]*e-D,w+=o[S],x+=o[S+1],R=F=0,H(o.slice(S,S+2));break;case"L":case"T":for(S=0,k=o.length;S<k;S+=2)o[S]=o[S]*e-O,o[S+1]=o[S+1]*e-D,w+=o[S],x+=o[S+1],"T"===v?(R=o[S]+O,F=o[S+1]+D):R=F=0,H(o.slice(S,S+2));break;case"Q":case"S":for(S=0,k=o.length;S<k;S+=4)o[S]=o[S]*e-O,o[S+1]=o[S+1]*e-D,o[S+2]=o[S+2]*e-O,o[S+3]=o[S+3]*e-D,w+=o[S+2],x+=o[S+3],R=o[S]+O,F=o[S+1]+D,H(o.slice(S,S+4));break;case"C":for(S=0,k=o.length;S<k;S+=6)o[S]=o[S]*e-O,o[S+1]=o[S+1]*e-D,o[S+2]=o[S+2]*e-O,o[S+3]=o[S+3]*e-D,o[S+4]=o[S+4]*e-O,o[S+5]=o[S+5]*e-D,w+=o[S+4],x+=o[S+5],R=o[S+2]+O,F=o[S+3]+D,H(o.slice(S,S+6));break;case"A":for(S=0,k=o.length;S<k;S+=7)o[S+5]=o[S+5]*e-O,o[S+6]=o[S+6]*e-D,w+=o[S+5],x+=o[S+6],R=F=0,H(o.slice(S,S+7));break;case"h":for(S=0,k=o.length;S<k;S++)o[S]*=e,w+=o[S],R=F=0,H(o.slice(S,S+1));break;case"v":for(S=0,k=o.length;S<k;S++)o[S]*=e,x+=o[S],R=F=0,H(o.slice(S,S+1));break;case"m":case"l":case"t":for(S=0,k=o.length;S<k;S+=2)o[S]*=e,o[S+1]*=e,w+=o[S],x+=o[S+1],"t"===v?(R=o[S]+O,F=o[S+1]+D):R=F=0,H(o.slice(S,S+2));break;case"q":case"s":for(S=0,k=o.length;S<k;S+=4)o[S]*=e,o[S+1]*=e,o[S+2]*=e,o[S+3]*=e,w+=o[S+2],x+=o[S+3],R=o[S]+O,F=o[S+1]+D,H(o.slice(S,S+4));break;case"c":for(S=0,k=o.length;S<k;S+=6)o[S]*=e,o[S+1]*=e,o[S+2]*=e,o[S+3]*=e,o[S+4]*=e,o[S+5]*=e,w+=o[S+4],x+=o[S+5],R=o[S+2]+O,F=o[S+3]+D,H(o.slice(S,S+6));break;case"a":for(S=0,k=o.length;S<k;S+=7)o[S]*=e,o[S+1]*=e,o[S+5]*=e,o[S+6]*=e,w+=o[S+5],x+=o[S+6],R=F=0,H(o.slice(S,S+7))}}else R=F=0,H();for(y=0,b=a.length;y<b;y++){const t=a[y],e=t.p;if(e){for(S=0,k=e.length;S<k;S++)e[S]=e[S].toFixed(1);for(P+=`${t.c}${t.p.join()}`,S=0,k=e.length;S<k;S++)e[S]=parseFloat(e[S])}else P+=`${t.c}`}if(r.localPath=P,s){const t=rf;let e,i,s,r,o,m,g,S;for(y=0,b=a.length;y<b;y++)if(e=a[y],i=y>0&&a[y-1],({c:s,p:r,x:o,y:m,cx:g,cy:S}=e),r)switch(s){case"h":h[y]=[As,o,m,r[0]+o,m];break;case"v":h[y]=[As,o,m,o,r[0]+m];break;case"m":h[y]=[Gs,o,m];break;case"l":h[y]=[As,o,m,r[0]+o,r[1]+m];break;case"t":i&&(i.rx||i.ry)?(of(t,i.rx-g,i.ry-S),af(t,180),h[y]=[Tn,o,m,t.x+g,t.y+S,r[0]+o,r[1]+m]):h[y]=[Tn,o,m,o,m,r[0]+o,r[1]+m];break;case"q":h[y]=[Tn,o,m,r[0]+o,r[1]+m,r[2]+o,r[3]+m];break;case"s":i&&(i.rx||i.ry)?(of(t,i.rx-g,i.ry-S),af(t,180),h[y]=[oe,o,m,t.x+g,t.y+S,r[0]+o,r[1]+m,r[2]+o,r[3]+m]):h[y]=[oe,o,m,o,m,r[0]+o,r[1]+m,r[2]+o,r[3]+m];break;case"c":h[y]=[oe,o,m,r[0]+o,r[1]+m,r[2]+o,r[3]+m,r[4]+o,r[5]+m];break;case"a":h[y]=[As,o,m,r[5]+o,r[6]+m];break;case"z":isNaN(o)&&(o=0),isNaN(m)&&(m=0),h[y]=[Te,o,m];break;default:isNaN(o)&&(o=0),isNaN(m)&&(m=0),h[y]=[ma,o,m]}else h[y]=[`no-points-${s}`,o,m];for(y=0,b=h.length;y<b;y++){const[t,...e]=h[y];let i;switch(t){case As:case Tn:case oe:i=cf(t,n,e),u[y]=i.length,c.push(...i.xPoints),l.push(...i.yPoints),f.push(i.progression),p.push(i.positions);break;default:u[y]=0}}C=u.reduce(((t,e)=>t+e),0);let k=0;for(y=0,b=u.length;y<b;y++)k+=u[y]/C,d[y]=parseFloat(k.toFixed(6))}return r.length=parseFloat(C.toFixed(1)),r.maxX=J(...c),r.maxY=J(...l),r.minX=tt(...c),r.minY=tt(...l),r.xRange.push(...c),r.yRange.push(...l),qc(o),qc(a),qc(c),qc(l),r})(t,this.currentScale,this.currentStart,this.useAsPath,this.precision,(nf.length||nf.push(ht({localPath:null,length:0,maxX:0,maxY:0,minX:0,minY:0,unitLengths:[],unitPartials:[],units:[],unitPositions:[],unitProgression:[],xRange:[],yRange:[]})),nf.shift())),this.pathCalculatedOnce=!0),i){this.localPath=i.localPath,this.length=i.length;const t=i.maxX,n=i.maxY,r=i.minX,o=i.minY,a=this.dimensions,c=this.currentDimensions,l=this.localBox;if(a[0]=parseFloat((t-r).toFixed(1)),a[1]=parseFloat((n-o).toFixed(1)),a[0]===c[0]&&a[1]===c[1]||(c[0]=a[0],c[1]=a[1],this.dirtyHandle=!0),l.length=0,l.push(parseFloat(r.toFixed(1)),parseFloat(o.toFixed(1)),a[0],a[1]),this.useAsPath){const{units:t,unitLengths:e,unitPartials:s,unitProgression:n,unitPositions:r}=i,o=Kc(),a=Kc();let c,l,h,u,d,f,p,m,g,y,b=0;for(d=0,f=e.length;d<f;d++)if(b+=e[d],h=n[d],h)for(l=s[d],c=s[d+1]-l,u=r[d],p=0,m=h.length;p<m;p++)g=b+h[p],o.push(parseFloat(g.toFixed(1))),y=l+u[p]*c,a.push(parseFloat(y.toFixed(6)));this.units.length=0,this.units.push(...t),this.unitLengths.length=0,this.unitLengths.push(...e),this.unitPartials.length=0,this.unitPartials.push(...s),this.unitProgression||(this.unitProgression=[]),this.unitProgression.length=0,this.unitProgression.push(...o),this.unitPositions||(this.unitPositions=[]),this.unitPositions.length=0,this.unitPositions.push(...a),qc(o),qc(a)}(s=i).localPath=null,s.length=0,s.units.length=0,s.maxX=0,s.maxY=0,s.minX=0,s.minY=0,s.unitLengths.length=0,s.unitPartials.length=0,s.unitPositions.length=0,s.unitProgression.length=0,s.xRange.length=0,s.yRange.length=0,nf.push(s),e||this.calculateLocalPathAdditionalActions()}var s},t.calculateLocalPathAdditionalActions=Ua,t.updatePathSubscribers=function(){let t;this.pathed.forEach((e=>{t=o[e],t&&(t.currentPathData=!1,t.dirtyStart=!0,t.addPathHandle&&(t.dirtyHandle=!0),t.addPathOffset&&(t.dirtyOffset=!0),t.addPathRotation&&(t.dirtyRotation=!0),t.type==Io?t.dirtyPins=!0:t.type!=xo&&t.type!=To&&t.type!=go||t.dirtyPins.push(this.name))}),this)},t.draw=function(t){t.stroke(this.pathObject),this.showBoundingBox&&this.drawBoundingBox(t)},t.fill=function(t){t.fill(this.pathObject,this.winding),this.showBoundingBox&&this.drawBoundingBox(t)},t.drawAndFill=function(t){const e=this.pathObject;t.stroke(e),this.currentHost.clearShadow(),t.fill(e,this.winding),this.showBoundingBox&&this.drawBoundingBox(t)},t.fillAndDraw=function(t){const e=this.pathObject;t.stroke(e),this.currentHost.clearShadow(),t.fill(e,this.winding),t.stroke(e),this.showBoundingBox&&this.drawBoundingBox(t)},t.drawThenFill=function(t){const e=this.pathObject;t.stroke(e),t.fill(e,this.winding),this.showBoundingBox&&this.drawBoundingBox(t)},t.fillThenDraw=function(t){const e=this.pathObject;t.fill(e,this.winding),t.stroke(e),this.showBoundingBox&&this.drawBoundingBox(t)},t.clear=function(t){const e=t.globalCompositeOperation;t.globalCompositeOperation=ti,t.fill(this.pathObject,this.winding),t.globalCompositeOperation=e,this.showBoundingBox&&this.drawBoundingBox(t)},t.drawBoundingBox=function(t){t.save(),t.strokeStyle=this.boundingBoxColor,t.lineWidth=1,t.globalCompositeOperation=_r,t.globalAlpha=1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.strokeRect(...this.getBoundingBox()),t.restore()},t.getBoundingBox=function(){const t=this.minimumBoundingBoxDimensions;let[e,i,s,n]=this.localBox;const[r,o]=this.currentStampHandlePosition,[a,c]=this.currentStampPosition;return s<t&&(s=t),n<t&&(n=t),[V(e-r),V(i-o),X(s),X(n),a,c]}}const uf=t=>t.substring?t.charAt(0).toUpperCase()+t.slice(1):Na;function df(t=qa){const e={end:null,endPivot:Na,endPivotCorner:Na,addEndPivotHandle:!1,addEndPivotOffset:!1,endPath:Na,endPathPosition:0,addEndPathHandle:!1,addEndPathOffset:!0,endParticle:Na,endLockTo:Na,useStartAsControlPoint:!1};t.defs=cc(t.defs,e),t.packetExclusions=hc(t.packetExclusions,["controlledLineOffset"]),t.packetCoordinates=hc(t.packetCoordinates,["end"]),t.packetObjects=hc(t.packetObjects,["endPivot","endPath"]),t.factoryKill=function(){bt(o).forEach((t=>{t.name!==this.name&&(t.startControlPivot&&t.startControlPivot.name==this.name&&t.set({startControlPivot:!1}),t.controlPivot&&t.controlPivot.name==this.name&&t.set({controlPivot:!1}),t.endControlPivot&&t.endControlPivot.name==this.name&&t.set({endControlPivot:!1}),t.endPivot&&t.endPivot.name==this.name&&t.set({endPivot:!1}),t.startControlPath&&t.startControlPath.name==this.name&&t.set({startControlPath:!1}),t.controlPath&&t.controlPath.name==this.name&&t.set({controlPath:!1}),t.endControlPath&&t.endControlPath.name==this.name&&t.set({endControlPath:!1}),t.endPath&&t.endPath.name==this.name&&t.set({endPath:!1}))}))};const i=t.getters,s=t.setters,n=t.deltaSetters;s.useStartAsControlPoint=function(t){if(this.useStartAsControlPoint=t,!t){const t=this.controlledLineOffset;t[0]=0,t[1]=0}this.updateDirty()},s.endPivot=function(t){this.setControlHelper(t,"endPivot",fi),this.updateDirty(),this.dirtyEnd=!0},s.endParticle=function(t){this.setControlHelper(t,"endParticle",fi),this.updateDirty(),this.dirtyEnd=!0},s.endPath=function(t){this.setControlHelper(t,"endPath",fi),this.updateDirty(),this.dirtyEnd=!0},s.endPathPosition=function(t){this.endPathPosition=t,this.dirtyEnd=!0,this.currentEndPathData=!1,this.dirtyFilterIdentifier=!0},n.endPathPosition=function(t){this.endPathPosition+=t,this.dirtyEnd=!0,this.currentEndPathData=!1,this.dirtyFilterIdentifier=!0},i.endPositionX=function(){return this.currentEnd[0]},i.endPositionY=function(){return this.currentEnd[1]},i.endPosition=function(){return[].concat(this.currentEnd)},s.endX=function(t){null!=t&&(this.end[0]=t,this.updateDirty(),this.dirtyEnd=!0,this.currentEndPathData=!1)},s.endY=function(t){null!=t&&(this.end[1]=t,this.updateDirty(),this.dirtyEnd=!0,this.currentEndPathData=!1)},s.end=function(t,e){this.setCoordinateHelper(fi,t,e),this.updateDirty(),this.dirtyEnd=!0,this.currentEndPathData=!1},n.endX=function(t){const e=this.end;e[0]=Ga(e[0],t),this.updateDirty(),this.dirtyEnd=!0,this.currentEndPathData=!1},n.endY=function(t){const e=this.end;e[1]=Ga(e[1],t),this.updateDirty(),this.dirtyEnd=!0,this.currentEndPathData=!1},n.end=function(t,e){this.setDeltaCoordinateHelper(fi,t,e),this.updateDirty(),this.dirtyEnd=!0,this.currentEndPathData=!1},s.endLockTo=function(t){this.endLockTo=t,this.updateDirty(),this.dirtyEndLock=!0,this.currentEndPathData=!1},t.curveInit=function(){this.end=su(),this.currentEnd=su(),this.endLockTo=Xe,this.dirtyEnd=!0,this.dirtyPins=[],this.controlledLineOffset=su()},t.setControlHelper=function(t,e,i){if(ec(t)&&!t)this[e]=null,i==Jr?this.dirtyStartControlLock=!0:i==Ne?this.dirtyControlLock=!0:i==pi?this.dirtyEndControlLock=!0:this.dirtyEndLock=!0;else if(t){const s=this[e];let n=t.substring?o[t]:t;e.includes("Pivot")?n&&n.isArtefact&&(s&&s.isArtefact&&uc(s.pivoted,this.name),hc(n.pivoted,this.name),this[e]=n):e.includes("Path")?n&&n.isArtefact&&(s&&s.isArtefact&&uc(s.pathed,this.name),hc(n.pathed,this.name),this[e]=n):e.includes(Ro)&&(n=t.substring?b[t]:t,n||(this.updateDirty(),i==Jr?this.dirtyStartControl=!0:i==Ne?this.dirtyControl=!0:i==pi?this.dirtyEndControl=!0:this.dirtyEnd=!0,this[e]=t))}},t.buildPathPositionObject=function(t,e){if(t){const[i,...s]=t;let n,r;switch(i){case As:n=this.positionPointOnPath(this.getLinearXY(e,...s)),r=this.getLinearAngle(e,...s);break;case Tn:n=this.positionPointOnPath(this.getQuadraticXY(e,...s)),r=this.getQuadraticAngle(e,...s);break;case oe:n=this.positionPointOnPath(this.getBezierXY(e,...s)),r=this.getBezierAngle(e,...s)}let o=0;this.flipReverse&&o++,this.flipUpend&&o++,1===o&&(r=-r),r+=this.roll;const a=this.controlledLineOffset;return n.x+=a[0],n.y+=a[1],n.angle=r,n}return!1},t.prepareStamp=function(){this.dirtyHost&&(this.dirtyHost=!1),this.dirtyPins.length&&this.preparePinsForStamp(),this.dirtyLock&&this.cleanLock(),this.dirtyStartControlLock&&this.cleanControlLock(Jr),this.dirtyEndControlLock&&this.cleanControlLock(pi),this.dirtyControlLock&&this.cleanControlLock(Ne),this.dirtyEndLock&&this.cleanControlLock(fi),(this.dirtyScale||this.dirtySpecies||this.dirtyDimensions||this.dirtyStart||this.dirtyStartControl||this.dirtyEndControl||this.dirtyControl||this.dirtyEnd||this.dirtyHandle)&&(this.dirtyPathObject=!0,this.useStartAsControlPoint&&this.dirtyStart&&(this.dirtySpecies=!0,this.pathCalculatedOnce=!1),(this.dirtyScale||this.dirtySpecies||this.dirtyStartControl||this.dirtyEndControl||this.dirtyControl||this.dirtyEnd)&&(this.pathCalculatedOnce=!1)),(this.isBeingDragged||this.lockTo.includes($s)||this.lockTo.includes(hn))&&(this.dirtyStampPositions=!0,this.useStartAsControlPoint&&(this.dirtySpecies=!0,this.dirtyPathObject=!0,this.pathCalculatedOnce=!1)),this.dirtyScale&&this.cleanScale(),this.dirtyStart&&this.cleanStart(),(this.dirtyStartControl||this.startControlLockTo==hn)&&this.cleanControl(Jr),(this.dirtyEndControl||this.endControlLockTo==hn)&&this.cleanControl(pi),(this.dirtyControl||this.controlLockTo==hn)&&this.cleanControl(Ne),(this.dirtyEnd||this.endLockTo==hn)&&this.cleanControl(fi),this.dirtyOffset&&this.cleanOffset(),this.dirtyRotation&&this.cleanRotation(),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtySpecies&&this.cleanSpecies(),this.dirtyPathObject&&this.cleanPathObject(),this.dirtyPositionSubscribers&&(this.updatePositionSubscribers(),this.updateControlPathSubscribers()),this.prepareStampTabsHelper()},t.cleanControlLock=function(t){const e=uf(t);this[`dirty${e}Lock`]=!1,this[`dirty${e}`]=!0},t.cleanControl=function(t){const e=uf(t);this[`dirty${e}`]=!1;let i,s,n=this[`${t}Pivot`],r=this[`${t}Path`],a=this[`${t}Particle`];n&&n.substring&&(i=o[n],i&&(n=i)),r&&r.substring&&(i=o[r],i&&(r=i)),a&&a.substring&&(i=b[a],i&&(a=i));let c,l,h,u,d,f,p,m=this[`${t}LockTo`];const g=this[t],y=this[`current${e}`];switch((m!=Sn||n&&!n.substring)&&(m!=un||r&&!r.substring)&&(m!=hn||a&&!a.substring)||(m=Xe),m){case Sn:this.pivotCorner&&n.getCornerCoordinate?[c,l]=n.getCornerCoordinate(this[`${t}PivotCorner`]):[c,l]=n.currentStampPosition,this.addPivotOffset||([h,u]=n.currentOffset,c-=h,l-=u);break;case un:s=this.getControlPathData(r,t,e),c=s.x,l=s.y,this.addPathOffset||(c-=r.currentOffset[0],l-=r.currentOffset[1]);break;case hn:c=a.position.x,l=a.position.y,this.pathCalculatedOnce=!1;break;case $s:d=this.getHere(),c=d.x||0,l=d.y||0;break;default:c=l=0,f=this.getHost(),f&&(p=f.currentDimensions,p&&(this.cleanPosition(y,g,p),[c,l]=y))}y[0]=c,y[1]=l,this.dirtySpecies=!0,this.dirtyPathObject=!0,this.dirtyPositionSubscribers=!0},t.getControlPathData=function(t,e,i){const s=this[`current${i}PathData`];if(s)return s;let n=this[`${e}PathPosition`];const r=n,o=t.getPathPositionData(n);if(n<0&&(n+=1),n>1&&(n%=1),n=parseFloat(n.toFixed(6)),n!=r&&(this[`${e}PathPosition`]=n),o)return this[`current${i}PathData`]=o,o;{const t=this.getHost();if(t){const s=t.currentDimensions;if(s){const t=this[`current${i}`];return this.cleanPosition(t,this[e],s),{x:t[0],y:t[1]}}}return{x:0,y:0}}},t.updateControlPathSubscribers=function(){let t;[].concat(this.endSubscriber,this.endControlSubscriber,this.controlSubscriber,this.startControlSubscriber).forEach((e=>{t=o[e],t&&(t.type!=xo&&t.type!=To&&t.type!=go||(t.type==To?(t.dirtyControl=!0,t.currentControlPathData=!1):t.type==go&&(t.dirtyStartControl=!0,t.dirtyEndControl=!0,t.currentStartControlPathData=!1,t.currentEndControlPathData=!1),t.currentEndPathData=!1,t.dirtyEnd=!0),t.currentPathData=!1,t.dirtyStart=!0)}))}}const Bezier=function(t=qa){return this.startControl=su(),this.endControl=su(),this.currentStartControl=su(),this.currentEndControl=su(),this.startControlLockTo=Xe,this.endControlLockTo=Xe,this.curveInit(t),this.shapeInit(t),this.dirtyStartControl=!0,this.dirtyEndControl=!0,this},ff=Bezier.prototype=yc();ff.type=go,ff.lib=gi,ff.isArtefact=!0,ff.isAsset=!1,ml(ff),hf(ff),df(ff);const pf={startControl:null,startControlPivot:Na,startControlPivotCorner:Na,addStartControlPivotHandle:!1,addStartControlPivotOffset:!1,startControlPath:Na,startControlPathPosition:0,addStartControlPathHandle:!1,addStartControlPathOffset:!0,startControlParticle:Na,endControl:null,endControlPivot:Na,endControlPivotCorner:Na,addEndControlPivotHandle:!1,addEndControlPivotOffset:!1,endControlPath:Na,endControlPathPosition:0,addEndControlPathHandle:!1,addEndControlPathOffset:!0,endControlParticle:Na,startControlLockTo:Na,endControlLockTo:Na};ff.defs=cc(ff.defs,pf),ff.packetCoordinates=hc(ff.packetCoordinates,["startControl","endControl"]),ff.packetObjects=hc(ff.packetObjects,["startControlPivot","startControlParticle","startControlPath","endControlPivot","endControlParticle","endControlPath"]);const mf=ff.getters,gf=ff.setters,yf=ff.deltaSetters;gf.endControlPivot=function(t){this.setControlHelper(t,"endControlPivot",pi),this.updateDirty(),this.dirtyEndControl=!0},gf.endControlParticle=function(t){this.setControlHelper(t,"endControlParticle",pi),this.updateDirty(),this.dirtyEndControl=!0},gf.endControlPath=function(t){this.setControlHelper(t,"endControlPath",pi),this.updateDirty(),this.dirtyEndControl=!0,this.currentEndControlPathData=!1},gf.endControlPathPosition=function(t){this.endControlPathPosition=t,this.dirtyEndControl=!0,this.currentEndControlPathData=!1,this.dirtyFilterIdentifier=!0},yf.endControlPathPosition=function(t){this.endControlPathPosition+=t,this.dirtyEndControl=!0,this.currentEndControlPathData=!1,this.dirtyFilterIdentifier=!0},gf.startControlPivot=function(t){this.setControlHelper(t,"startControlPivot",Jr),this.updateDirty(),this.dirtyStartControl=!0},gf.startControlParticle=function(t){this.setControlHelper(t,"startControlParticle",Jr),this.updateDirty(),this.dirtyStartControl=!0},gf.startControlPath=function(t){this.setControlHelper(t,"startControlPath",Jr),this.updateDirty(),this.dirtyStartControl=!0,this.currentStartControlPathData=!1},gf.startControlPathPosition=function(t){this.startControlPathPosition=t,this.dirtyStartControl=!0,this.currentStartControlPathData=!1,this.dirtyFilterIdentifier=!0},yf.startControlPathPosition=function(t){this.startControlPathPosition+=t,this.dirtyStartControl=!0,this.currentStartControlPathData=!1,this.dirtyFilterIdentifier=!0},mf.startControlPositionX=function(){return this.currentStartControl[0]},mf.startControlPositionY=function(){return this.currentStartControl[1]},mf.startControlPosition=function(){return[].concat(this.currentStartControl)},gf.startControlX=function(t){null!=t&&(this.startControl[0]=t,this.updateDirty(),this.dirtyStartControl=!0,this.currentStartControlPathData=!1)},gf.startControlY=function(t){null!=t&&(this.startControl[1]=t,this.updateDirty(),this.dirtyStartControl=!0,this.currentStartControlPathData=!1)},gf.startControl=function(t,e){this.setCoordinateHelper(Jr,t,e),this.updateDirty(),this.dirtyStartControl=!0,this.currentStartControlPathData=!1},yf.startControlX=function(t){const e=this.startControl;e[0]=Ga(e[0],t),this.updateDirty(),this.dirtyStartControl=!0,this.currentStartControlPathData=!1},yf.startControlY=function(t){const e=this.startControl;e[1]=Ga(e[1],t),this.updateDirty(),this.dirtyStartControl=!0,this.currentStartControlPathData=!1},yf.startControl=function(t,e){this.setDeltaCoordinateHelper(Jr,t,e),this.updateDirty(),this.dirtyStartControl=!0,this.currentStartControlPathData=!1},mf.endControlPositionX=function(){return this.currentEndControl[0]},mf.endControlPositionY=function(){return this.currentEndControl[1]},mf.endControlPosition=function(){return[].concat(this.currentEndControl)},gf.endControlX=function(t){null!=t&&(this.endControl[0]=t,this.updateDirty(),this.dirtyEndControl=!0,this.currentEndControlPathData=!1)},gf.endControlY=function(t){null!=t&&(this.endControl[1]=t,this.updateDirty(),this.dirtyEndControl=!0,this.currentEndControlPathData=!1)},gf.endControl=function(t,e){this.setCoordinateHelper(pi,t,e),this.updateDirty(),this.dirtyEndControl=!0,this.currentEndControlPathData=!1},yf.endControlX=function(t){const e=this.endControl;e[0]=Ga(e[0],t),this.updateDirty(),this.dirtyEndControl=!0,this.currentEndControlPathData=!1},yf.endControlY=function(t){const e=this.endControl;e[1]=Ga(e[1],t),this.updateDirty(),this.dirtyEndControl=!0,this.currentEndControlPathData=!1},yf.endControl=function(t,e){this.setDeltaCoordinateHelper(pi,t,e),this.updateDirty(),this.dirtyEndControl=!0,this.currentEndControlPathData=!1},gf.startControlLockTo=function(t){this.startControlLockTo=t,this.updateDirty(),this.dirtyStartControlLock=!0},gf.endControlLockTo=function(t){this.endControlLockTo=t,this.updateDirty(),this.dirtyEndControlLock=!0,this.currentEndControlPathData=!1},ff.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeBezierPath()},ff.makeBezierPath=function(){const[t,e]=this.currentStampPosition,[i,s]=this.currentStartControl,[n,r]=this.currentEndControl,[o,a]=this.currentEnd;return`m0,0c${(i-t).toFixed(2)},${(s-e).toFixed(2)} ${(n-t).toFixed(2)},${(r-e).toFixed(2)} ${(o-t).toFixed(2)},${(a-e).toFixed(2)}`},ff.cleanDimensions=function(){this.dirtyDimensions=!1,this.dirtyHandle=!0,this.dirtyOffset=!0,this.dirtyStart=!0,this.dirtyStartControl=!0,this.dirtyEndControl=!0,this.dirtyEnd=!0,this.dirtyFilterIdentifier=!0},ff.preparePinsForStamp=function(){const t=this.dirtyPins,e=this.endPivot,i=this.endPath,s=this.startControlPivot,n=this.startControlPath,r=this.endControlPivot,o=this.endControlPath;for(let a,c=0,l=t.length;c<l;c++)a=t[c],(s&&s.name==a||n&&n.name==a)&&(this.dirtyStartControl=!0,this.startControlLockTo.includes(un)&&(this.currentStartControlPathData=!1)),(r&&r.name==a||o&&o.name==a)&&(this.dirtyEndControl=!0,this.endControlLockTo.includes(un)&&(this.currentEndControlPathData=!1)),(e&&e.name==a||i&&i.name==a)&&(this.dirtyEnd=!0,this.endLockTo.includes(un)&&(this.currentEndPathData=!1));t.length=0};const bf=function(t=qa){return!!t&&(t.species=oe,new Bezier(t))};I.Bezier=Bezier;const Cog=function(t=qa){return this.shapeInit(t),this},Sf=Cog.prototype=yc();Sf.type="Cog",Sf.lib=gi,Sf.isArtefact=!0,Sf.isAsset=!1,ml(Sf),hf(Sf);const kf={outerRadius:0,innerRadius:0,outerControlsDistance:0,innerControlsDistance:0,outerControlsOffset:0,innerControlsOffset:0,points:0,twist:0,curve:oe};Sf.defs=cc(Sf.defs,kf);const Af=Sf.setters,vf=Sf.deltaSetters;Af.outerRadius=function(t){this.outerRadius=t,this.updateDirty()},vf.outerRadius=function(t){this.outerRadius+=t,this.updateDirty()},Af.innerRadius=function(t){this.innerRadius=t,this.updateDirty()},vf.innerRadius=function(t){this.innerRadius+=t,this.updateDirty()},Af.outerControlsDistance=function(t){this.outerControlsDistance=t,this.updateDirty()},vf.outerControlsDistance=function(t){this.outerControlsDistance+=t,this.updateDirty()},Af.innerControlsDistance=function(t){this.innerControlsDistance=t,this.updateDirty()},vf.innerControlsDistance=function(t){this.innerControlsDistance+=t,this.updateDirty()},Af.outerControlsOffset=function(t){this.outerControlsOffset=t,this.updateDirty()},vf.outerControlsOffset=function(t){this.outerControlsOffset+=t,this.updateDirty()},Af.innerControlsOffset=function(t){this.innerControlsOffset=t,this.updateDirty()},vf.innerControlsOffset=function(t){this.innerControlsOffset+=t,this.updateDirty()},Af.points=function(t){this.points=t,this.updateDirty()},vf.points=function(t){this.points+=t,this.updateDirty()},Af.twist=function(t){this.twist=t,this.updateDirty()},vf.twist=function(t){this.twist+=t,this.updateDirty()},Af.curve=function(t){t&&yn.includes(t)?this.curve=t:this.curve=oe,this.updateDirty()},Sf.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeCogPath()},Sf.makeCogPath=function(){const{points:t,twist:e,curve:i}=this;let{outerRadius:s,innerRadius:n,outerControlsDistance:r,innerControlsDistance:o,outerControlsOffset:a,innerControlsOffset:c}=this;const l=360/t,h=Kc();let u,d,f,p,m,g="";if(s.substring||n.substring||r.substring||o.substring||a.substring||c.substring){const t=this.getHost();if(t){const[e]=t.currentDimensions;s=s.substring?parseFloat(s)/100*e:s,n=n.substring?parseFloat(n)/100*e:n,r=r.substring?parseFloat(r)/100*e:r,o=o.substring?parseFloat(o)/100*e:o,a=a.substring?parseFloat(a)/100*e:a,c=c.substring?parseFloat(c)/100*e:c}}const y=td({x:0,y:-s}),b=td({x:0,y:-n}),S=td({x:r+a,y:-s}),k=td({x:-o+c,y:-n}),A=td({x:o+c,y:-n}),v=td({x:-r+a,y:-s});if(k.rotate(-l/2),k.rotate(e),b.rotate(-l/2),b.rotate(e),A.rotate(-l/2),A.rotate(e),u=y.x,d=y.y,h.push(u),i==oe)for(m=0;m<t;m++)f=parseFloat((S.x-u).toFixed(1)),p=parseFloat((S.y-d).toFixed(1)),g+=`${f},${p} `,k.rotate(l),b.rotate(l),A.rotate(l),f=parseFloat((k.x-u).toFixed(1)),p=parseFloat((k.y-d).toFixed(1)),g+=`${f},${p} `,f=parseFloat((b.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((b.y-d).toFixed(1)),d+=p,g+=`${f},${p} `,f=parseFloat((A.x-u).toFixed(1)),p=parseFloat((A.y-d).toFixed(1)),g+=`${f},${p} `,v.rotate(l),y.rotate(l),S.rotate(l),f=parseFloat((v.x-u).toFixed(1)),p=parseFloat((v.y-d).toFixed(1)),g+=`${f},${p} `,f=parseFloat((y.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((y.y-d).toFixed(1)),d+=p,g+=`${f},${p} `;else if(i==Tn)for(m=0;m<t;m++)f=parseFloat((S.x-u).toFixed(1)),p=parseFloat((S.y-d).toFixed(1)),g+=`${f},${p} `,b.rotate(l),A.rotate(l),f=parseFloat((b.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((b.y-d).toFixed(1)),d+=p,g+=`${f},${p} `,f=parseFloat((A.x-u).toFixed(1)),p=parseFloat((A.y-d).toFixed(1)),g+=`${f},${p} `,y.rotate(l),S.rotate(l),f=parseFloat((y.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((y.y-d).toFixed(1)),d+=p,g+=`${f},${p} `;else for(m=0;m<t;m++)f=parseFloat((S.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((S.y-d).toFixed(1)),d+=p,g+=`${f},${p} `,k.rotate(l),b.rotate(l),A.rotate(l),f=parseFloat((k.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((k.y-d).toFixed(1)),d+=p,g+=`${f},${p} `,f=parseFloat((b.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((b.y-d).toFixed(1)),d+=p,g+=`${f},${p} `,f=parseFloat((A.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((A.y-d).toFixed(1)),d+=p,g+=`${f},${p} `,v.rotate(l),y.rotate(l),S.rotate(l),f=parseFloat((v.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((v.y-d).toFixed(1)),d+=p,g+=`${f},${p} `,f=parseFloat((y.x-u).toFixed(1)),u+=f,h.push(u),p=parseFloat((y.y-d).toFixed(1)),d+=p,g+=`${f},${p} `;ed(y);const P=tt(...h),C=B(P).toFixed(1);return qc(h),i==oe?`m${C},0c${g}z`:i==Tn?`m${C},0q${g}z`:`m${C},0l${g}z`};const Pf=function(t){return!!t&&(t.species="cog",new Cog(t))};I.Cog=Cog;const Palette=function(t=qa){return this.makeName(t.name),this.register(),this.factory=Oh({name:`${this.name}-color-factory`}),this.set(this.defs),this.colors=t.colors||{"0 ":[0,0,0,1],"999 ":[255,255,255,1]},this.stops=ht(Array(1e3).fill(le)),this.easingFunction=Za,this.set(t),this.dirtyPalette=!0,this},Cf=Palette.prototype=yc();Cf.type=Do,Cf.lib="palette",Cf.isArtefact=!1,Cf.isAsset=!1,ml(Cf);const wf={colors:null,stops:null,cyclic:!1,easing:As,easingFunction:null,precision:25};Cf.defs=cc(Cf.defs,wf),Cf.packetFunctions=hc(Cf.packetFunctions,["easingFunction"]),Cf.packetExclusions=hc(Cf.packetExclusions,["stops"]),Cf.kill=function(){return this.factory&&this.factory.kill&&this.factory.kill(),this.deregister(),this};const xf=Cf.getters,Of=Cf.setters;xf.colors=function(){const t=this.factory,e=[];if(t){const i=t.colorSpace;for(const[s,n]of z(this.colors))e.push([parseInt(s,10),t.buildColorString(...n,i)])}else e.push([0,ae],[999,xa]);return e},Of.colors=function(t){if(K(t)){const e=this.factory,i={},s=e.colorSpace.toLowerCase();t.forEach((t=>{const[n,r]=t;n.toFixed&&r.substring&&(e.convert(r),i[`${n} `]=[...e[s]])})),this.colors=i,this.dirtyPalette=!0}},Of.easing=function(t){this.setEasingHelper(t)},Of.easingFunction=Of.easing,Cf.setEasing=function(t){return this.setEasingHelper(t),this},Cf.setEasingFunction=Cf.setEasing,Cf.setEasingHelper=function(t){nc(t)?(this.easing=Ei,this.easingFunction=t):t.substring&&gc[t]?(this.easing=t,this.easingFunction=Za):(this.easing=As,this.easingFunction=Za),this.dirtyPaletteData=!0},xf.colorSpace=function(){return this.getColorSpace()},Of.colorSpace=function(t){if(t.substring){const e=t.toUpperCase(),i=t.toLowerCase();if(ss.includes(e)){const t=L({},this.colors),s=this.factory.colorSpace;this.factory.set({colorSpace:e});for(const[e,n]of z(t)){const t=this.factory.buildColorString(...n,s);this.factory.setColor(t),this.colors[e].length=0,this.colors[e].push(...this.factory[i])}this.dirtyPalette=!0}}},xf.returnColorAs=function(){return this.getReturnColorAs()},Of.returnColorAs=function(t){this.factory.set({returnColorAs:t}),this.dirtyPalette=!0},Of.precision=function(t){t=parseInt(t,10),(isNaN(t)||t<0)&&(t=0),t>50&&(t=50),this.precision=t,this.dirtyPaletteData=!0},Of.stops=Ua,Cf.getColorSpace=function(){return this.factory?this.factory.colorSpace:Fr},Cf.getReturnColorAs=function(){return this.factory?this.factory.returnColorAs:Fr},Cf.recalculateStopColors=function(){if(this.dirtyPalette){this.dirtyPalette=!1,this.dirtyPaletteData=!0;const{colors:t,stops:e,factory:i}=this;e.fill(le);const{colorSpace:s}=i,n=Q(t).map((t=>parseInt(t,10))).sort(((t,e)=>t-e));let r,o,a,c,l,h,u,d=n[0];const[f,p,m,g]=t[`${d} `];for(e[d]=i.returnColorFromValues(f,p,m,g),l=0,h=n.length-1;l<h;l++)for(d=n[l],r=n[l+1],o=t[`${d} `],a=t[`${r} `],i.setMinimumColor(i.buildColorString(...o,s)),i.setMaximumColor(i.buildColorString(...a,s)),c=r-d,u=d+1;u<=r;u++)e[u]=i.getRangeColor((u-d)/c,!0)}},Cf.updateColor=function(t,e){const i=this.factory,s=i.colorSpace.toLowerCase();fc(t,e)&&(t=t.substring?parseInt(t,10):V(t))>=0&&t<1e3&&(i.convert(e),t+=Kr,this.colors[t]=[...i[s]],this.dirtyPalette=!0)},Cf.removeColor=function(t){dc(t)&&(t=t.substring?parseInt(t,10):V(t))>=0&&t<1e3&&(t+=Kr,delete this.colors[t],this.dirtyPalette=!0)},Cf.getStopData=function(t,e,i,s){if(!t)return le;const n=`${this.name}-data`,{stops:r}=this;if(this.dirtyPaletteData||!Bh[o]){this.dirtyPaletteData=!1,fc(e,i)||(e=0,i=999);const{easing:t,easingFunction:o,precision:a}=this,c=Q(this.colors).map((t=>parseInt(t,10))).sort(((t,e)=>t-e));let l,h,u,d,f,p,m=o;t!=Ei&&gc[t]&&(m=gc[t]);const g=this.getColorSpace(),y=!(!a||t==As&&g==Fr),b=[];if(e<i){if(b.push(0,r[e]),l=i-e,y)for(u=e+1;u<i;u+=a)h=(u-e)/l,s&&(h>1?h-=1:h<0&&(h+=1)),h=m(h),h>0&&h<1&&b.push(h,r[u]);else for(u=0,d=c.length;u<d;u++)f=c[u],f>e&&f<i&&(h=(f-e)/l,s&&(h>1?h-=1:h<0&&(h+=1)),h>0&&h<1&&b.push(h,r[f]));b.push(1,r[i])}else if(s){if(b.push(0,r[e]),p=999-e,l=p+i,y)for(u=0;u<l;u+=a)f=u+e,f>999&&(f-=1e3),h=m(u/l),h>0&&h<1&&b.push(h,r[f]);else for(u=0,d=c.length;u<d;u++){if(f=c[u],999==f)h=(f-e-.01)/l;else if(f>e)h=(f-e)/l;else if(0==f)h=(f+p+.01)/l;else{if(!(f<i))continue;h=(f+p)/l}h>1?h-=1:h<0&&(h+=1),h>0&&h<1&&b.push(h,r[f])}b.push(1,r[i])}else{if(b.push(0,r[e]),l=e-i,y)for(u=i+1;u<e;u+=a)u<e&&u>i&&(h=m(1-(u-i)/l),h>0&&h<1&&b.push(h,r[u]));else for(u=0,d=c.length;u<d;u++)f=c[u],f<e&&f>i&&(h=1-(f-i)/l,h>0&&h<1&&b.push(h,r[f]));b.push(1,r[i])}U(b),Yh(n,b)}var o;return e==i?r[e]||le:Xh(n)||le},Cf.addStopsToGradient=function(t,e,i,s){this.recalculateStopColors();const n=this.getStopData(t,e,i,s);if(n.substring)return n;for(let e=0,i=n.length;e<i;e+=2)t.addColorStop(n[e],n[e+1]);return t},Cf.updateData=function(){this.dirtyPaletteData=!0};function Df(t=qa){t.defs=cc(t.defs,{start:null,end:null,palette:null,paletteStart:0,paletteEnd:999,cyclePalette:!1,animateByDelta:!1}),t.finalizePacketOut=function(t,e){return e.colors?t.colors=e.colors:this.palette?t.colors=this.palette.get("colors"):t.colors=[[0,ae],[999,xa]],e.easing?t.easing=e.easing:this.palette&&this.palette.easing?t.easing=this.palette.easing:t.easing=As,dc(e.precision)?t.precision=e.precision:this.palette&&dc(this.palette.precision)?t.precision=this.palette.precision:t.precision=0,e.colorSpace?t.colorSpace=e.colorSpace:this.palette?t.colorSpace=this.palette.getColorSpace():t.colorSpace=Fr,e.returnColorAs?t.returnColorAs=e.returnColorAs:this.palette?t.returnColorAs=this.palette.getReturnColorAs():t.returnColorAs=Fr,t},t.kill=function(){const t=this.name;return this.palette&&this.palette.kill&&this.palette.kill(),bt(f).forEach((e=>{const i=e.state;if(i){const e=i.fillStyle,s=i.strokeStyle;oc(e)&&e.name===t&&(i.fillStyle=i.defs.fillStyle),oc(s)&&s.name===t&&(i.strokeStyle=i.defs.strokeStyle)}})),this.deregister(),this};const e=t.getters,i=t.setters,s=t.deltaSetters;e.startX=function(){return this.currentStart[0]},e.startY=function(){return this.currentStart[1]},i.startX=function(t){null!=t&&(this.start[0]=t,this.dirtyStart=!0)},i.startY=function(t){null!=t&&(this.start[1]=t,this.dirtyStart=!0)},i.start=function(t,e){this.setCoordinateHelper(Qr,t,e),this.dirtyStart=!0},s.startX=function(t){const e=this.start;e[0]=Ga(e[0],t),this.dirtyStart=!0},s.startY=function(t){const e=this.start;e[1]=Ga(e[1],t),this.dirtyStart=!0},s.start=function(t,e){this.setDeltaCoordinateHelper(Qr,t,e),this.dirtyStart=!0},e.endX=function(){return this.currentEnd[0]},e.endY=function(){return this.currentEnd[1]},i.endX=function(t){null!=t&&(this.end[0]=t,this.dirtyEnd=!0)},i.endY=function(t){null!=t&&(this.end[1]=t,this.dirtyEnd=!0)},i.end=function(t,e){this.setCoordinateHelper(fi,t,e),this.dirtyEnd=!0},s.endX=function(t){const e=this.end;e[0]=Ga(e[0],t),this.dirtyEnd=!0},s.endY=function(t){const e=this.end;e[1]=Ga(e[1],t),this.dirtyEnd=!0},s.end=function(t,e){this.setDeltaCoordinateHelper(fi,t,e),this.dirtyEnd=!0},i.palette=function(t=qa){t.type==Do&&(t.dirtyPalette=!0,this.palette=t)},i.paletteStart=function(t){t.toFixed&&this.palette&&(this.paletteStart=t,(t<0||t>999)&&(this.paletteStart=t>500?999:0),this.palette.updateData())},s.paletteStart=function(t){let e;t.toFixed&&this.palette&&(e=this.paletteStart+t,(e<0||e>999)&&(e=this.cyclePalette?e>500?e-1e3:e+1e3:t>500?999:0),this.paletteStart=e,this.palette.updateData())},i.paletteEnd=function(t){t.toFixed&&this.palette&&(this.paletteEnd=t,(t<0||t>999)&&(this.paletteEnd=t>500?999:0),this.palette.updateData())},s.paletteEnd=function(t){let e;t.toFixed&&this.palette&&(e=this.paletteEnd+t,(e<0||e>999)&&(e=this.cyclePalette?e>500?e-1e3:e+1e3:t>500?999:0),this.paletteEnd=e,this.palette.updateData())},i.cyclePalette=function(t){this.palette&&(this.cyclePalette=!!t,this.palette.updateData())},i.colors=function(t){K(t)&&this.palette&&this.palette.set({colors:t})},i.easing=function(t){this.palette&&this.palette.set({easing:t})},i.easingFunction=i.easing,i.colorSpace=function(t){this.palette&&this.palette.set({colorSpace:t})},i.returnColorAs=function(t){this.palette&&this.palette.set({returnColorAs:t})},i.precision=function(t){this.palette&&this.palette.set({precision:t})},i.delta=function(t=qa){t&&(this.delta=lc(this.delta,t))},t.get=function(t){const e=this.getters[t],i=this.palette;if(e)return e.call(this);{let e,s=this.defs[t];return typeof s!=pa?(e=this[t],typeof e!=pa?e:s):(s=i.defs[t],typeof s!=pa?(e=i[t],typeof e!=pa?e:s):void 0)}},t.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs,r=this.palette;let o,a,c,l,h,u;for(r&&(o=r.setters||qa,a=r.defs||qa),l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(ln.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=u)):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=u)));this.dirtyFilterIdentifier=!0}return this},t.setDelta=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.deltaSetters,n=this.defs,r=this.palette;let o,a,c,l,h,u;for(r&&(o=r.deltaSetters||qa,a=r.defs||qa),l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(ln.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=Ga(this[h],u))):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=Ga(this[h],u))));this.dirtyFilterIdentifier=!0}return this},t.setCoordinateHelper=function(t,e,i){const s=this[t];K(e)?(s[0]=e[0],s[1]=e[1]):(s[0]=e,s[1]=i)},t.setDeltaCoordinateHelper=function(t,e,i){const s=this[t],n=s[0],r=s[1];K(e)?(s[0]=Ga(n,e[0]),s[1]=Ga(r,e[1])):(s[0]=Ga(n,e),s[1]=Ga(r,i))},t.updateByDelta=function(){return this.setDelta(this.delta),this},t.stylesInit=function(t=qa){this.makeName(t.name),this.register(),this.gradientArgs=[],this.start=su(),this.end=su(),this.currentStart=su(),this.currentEnd=su(),this.palette=function(t){return!!t&&new Palette(t)}({name:`${this.name}_palette`}),this.delta={},this.set(this.defs),this.set(t)},t.getData=function(t,e){return this.cleanStyle(t,e),this.finalizeCoordinates(t),this.buildStyle(e)},t.cleanStyle=function(t=qa,e=qa){let i,s,n,r;t.lockFillStyleToEntity||t.lockStrokeStyleToEntity?(i=t.currentDimensions,r=t.currentScale,s=i[0]*r,n=i[1]*r):(i=e.currentDimensions,s=i[0],n=i[1]),this.cleanPosition(this.currentStart,this.start,[s,n]),this.cleanPosition(this.currentEnd,this.end,[s,n]),this.cleanRadius(s)},t.cleanPosition=function(t,e,i){let s,n;for(let r=0;r<2;r++)s=e[r],n=i[r],s.toFixed?t[r]=s:t[r]=s==bs||s==ea?0:s==Hr||s==Se?n:s==Ce?n/2:parseFloat(s)/100*n},t.finalizeCoordinates=function(t=qa){const e=t.currentStampPosition,i=t.currentStampHandlePosition,s=t.currentScale;let n,r;t.lockFillStyleToEntity||t.lockStrokeStyleToEntity?(n=-i[0]*s||0,r=-i[1]*s||0):(n=-e[0]||0,r=-e[1]||0),this.updateGradientArgs(n,r)},t.cleanRadius=Ua,t.buildStyle=function(){return le},t.addStopsToGradient=function(t,e,i,s){return this.palette?this.palette.addStopsToGradient(t,e,i,s):t},t.updateColor=function(t,e){return this.palette&&(this.dirtyFilterIdentifier=!0,this.palette.updateColor(t,e)),this},t.removeColor=function(t){return this.palette&&(this.dirtyFilterIdentifier=!0,this.palette.removeColor(t)),this}}I.Palette=Palette,yl({name:"SC-system-gradient-delta-animation",fn:()=>{R.forEach((t=>{const e=D[t];e&&e.animateByDelta&&e.updateByDelta()}))}});const ConicGradient=function(t=qa){return this.stylesInit(t),this},Rf=ConicGradient.prototype=yc();Rf.type="ConicGradient",Rf.lib=uo,Rf.isArtefact=!1,Rf.isAsset=!1,ml(Rf),Df(Rf);Rf.defs=cc(Rf.defs,{angle:0}),Rf.packetObjects=hc(Rf.packetObjects,["palette"]),Rf.buildStyle=function(t){if(t){const e=t.engine;if(e){if(!e.createConicGradient)return le;const t=e.createConicGradient(...this.gradientArgs);return this.addStopsToGradient(t,this.paletteStart,this.paletteEnd,this.cyclePalette)}}return le},Rf.updateGradientArgs=function(t,e){const i=this.gradientArgs,s=this.currentStart,n=this.angle*at,r=s[0]+t,o=s[1]+e;i.length=0,i.push(n,r,o)};const Ff=function(t){return!!t&&new ConicGradient(t)};I.ConicGradient=ConicGradient;const Crescent=function(t=qa){return mc(t.dimensions,t.width,t.height,t.radius)||(t.radius=5),this.entityInit(t),this},Hf=Crescent.prototype=yc();Hf.type="Crescent",Hf.lib=gi,Hf.isArtefact=!0,Hf.isAsset=!1,ml(Hf),tf(Hf);Hf.defs=cc(Hf.defs,{outerRadius:20,innerRadius:10,displacement:0,displayIntersect:!1});const Ef=Hf.setters,If=Hf.deltaSetters;Ef.outerRadius=function(t){null!=t&&(this.outerRadius=t,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0)},If.outerRadius=function(t){null!=t&&(this.outerRadius=Ga(this.outerRadius,t),this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0)},Ef.innerRadius=function(t){null!=t&&(this.innerRadius=t,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0)},If.innerRadius=function(t){null!=t&&(this.innerRadius=Ga(this.innerRadius,t),this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0)},Ef.width=Ef.outerRadius,If.width=If.outerRadius,Ef.height=Ef.innerRadius,If.height=If.innerRadius,Ef.displacement=function(t){if(null!=t&&t.toFixed&&t>=0){let e=t;e<0&&(e=0),this.displacement=e,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0}},If.displacement=function(t){if(null!=t&&t.toFixed){let e=Ga(this.displacement,t);e.toFixed&&e<0&&(e=0),this.displacement=e,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0}},Ef.displayIntersect=function(t){this.displayIntersect=t,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Hf.cleanDimensionsAdditionalActions=function(){const{outerRadius:t,innerRadius:e,displacement:i}=this,s=this.getHost();let n;n=s?s.currentDimensions?s.currentDimensions:[s.w,s.h]:[300,150];const[r,o]=n;this.currentOuterRadius=t.substring?parseFloat(t)/100*r:t,this.currentInnerRadius=e.substring?parseFloat(e)/100*o:e,this.currentDisplacement=i.substring?parseFloat(i)/100*r:i,this.currentDimensions[0]=this.currentDimensions[1]=2*this.currentOuterRadius,this.dirtyPathObject=!0},Hf.calculateInterception=function(){fc(this.currentOuterRadius,this.currentInnerRadius,this.currentDisplacement)||this.cleanDimensionsAdditionalActions();const{currentOuterRadius:t,currentInnerRadius:e,currentDisplacement:i}=this;this.outerCircleStart=0,this.outerCircleEnd=360*at,this.innerCircleStart=0,this.innerCircleEnd=360*at,this.drawOuterCircle=!1,this.drawDonut=!1;const s=t+e,n=t-e;if(!n&&!i)this.drawOuterCircle=!0;else if(i>=s)this.drawOuterCircle=!0;else if(i<s&&i>n){const s=qh(),{engine:n,element:r}=s,o=eu();let a,c;for(r.width=r.width,n.fillStyle="black",n.save(),n.beginPath(),n.arc(0,0,t,0,2*Math.PI),o.setFromArray([e,0]),a=0;a<360&&(o.rotate(.5),!n.isPointInPath(o[0]+i,o[1]));a+=.5);for(n.restore(),n.save(),n.beginPath(),n.arc(i,0,e,0,2*Math.PI),o.setFromArray([t,0]),c=0;c<360&&(o.rotate(.5),n.isPointInPath(...o));c+=.5);n.restore(),this.outerCircleStart=-c*at,this.outerCircleEnd=c*at,this.innerCircleStart=a*at,this.innerCircleEnd=-a*at,iu(o),Qh(s)}else this.drawDonut=!0},Hf.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject){this.calculateInterception();const{currentStampHandlePosition:t,currentScale:e,outerCircleStart:i,outerCircleEnd:s,innerCircleStart:n,innerCircleEnd:r,drawOuterCircle:o,displayIntersect:a}=this;let{currentOuterRadius:c,currentInnerRadius:l,currentDisplacement:h}=this;const u=this.pathObject=new Path2D;c*=e,l*=e,h*=e;const d=c-t[0]*e,f=c-t[1]*e;if(o)u.arc(d,f,c,i,s),u.closePath(),this.pathObjectOuter=!1,this.pathObjectInner=!1;else{const t=this.pathObjectOuter=new Path2D,e=this.pathObjectInner=new Path2D;a?u.arc(d,f,c,i,s):u.arc(d,f,c,i,s,!0),u.arc(d+h,f,l,n,r),u.closePath(),t.arc(d,f,c,i,s,!0),t.closePath(),e.arc(d+h,f,l,n,r),e.closePath()}}},Hf.draw=function(t){this.drawDonut?(t.stroke(this.pathObjectOuter),t.stroke(this.pathObjectInner)):t.stroke(this.pathObject)},Hf.fill=function(t){t.fill(this.pathObject,this.winding)},Hf.drawAndFill=function(t){if(this.drawDonut){const e=this.pathObject,i=this.pathObjectOuter,s=this.pathObjectInner;t.stroke(i),t.stroke(s),t.fill(e,this.winding),this.currentHost.clearShadow(),t.stroke(i),t.stroke(s),t.fill(e,this.winding)}else{const e=this.pathObject;t.stroke(e),t.fill(e,this.winding),this.currentHost.clearShadow(),t.stroke(e),t.fill(e,this.winding)}},Hf.fillAndDraw=function(t){if(this.drawDonut){const e=this.pathObject,i=this.pathObjectOuter,s=this.pathObjectInner;t.fill(e,this.winding),t.stroke(i),t.stroke(s),this.currentHost.clearShadow(),t.fill(e,this.winding),t.stroke(i),t.stroke(s)}else{const e=this.pathObject;t.fill(e,this.winding),t.stroke(e),this.currentHost.clearShadow(),t.fill(e,this.winding),t.stroke(e)}},Hf.drawThenFill=function(t){if(this.drawDonut){const e=this.pathObject,i=this.pathObjectOuter,s=this.pathObjectInner;t.stroke(i),t.stroke(s),t.fill(e,this.winding)}else{const e=this.pathObject;t.stroke(e),t.fill(e,this.winding)}},Hf.fillThenDraw=function(t){if(this.drawDonut){const e=this.pathObject,i=this.pathObjectOuter,s=this.pathObjectInner;t.fill(e,this.winding),t.stroke(i),t.stroke(s)}else{const e=this.pathObject;t.fill(e,this.winding),t.stroke(e)}},Hf.clip=function(t){t.clip(this.pathObject,this.winding)},Hf.clear=function(t){const e=t.globalCompositeOperation;t.globalCompositeOperation=ti,t.fill(this.pathObject,this.winding),t.globalCompositeOperation=e};const Tf=function(t){return!!t&&new Crescent(t)};I.Crescent=Crescent;const Bf={},$f=function(t=qa){const e=(t=qa)=>{if(t&&t.target){let e=t.target,s="";for(;!s&&(Bf[e.id]&&(s=e.id),e.tagName!=St);)e=e.parentElement;const r=Bf[s];if(r)for(let e=0,s=r.length;e<s;e++){const s=r[e].pickup(t);if(s.current){i=s.move,n=s.drop;break}}}};let i=Ua;const s=(t=qa)=>{i(t)};let n=Ua;const r=(t=qa)=>{n(t),i=Ua,n=Ua},a=function(t=qa,e,i){let{zone:s,coordinateSource:n,collisionGroup:r,startOn:a,endOn:c,updateOnStart:l,updateOnEnd:h,updateWhileMoving:u,updateOnShiftStart:d,updateOnShiftEnd:f,updateWhileShiftMoving:p,updateOnPrematureExit:m,exposeCurrentArtefact:y,preventTouchDefaultWhenDragging:b,resetCoordsToZeroOnTouchEnd:S,processingOrder:k}=t;if(!s)return new Error("dragZone constructor - no zone supplied");if(s.substring&&(s=o[s]),!s||!Mt.includes(s.type))return new Error("dragZone constructor - zone object is not a Stack or Canvas wrapper");const A=s.domElement;if(!A)return new Error("dragZone constructor - zone does not contain a target DOM element");if(r?r.substring&&(r=g[r]):r=s.type==yo?g[s.base.name]:g[s.name],!r||r.type!=Co)return new Error("dragZone constructor - unable to recover collisionGroup group");if(n?n.here?n=n.here:fc(n.x,n.y)||(n=!1):n=s.type==yo?s.base.here:s.here,!n)return new Error("dragZone constructor - unable to discover a usable coordinateSource object");K(a)||(a=[oi]),K(c)||(c=[ba]),null==y&&(y=!1),null==b&&(b=!1),null==S&&(S=!0),oc(l)&&(l=function(){v.artefact.set(t.updateOnStart)}),nc(l)||(l=Ua),oc(d)&&(d=function(){v.artefact.set(t.updateOnShiftStart)}),nc(d)||(d=l),oc(h)&&(h=function(){v.artefact.set(t.updateOnEnd)}),nc(h)||(h=Ua),oc(f)&&(f=function(){v.artefact.set(t.updateOnShiftEnd)}),nc(f)||(f=h),nc(u)||(u=Ua),nc(p)||(p=u),nc(m)||(m=Ua),ec(y)||(y=!1),null==k&&(k=0);let v=!1;const P=function(t){t&&t.cancelable&&(b&&v?(t.preventDefault(),t.returnValue=!1):b||(t.preventDefault(),t.returnValue=!1))},C=function(t=qa){v&&(P(t),t.type==ra&&Xl(t),t.shiftKey?p(t):u(t))},w=function(t=qa){v&&(P(t),t.type==na&&Xl(t,S),v.artefact.dropArtefact(),t.shiftKey?f(t):h(t),v=!1)};Bf[s.name]||(Bf[s.name]=[],e(a,c,A));const x=function(){const t=`${s.name}_${r.name}_${k}`;Bf[s.name]=Bf[s.name].filter((e=>e.name!=t)),Bf[s.name].length||(i(a,c,A),delete Bf[s.name])},O=function(t){if(!t)return v;"exit"==t||"drop"==t?(w(),m()):x()},D={name:`${s.name}_${r.name}_${k}`,exposeCurrentArtefact:y,target:A,processingOrder:k,pickup:function(t=qa){P(t);const e=t.type;return e!=oa&&e!=sa||Xl(t,S),v=r.getArtefactAt(n),v&&(v.artefact.pickupArtefact(n),t.shiftKey?d(t):l(t)),{current:v,move:C,drop:w}},move:C,drop:w,kill:x,getCurrent:O};return Bf[s.name].push(D),Bf[s.name].sort(((t,e)=>t.processingOrder-e.processingOrder)),{exposeCurrentArtefact:y,getCurrent:O,kill:x,zone:s}}(t,((t,i,n)=>{al(t,e,n),al(Gs,s,n),al(i,r,n)}),((t,i,n)=>{cl(t,e,n),cl(Gs,s,n),cl(i,r,n)}));return a.exposeCurrentArtefact?a.getCurrent:a.kill},ParticleHistory=function(){const t=Array(4).fill(0);return ut(t,ParticleHistory.prototype),ht(t)},Lf=ParticleHistory.prototype=j(Array.prototype);Lf.constructor=ParticleHistory,Lf.type=Fo;const Mf=[],Nf=function(t){t&&t.type==Fo&&(t.fill(0),Mf.push(t),Mf.length>100&&(Mf.length=0))};I.ParticleHistory=ParticleHistory;const Particle=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.initializePositions(),this.set(t),this},Xf=Particle.prototype=yc();Xf.type=Ro,Xf.lib=hn,Xf.isArtefact=!1,Xf.isAsset=!1,ml(Xf);const Yf={position:null,velocity:null,load:null,history:null,historyLength:1,engine:bi,forces:null,mass:1,fill:ae,stroke:ae};Xf.defs=cc(Xf.defs,Yf),Xf.packetExclusionsByRegex=hc(Xf.packetExclusionsByRegex,["^(local|dirty|current)"]),Xf.packetObjects=hc(Xf.packetObjects,["position","velocity","acceleration"]),Xf.factoryKill=function(){this.history.forEach((t=>Nf(t)));const t=[];let e;v.forEach((i=>{e=A[i],(e.particleFrom&&e.particleFrom.name==this.name||e.particleTo&&e.particleTo.name==this.name)&&t.push(e)})),t.forEach((t=>t.kill()))};const Gf=Xf.getters,jf=Xf.setters,zf=Xf.deltaSetters;Gf.positionX=function(){return this.position.x},Gf.positionY=function(){return this.position.y},Gf.positionZ=function(){return this.position.z},Gf.position=function(){const t=this.position;return[t.x,t.y,t.z]},jf.positionX=function(t){this.position.x=t},jf.positionY=function(t){this.position.y=t},jf.positionZ=function(t){this.position.z=t},jf.position=function(t){this.position.set(t)},zf.positionX=function(t){this.position.x+=t},zf.positionY=function(t){this.position.y+=t},zf.positionZ=function(t){this.position.z+=t},zf.position=Ua,Gf.velocityX=function(){return this.velocity.x},Gf.velocityY=function(){return this.velocity.y},Gf.velocityZ=function(){return this.velocity.z},Gf.velocity=function(){const t=this.velocity;return[t.x,t.y,t.z]},jf.velocityX=function(t){this.velocity.x=t},jf.velocityY=function(t){this.velocity.y=t},jf.velocityZ=function(t){this.velocity.z=t},jf.velocity=function(t,e,i){this.velocity.set(t,e,i)},zf.velocityX=function(t){this.velocity.x+=t},zf.velocityY=function(t){this.velocity.y+=t},zf.velocityZ=function(t){this.velocity.z+=t},zf.velocity=Ua,jf.forces=function(t){t&&(K(t)?(this.forces.length=0,this.forces=this.forces.concat(t)):this.forces.push(t))},jf.load=Ua,jf.history=Ua,zf.load=Ua,Xf.initializePositions=function(){this.initialPosition=id(),this.position=id(),this.velocity=id(),this.load=id(),this.forces=[],this.history=[],this.isRunning=!1},Xf.applyForces=function(t,e){let i;this.load.zero(),this.isBeingDragged||this.forces.forEach((s=>{i=S[s],i&&i.action&&i.action(this,t,e)}))},Xf.update=function(t,e){this.isBeingDragged?this.position.setFromVector(this.isBeingDragged).vectorAdd(this.dragOffset):_f[this.engine].call(this,t*e.tickMultiplier)},Xf.manageHistory=function(t,e){const{history:i,remainingTime:s,position:n,historyLength:r,hasLifetime:o,distanceLimit:a,initialPosition:c,killBeyondCanvas:l}=this;let h=!0,u=0;if(o)if(u=s-t,u<=0){const t=i.pop();Nf(t),h=!1,i.length||(this.isRunning=!1)}else this.remainingTime=u;const d=i[i.length-1];if(d){const[,t,i,s]=d;if(l){const t=e.element.width,n=e.element.height;(i<0||s<0||i>t||s>n)&&(h=!1,this.isRunning=!1)}if(a){const e=td(c);e.vectorSubtractArray([i,s,t]),e.getMagnitude()>a&&(h=!1,this.isRunning=!1),ed(e)}}if(h){const{x:t,y:e,z:s}=n,o=(Mf.length||Mf.push(new ParticleHistory),Mf.shift());if(o[0]=u,o[1]=s,o[2]=t,o[3]=e,i.unshift(o),i.length>r){i.splice(r).forEach((t=>Nf(t)))}}},Xf.run=function(t,e,i){this.hasLifetime=!1,t&&(this.remainingTime=t,this.hasLifetime=!0),this.distanceLimit=0,e&&(this.initialPosition.set(this.position),this.distanceLimit=e),this.killBeyondCanvas=i,this.isRunning=!0};const Wf=function(t){return!!t&&new Particle(t)};I.Particle=Particle;const Vf=[],Uf=function(t){Vf.length||Vf.push(new Particle);const e=Vf.shift();return e.set(t),e},Zf=function(t){if(t&&t.type==Ro&&(t.history.forEach((t=>Nf(t))),t.history.length=0,t.set(t.defs),Vf.push(t),Vf.length>50)){const t=[...Vf];Vf.length=0,t.forEach((t=>t.kill()))}},_f={euler:function(t){const{position:e,velocity:i,load:s,mass:n}=this,r=td(),o=td(i);r.setFromVector(s).scalarDivide(n),o.vectorAdd(r.scalarMultiply(t)),i.setFromVector(o),e.vectorAdd(o.scalarMultiply(t)),ed(r)},"improved-euler":function(t){const{position:e,velocity:i,load:s,mass:n}=this,r=td(),o=td(),a=td(),c=td(i);r.setFromVector(s).scalarDivide(n).scalarMultiply(t),o.setFromVector(s).vectorAdd(r).scalarDivide(n).scalarMultiply(t),a.setFromVector(r).vectorAdd(o).scalarDivide(2),c.vectorAdd(a),i.setFromVector(c),e.vectorAdd(c.scalarMultiply(t)),ed(r)},"runge-kutta":function(t){const{position:e,velocity:i,load:s,mass:n}=this,r=td(),o=td(),a=td(),c=td(),l=td(),h=td(i);r.setFromVector(s).scalarDivide(n).scalarMultiply(t).scalarDivide(2),o.setFromVector(s).vectorAdd(r).scalarDivide(n).scalarMultiply(t).scalarDivide(2),a.setFromVector(s).vectorAdd(o).scalarDivide(n).scalarMultiply(t).scalarDivide(2),c.setFromVector(s).vectorAdd(a).scalarDivide(n).scalarMultiply(t).scalarDivide(2),o.scalarMultiply(2),a.scalarMultiply(2),l.setFromVector(r).vectorAdd(o).vectorAdd(a).vectorAdd(c).scalarDivide(6),h.vectorAdd(l),i.setFromVector(h),e.vectorAdd(h.scalarMultiply(t)),ed(r)}},Emitter=function(t=qa){return this.makeName(t.name),this.register(),this.initializePositions(),this.set(this.defs),this.onEnter=Ua,this.onLeave=Ua,this.onDown=Ua,this.onUp=Ua,this.fillColorFactory=Oh({name:`${this.name}-fillColorFactory`}),this.strokeColorFactory=Oh({name:`${this.name}-strokeColorFactory`}),this.range=id(),this.rangeFrom=id(),this.preAction=Ua,this.stampAction=Ua,this.postAction=Ua,this.particleStore=[],this.deadParticles=[],this.liveParticles=[],t.group||(t.group=bd),this.set(t),this.purge&&this.purgeArtefact(this.purge),this},Kf=Emitter.prototype=yc();Kf.type="Emitter",Kf.lib=gi,Kf.isArtefact=!0,Kf.isAsset=!1,ml(Kf),tf(Kf);const qf={world:null,artefact:null,range:null,rangeFrom:null,generationRate:0,particleCount:0,generateAlongPath:null,generateInArea:null,generateFromExistingParticles:!1,generateFromExistingParticleHistories:!1,limitDirectionToAngleMultiples:0,generationChoke:15,killAfterTime:0,killAfterTimeVariation:0,killRadius:0,killRadiusVariation:0,killBeyondCanvas:!1,historyLength:1,forces:null,mass:1,massVariation:0,engine:bi,hitRadius:10,showHitRadius:!1,hitRadiusColor:ae,resetAfterBlur:3};Kf.defs=cc(Kf.defs,qf),Kf.packetExclusions=hc(Kf.packetExclusions,["forces","particleStore","deadParticles","liveParticles","fillColorFactory","strokeColorFactory"]),Kf.packetObjects=hc(Kf.packetObjects,["world","artefact","generateInArea","generateAlongPath"]),Kf.packetFunctions=hc(Kf.packetFunctions,["preAction","stampAction","postAction"]),Kf.finalizePacketOut=function(t,e){const i=e.forces||this.forces||!1;if(i){const e=[];i.forEach((t=>{t.substring?e.push(t):oc(t)&&t.name&&e.push(t.name)})),t.forces=e}const s=[];return this.particleStore.forEach((t=>s.push(t.saveAsPacket()))),t.particleStore=s,t},Kf.postCloneAction=function(t){return t},Kf.factoryKill=function(t,e){this.isRunning=!1,t&&this.artefact.kill(),e&&this.world.kill(),this.fillColorFactory.kill(),this.strokeColorFactory.kill(),this.deadParticles.forEach((t=>t.kill())),this.liveParticles.forEach((t=>t.kill())),this.particleStore.forEach((t=>t.kill()))};const Qf=Kf.setters,Jf=Kf.deltaSetters;Qf.rangeX=function(t){this.range.x=t},Qf.rangeY=function(t){this.range.y=t},Qf.rangeZ=function(t){this.range.z=t},Qf.range=function(t){this.range.set(t)},Qf.rangeFromX=function(t){this.rangeFrom.x=t},Qf.rangeFromY=function(t){this.rangeFrom.y=t},Qf.rangeFromZ=function(t){this.rangeFrom.z=t},Qf.rangeFrom=function(t){this.rangeFrom.set(t)},Qf.preAction=function(t){nc(t)&&(this.preAction=t,this.dirtyFilterIdentifier=!0)},Qf.stampAction=function(t){nc(t)&&(this.stampAction=t,this.dirtyFilterIdentifier=!0)},Qf.postAction=function(t){nc(t)&&(this.postAction=t,this.dirtyFilterIdentifier=!0)},Qf.world=function(t){let e;t.substring?e=P[t]:oc(t)&&t.type==Vo&&(e=t),e&&(this.world=e)},Qf.artefact=function(t){let e;t.substring?e=o[t]:oc(t)&&t.isArtefact&&(e=t),e&&(this.artefact=e,this.dirtyFilterIdentifier=!0)},Qf.generateAlongPath=function(t){let e;t.substring?e=o[t]:oc(t)&&t.isArtefact&&(e=t),e&&e.useAsPath?this.generateAlongPath=e:this.generateAlongPath=!1,this.dirtyFilterIdentifier=!0},Qf.generateInArea=function(t){let e;t.substring?e=o[t]:oc(t)&&t.isArtefact&&(e=t),this.generateInArea=e||!1,this.dirtyFilterIdentifier=!0},Qf.fillColor=function(t){this.fillColorFactory.set({color:t}),this.dirtyFilterIdentifier=!0},Qf.fillMinimumColor=function(t){this.fillColorFactory.set({minimumColor:t}),this.dirtyFilterIdentifier=!0},Qf.fillMaximumColor=function(t){this.fillColorFactory.set({maximumColor:t}),this.dirtyFilterIdentifier=!0},Qf.strokeColor=function(t){this.strokeColorFactory.set({color:t}),this.dirtyFilterIdentifier=!0},Qf.strokeMinimumColor=function(t){this.strokeColorFactory.set({minimumColor:t}),this.dirtyFilterIdentifier=!0},Qf.strokeMaximumColor=function(t){this.strokeColorFactory.set({maximumColor:t}),this.dirtyFilterIdentifier=!0},Qf.hitRadius=function(t){t.toFixed&&(this.hitRadius=t,this.width=this.height=2*t)},Jf.hitRadius=function(t){t.toFixed&&(this.hitRadius+=t,this.width=this.height=2*this.hitRadius)},Qf.width=function(t){t.toFixed&&(this.hitRadius=t/2,this.width=this.height=t)},Jf.width=function(t){t.toFixed&&(this.hitRadius=t/2,this.width=this.height=t)},Qf.height=Qf.width,Jf.height=Jf.width,Kf.prepareStamp=function(){this.dirtyHost&&(this.dirtyHost=!1,this.dirtyDimensions=!0),(this.dirtyScale||this.dirtyDimensions||this.dirtyStart||this.dirtyOffset||this.dirtyHandle)&&(this.dirtyPathObject=!0),this.dirtyScale&&this.cleanScale(),this.dirtyDimensions&&this.cleanDimensions(),this.dirtyLock&&this.cleanLock(),this.dirtyStart&&this.cleanStart(),this.dirtyOffset&&this.cleanOffset(),this.dirtyHandle&&this.cleanHandle(),this.dirtyRotation&&this.cleanRotation(),(this.lockTo.includes($s)||this.lockTo.includes(hn))&&(this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtyStampHandlePositions&&this.cleanStampHandlePositions();const t=et(),{particleStore:e,deadParticles:i,liveParticles:s,particleCount:n,generationRate:r,resetAfterBlur:o}=this;let a=this.generatorChoke;a||(this.generatorChoke=a=t),e.forEach((t=>{t.isRunning?s.push(t):i.push(t)})),e.length=0,i.forEach((t=>Zf(t))),i.length=0,e.push(...s),s.length=0;let c=t-a;if(c/1e3>o&&(c=0,this.generatorChoke=t),c>0&&r){let i=V(r/1e3*c);if(n){const t=n-e.length;t<=0?i=0:t<i&&(i=t)}i&&(this.addParticles(i),this.generatorChoke=t)}this.prepareStampTabsHelper()},Kf.addParticles=function(t){const e=function(t,e){return t+(ct()*e*2-e)},i=function(t,e){return t+ct()*e};let s,n,r,o,a,c;const l=et(),{historyLength:h,engine:u,forces:d,mass:f,massVariation:p,fillColorFactory:m,strokeColorFactory:g,range:y,rangeFrom:b,currentStampPosition:S,particleStore:k,killAfterTime:A,killAfterTimeVariation:v,killRadius:P,killRadiusVariation:C,killBeyondCanvas:w,currentRotation:x,generateAlongPath:O,generateInArea:D,generateFromExistingParticles:R,generateFromExistingParticleHistories:F,limitDirectionToAngleMultiples:H,generationChoke:E}=this,{x:I,y:T,z:$}=y,{x:L,y:M,z:N}=b;if(D){const y=this.currentHost;if(y){const b=y.element,{width:S,height:x}=b;D.pathObject&&!D.dirtyPathObject||D.cleanPathObject();const O=qh(),R=O.engine,F=eu(),{pathObject:H,winding:X,currentStart:Y}=D;[r,o]=Y;const G=t=>R.isPointInPath(H,...t,X);O.rotateDestination(R,r,o,D);t:for(s=0;s<t;s++){let t=!1;for(;!t;){if(l+E<et())break t;F.set(ct()*S,ct()*x),G(F)&&(t=!0)}n=Uf(),n.set({positionX:F[0],positionY:F[1],positionZ:0,velocityX:i(L,I),velocityY:i(M,T),velocityZ:i(N,$),historyLength:h,engine:u,forces:d,mass:e(f,p),fill:m.getRangeColor(ct()),stroke:g.getRangeColor(ct())}),a=B(e(A,v)),c=B(e(P,C)),n.run(a,c,w),k.push(n)}Qh(O),iu(F)}}else if(O){if(O.useAsPath){O.pathObject&&!O.dirtyPathObject||O.cleanPathObject();t:for(s=0;s<t;s++){let t=!1,s=!1;for(;!s;){if(l+E<et())break t;t=O.getPathPositionData(ct(),!0),t&&(s=!0)}n=Uf(),n.set({positionX:t.x,positionY:t.y,positionZ:0,velocityX:i(L,I),velocityY:i(M,T),velocityZ:i(N,$),historyLength:h,engine:u,forces:d,mass:e(f,p),fill:m.getRangeColor(ct()),stroke:g.getRangeColor(ct())}),a=B(e(A,v)),c=B(e(P,C)),n.run(a,c,w),k.push(n)}}}else if(F){const r=k.length,o=td();let l,y,b,O;for(s=0;s<t;s++)r?(y=k[V(ct()*r)],b=y.history,b&&b.length>1?([,,...O]=b[V(ct()*b.length)],O?o.setFromArray(O):o.setFromVector(y.position)):o.setFromVector(y.position)):o.setFromArray(S),n=Uf(),n.set({positionX:o.x,positionY:o.y,positionZ:o.z,historyLength:h,engine:u,forces:d,mass:e(f,p),fill:m.getRangeColor(ct()),stroke:g.getRangeColor(ct())}),H?(o.zero(),l=V(360/H),o.x=i(L,I),o.rotate(V(ct()*l)*H),n.set({velocityX:o.x,velocityY:o.y,velocityZ:i(N,$)})):n.set({velocityX:i(L,I),velocityY:i(M,T),velocityZ:i(N,$)}),ed(o),n.velocity.rotate(x),a=B(e(A,v)),c=B(e(P,C)),n.run(a,c,w),k.push(n)}else if(R){const r=k.length,o=td();let l,y;for(s=0;s<t;s++)r?(y=k[V(ct()*r)],o.setFromVector(y.position)):o.setFromArray(S),n=Uf(),n.set({positionX:o.x,positionY:o.y,positionZ:o.z,historyLength:h,engine:u,forces:d,mass:e(f,p),fill:m.getRangeColor(ct()),stroke:g.getRangeColor(ct())}),H?(o.zero(),l=V(360/H),o.x=i(L,I),o.rotate(V(ct()*l)*H),n.set({velocityX:o.x,velocityY:o.y,velocityZ:i(N,$)})):n.set({velocityX:i(L,I),velocityY:i(M,T),velocityZ:i(N,$)}),ed(o),n.velocity.rotate(x),a=B(e(A,v)),c=B(e(P,C)),n.run(a,c,w),k.push(n)}else for([r,o]=S,s=0;s<t;s++)n=Uf(),n.set({positionX:r,positionY:o,positionZ:0,velocityX:i(L,I),velocityY:i(M,T),velocityZ:i(N,$),historyLength:h,engine:u,forces:d,mass:e(f,p),fill:m.getRangeColor(ct()),stroke:g.getRangeColor(ct())}),n.velocity.rotate(x),a=B(e(A,v)),c=B(e(P,C)),n.run(a,c,w),k.push(n)},Kf.regularStamp=function(){const{world:t,artefact:e,particleStore:i,preAction:s,stampAction:n,postAction:r,lastUpdated:o,resetAfterBlur:a,showHitRadius:c,hitRadius:l,hitRadiusColor:h,currentStampPosition:u}=this,d=this.currentHost;let f=gt;const p=et();if(o&&(f=(p-o)/1e3),f>a&&(i.forEach((t=>Zf(t))),i.length=0,f=gt),i.forEach((e=>e.applyForces(t,d))),i.forEach((e=>e.update(f,t))),s.call(this,d),i.forEach((t=>{t.manageHistory(f,d),n.call(this,e,t,d)})),r.call(this,d),c){const t=d.engine;t.save(),t.lineWidth=1,t.strokeStyle=h,t.setTransform(1,0,0,1,0,0),t.beginPath(),t.arc(u[0],u[1],l,0,nt),t.stroke(),t.restore()}this.lastUpdated=p},Kf.checkHit=function(t=[],e){if(this.noUserInteraction)return!1;const i=K(t)?t:[t],s=this.currentStampPosition;let n,r,o=!1;return!!i.some((t=>{if(K(t))n=t[0],r=t[1];else{if(!fc(t,t.x,t.y))return!1;n=t.x,r=t.y}if(!n.toFixed||!r.toFixed||isNaN(n)||isNaN(r))return!1;const e=td(s).vectorSubtract(t);return e.getMagnitude()<this.hitRadius&&(o=!0),ed(e),o}),this)&&this.checkHitReturn(n,r,e)};const tp=function(t){return!!t&&new Emitter(t)};I.Emitter=Emitter;const Gradient=function(t=qa){return this.stylesInit(t),this},ep=Gradient.prototype=yc();ep.type="Gradient",ep.lib=uo,ep.isArtefact=!1,ep.isAsset=!1,ml(ep),Df(ep),ep.packetObjects=hc(ep.packetObjects,["palette"]),ep.buildStyle=function(t){if(t){const e=t.engine;if(e){const t=e.createLinearGradient(...this.gradientArgs);return this.addStopsToGradient(t,this.paletteStart,this.paletteEnd,this.cyclePalette)}}return le},ep.updateGradientArgs=function(t,e){const i=this.gradientArgs,s=this.currentStart,n=this.currentEnd,r=s[0]+t,o=s[1]+e,a=n[1]+e;let c=n[0]+t;r==c&&o==a&&c++,i.length=0,i.push(r,o,c,a)};const ip=function(t){return!!t&&new Gradient(t)};I.Gradient=Gradient;const Filter=function(t=qa){return this.makeName(t.name),this.register(),this.actions=[],this.set(t),this},sp=Filter.prototype=yc();sp.type=vo,sp.lib=Ai,sp.isArtefact=!1,sp.isAsset=!1,ml(sp);const np={actions:null,method:Na,lineIn:Na,lineMix:Na,lineOut:Na,opacity:1,alpha:255,angle:0,areaAlphaLevels:null,asset:Na,blend:sn,blue:0,blueInBlue:0,blueColor:ae,blueInGreen:0,blueInRed:0,channelX:yr,channelY:Xi,clamp:0,compose:_r,copyHeight:1,copyWidth:1,copyX:0,copyY:0,concurrent:!1,easing:As,excludeAlpha:!0,excludeBlue:!1,excludeGreen:!1,excludeRed:!1,excludeTransparentPixels:!0,gradient:null,green:0,greenInBlue:0,greenColor:ae,greenInGreen:0,greenInRed:0,gutterHeight:1,gutterWidth:1,height:1,highAlpha:255,highBlue:255,highColor:xa,highGreen:255,highRed:255,includeAlpha:!1,includeBlue:!0,includeGreen:!0,includeRed:!0,innerRadius:0,keepOnlyChangedAreas:!1,level:0,lowAlpha:0,lowBlue:0,lowColor:ae,lowGreen:0,lowRed:0,minimumColorDistance:1e3,noiseType:ur,noWrap:!1,offsetAlphaX:0,offsetAlphaY:0,offsetBlueX:0,offsetBlueY:0,offsetGreenX:0,offsetGreenY:0,offsetRedX:0,offsetRedY:0,offsetX:0,offsetY:0,offsetAlphaMin:0,offsetAlphaMax:0,offsetBlueMin:0,offsetBlueMax:0,offsetGreenMin:0,offsetGreenMax:0,offsetRedMin:0,offsetRedMax:0,offsetMin:0,offsetMax:0,opaqueAt:1,operation:Es,outerRadius:"30%",palette:ce,passes:1,points:null,postProcessResults:!0,processHorizontal:!0,processVertical:!0,radius:1,ranges:null,red:0,redInBlue:0,redColor:ae,redInGreen:0,redInRed:0,reference:ae,scaleX:1,scaleY:1,seed:Qe,smoothing:0,startX:mn,startY:mn,step:1,strength:1,staticSwirls:null,tileHeight:1,tileWidth:1,tileRadius:1,tolerance:0,transparentAt:0,transparentEdges:!1,useBluenoise:!1,useLabForPaletteDistance:!1,useMixedChannel:!0,useNaturalGrayscale:!1,weights:null,width:1};sp.defs=cc(sp.defs,np),sp.kill=function(){const t=this.name;let e;return bt(f).forEach((i=>{e=i.filters,e&&e.includes(t)&&uc(e,t)})),bt(g).forEach((i=>{e=i.filters,e&&e.includes(t)&&uc(e,t)})),bt(u).forEach((i=>{e=i.filters,e&&e.includes(t)&&uc(e,t)})),this.deregister(),this};const rp=sp.setters;sp.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs;let r,o,a,c;for(o=0;o<i;o++)a=e[o],c=t[a],a&&a!=Vs&&null!=c&&(r=s[a],r?r.call(this,c):typeof n[a]!=pa&&(this[a]=c))}return this.method&&op[this.method]&&op[this.method](this),this.dirtyFilterIdentifier=!0,this},sp.setDelta=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.deltaSetters,n=this.defs;let r,o,a,c;for(o=0;o<i;o++)a=e[o],c=t[a],a&&a!=Vs&&null!=c&&(r=s[a],r?r.call(this,c):typeof n[a]!=pa&&(this[a]=Ga(this[a],c)))}return this.method&&op[this.method]&&op[this.method](this),this.dirtyFilterIdentifier=!0,this},rp.actions=function(t){null!=t&&(this.actions=t)};const op=U({alphaToChannels:function(t){t.actions=[{action:Gt,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,excludeRed:null==t.excludeRed||t.excludeRed,excludeGreen:null==t.excludeGreen||t.excludeGreen,excludeBlue:null==t.excludeBlue||t.excludeBlue}]},areaAlpha:function(t){t.actions=[{action:Zt,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,tileWidth:null!=t.tileWidth?t.tileWidth:1,tileHeight:null!=t.tileHeight?t.tileHeight:1,offsetX:null!=t.offsetX?t.offsetX:0,offsetY:null!=t.offsetY?t.offsetY:0,gutterWidth:null!=t.gutterWidth?t.gutterWidth:1,gutterHeight:null!=t.gutterHeight?t.gutterHeight:1,areaAlphaLevels:null!=t.areaAlphaLevels?t.areaAlphaLevels:[255,0,0,0]}]},binary:function(t){const e=null!=t.lowRed?t.lowRed:0,i=null!=t.lowGreen?t.lowGreen:0,s=null!=t.lowBlue?t.lowBlue:0,n=null!=t.lowAlpha?t.lowAlpha:255,r=null!=t.highRed?t.highRed:255,o=null!=t.highGreen?t.highGreen:255,a=null!=t.highBlue?t.highBlue:255,c=null!=t.highAlpha?t.highAlpha:255,l=null!=t.low?t.low:[e,i,s,n],h=null!=t.high?t.high:[r,o,a,c];t.actions=[{action:qo,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,level:null!=t.level?t.level:128,red:null!=t.red?t.red:128,green:null!=t.green?t.green:128,blue:null!=t.blue?t.blue:128,alpha:null!=t.alpha?t.alpha:128,low:l,high:h,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null!=t.includeAlpha&&t.includeAlpha,useMixedChannel:null!=t.useMixedChannel&&t.useMixedChannel}]},blend:function(t){t.actions=[{action:he,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,lineMix:null!=t.lineMix?t.lineMix:Na,blend:null!=t.blend?t.blend:sn,offsetX:null!=t.offsetX?t.offsetX:0,offsetY:null!=t.offsetY?t.offsetY:0,opacity:null!=t.opacity?t.opacity:1}]},blue:function(t){t.actions=[{action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,excludeRed:!0,excludeGreen:!0}]},blur:function(t){t.actions=[{action:pe,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null!=t.includeAlpha&&t.includeAlpha,excludeTransparentPixels:null!=t.excludeTransparentPixels&&t.excludeTransparentPixels,processHorizontal:null==t.processHorizontal||t.processHorizontal,processVertical:null==t.processVertical||t.processVertical,radius:null!=t.radius?t.radius:1,passes:null!=t.passes?t.passes:1,step:null!=t.step?t.step:1}]},brightness:function(t){const e=null!=t.level?t.level:1;t.actions=[{action:Bs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,red:e,green:e,blue:e}]},channelLevels:function(t){t.actions=[{action:vs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,red:null!=t.red?t.red:[0],green:null!=t.green?t.green:[0],blue:null!=t.blue?t.blue:[0],alpha:null!=t.alpha?t.alpha:[255]}]},channels:function(t){t.actions=[{action:Bs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,red:null!=t.red?t.red:1,green:null!=t.green?t.green:1,blue:null!=t.blue?t.blue:1,alpha:null!=t.alpha?t.alpha:1}]},channelstep:function(t){let e=null!=t.clamp?t.clamp:oi;Re.includes(e)||(e=oi),t.actions=[{action:co,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,clamp:e,red:null!=t.red?t.red:1,green:null!=t.green?t.green:1,blue:null!=t.blue?t.blue:1}]},channelsToAlpha:function(t){t.actions=[{action:xe,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue}]},chroma:function(t){const e=[],i=[];null!=t.ranges&&t.ranges.forEach((t=>{6==t.length?e.push(t):2==t.length&&(t[0].substring&&t[1].substring&&(i.length=0,t.forEach((t=>{const[e,s,n]=lu.extractRGBfromColor(t);i.push(e,s,n)}))),e.push(i))})),t.actions=[{action:Oe,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,ranges:e}]},chromakey:function(t){let e=null!=t.red?t.red:0,i=null!=t.green?t.green:255,s=null!=t.blue?t.blue:0;null!=t.reference&&([e,i,s]=lu.extractRGBfromColor(t.reference),t.red=e,t.green=i,t.blue=s,delete t.reference),t.actions=[{action:$e,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,red:e,green:i,blue:s,transparentAt:null!=t.transparentAt?t.transparentAt:0,opaqueAt:null!=t.opaqueAt?t.opaqueAt:1}]},clampChannels:function(t){let e=null!=t.lowRed?t.lowRed:0,i=null!=t.lowGreen?t.lowGreen:0,s=null!=t.lowBlue?t.lowBlue:0,n=null!=t.highRed?t.highRed:255,r=null!=t.highGreen?t.highGreen:255,o=null!=t.highBlue?t.highBlue:255;null!=t.lowColor&&([e,i,s]=lu.extractRGBfromColor(t.lowColor),t.lowRed=e,t.lowGreen=i,t.lowBlue=s,delete t.lowColor),null!=t.highColor&&([n,r,o]=lu.extractRGBfromColor(t.highColor),t.highRed=n,t.highGreen=r,t.highBlue=o,delete t.highColor),t.actions=[{action:De,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,lowRed:e,lowGreen:i,lowBlue:s,highRed:n,highGreen:r,highBlue:o}]},compose:function(t){t.actions=[{action:Le,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,lineMix:null!=t.lineMix?t.lineMix:Na,compose:null!=t.compose?t.compose:_r,offsetX:null!=t.offsetX?t.offsetX:0,offsetY:null!=t.offsetY?t.offsetY:0,opacity:null!=t.opacity?t.opacity:1}]},corrode:function(t){t.actions=[{action:We,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,width:null!=t.width?t.width:3,height:null!=t.height?t.height:3,offsetX:null!=t.offsetX?t.offsetX:1,offsetY:null!=t.offsetY?t.offsetY:1,includeRed:null!=t.includeRed&&t.includeRed,includeGreen:null!=t.includeGreen&&t.includeGreen,includeBlue:null!=t.includeBlue&&t.includeBlue,includeAlpha:null==t.includeAlpha||t.includeAlpha,operation:null!=t.operation?t.operation:Es,opacity:null!=t.opacity?t.opacity:1}]},curveWeights:function(t){t.actions=[{action:Pa,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,weights:null!=t.weights&&t.weights,useMixedChannel:null==t.useMixedChannel||t.useMixedChannel}]},cyan:function(t){t.actions=[{action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeGreen:!0,includeBlue:!0,excludeRed:!0}]},displace:function(t){t.actions=[{action:si,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,lineMix:null!=t.lineMix?t.lineMix:Na,opacity:null!=t.opacity?t.opacity:1,channelX:null!=t.channelX?t.channelX:yr,channelY:null!=t.channelY?t.channelY:Xi,offsetX:null!=t.offsetX?t.offsetX:0,offsetY:null!=t.offsetY?t.offsetY:0,scaleX:null!=t.scaleX?t.scaleX:1,scaleY:null!=t.scaleY?t.scaleY:1,transparentEdges:null!=t.transparentEdges&&t.transparentEdges}]},edgeDetect:function(t){t.actions=[{action:Hs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,width:3,height:3,offsetX:1,offsetY:1,includeRed:!0,includeGreen:!0,includeBlue:!0,includeAlpha:!1,weights:[0,1,0,1,-4,1,0,1,0]}]},emboss:function(t){const e=[];t.useNaturalGrayscale?e.push({action:Ni,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:di}):e.push({action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:di,includeRed:!0,includeGreen:!0,includeBlue:!0}),t.clamp&&e.push({action:De,lineIn:di,lineOut:di,lowRed:0+t.clamp,lowGreen:0+t.clamp,lowBlue:0+t.clamp,highRed:255-t.clamp,highGreen:255-t.clamp,highBlue:255-t.clamp}),t.smoothing&&e.push({action:Ii,lineIn:di,lineOut:di,radius:t.smoothing}),e.push({action:ui,lineIn:di,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,angle:null!=t.angle?t.angle:0,strength:null!=t.strength?t.strength:1,tolerance:null!=t.tolerance?t.tolerance:0,keepOnlyChangedAreas:null!=t.keepOnlyChangedAreas&&t.keepOnlyChangedAreas,postProcessResults:null==t.postProcessResults||t.postProcessResults}),t.actions=e},flood:function(t){let e=null!=t.red?t.red:0,i=null!=t.green?t.green:0,s=null!=t.blue?t.blue:0,n=null!=t.alpha?t.alpha:255;const r=null!=t.excludeAlpha&&t.excludeAlpha;null!=t.reference&&([e,i,s,n]=lu.extractRGBfromColor(t.reference),n=lt(255*n),t.red=e,t.green=i,t.blue=s,t.alpha=n,delete t.reference),t.actions=[{action:Pi,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,red:e,green:i,blue:s,alpha:n,excludeAlpha:r}]},gaussianBlur:function(t){t.actions=[{action:Ii,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,radius:null!=t.radius?t.radius:1}]},glitch:function(t){t.actions=[{action:$i,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,useMixedChannel:null==t.useMixedChannel||t.useMixedChannel,seed:null!=t.seed?t.seed:Qe,step:null!=t.step?t.step:1,offsetMin:null!=t.offsetMin?t.offsetMin:0,offsetMax:null!=t.offsetMax?t.offsetMax:0,offsetRedMin:null!=t.offsetRedMin?t.offsetRedMin:0,offsetRedMax:null!=t.offsetRedMax?t.offsetRedMax:0,offsetGreenMin:null!=t.offsetGreenMin?t.offsetGreenMin:0,offsetGreenMax:null!=t.offsetGreenMax?t.offsetGreenMax:0,offsetBlueMin:null!=t.offsetBlueMin?t.offsetBlueMin:0,offsetBlueMax:null!=t.offsetBlueMax?t.offsetBlueMax:0,offsetAlphaMin:null!=t.offsetAlphaMin?t.offsetAlphaMin:0,offsetAlphaMax:null!=t.offsetAlphaMax?t.offsetAlphaMax:0,transparentEdges:null!=t.transparentEdges&&t.transparentEdges,level:null!=t.level?t.level:0}]},gray:function(t){t.actions=[{action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:!0,includeGreen:!0,includeBlue:!0}]},grayscale:function(t){t.actions=[{action:Ni,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1}]},green:function(t){t.actions=[{action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,excludeRed:!0,excludeBlue:!0}]},image:function(t){t.actions=[{action:Hn,lineOut:null!=t.lineOut?t.lineOut:Na,asset:null!=t.asset?t.asset:Na,width:null!=t.width?t.width:1,height:null!=t.height?t.height:1,copyWidth:null!=t.copyWidth?t.copyWidth:1,copyHeight:null!=t.copyHeight?t.copyHeight:1,copyX:null!=t.copyX?t.copyX:0,copyY:null!=t.copyY?t.copyY:0}]},invert:function(t){t.actions=[{action:rs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:!0,includeGreen:!0,includeBlue:!0}]},magenta:function(t){t.actions=[{action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:!0,includeBlue:!0,excludeGreen:!0}]},mapToGradient:function(t){t.gradient&&t.gradient.substring&&(t.gradient=D[t.gradient]),t.actions=[{action:Ds,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,useNaturalGrayscale:null!=t.useNaturalGrayscale&&t.useNaturalGrayscale,gradient:t.gradient||ip()}]},matrix:function(t){t.actions=[{action:Hs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,width:3,height:3,offsetX:1,offsetY:1,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null!=t.includeAlpha&&t.includeAlpha,weights:null!=t.weights?t.weights:[0,0,0,0,1,0,0,0,0]}]},matrix5:function(t){t.actions=[{action:Hs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,width:5,height:5,offsetX:2,offsetY:2,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null!=t.includeAlpha&&t.includeAlpha,weights:null!=t.weights?t.weights:[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]}]},newsprint:function(t){t.actions=[{action:_s,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,width:null!=t.width?t.width:1}]},notblue:function(t){t.actions=[{action:Br,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeBlue:!0,level:0}]},notgreen:function(t){t.actions=[{action:Br,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeGreen:!0,level:0}]},notred:function(t){t.actions=[{action:Br,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:!0,level:0}]},offset:function(t){t.actions=[{action:rn,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,offsetRedX:null!=t.offsetX?t.offsetX:0,offsetRedY:null!=t.offsetY?t.offsetY:0,offsetGreenX:null!=t.offsetX?t.offsetX:0,offsetGreenY:null!=t.offsetY?t.offsetY:0,offsetBlueX:null!=t.offsetX?t.offsetX:0,offsetBlueY:null!=t.offsetY?t.offsetY:0,offsetAlphaX:null!=t.offsetX?t.offsetX:0,offsetAlphaY:null!=t.offsetY?t.offsetY:0}]},offsetChannels:function(t){t.actions=[{action:rn,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,offsetRedX:null!=t.offsetRedX?t.offsetRedX:0,offsetRedY:null!=t.offsetRedY?t.offsetRedY:0,offsetGreenX:null!=t.offsetGreenX?t.offsetGreenX:0,offsetGreenY:null!=t.offsetGreenY?t.offsetGreenY:0,offsetBlueX:null!=t.offsetBlueX?t.offsetBlueX:0,offsetBlueY:null!=t.offsetBlueY?t.offsetBlueY:0,offsetAlphaX:null!=t.offsetAlphaX?t.offsetAlphaX:0,offsetAlphaY:null!=t.offsetAlphaY?t.offsetAlphaY:0}]},pixelate:function(t){t.actions=[{action:kn,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,tileWidth:null!=t.tileWidth?t.tileWidth:1,tileHeight:null!=t.tileHeight?t.tileHeight:1,offsetX:null!=t.offsetX?t.offsetX:0,offsetY:null!=t.offsetY?t.offsetY:0,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null!=t.includeAlpha&&t.includeAlpha}]},randomNoise:function(t){const e=Qs.includes(t.noiseType)?t.noiseType:ur;t.actions=[{action:dr,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,width:null!=t.width?t.width:1,height:null!=t.height?t.height:1,seed:null!=t.seed?t.seed:Qe,noiseType:e,level:null!=t.level?t.level:0,noWrap:null!=t.noWrap&&t.noWrap,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null==t.includeAlpha||t.includeAlpha,excludeTransparentPixels:null==t.excludeTransparentPixels||t.excludeTransparentPixels}]},red:function(t){t.actions=[{action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,excludeGreen:!0,excludeBlue:!0}]},reducePalette:function(t){let e=null!=t.palette?t.palette:ce;t.actions=[],e.substring&&e.includes(_t)&&(e=e.split(_t),e.forEach((t=>t.trim())));let i=t.useBluenoise?fe:t.noiseType||ur;Qs.includes(i)||(i=ur),t.actions.push({action:br,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,seed:null!=t.seed?t.seed:Qe,minimumColorDistance:null!=t.minimumColorDistance?t.minimumColorDistance:1e3,useLabForPaletteDistance:null!=t.useLabForPaletteDistance&&t.useLabForPaletteDistance,palette:e,noiseType:i,opacity:null!=t.opacity?t.opacity:1})},saturation:function(t){const e=null!=t.level?t.level:1;t.actions=[{action:Bs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,red:e,green:e,blue:e,saturation:!0}]},sepia:function(t){t.actions=[{action:ta,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,redInRed:.393,redInGreen:.349,redInBlue:.272,greenInRed:.769,greenInGreen:.686,greenInBlue:.534,blueInRed:.189,blueInGreen:.168,blueInBlue:.131}]},sharpen:function(t){t.actions=[{action:Hs,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,width:3,height:3,offsetX:1,offsetY:1,includeRed:!0,includeGreen:!0,includeBlue:!0,includeAlpha:!1,weights:[0,-1,0,-1,5,-1,0,-1,0]}]},swirl:function(t){const e=null!=t.startX?t.startX:mn,i=null!=t.startY?t.startY:mn,s=null!=t.innerRadius?t.innerRadius:0,n=null!=t.outerRadius?t.outerRadius:"30%",r=null!=t.angle?t.angle:0,o=null!=t.easing?t.easing:As,a=[...null!=t.staticSwirls?t.staticSwirls:[]];a.push([e,i,s,n,r,o]),t.actions=[{action:mo,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,swirls:a}]},threshold:function(t){let e=null!=t.lowRed?t.lowRed:0,i=null!=t.lowGreen?t.lowGreen:0,s=null!=t.lowBlue?t.lowBlue:0,n=null!=t.lowAlpha?t.lowAlpha:255,r=null!=t.highRed?t.highRed:255,o=null!=t.highGreen?t.highGreen:255,a=null!=t.highBlue?t.highBlue:255,c=null!=t.highAlpha?t.highAlpha:255;null!=t.lowColor&&([e,i,s,n]=lu.extractRGBfromColor(t.lowColor),n=lt(255*n),t.lowRed=e,t.lowGreen=i,t.lowBlue=s,t.lowAlpha=n,t.low=[e,i,s,n],delete t.lowColor),null!=t.highColor&&([r,o,a,c]=lu.extractRGBfromColor(t.highColor),c=lt(255*c),t.highRed=r,t.highGreen=o,t.highBlue=a,t.highAlpha=c,t.high=[r,o,a,c],delete t.highColor);const l=null!=t.low?t.low:[e,i,s,n],h=null!=t.high?t.high:[r,o,a,c];t.actions=[{action:qo,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,level:null!=t.level?t.level:128,red:null!=t.red?t.red:128,green:null!=t.green?t.green:128,blue:null!=t.blue?t.blue:128,alpha:null!=t.alpha?t.alpha:128,low:l,high:h,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null!=t.includeAlpha&&t.includeAlpha,useMixedChannel:null==t.useMixedChannel||t.useMixedChannel}]},tiles:function(t){t.actions=[{action:Jo,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,tileWidth:null!=t.tileWidth?t.tileWidth:1,tileHeight:null!=t.tileHeight?t.tileHeight:1,tileRadius:null!=t.tileRadius?t.tileRadius:1,offsetX:null!=t.offsetX?t.offsetX:0,offsetY:null!=t.offsetY?t.offsetY:0,angle:null!=t.angle?t.angle:0,points:null!=t.points?t.points:mr,seed:null!=t.seed?t.seed:Qe,includeRed:null==t.includeRed||t.includeRed,includeGreen:null==t.includeGreen||t.includeGreen,includeBlue:null==t.includeBlue||t.includeBlue,includeAlpha:null!=t.includeAlpha&&t.includeAlpha}]},tint:function(t){let e=null!=t.redInRed?t.redInRed:1,i=null!=t.redInGreen?t.redInGreen:0,s=null!=t.redInBlue?t.redInBlue:0,n=null!=t.greenInRed?t.greenInRed:0,r=null!=t.greenInGreen?t.greenInGreen:1,o=null!=t.greenInBlue?t.greenInBlue:0,a=null!=t.blueInRed?t.blueInRed:0,c=null!=t.blueInGreen?t.blueInGreen:0,l=null!=t.blueInBlue?t.blueInBlue:1;null!=t.redColor&&([e,n,a]=lu.extractRGBfromColor(t.redColor),e/=255,n/=255,a/=255,t.redInRed=e,t.greenInRed=n,t.blueInRed=a,delete t.redColor),null!=t.greenColor&&([i,r,c]=lu.extractRGBfromColor(t.greenColor),i/=255,r/=255,c/=255,t.redInGreen=i,t.greenInGreen=r,t.blueInGreen=c,delete t.greenColor),null!=t.blueColor&&([s,o,l]=lu.extractRGBfromColor(t.blueColor),s/=255,o/=255,l/=255,t.redInBlue=s,t.greenInBlue=o,t.blueInBlue=l,delete t.blueColor),t.actions=[{action:ta,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,redInRed:e,redInGreen:i,redInBlue:s,greenInRed:n,greenInGreen:r,greenInBlue:o,blueInRed:a,blueInGreen:c,blueInBlue:l}]},userDefined:function(t){t.actions=[{action:Aa,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1}]},yellow:function(t){t.actions=[{action:se,lineIn:null!=t.lineIn?t.lineIn:Na,lineOut:null!=t.lineOut?t.lineOut:Na,opacity:null!=t.opacity?t.opacity:1,includeRed:!0,includeGreen:!0,excludeBlue:!0}]}}),ap=function(t){return!!t&&new Filter(t)};I.Filter=Filter;const Force=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.set(t),this.action||(this.action=Ua),this},cp=Force.prototype=yc();cp.type="Force",cp.lib="force",cp.isArtefact=!1,cp.isAsset=!1,ml(cp);cp.defs=cc(cp.defs,{action:null}),cp.packetFunctions=hc(cp.packetFunctions,["action"]),cp.kill=function(){return this.deregister(),!0};cp.setters.action=function(t){nc(t)?this.action=t:this.action=Ua};const lp=function(t){return!!t&&new Force(t)};I.Force=Force,lp({name:"gravity",action:(t,e)=>{const{mass:i,load:s}=t,n=td();n.setFromVector(e.gravity).scalarMultiply(i),s.vectorAdd(n),ed(n)}});const Grid=function(t=qa){return this.tileFill=[],this.tileSources=[],this.entityInit(t),t.tileSources||(this.tileSources=[].concat([{type:Be,source:ae},{type:Be,source:xa}])),t.tileFill?K(t.tileFill)&&this.tileFill.length===t.tileFill.length&&(this.tileFill=t.tileFill):(this.tileFill.length=this.columns*this.rows,this.tileFill.fill(0)),this.tilePaths=[],this.tileRealCoordinates=[],this.tileVirtualCoordinates=[],t.dimensions||(t.width||(this.currentDimensions[0]=this.dimensions[0]=20),t.height||(this.currentDimensions[1]=this.dimensions[1]=20)),this},hp=Grid.prototype=yc();hp.type="Grid",hp.lib=gi,hp.isArtefact=!0,hp.isAsset=!1,ml(hp),tf(hp);const up={columns:2,rows:2,columnGutterWidth:1,rowGutterWidth:1,tileSources:null,tileFill:null,gutterColor:"rgb(127 127 127 / 1)"};hp.defs=cc(hp.defs,up),hp.packetExclusions=hc(hp.packetExclusions,["tileSources"]),hp.finalizePacketOut=function(t,e){const i=t.tileSources=[];this.tileSources.forEach((t=>{i.push({type:t.type,source:oc(t.source)?t.source.name:t.source})})),oc(t.gutterColor)&&(t.gutterColor=t.gutterColor.name);const s=it(this.state.saveAsPacket(e))[3];return t=cc(t,s),t=this.handlePacketAnchor(t,e)};const dp=hp.setters,fp=hp.deltaSetters;dp.columns=function(t){if(rc(t)&&(q(t)||(t=parseInt(t,10)),t!=this.columns)){let e,i,s;const n=this.tileFill,r=this.columns,o=[];for(this.columns=t,e=0,i=this.rows;e<i;e++)for(s=0;s<t;s++)s<r?o.push(n[e*r+s]):o.push(0);this.tileFill=o}this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},fp.columns=Ua,dp.rows=function(t){if(rc(t)&&(q(t)||(t=parseInt(t,10)),t!=this.rows)){const e=this.rows;this.rows=t,this.tileFill.length=this.columns*t,e<t&&this.tileFill.fill(0,e*this.columns)}this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},fp.rows=Ua,hp.setAllTilesTo=function(t){return rc(t)&&(q(t)||(t=parseInt(t,10)),this.tileFill.fill(t),this.dirtyFilterIdentifier=!0),this},hp.setTileFill=function(t){const{columns:e,rows:i}=this;return K(t)&&t.length==e*i&&(this.tileFill=t,this.dirtyFilterIdentifier=!0),this},hp.setTilesTo=function(t,e){const i=this.tileFill;return dc(t)&&rc(e)&&(q(e)||(e=parseInt(e,10)),rc(t)?i[t]=e:K(t)&&t.forEach((t=>{rc(t)&&(i[t]=e)})),this.dirtyFilterIdentifier=!0),this},hp.setTileSourceTo=function(t,e){return rc(t)&&oc(e)&&e.type&&e.source&&(this.tileSources[t]=e),this},hp.removeTileSource=function(t){return rc(t)&&t&&(this.tileSources[t]=null,this.tileFill=this.tileFill.map((e=>e===t?0:e))),this},hp.getTileSource=function(t,e){if(rc(t))return rc(e)?this.tileFill[t*this.rows+e]:this.tileFill[t]},hp.getTilesUsingSource=function(t){const e=[];return rc(t)&&this.tileFill.forEach(((i,s)=>i==t&&e.push(s))),e},hp.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject){const t=this.pathObject=new Path2D,e=new Path2D,i=new Path2D,s=this.currentStampHandlePosition,n=this.currentScale,r=this.currentDimensions,o=-s[0]*n,a=-s[1]*n,c=r[0]*n,l=r[1]*n;t.rect(o,a,c,l);const h=this.columns,u=this.rows,d=c/h,f=l/u,p=this.tilePaths,m=this.tileRealCoordinates,g=this.tileVirtualCoordinates;let y,b,S,k;for(e.moveTo(o,a),e.lineTo(o+c,a),y=1;y<=u;y++){const t=a+y*f;e.moveTo(o,t),e.lineTo(o+c,t)}for(this.rowLines=e,i.moveTo(o,a),i.lineTo(o,a+l),b=1;b<=h;b++)S=o+b*d,i.moveTo(S,a),i.lineTo(S,a+l);for(this.columnLines=i,p.length=0,m.length=0,g.length=0,y=0;y<u;y++)for(b=0;b<h;b++){const t=new Path2D;S=b*d,k=y*f,t.rect(o+S,a+k,d,f),p.push(t),g.push([S,k]),m.push([o+S,a+k])}this.currentTileWidth=d,this.currentTileHeight=f}},hp.performFill=function(t){t.save();const e=qh(),i=e.engine,s=e.element,n=this.tileSources,r=this.tileFill,o=this.tilePaths,a=this.tileRealCoordinates,c=this.tileVirtualCoordinates,l=this.winding,h=this.currentTileWidth,u=this.currentTileHeight,d=this.scale,p=this.currentDimensions;let m;n.forEach(((n,g)=>{if(n&&n.type)switch(n.type){case Be:t.fillStyle=n.source;break;case Pe:this.lockFillStyleToEntity=!1,t.fillStyle=n.source.getData(this,this.currentHost);break;case Yi:this.lockFillStyleToEntity=!0,t.fillStyle=n.source.getData(this,this.currentHost)}const y=r.map((t=>t===g));if(y.length)switch(n.type){case Gi:m=n.source.substring?f[n.source]:n.source,m.simpleStamp&&(s.width=p[0]*d,s.height=p[1]*d,i.globalCompositeOperation=_r,i.fillStyle=ae,y.forEach(((t,e)=>{t&&i.fillRect(c[e][0],c[e][1],h,u)})),i.globalCompositeOperation=Zr,m.simpleStamp(e,{startX:0,startY:0,width:p[0]*d,height:p[1]*d,method:Si}),t.drawImage(s,~~a[0][0],~~a[0][1]));break;case Qo:m=n.source.substring?f[n.source]:n.source,m.simpleStamp&&(s.width=h,s.height=u,i.globalCompositeOperation=_r,m.simpleStamp(e,{startX:0,startY:0,width:h,height:u,method:Si}),y.forEach(((e,i)=>e&&t.drawImage(s,~~a[i][0],~~a[i][1]))));break;default:y.forEach(((e,i)=>e&&t.fill(o[i],l)))}}));const g=this.gutterColor,y=this.rowGutterWidth,b=this.columnGutterWidth;let S;if(dc(g)){switch(g.substring?S={type:Be,source:this.gutterColor}:oc(g)?S=g:rc(g)&&oc(n[g])&&(S=n[g]),S.type){case Pe:this.lockFillStyleToEntity=!1,t.strokeStyle=S.source.getData(this,this.currentHost);break;case Yi:this.lockFillStyleToEntity=!0,t.strokeStyle=S.source.getData(this,this.currentHost);break;case Be:t.strokeStyle=S.source}switch(S.type){case Gi:case Qo:if((y||b)&&(m=S.source.substring?f[S.source]:S.source,m.simpleStamp)){const n=this.currentStampHandlePosition,r=this.currentScale,o=n[0]*r,c=n[1]*r;s.width=p[0]*r,s.height=p[1]*r,i.globalCompositeOperation=_r,i.strokeStyle=ae,i.translate(o,c),y&&(i.lineWidth=y,i.stroke(this.rowLines)),b&&(i.lineWidth=b,i.stroke(this.columnLines)),i.globalCompositeOperation=Zr,m.simpleStamp(e,{startX:0,startY:0,width:p[0]*r,height:p[1]*r,method:Si}),t.drawImage(s,~~a[0][0],~~a[0][1]),i.translate(0,0)}break;default:y&&(t.lineWidth=y,t.stroke(this.rowLines)),b&&(t.lineWidth=b,t.stroke(this.columnLines))}}Qh(e),t.restore()},hp.fill=function(t){this.performFill(t)},hp.drawAndFill=function(t){const e=this.pathObject;t.stroke(e),this.currentHost.clearShadow(),this.performFill(t)},hp.fillAndDraw=function(t){const e=this.pathObject;t.stroke(e),this.currentHost.clearShadow(),this.performFill(t),t.stroke(e)},hp.drawThenFill=function(t){const e=this.pathObject;t.stroke(e),this.performFill(t)},hp.fillThenDraw=function(t){const e=this.pathObject;this.performFill(t),t.stroke(e)},hp.checkHit=function(t=[],e){if(this.noUserInteraction)return!1;this.pathObject&&!this.dirtyPathObject||this.cleanPathObject();const i=K(t)?t:[t];let s=!1;e||(e=qh(),s=!0);const n=e.engine,r=this.currentStampPosition,o=r[0],a=r[1],c=new Set,l=this.tilePaths;let h,u,d;const f=t=>{let e,i;if(K(t))e=t[0],i=t[1];else{if(!fc(t,t.x,t.y))return[!1];e=t.x,i=t.y}return!e.toFixed||!i.toFixed||isNaN(e)||isNaN(i)?[!1]:[!0,e,i]};return e.rotateDestination(n,o,a,this),i.some((t=>([h,u,d]=f(t),!!h&&n.isPointInPath(this.pathObject,u,d,this.winding))),this)?(i.forEach((t=>{[h,u,d]=f(t),h&&l.some(((t,e)=>!!n.isPointInPath(t,u,d,this.winding)&&(c.add(e),!0)))})),s&&Qh(e),{x:u,y:d,tiles:[...c],artefact:this}):(s&&Qh(e),!1)};const pp=function(t){return!!t&&new Grid(t)};I.Grid=Grid;const mp={},gp=function(t=qa){const e=(t=qa)=>{if(t&&t.target){let e=t.target,s="";for(;!s&&(mp[e.id]&&(s=e.id),e.tagName!=St);)e=e.parentElement;const n=mp[s];n?(n.onKeyDown(t),i=n.onKeyUp):i=Ua}};let i=Ua;const s=t=>{i(t)};return function(t=qa,e,i){let s=t.zone;if(!s)return new Error("keyboardZone constructor - no zone supplied");if(s.substring&&(s=o[s]),!s||!Mt.includes(s.type))return new Error("keyboardZone constructor - zone object is not a Stack or Canvas wrapper");const n=s.domElement;if(!n)return new Error("keyboardZone constructor - zone does not contain a target DOM element");let r=mp[s.name];if(r||(mp[s.name]={},r=mp[s.name],e(n)),r.extraKeys||(r.extraKeys={Shift:!1,Control:!1,Alt:!1,Meta:!1}),!r.keyGroups){const t={};hs.forEach((e=>t[e]={})),r.keyGroups=t}const a=r.keyGroups;return hs.forEach((e=>{const i=t[e];null!=i&&lc(a[e],i)})),r.onKeyDown||(r.onKeyDown=(t=qa)=>{if(t&&t.key){t.preventDefault();const{extraKeys:e,keyGroups:i}=r,{key:s}=t;if("Tab"==s||"Escape"==s)return void n.blur();if(null!=e[s])return void(e[s]=!0);const{Shift:o,Control:a,Alt:c,Meta:l}=e;let h=i.none;(o||a||c||l)&&(h=o?c?a?l?i.all:i.shiftAltCtrl:l?i.shiftAltMeta:i.shiftAlt:a?l?i.shiftCtrlMeta:i.shiftCtrl:l?i.shiftMeta:i.shiftOnly:c?a?l?i.altCtrlMeta:i.altCtrl:l?i.altMeta:i.altOnly:a?l?i.ctrlMeta:i.ctrlOnly:l?i.altOnly:i.none),h[s]&&h[s]()}}),r.onKeyUp||(r.onKeyUp=(t=qa)=>{if(t&&t.key){t.preventDefault();const e=r.extraKeys,i=t.key;null!=e[i]&&(e[i]=!1)}}),r.kill||(r.kill=function(){delete mp[s.name],i(n)}),{kill:r.kill,getMappedKeys:(t=tn)=>null!=r.keyGroups[t]?Q(r.keyGroups[t]):[]}}(t,(t=>{dl(cs,e,t),dl(ls,s,t)}),(t=>{fl(cs,e,t),fl(ls,s,t)}))},Line=function(t=qa){return this.curveInit(t),this.shapeInit(t),this},yp=Line.prototype=yc();yp.type=xo,yp.lib=gi,yp.isArtefact=!0,yp.isAsset=!1,ml(yp),hf(yp),df(yp),yp.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeLinePath()},yp.makeLinePath=function(){let t=Ma;const{currentStampPosition:e,currentEnd:i}=this;if(e&&i){const[e,i]=this.currentStampPosition,[s,n]=this.currentEnd;t=`m0,0l${(s-e).toFixed(2)},${(n-i).toFixed(2)}`}return t},yp.cleanDimensions=function(){this.dirtyDimensions=!1,this.dirtyHandle=!0,this.dirtyOffset=!0,this.dirtyStart=!0,this.dirtyEnd=!0},yp.preparePinsForStamp=function(){const t=this.dirtyPins,e=this.endPivot,i=this.endPath;let s,n,r;for(s=0,n=t.length;s<n;s++)r=t[s],(e&&e.name==r||i&&i.name==r)&&(this.dirtyEnd=!0,this.endLockTo.includes(un)&&(this.currentEndPathData=!1));t.length=0};const bp=function(t){return!!t&&(t.species="line",new Line(t))};I.Line=Line;const LineSpiral=function(t=qa){return this.shapeInit(t),this},Sp=LineSpiral.prototype=yc();Sp.type="LineSpiral",Sp.lib=gi,Sp.isArtefact=!0,Sp.isAsset=!1,ml(Sp),hf(Sp);Sp.defs=cc(Sp.defs,{startRadius:0,radiusIncrement:.1,radiusIncrementAdjust:1,startAngle:0,angleIncrement:5,angleIncrementAdjust:1,stepLimit:100});const kp=Sp.setters,Ap=Sp.deltaSetters;kp.startRadius=function(t){this.startRadius=t,this.updateDirty()},Ap.startRadius=function(t){this.startRadius+=t,this.updateDirty()},kp.radiusIncrement=function(t){this.radiusIncrement=t,this.updateDirty()},Ap.radiusIncrement=function(t){this.radiusIncrement+=t,this.updateDirty()},kp.radiusIncrementAdjust=function(t){this.radiusIncrementAdjust=t,this.updateDirty()},Ap.radiusIncrementAdjust=function(t){this.radiusIncrementAdjust+=t,this.updateDirty()},kp.startAngle=function(t){this.startAngle=t,this.updateDirty()},Ap.startAngle=function(t){this.startAngle+=t,this.updateDirty()},kp.angleIncrement=function(t){this.angleIncrement=t,this.updateDirty()},Ap.angleIncrement=function(t){this.angleIncrement+=t,this.updateDirty()},kp.angleIncrementAdjust=function(t){this.angleIncrementAdjust=t,this.updateDirty()},Ap.angleIncrementAdjust=function(t){this.angleIncrementAdjust+=t,this.updateDirty()},kp.stepLimit=function(t){this.stepLimit=t,this.updateDirty()},Ap.stepLimit=function(t){this.stepLimit+=t,this.updateDirty()},Sp.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeLineSpiralPath()},Sp.makeLineSpiralPath=function(){let t=`${Ma} m`;const{startRadius:e,radiusIncrement:i,radiusIncrementAdjust:s,startAngle:n,angleIncrement:r,angleIncrementAdjust:o,stepLimit:a}=this,c=eu();let l=n,h=r,u=e,d=i,f=0;for(c.setFromArray([0,u]).rotate(l),t+=`${c[0].toFixed(1)},${c[1].toFixed(1)}l`;f<a;)f++,h*=o,l+=h,d*=s,u+=d,c.setFromArray([0,u]).rotate(l),t+=`${c[0].toFixed(1)},${c[1].toFixed(1)} `;return iu(c),t},Sp.calculateLocalPathAdditionalActions=function(){const[t,e]=this.localBox,i=this.scale;this.pathDefinition=this.pathDefinition.replace(`${Ma} `,`m${-t/i},${-e/i}`),this.pathCalculatedOnce=!1,this.calculateLocalPath(this.pathDefinition,!0)};const vp=function(t){return!!t&&(t.species="linespiral",new LineSpiral(t))};I.LineSpiral=LineSpiral;const Loom=function(t=qa){return this.makeName(t.name),this.register(),this.state=Hh(qa),this.modifyConstructorInputForAnchorButton(t),this.set(this.defs),t.group||(t.group=bd),this.onEnter=Ua,this.onLeave=Ua,this.onDown=Ua,this.onUp=Ua,this.delta={},this.set(t),this.fromPathData=[],this.toPathData=[],this.watchFromPath=null,this.watchIndex=-1,this.engineInstructions=[],this.engineDeltaLengths=[],this},Pp=Loom.prototype=yc();Pp.type="Loom",Pp.lib=gi,Pp.isArtefact=!0,Pp.isAsset=!1,ml(Pp),Fu(Pp),Tu(Pp),Mu(Pp),ju(Pp);const Cp={fromPath:null,toPath:null,fromPathStart:0,fromPathEnd:1,toPathStart:0,toPathEnd:1,synchronizePathCursors:!0,loopPathCursors:!0,constantPathSpeed:!0,isHorizontalCopy:!0,showBoundingBox:!1,boundingBoxColor:ae,source:null,sourceIsVideoOrSprite:!1,interferenceLoops:2,interferenceFactor:1.03,visibility:!0,calculateOrder:0,stampOrder:0,host:null,group:null,anchor:null,noCanvasEngineUpdates:!1,noDeltaUpdates:!1,onEnter:null,onLeave:null,onDown:null,onUp:null,noUserInteraction:!1,method:Si};Pp.defs=cc(Pp.defs,Cp),Pp.packetExclusions=hc(Pp.packetExclusions,["pathObject","state"]),Pp.packetExclusionsByRegex=hc(Pp.packetExclusionsByRegex,["^(local|dirty|current)","Subscriber$"]),Pp.packetObjects=hc(Pp.packetObjects,["group","fromPath","toPath","source"]),Pp.packetFunctions=hc(Pp.packetFunctions,["onEnter","onLeave","onDown","onUp"]),Pp.processPacketOut=function(t,e,i){let s=!0;return i.includes(t)||e!==this.defs[t]||(s=!1),s},Pp.finalizePacketOut=function(t,e){const i=it(this.state.saveAsPacket(e))[3];return t=cc(t,i),t=this.handlePacketAnchor(t,e)},Pp.handlePacketAnchor=function(t,e){if(this.anchor){const i=it(this.anchor.saveAsPacket(e))[3];t.anchor=i}return t},Pp.clone=_a;const wp=Pp.getters,xp=Pp.setters,Op=Pp.deltaSetters;Pp.get=function(t){const e=this.getters[t];if(e)return e.call(this);{const e=this.state;let i,s=this.defs[t];return null!=s?(i=this[t],typeof i!=pa?i:s):(s=e.defs[t],null!=s?(i=e[t],typeof i!=pa?i:s):null)}},Pp.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs,r=this.state,o=r?r.setters:qa,a=r?r.defs:qa;let c,l,h,u;for(l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(so.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=u)):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=u)))}return this},Pp.setDelta=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.deltaSetters,n=this.defs,r=this.state,o=r?r.deltaSetters:qa,a=r?r.defs:qa;let c,l,h,u;for(l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(so.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=Ga(r[h],u))):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=Ga(this[h],u))))}return this},xp.host=function(t){if(t){const e=o[t];e&&e.here?this.host=e.name:this.host=t}else this.host=Na},wp.group=function(){return this.group?this.group.name:Na},xp.group=function(t){let e;t&&(this.group&&this.group.type==Co&&this.group.removeArtefacts(this.name),t.substring?(e=g[t],this.group=e||t):this.group=t),this.group&&this.group.type==Co&&this.group.addArtefacts(this.name)},Pp.getHere=function(){return Sl},xp.delta=function(t){t&&(this.delta=lc(this.delta,t))},xp.fromPath=function(t){if(t){const e=this.fromPath,i=t.substring?o[t]:t,s=this.name;i&&i.name&&i.useAsPath&&(e&&e.name!=i.name&&uc(e.pathed,s),hc(i.pathed,s),this.fromPath=i,this.dirtyStart=!0)}},xp.toPath=function(t){if(t){const e=this.toPath,i=t.substring?o[t]:t,s=this.name;i&&i.name&&i.useAsPath&&(e&&e.name!=i.name&&uc(e.pathed,s),hc(i.pathed,s),this.toPath=i,this.dirtyStart=!0)}},xp.source=function(t){if((t=t.substring?o[t]:t)&&t.type==Eo){const e=this.source;e&&e.type==Eo&&e.imageUnsubscribe(this.name),this.source=t,t.imageSubscribe(this.name),this.dirtyInput=!0}},xp.isHorizontalCopy=function(t){this.isHorizontalCopy=!!t,this.dirtyPathData=!0},xp.synchronizePathCursors=function(t){this.synchronizePathCursors=!!t,t&&(this.toPathStart=this.fromPathStart,this.toPathEnd=this.fromPathEnd),this.dirtyPathData=!0},xp.loopPathCursors=function(t){if(this.loopPathCursors=!!t,t){let t=this.fromPathStart;(t<0||t>1)&&(this.fromPathStart=t-V(t)),t=this.fromPathEnd,(t<0||t>1)&&(this.fromPathEnd=t-V(t)),t=this.toPathStart,(t<0||t>1)&&(this.toPathStart=t-V(t)),t=this.toPathEnd,(t<0||t>1)&&(this.toPathEnd=t-V(t))}this.dirtyOutput=!0},xp.fromPathStart=function(t){this.loopPathCursors&&(t<0||t>1)&&(t-=V(t)),this.fromPathStart=t,this.synchronizePathCursors&&(this.toPathStart=t),this.dirtyPathData=!0},Op.fromPathStart=function(t){let e=this.fromPathStart+=t;this.loopPathCursors&&(e<0||e>1)&&(e-=V(e)),this.fromPathStart=e,this.synchronizePathCursors&&(this.toPathStart=e),this.dirtyPathData=!0},xp.fromPathEnd=function(t){this.loopPathCursors&&(t<0||t>1)&&(t-=V(t)),this.fromPathEnd=t,this.synchronizePathCursors&&(this.toPathEnd=t),this.dirtyPathData=!0},Op.fromPathEnd=function(t){let e=this.fromPathEnd+=t;this.loopPathCursors&&(e<0||e>1)&&(e-=V(e)),this.fromPathEnd=e,this.synchronizePathCursors&&(this.toPathEnd=e),this.dirtyPathData=!0},xp.toPathStart=function(t){this.loopPathCursors&&(t<0||t>1)&&(t-=V(t)),this.toPathStart=t,this.synchronizePathCursors&&(this.fromPathStart=t),this.dirtyPathData=!0},Op.toPathStart=function(t){let e=this.toPathStart+=t;this.loopPathCursors&&(e<0||e>1)&&(e-=V(e)),this.toPathStart=e,this.synchronizePathCursors&&(this.fromPathStart=e),this.dirtyPathData=!0},xp.toPathEnd=function(t){this.loopPathCursors&&(t<0||t>1)&&(t-=V(t)),this.toPathEnd=t,this.synchronizePathCursors&&(this.fromPathEnd=t),this.dirtyPathData=!0},Op.toPathEnd=function(t){let e=this.toPathEnd+=t;this.loopPathCursors&&(e<0||e>1)&&(e-=V(e)),this.toPathEnd=e,this.synchronizePathCursors&&(this.fromPathEnd=e),this.dirtyPathData=!0},Pp.getHost=function(){if(this.currentHost)return this.currentHost;if(this.host){const t=o[this.host];if(t)return this.currentHost=t,this.dirtyHost=!0,this.currentHost}return Sl},Pp.midInitActions=Ua,Pp.update=function(){this.dirtyInput=!0,this.dirtyOutput=!0},Pp.prepareStamp=function(){const t=this.fromPath,e=this.toPath,[i,s]=this.getBoundingBox();if(!this.dirtyPathData){const{x:i,y:s}=t.getPathPositionData(0),{x:n,y:r}=t.getPathPositionData(1),{x:o,y:a}=e.getPathPositionData(0),{x:c,y:l}=e.getPathPositionData(1),h=[i,s,n,r,o,a,c,l];this.pathTests&&!this.pathTests.some(((t,e)=>t!==h[e]))||(this.pathTests=h,this.dirtyPathData=!0)}if(this.dirtyPathData||!this.fromPathData.length){this.dirtyPathData=!1,this.watchIndex=-1,this.engineInstructions.length=0,this.engineDeltaLengths.length=0;const n=this.fromPathData;n.length=0;const r=this.toPathData;if(r.length=0,t&&e){const o=X(t.length),a=X(e.length),c=this.setSourceDimension(J(o,a)),l=this.fromPathStart,h=this.fromPathEnd,u=this.toPathStart,d=this.toPathEnd,f=this.constantPathSpeed;let p,m;p=l<h?h-l:h+(1-l),p<.005&&(p=.005),m=u<d?d-u:d+(1-u),m<.005&&(m=.005);const g=X(tt(p,m)),y=1/(c*(1/g));let b,S,k;for(k=0;k<=1;k+=y)({x:b,y:S}=t.getPathPositionData(k,f)),n.push([b-i,S-s]),({x:b,y:S}=e.getPathPositionData(k,f)),r.push([b-i,S-s]);this.fromPathSteps=p/g,this.toPathSteps=m/g,this.watchFromPath=1===this.fromPathSteps,this.dirtyOutput=!0}else this.dirtyPathData=!0}this.prepareStampTabsHelper()},Pp.setSourceDimension=function(t){if(t)this.sourceDimension!==t&&(this.sourceDimension=t,this.dirtyInput=!0);else{const t=this.fromPath,e=this.toPath;if(t&&e){const i=X(t.length),s=X(e.length),n=J(i,s);this.sourceDimension!==n&&(this.sourceDimension=n)}else this.sourceDimension=0}return this.sourceDimension},Pp.simpleStamp=function(t,e){t&&Li.includes(t.type)&&(this.currentHost=t,e&&(this.set(e),this.prepareStamp()),this.regularStamp())},Pp.stamp=function(t=!1,e,i){if(t)return e&&Li.includes(e.type)&&(this.currentHost=e),i&&(this.set(i),this.prepareStamp()),this.regularStamp();this.visibility&&((this.sourceIsVideoOrSprite||this.dirtyInput)&&this.cleanInput(),this.dirtyOutput&&(this.output=this.cleanOutput()),this.regularStamp())},Pp.cleanInput=function(){this.dirtyInput=!1;const t=this.sourceDimension;if(!t)return this.dirtyInput=!0,!1;const e=qh(),i=e.engine,s=e.element;s.width=t,s.height=t,i.setTransform(1,0,0,1,0,0),this.source.stamp(!0,e,{startX:0,startY:0,handleX:0,handleY:0,offsetX:0,offsetY:0,roll:0,scale:1,width:t,height:t,method:Si}),this.sourceImageData=i.getImageData(0,0,t,t),Qh(e)},Pp.cleanOutput=function(){this.dirtyOutput=!1;const t=this.sourceDimension,e=this.sourceImageData;if(t&&e){const i=this.fromPathData,s=this.toPathData,n=i.length,r=this.fromPathStart,o=this.fromPathSteps||1,a=this.toPathStart,c=this.toPathSteps||1,l=rt-1.5708,h=this.isHorizontalCopy,u=this.loopPathCursors,d=this.watchFromPath,f=this.engineInstructions,p=this.engineDeltaLengths;let m,g,y,b,S,k,A,v,P,C,w,x,O,D=r*n,R=a*n,F=this.watchIndex,[,,H,E]=this.getBoundingBox();H=~~H,E=~~E;const I=qh(),T=I.engine,B=I.element;B.width=t,B.height=t,T.setTransform(1,0,0,1,0,0),T.putImageData(e,0,0);const $=qh(),L=$.engine,N=$.element;if(N.width=H,N.height=E,L.globalAlpha=this.state.globalAlpha,L.setTransform(1,0,0,1,0,0),!f.length){for(w=0;w<t;w++)F<0&&(d&&D<1||!d&&R<1)&&(F=w),D<n&&R<n&&D>=0&&R>=0?([m,g]=i[V(D)],[y,b]=s[V(R)],S=y-m,k=b-g,A=Z(S,k),h?(v=-M(S,k)+rt,P=G(v),C=dt(v),f.push([P,C,-C,P,m,g]),p.push(A)):(v=-M(S,k)+l,P=G(v),C=dt(v),f.push([P,C,-C,P,m,g,A]),p.push(A))):(f.push(!1),p.push(!1)),D+=o,R+=c,u&&(D>=n&&(D-=n),R>=n&&(R-=n));F<0&&(F=0),this.watchIndex=F}if(h)for(w=0;w<t;w++)O=f[F],O&&(L.setTransform(...O),L.drawImage(B,0,~~F,~~t,1,0,0,~~p[F],1)),F++,F>=t&&(F=0);else for(w=0;w<t;w++)O=f[F],O&&(L.setTransform(...O),L.drawImage(B,~~F,0,1,~~t,0,0,1,~~p[F])),F++,F>=t&&(F=0);const X=this.interferenceFactor,Y=this.interferenceLoops,j=1+~~(H*X),z=1+~~(E*X);for(B.width=j,B.height=z,L.setTransform(1,0,0,1,0,0),T.setTransform(1,0,0,1,0,0),x=0;x<Y;x++)T.drawImage(N,0,0,H,E,0,0,j,z),L.drawImage(B,0,0,j,z,0,0,H,E);const W=L.getImageData(0,0,H,E);return Qh(I),Qh($),this.dirtyTargetImage=!0,W}return!1},Pp.regularStamp=function(){const t=this.currentHost;if(t){const e=t.engine;this.noCanvasEngineUpdates||t.setEngine(this),this[this.method](e)}},Pp.getBoundingBox=function(){const t=this.fromPath,e=this.toPath;if(t&&e){if(this.dirtyStart)if(t.getBoundingBox&&e.getBoundingBox){this.dirtyStart=!1;let[i,s,n,r,o,a]=t.getBoundingBox(),[c,l,h,u,d,f]=e.getBoundingBox();(isNaN(i)||isNaN(s)||isNaN(n)||isNaN(r)||isNaN(o)||isNaN(a)||isNaN(c)||isNaN(l)||isNaN(h)||isNaN(u)||isNaN(d)||isNaN(f))&&(this.dirtyStart=!0),i==c&&s==l&&n==h&&r==u&&o==d&&a==f&&(this.dirtyStart=!0),i+=o,s+=a,c+=d,l+=f;const p=tt(i,c),m=J(i+n,c+h),g=tt(s,l),y=J(s+r,l+u);this.boundingBox=[p,g,m-p,y-g],this.dirtyPathData=!0}else this.boundingBox=[0,0,0,0]}else this.boundingBox=[0,0,0,0];return this.boundingBox},Pp.fill=function(t){this.doFill(t),this.showBoundingBox&&this.drawBoundingBox(t)},Pp.draw=function(t){this.doStroke(t),this.showBoundingBox&&this.drawBoundingBox(t)},Pp.drawAndFill=function(t){this.doStroke(t),this.currentHost.clearShadow(),this.doFill(t),this.showBoundingBox&&this.drawBoundingBox(t)},Pp.fillAndDraw=function(t){this.doFill(t),this.currentHost.clearShadow(),this.doStroke(t),this.showBoundingBox&&this.drawBoundingBox(t)},Pp.drawThenFill=function(t){this.doStroke(t),this.doFill(t),this.showBoundingBox&&this.drawBoundingBox(t)},Pp.fillThenDraw=function(t){this.doFill(t),this.doStroke(t),this.showBoundingBox&&this.drawBoundingBox(t)},Pp.clear=function(t){const e=this.output,i=!!this.currentHost&&this.currentHost.element,s=t.globalCompositeOperation;if(e&&i){const i=qh(),n=i.engine,r=i.element;let[o,a,c,l]=this.getBoundingBox();o=~~o,a=~~a,c=~~c,l=~~l,r.width=c,r.height=l,n.putImageData(e,0,0),t.setTransform(1,0,0,1,0,0),t.globalCompositeOperation=ti,t.drawImage(r,0,0,c,l,o,a,c,l),t.globalCompositeOperation=s,Qh(i),this.showBoundingBox&&this.drawBoundingBox(t)}},Pp.none=Ua,Pp.clip=Ua,Pp.doStroke=function(t){const e=this.fromPath,i=this.toPath;if(e&&e.getBoundingBox&&i&&i.getBoundingBox){const s=this.currentHost;if(s){const n=e.currentStampPosition,r=e.getPathPositionData(1),o=i.currentStampPosition,a=i.getPathPositionData(1);s.rotateDestination(t,n[0],n[1],e),t.stroke(e.pathObject),s.rotateDestination(t,o[0],o[1],e),t.stroke(i.pathObject),t.setTransform(1,0,0,1,0,0),t.beginPath(),t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.moveTo(...o),t.lineTo(...n),t.closePath(),t.stroke()}}},Pp.doFill=function(t){const e=this.output,i=!!this.currentHost&&this.currentHost.element;if(e&&i){const i=qh(),s=i.engine,n=i.element;let[r,o,a,c]=this.getBoundingBox();r=~~r,o=~~o,a=~~a,c=~~c,n.width=a,n.height=c,s.putImageData(e,0,0),t.setTransform(1,0,0,1,0,0),t.drawImage(n,0,0,a,c,r,o,a,c),Qh(i)}},Pp.drawBoundingBox=function(t){this.dirtyStart&&this.getBoundingBox(),t.save();const e=t.getTransform();t.setTransform(1,0,0,1,0,0),t.strokeStyle=this.boundingBoxColor,t.lineWidth=1,t.globalCompositeOperation=_r,t.globalAlpha=1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.strokeRect(...this.boundingBox),t.restore(),t.setTransform(e)},Pp.checkHit=function(t=[]){if(this.noUserInteraction)return!1;const e=K(t)?t:[t],i=!(!this.output||!this.output.data)&&this.output.data;let s,n,r,o,a;if(i){const[t,c,l,h]=this.getBoundingBox();if(e.some((e=>{if(K(e))s=e[0],n=e[1];else{if(!fc(e,e.x,e.y))return!1;s=e.x,n=e.y}return!(!s.toFixed||!n.toFixed||isNaN(s)||isNaN(n))&&(r=s-t,o=n-c,!(r<0||r>l||o<0||o>h)&&(a=4*(o*l+r)+3,!!i&&i[a]>0))}),this))return{x:s,y:n,artefact:this}}return!1};const Dp=function(t){return!!t&&new Loom(t)};I.Loom=Loom;const Mesh=function(t=qa){return this.makeName(t.name),this.register(),this.modifyConstructorInputForAnchorButton(t),this.set(this.defs),this.state=Hh(),t.group||(t.group=bd),this.onEnter=Ua,this.onLeave=Ua,this.onDown=Ua,this.onUp=Ua,this.delta={},this.set(t),this.fromPathData=[],this.toPathData=[],this.watchFromPath=null,this.watchIndex=-1,this.engineInstructions=[],this.engineDeltaLengths=[],this},Rp=Mesh.prototype=yc();Rp.type="Mesh",Rp.lib=gi,Rp.isArtefact=!0,Rp.isAsset=!1,ml(Rp),Fu(Rp),Tu(Rp),Mu(Rp),ju(Rp);const Fp={net:null,isHorizontalCopy:!0,source:null,sourceIsVideoOrSprite:!1,interferenceLoops:2,interferenceFactor:1.03,visibility:!0,calculateOrder:0,stampOrder:0,delta:null,host:null,group:null,anchor:null,noCanvasEngineUpdates:!1,noDeltaUpdates:!1,onEnter:null,onLeave:null,onDown:null,onUp:null,noUserInteraction:!1,method:Si};Rp.defs=cc(Rp.defs,Fp),Rp.packetExclusions=hc(Rp.packetExclusions,["pathObject","state"]),Rp.packetExclusionsByRegex=hc(Rp.packetExclusionsByRegex,["^(local|dirty|current)","Subscriber$"]),Rp.packetObjects=hc(Rp.packetObjects,["group","net","source"]),Rp.packetFunctions=hc(Rp.packetFunctions,["onEnter","onLeave","onDown","onUp"]),Rp.processPacketOut=function(t,e,i){let s=!0;return!i.includes(t)<0&&e===this.defs[t]&&(s=!1),s},Rp.finalizePacketOut=function(t,e){const i=it(this.state.saveAsPacket(e))[3];return t=cc(t,i),t=this.handlePacketAnchor(t,e)},Rp.handlePacketAnchor=function(t,e){if(this.anchor){const i=it(this.anchor.saveAsPacket(e))[3];t.anchor=i}return t},Rp.clone=_a;const Hp=Rp.getters,Ep=Rp.setters;Rp.get=function(t){const e=this.getters[t];if(e)return e.call(this);{const e=this.state;let i,s=this.defs[t];return typeof s!=pa?(i=this[t],typeof i!=pa?i:s):(s=e.defs[t],typeof s!=pa?(i=e[t],typeof i!=pa?i:s):null)}},Rp.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs,r=this.state,o=r?r.setters:qa,a=r?r.defs:qa;let c,l,h,u;for(l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(so.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=u)):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=u,this.dirtyFilterIdentifier=!0)))}return this},Rp.setDelta=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.deltaSetters,n=this.defs,r=this.state,o=r?r.deltaSetters:qa,a=r?r.defs:qa;let c,l,h,u;for(l=0;l<i;l++)h=e[l],u=t[h],h&&h!=Vs&&null!=u&&(so.includes(h)?(c=o[h],c?c.call(r,u):typeof a[h]!=pa&&(r[h]=Ga(r[h],u))):(c=s[h],c?c.call(this,u):typeof n[h]!=pa&&(this[h]=Ga(this[h],u),this.dirtyFilterIdentifier=!0)))}return this},Ep.host=function(t){if(t){const e=o[t];e&&e.here?this.host=e.name:this.host=t}else this.host=Na;this.dirtyFilterIdentifier=!0},Hp.group=function(){return this.group?this.group.name:Na},Ep.group=function(t){let e;t&&(this.group&&this.group.type==Co&&this.group.removeArtefacts(this.name),t.substring?(e=g[t],this.group=e||t):this.group=t),this.group&&this.group.type==Co&&this.group.addArtefacts(this.name)},Rp.getHere=function(){return Sl},Ep.net=function(t){t&&((t=t.substring?o[t]:t)&&"Net"==t.type&&(this.net=t,this.dirtyStart=!0),this.dirtyFilterIdentifier=!0)},Ep.source=function(t){if((t=t.substring?o[t]:t)&&t.type==Eo){const e=this.source;e&&e.type==Eo&&e.imageUnsubscribe(this.name),this.source=t,t.imageSubscribe(this.name),this.dirtyInput=!0,this.dirtyFilterIdentifier=!0}},Ep.isHorizontalCopy=function(t){this.isHorizontalCopy=!!t,this.dirtyPathData=!0,this.dirtyFilterIdentifier=!0},Rp.getHost=function(){if(this.currentHost)return this.currentHost;if(this.host){const t=o[this.host];if(t)return this.currentHost=t,this.dirtyHost=!0,this.currentHost}return Sl},Rp.midInitActions=Ua,Rp.prepareStamp=function(){this.badNet=!0,this.dirtyParticles=!1,this.particlePositions||(this.particlePositions=[]);const{net:t,particlePositions:e}=this;if(t&&t.particleStore&&t.particleStore.length>3){const{rows:i,columns:s,particleStore:n}=t;if(i&&s){this.badNet=!1,this.rows=i,this.columns=s;const t=[];n.forEach((e=>{const i=e.position,{x:s,y:n}=i;t.push([s,n])}));const r=t.join(_t);e.join(_t)!==r&&(this.particlePositions=t,this.dirtyInput=!0),this.sourceIsVideoOrSprite&&(this.dirtyInput=!0)}}this.prepareStampTabsHelper()},Rp.setSourceDimension=function(){if(!this.badNet){const{columns:t,rows:e,particlePositions:i}=this,s=Kc(),n=Kc(),r=Kc(),o=Kc(),a=Kc(),c=Kc(),l=Kc(),h=Kc(),u=Kc();let d,f,p,m,g,y,b,S,k,A,v,P,C,w,x,O,D,R;for(p=0;p<e;p++){for(m=0,C=n[p]=Kc(),y=h[p]=[],d=0,f=t-1;d<f;d++)g=p*t+d,[b,k]=i[g],[S,A]=i[g+1],y.push([b,k,S,A]),0==d?c.push([b,k]):d==f-1?l.push([S,A]):0==p?(a.push([b,k]),d==f-2&&a.push([S,A])):p==e-1&&(u.push([b,k]),d==f-2&&u.push([S,A])),r.push(b,S),o.push(k,A),v=S-b,P=A-k,w=ft(v*v+P*P),m+=w,C.push(w);s.push(m)}this.sourceDimension=J(...s);const F=this.currentHost||this.getHost();if(F){const t=J(...F.currentDimensions);this.sourceDimension>t&&(this.sourceDimension=t)}for(x=0,O=n.length;x<O;x++)for(w=s[x],C=n[x],y=h[x],D=0,R=C.length;D<R;D++)w&&(C[D]=C[D]/w),y[D].push(C[D]);this.struts||(this.struts=[]),this.struts.length=0,this.struts.push(...h);const H=tt(...r),E=tt(...o),I=J(...r),T=J(...o);this.boundingBox=[H,E,I-H,T-E],c.reverse(),u.reverse();let B=`M${a[0][0]},${a[0][1]}L`;for(x=1,O=a.length;x<O;x++)[d,p]=a[x],B+=`${d},${p} `;for(x=0,O=l.length;x<O;x++)[d,p]=l[x],B+=`${d},${p} `;for(x=0,O=u.length;x<O;x++)[d,p]=u[x],B+=`${d},${p} `;for(x=0,O=c.length;x<O;x++)[d,p]=c[x],B+=`${d},${p} `;B+="z",this.pathObject=new Path2D(B),n.forEach((t=>qc(t))),qc(n),qc(s),qc(r),qc(o),qc(a),qc(c),qc(l),qc(u),qc(h)}},Rp.simpleStamp=function(t,e){t&&t.type==bo&&(this.currentHost=t,e&&(this.set(e),this.prepareStamp()),this.regularStamp())},Rp.stamp=function(t=!1,e,i){t&&(e&&e.type==bo&&(this.currentHost=e),i&&(this.set(i),this.prepareStamp()),this.regularStamp()),this.visibility&&(this.dirtyInput&&(this.sourceImageData=this.cleanInput(),this.sourceImageData?this.output=this.cleanOutput():this.dirtyInput=!0),this.output&&this.regularStamp())},Rp.cleanInput=function(){this.dirtyInput=!1,this.setSourceDimension();const t=this.sourceDimension;if(!t)return this.dirtyInput=!0,!1;const e=qh(),i=e.engine,s=e.element;s.width=t,s.height=t,i.setTransform(1,0,0,1,0,0),this.source.stamp(!0,e,{startX:0,startY:0,handleX:0,handleY:0,offsetX:0,offsetY:0,roll:0,scale:1,width:t,height:t,method:Si});const n=i.getImageData(0,0,t,t);return Qh(e),n},Rp.cleanOutput=function(){this.dirtyOutput=!1;const{sourceImageData:t,columns:e,rows:i,struts:s,boundingBox:n}=this,r=X(this.sourceDimension);if(t&&i-1>0){let[o,a,c,l]=n;c=~~(o+c),l=~~(a+l);const h=qh(),u=h.engine,d=h.element;d.width=r,d.height=r,u.setTransform(1,0,0,1,0,0),u.putImageData(t,0,0);const f=qh(),p=f.engine,m=f.element;m.width=c,m.height=l,p.globalAlpha=this.state.globalAlpha,p.setTransform(1,0,0,1,0,0);const g=parseFloat((r/(i-1)).toFixed(4)),y=parseFloat((r/(e-1)).toFixed(4));let b,S,k,A,v,P,C,w,x,O,D,R,F,H,E,I,T,B,$,L,N,X,Y;for(N=0,X=i-1;N<X;N++)for(b=s[N],S=s[N+1],$=0,L=e-1;$<L;$++){let[t,e,i,s,n]=b[$],[o,a,c,l,h]=S[$];for(n*=r,h*=r,k=J(n,h,y),A=y/k,v=(i-t)/k,P=(s-e)/k,C=(c-o)/k,w=(l-a)/k,Y=0;Y<k;Y++){x=t+v*Y,O=e+P*Y,D=o+C*Y,R=a+w*Y,H=N*g,F=$*y+A*Y,E=x-D,I=O-R,T=ft(E*E+I*I),B=M(I,E)+rt,p.setTransform(1,0,0,1,x,O),p.rotate(B);const i=H+g>r?r-H:g;p.drawImage(d,~~F,~~H,1,~~i,0,0,1,~~T)}}const G=this.interferenceFactor,j=this.interferenceLoops,z=1+~~(c*G),W=1+~~(l*G);d.width=z,d.height=W,p.setTransform(1,0,0,1,0,0),u.setTransform(1,0,0,1,0,0);for(let t=0;t<j;t++)u.drawImage(m,0,0,c,l,0,0,z,W),p.drawImage(d,0,0,z,W,0,0,c,l);const V=p.getImageData(0,0,c,l);return Qh(h),Qh(f),this.dirtyTargetImage=!0,V}return!1},Rp.regularStamp=function(){const t=this.currentHost;if(t){const e=t.engine;this.noCanvasEngineUpdates||t.setEngine(this),this[this.method](e)}},Rp.fill=function(t){this.doFill(t)},Rp.draw=function(t){this.doStroke(t)},Rp.drawAndFill=function(t){this.doStroke(t),this.currentHost.clearShadow(),this.doFill(t)},Rp.fillAndDraw=function(t){this.doFill(t),this.currentHost.clearShadow(),this.doStroke(t)},Rp.drawThenFill=function(t){this.doStroke(t),this.doFill(t)},Rp.fillThenDraw=function(t){this.doFill(t),this.doStroke(t)},Rp.clear=function(t){const e=this.output,i=!!this.currentHost&&this.currentHost.element,s=t.globalCompositeOperation;if(e&&i){const n=qh(),r=n.engine,o=n.element,a=i.width,c=i.height;o.width=a,o.height=c,r.putImageData(e,0,0),t.setTransform(1,0,0,1,0,0),t.globalCompositeOperation=ti,t.drawImage(o,0,0),t.globalCompositeOperation=s,Qh(n)}},Rp.none=Ua,Rp.clip=Ua,Rp.doStroke=function(t){t.setTransform(1,0,0,1,0,0),t.stroke(this.pathObject)},Rp.doFill=function(t){const e=this.output,i=!!this.currentHost&&this.currentHost.element;if(e&&i){const s=qh(),n=s.engine,r=s.element,o=i.width,a=i.height;r.width=o,r.height=a,n.putImageData(e,0,0),t.setTransform(1,0,0,1,0,0),t.drawImage(r,0,0),Qh(s)}},Rp.checkHit=function(t=[],e){if(this.noUserInteraction)return!1;if(!this.pathObject)return!1;const i=K(t)?t:[t],s=e.engine;let n,r,o=!1;if(e||(e=qh(),o=!0),i.some((t=>{if(K(t))n=t[0],r=t[1];else{if(!fc(t,t.x,t.y))return!1;n=t.x,r=t.y}return!(!n.toFixed||!r.toFixed||isNaN(n)||isNaN(r))&&s.isPointInPath(this.pathObject,n,r,this.winding)}),this)){const t={x:n,y:r,artefact:this};return o&&Qh(e),t}return o&&Qh(e),!1};const Ip=function(t){return!!t&&new Mesh(t)};I.Mesh=Mesh;const Spring=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.set(t),this.action||(this.action=Ua),this},Tp=Spring.prototype=yc();Tp.type="Spring",Tp.lib="spring",Tp.isArtefact=!1,Tp.isAsset=!1,ml(Tp);Tp.defs=cc(Tp.defs,{particleFrom:null,particleFromIsStatic:!1,particleTo:null,particleToIsStatic:!1,springConstant:50,damperConstant:10,restLength:1}),Tp.packetObjects=hc(Tp.packetObjects,["particleFrom","particleTo"]),Tp.kill=function(){return this.deregister(),!0};const Bp=Tp.setters;Bp.particleFrom=function(t){t.substring&&(t=b[t]),t&&t.type==Ro&&(this.particleFrom=t)},Bp.particleTo=function(t){t.substring&&(t=b[t]),t&&t.type==Ro&&(this.particleTo=t)},Tp.applySpring=function(){const{particleFrom:t,particleTo:e,particleFromIsStatic:i,particleToIsStatic:s,springConstant:n,damperConstant:r,restLength:o}=this;if(t&&e){const{position:a,velocity:c,load:l}=t,{position:h,velocity:u,load:d}=e,f=td(u).vectorSubtract(c),p=td(h).vectorSubtract(a),m=td(p).normalize(),g=td(m);m.scalarMultiply(n*(p.getMagnitude()-o)),f.vectorMultiply(g).scalarMultiply(r).vectorMultiply(g);const y=td(m).vectorAdd(f);i||l.vectorAdd(y),s||d.vectorSubtract(y),ed(f)}};const $p=function(t){return!!t&&new Spring(t)};I.Spring=Spring;const Net=function(t=qa){return this.makeName(t.name),this.register(),this.initializePositions(),this.set(this.defs),this.onEnter=Ua,this.onLeave=Ua,this.onDown=Ua,this.onUp=Ua,this.generate=Ua,this.postGenerate=Ua,this.stampAction=Ua,this.particleStore=[],this.springs=[],t.group||(t.group=bd),this.set(t),this.purge&&this.purgeArtefact(this.purge),this},Lp=Net.prototype=yc();Lp.type="Net",Lp.lib=gi,Lp.isArtefact=!0,Lp.isAsset=!1,ml(Lp),tf(Lp);const Mp={world:null,artefact:null,historyLength:1,forces:null,mass:1,engine:bi,springConstant:50,damperConstant:10,restLength:1,showSprings:!1,showSpringsColor:ae,rows:0,columns:0,rowDistance:0,columnDistance:0,shapeTemplate:null,precision:20,joinTemplateEnds:!1,particlesAreDraggable:!1,hitRadius:10,showHitRadius:!1,hitRadiusColor:ae,resetAfterBlur:3};Lp.defs=cc(Lp.defs,Mp),Lp.packetExclusions=hc(Lp.packetExclusions,["forces","springs","particleStore"]),Lp.packetObjects=hc(Lp.packetObjects,["world","artefact","shapeTemplate"]),Lp.packetFunctions=hc(Lp.packetFunctions,["generate","postGenerate","stampAction"]),Lp.finalizePacketOut=function(t,e){const i=e.forces||this.forces||!1;if(i){const e=[];i.forEach((t=>{t.substring?e.push(t):oc(t)&&t.name&&e.push(t.name)})),t.forces=e}const s=[];return this.particleStore.forEach((t=>s.push(t.saveAsPacket()))),t.particleStore=s,t},Lp.postCloneAction=function(t){return t},Lp.factoryKill=function(t,e){this.isRunning=!1,t&&(this.artefact.kill(),this.shapeTemplate&&this.shapeTemplate.kill()),e&&this.world.kill(),this.purgeParticlesFromLibrary()},Lp.purgeParticlesFromLibrary=function(){const{particleStore:t,springs:e}=this;let i;a.forEach((t=>{i=o[t],i&&(i.particle&&!i.particle.substring&&i.particle.name&&(i.particle=i.particle.name),i.type==Io&&i.useParticlesAsPins&&i.pins.forEach(((t,e)=>{oc(t)&&t.type==Ro&&(i.pins[e]=t.name,i.dirtyPins=!0)})))})),t.forEach((t=>t.kill())),t.length=0,e.forEach((t=>t.kill())),e.length=0};const Np=Lp.setters;Np.generate=function(t){nc(t)?this.generate=t:t.substring&&Yp[t]&&(this.generate=Yp[t])},Np.postGenerate=function(t){nc(t)&&(this.postGenerate=t)},Np.stampAction=function(t){nc(t)&&(this.stampAction=t)},Np.world=function(t){let e;t.substring?e=P[t]:oc(t)&&t.type==Vo&&(e=t),e&&(this.world=e)},Np.artefact=function(t){let e;t.substring?e=o[t]:oc(t)&&t.isArtefact&&(e=t),e&&(this.artefact=e),this.dirtyFilterIdentifier=!0},Np.shapeTemplate=function(t){let e;t.substring?e=f[t]:oc(t)&&t.isArtefact&&dc(t.species)&&(e=t),e&&(this.shapeTemplate=e),this.dirtyFilterIdentifier=!0},Lp.regularStamp=function(){const{world:t,artefact:e,particleStore:i,springs:s,generate:n,postGenerate:r,stampAction:o,lastUpdated:a,resetAfterBlur:c,showSprings:l,showSpringsColor:h,showHitRadius:u,hitRadius:d,hitRadiusColor:f}=this;let p,m,g=1,y=_r;this.state&&(g=this.state.globalAlpha,y=this.state.globalCompositeOperation);const b=this.currentHost;let S=gt;const k=et();if(a&&(S=(k-a)/1e3),S>c&&(this.purgeParticlesFromLibrary(),S=gt),i.length||(n.call(this,b),r.call(this)),i.forEach((e=>e.applyForces(t,b))),s.forEach((t=>t.applySpring())),i.forEach((e=>e.update(S,t))),l){const t=b.engine;t.save(),t.globalAlpha=g,t.globalCompositeOperation=y,t.strokeStyle=h,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=le,t.lineWidth=1,t.setTransform(1,0,0,1,0,0),t.beginPath(),s.forEach((e=>{({particleFrom:p,particleTo:m}=e),t.moveTo(p.position.x,p.position.y),t.lineTo(m.position.x,m.position.y)})),t.stroke(),t.restore()}if(i.forEach((t=>{t.manageHistory(S,b),o.call(this,e,t,b)})),u){const t=b.engine;t.save(),t.globalAlpha=g,t.globalCompositeOperation=y,t.lineWidth=1,t.strokeStyle=f,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.shadowColor=le,t.setTransform(1,0,0,1,0,0),t.beginPath(),i.forEach((e=>{t.moveTo(e.position.x,e.position.y),t.arc(e.position.x,e.position.y,d,0,nt)})),t.stroke(),t.restore()}this.lastUpdated=k},Lp.restart=function(){return this.purgeParticlesFromLibrary(),this.lastUpdated=et(),this},Lp.checkHit=function(t=[],e){if(this.lastHitParticle=null,!this.particlesAreDraggable)return!1;if(this.noUserInteraction)return!1;const i=K(t)?t:[t],s=this.particleStore;let n,r,o,a,c,l=!1;if(i.some((t=>{if(K(t))n=t[0],r=t[1];else{if(!fc(t,t.x,t.y))return!1;n=t.x,r=t.y}if(!n.toFixed||!r.toFixed||isNaN(n)||isNaN(r))return!1;const e=td();for(o=0,a=s.length;o<a;o++)if(c=s[o],e.set(c.position).vectorSubtract(t),e.getMagnitude()<this.hitRadius){l=c;break}return ed(e),l}),this)){const t=this.checkHitReturn(n,r,e,l);return this.lastHitParticle=l,t}return!1},Lp.checkHitReturn=function(t,e,i,s){return{x:t,y:e,artefact:this,particle:s}},Lp.pickupArtefact=function(t){const e=this.lastHitParticle;return fc(t,e)&&(e.isBeingDragged=t,e.dragOffset=td(e.position).vectorSubtract(t)),this},Lp.dropArtefact=function(){return this.lastHitParticle.isBeingDragged=null,ed(this.lastHitParticle.dragOffset),this.lastHitParticle.dragOffset=null,this.lastHitParticle=null,this};const Xp=function(t,e,i){const{springs:s,springConstant:n,damperConstant:r,restLength:o}=this,a=td(t.position).vectorSubtract(e.position),c=a.getMagnitude(),l=$p({name:i,particleFrom:t,particleTo:e,springConstant:n,damperConstant:r,restLength:c*o});s.push(l),ed(a)},Yp={"weak-net":function(t){const{particleStore:e,artefact:i,historyLength:s,engine:n,forces:r,mass:o,rows:a,columns:c,rowDistance:l,columnDistance:h,name:u}=this;if(t&&a>0&&c>0){const[d,f]=this.currentStampPosition,[,p]=t.currentDimensions,m=l.substring?parseFloat(l)/100*p:l,g=h.substring?parseFloat(h)/100*p:h;let y,S,k,A,v,P,C;for(A=0;A<a;A++)for(S=m*A+f,v=0;v<c;v++)y=g*v+d,k=Wf({name:`${u}-${A}-${v}`,positionX:y,positionY:S,positionZ:0,velocityX:0,velocityY:0,velocityZ:0,historyLength:s,engine:n,forces:r,mass:o,fill:i.get(ki),stroke:i.get(ho)}),k.run(0,0,!1),e.push(k);for(A=0;A<a;A++)for(v=0;v<c-1;v++)P=b[`${u}-${A}-${v}`],C=b[`${u}-${A}-${v+1}`],Xp.call(this,P,C,`${u}-${A}-${v}~${u}-${A}-${v+1}`);for(A=0;A<c;A++)for(v=0;v<a-1;v++)P=b[`${u}-${v}-${A}`],C=b[`${u}-${v+1}-${A}`],Xp.call(this,P,C,`${u}-${v}-${A}~${u}-${v+1}-${A}`)}},"strong-net":function(t){const{particleStore:e,artefact:i,historyLength:s,engine:n,forces:r,mass:o,rows:a,columns:c,rowDistance:l,columnDistance:h,name:u}=this;if(t&&a>0&&c>0){const[d,f]=this.currentStampPosition,[,p]=t.currentDimensions,m=l.substring?parseFloat(l)/100*p:l,g=h.substring?parseFloat(h)/100*p:h;let y,S,k,A,v,P,C;for(A=0;A<a;A++)for(S=m*A+f,v=0;v<c;v++)y=g*v+d,k=Wf({name:`${u}-${A}-${v}`,positionX:y,positionY:S,positionZ:0,velocityX:0,velocityY:0,velocityZ:0,historyLength:s,engine:n,forces:r,mass:o,fill:i.get(ki),stroke:i.get(ho)}),k.run(0,0,!1),e.push(k);for(A=0;A<a;A++)for(v=0;v<c-1;v++)P=b[`${u}-${A}-${v}`],C=b[`${u}-${A}-${v+1}`],Xp.call(this,P,C,`${u}-${A}-${v}~${u}-${A}-${v+1}`);for(A=0;A<c;A++)for(v=0;v<a-1;v++)P=b[`${u}-${v}-${A}`],C=b[`${u}-${v+1}-${A}`],Xp.call(this,P,C,`${u}-${v}-${A}~${u}-${v+1}-${A}`);for(A=0;A<c-1;A++)for(v=0;v<a-1;v++)P=b[`${u}-${v}-${A}`],C=b[`${u}-${v+1}-${A+1}`],Xp.call(this,P,C,`${u}-${v}-${A}~${u}-${v+1}-${A+1}`);for(A=0;A<c-1;A++)for(v=a-1;v>0;v--)P=b[`${u}-${v}-${A}`],C=b[`${u}-${v-1}-${A+1}`],Xp.call(this,P,C,`${u}-${v}-${A}~${u}-${v-1}-${A+1}`)}},"weak-shape":function(){const{particleStore:t,artefact:e,historyLength:i,engine:s,forces:n,mass:r,name:o,shapeTemplate:a,precision:c,joinTemplateEnds:l}=this;let h,u,d,f;if(a&&c){for(h=0;h<c;h++){const l=a.getPathPositionData(h/c);u=Wf({name:`${o}-${h}`,positionX:l.x,positionY:l.y,positionZ:0,velocityX:0,velocityY:0,velocityZ:0,historyLength:i,engine:s,forces:n,mass:r,fill:e.get(ki),stroke:e.get(ho)}),u.run(0,0,!1),t.push(u)}for(h=0;h<c-1;h++)d=b[`${o}-${h}`],f=b[`${o}-${h+1}`],Xp.call(this,d,f,`${o}-${h}~${o}-${h+1}`);for(l&&(d=b[`${o}-${c-1}`],f=b[`${o}-0`],Xp.call(this,d,f,`${o}-${c-1}~${o}-0`)),h=0;h<c-2;h++)d=b[`${o}-${h}`],f=b[`${o}-${h+2}`],Xp.call(this,d,f,`${o}-${h}~${o}-${h+2}`);for(l&&(d=b[`${o}-${c-2}`],f=b[`${o}-0`],Xp.call(this,d,f,`${o}-${c-2}~${o}-0`),d=b[`${o}-${c-1}`],f=b[`${o}-1`],Xp.call(this,d,f,`${o}-${c-1}~${o}-1`)),h=0;h<c-3;h++)d=b[`${o}-${h}`],f=b[`${o}-${h+3}`],Xp.call(this,d,f,`${o}-${h}~${o}-${h+3}`);l&&(d=b[`${o}-${c-3}`],f=b[`${o}-0`],Xp.call(this,d,f,`${o}-${c-3}~${o}-0`),d=b[`${o}-${c-2}`],f=b[`${o}-1`],Xp.call(this,d,f,`${o}-${c-2}~${o}-1`),d=b[`${o}-${c-1}`],f=b[`${o}-2`],Xp.call(this,d,f,`${o}-${c-1}~${o}-2`))}},"strong-shape":function(){const{particleStore:t,artefact:e,historyLength:i,engine:s,forces:n,mass:r,name:o,shapeTemplate:a,precision:c,joinTemplateEnds:l}=this;let h,u,d,f;if(a&&c){for(h=0;h<c;h++){const l=a.getPathPositionData(h/c);u=Wf({name:`${o}-${h}`,positionX:l.x,positionY:l.y,positionZ:0,velocityX:0,velocityY:0,velocityZ:0,historyLength:i,engine:s,forces:n,mass:r,fill:e.get(ki),stroke:e.get(ho)}),u.run(0,0,!1),t.push(u)}for(h=0;h<c-1;h++)d=b[`${o}-${h}`],f=b[`${o}-${h+1}`],Xp.call(this,d,f,`${o}-${h}~${o}-${h+1}`);for(l&&(d=b[`${o}-${c-1}`],f=b[`${o}-0`],Xp.call(this,d,f,`${o}-${c-1}~${o}-0`)),h=0;h<c-2;h++)d=b[`${o}-${h}`],f=b[`${o}-${h+2}`],Xp.call(this,d,f,`${o}-${h}~${o}-${h+2}`);for(l&&(d=b[`${o}-${c-2}`],f=b[`${o}-0`],Xp.call(this,d,f,`${o}-${c-2}~${o}-0`),d=b[`${o}-${c-1}`],f=b[`${o}-1`],Xp.call(this,d,f,`${o}-${c-1}~${o}-1`)),h=0;h<c-3;h++)d=b[`${o}-${h}`],f=b[`${o}-${h+3}`],Xp.call(this,d,f,`${o}-${h}~${o}-${h+3}`);l&&(d=b[`${o}-${c-3}`],f=b[`${o}-0`],Xp.call(this,d,f,`${o}-${c-3}~${o}-0`),d=b[`${o}-${c-2}`],f=b[`${o}-1`],Xp.call(this,d,f,`${o}-${c-2}~${o}-1`),d=b[`${o}-${c-1}`],f=b[`${o}-2`],Xp.call(this,d,f,`${o}-${c-1}~${o}-2`));const p=V(c/2);for(h=0;h<c-p;h++)d=b[`${o}-${h}`],h+p<c-1&&(f=b[`${o}-${h+p}`],Xp.call(this,d,f,`${o}-${h}~${o}-${h+p}`))}},"hub-spoke":function(){const{shapeTemplate:t,precision:e}=this;if(t&&t.type&&e){const{particleStore:i,artefact:s,historyLength:n,engine:r,forces:o,mass:a,name:c,joinTemplateEnds:l}=this;let h,u,d,f;if(Qi.includes(t.type)){for(h=0;h<e;h++){const l=t.getPathPositionData(h/e);u=Wf({name:`${c}-${h}`,positionX:l.x,positionY:l.y,positionZ:0,velocityX:0,velocityY:0,velocityZ:0,historyLength:n,engine:r,forces:o,mass:a,fill:s.get(ki),stroke:s.get(ho)}),u.run(0,0,!1),i.push(u)}for(h=0;h<e-1;h++)d=b[`${c}-${h}`],f=b[`${c}-${h+1}`],Xp.call(this,d,f,`${c}-${h}-${h+1}`);for(l&&(d=b[`${c}-${e-1}`],f=b[`${c}-0`],Xp.call(this,d,f,`${c}-${e-1}-0`)),h=0;h<e-2;h++)d=b[`${c}-${h}`],f=b[`${c}-${h+2}`],Xp.call(this,d,f,`${c}-${h}~${c}-${h+2}`);l&&(d=b[`${c}-${e-2}`],f=b[`${c}-0`],Xp.call(this,d,f,`${c}-${e-2}~${c}-0`),d=b[`${c}-${e-1}`],f=b[`${c}-1`],Xp.call(this,d,f,`${c}-${e-1}~${c}-1`))}const[p,m]=t.get("position"),g=Wf({name:`${c}-hub`,positionX:p,positionY:m,positionZ:0,velocityX:0,velocityY:0,velocityZ:0,historyLength:n,engine:r,forces:o,mass:a,fill:s.get(ki),stroke:s.get(ho)});g.run(0,0,!1),i.forEach(((t,e)=>Xp.call(this,t,g,`${c}-${e}-hub`))),i.push(g)}}},Gp=function(t){return!!t&&new Net(t)};function jp(t=qa){t.defs=cc(t.defs,{choke:15});const e=t.setters,i=t.deltaSetters;e.paletteStart=function(t){this.gradient&&this.gradient.set({paletteStart:t})},i.paletteStart=function(t){this.gradient&&this.gradient.setDelta({paletteStart:t})},e.paletteEnd=function(t){this.gradient&&this.gradient.set({paletteEnd:t})},i.paletteEnd=function(t){this.gradient&&this.gradient.setDelta({paletteEnd:t})},e.colors=function(t){this.gradient&&this.gradient.set({colors:t})},e.precision=function(t){this.gradient&&this.gradient.set({precision:t})},e.easing=function(t){this.gradient&&this.gradient.set({easing:t})},e.easingFunction=e.easing,e.colorSpace=function(t){this.gradient&&this.gradient.set({colorSpace:t})},e.returnColorAs=function(t){this.gradient&&this.gradient.set({returnColorAs:t})},e.cyclePalette=function(t){this.gradient&&this.gradient.set({cyclePalette:t})},e.delta=function(t=qa){this.gradient&&this.gradient.set({delta:t})},t.installElement=function(t){const e=document.createElement(ve);e.id=t,this.element=e,this.engine=this.element.getContext(Pt,{willReadFrequently:!0});const i=document.createElement(ve);return i.id=`${t}-color`,i.width=256,i.height=1,this.colorElement=i,this.colorEngine=this.colorElement.getContext(Pt,{willReadFrequently:!0}),this.gradient=ip({name:`${t}-gradient`,endX:pn,delta:{paletteStart:0,paletteEnd:0},cyclePalette:!1}),this.gradientLastUpdated=0,this},t.checkSource=function(){this.notifySubscribers()},t.getData=function(t,e){return this.notifySubscribers(),this.buildStyle(e)},t.update=function(){this.dirtyOutput=!0},t.notifySubscribers=function(){this.dirtyOutput&&this.cleanOutput(),this.subscribers.forEach((t=>this.notifySubscriber(t)),this)},t.notifySubscriber=function(t){t.sourceNaturalWidth=this.width,t.sourceNaturalHeight=this.height,t.sourceLoaded=!0,t.source=this.element,t.dirtyImage=!0,t.dirtyCopyStart=!0,t.dirtyCopyDimensions=!0,t.dirtyImageSubscribers=!0},t.paintCanvas=function(){if(this.checkOutputValuesExist()&&this.dirtyOutput){this.dirtyOutput=!1;const{element:t,engine:e,width:i,height:s,colorEngine:n,gradient:r,choke:o,gradientLastUpdated:a}=this;t.width=i,t.height=s;const c=e.getImageData(0,0,i,s),l=c.data,h=i*s;let u,d,f;const p=et();a+o<p&&(r.updateByDelta(),this.gradientLastUpdated=p);const m=n.createLinearGradient(0,0,255,0);r.addStopsToGradient(m,r.paletteStart,r.paletteEnd,r.cyclePalette),n.fillStyle=m,n.fillRect(0,0,256,1);const g=n.getImageData(0,0,256,1).data;for(u=0;u<h;u++)d=4*V(255*this.getOutputValue(u,i)),f=4*u,l[f]=g[d],l[++f]=g[++d],l[++f]=g[++d],l[++f]=g[++d];e.putImageData(c,0,0)}}}I.Net=Net;const NoiseAsset=function(t=qa){return this.makeName(t.name),this.register(),this.installElement(this.name),this.perm=[],this.permMod8=[],this.values=[],this.grad=[],this.subscribers=[],this.set(this.defs),this.set(t),t.subscribe&&this.subscribers.push(t.subscribe),this.dirtyOutput=!0,this},zp=NoiseAsset.prototype=yc();zp.type="NoiseAsset",zp.lib=Jt,zp.isArtefact=!1,zp.isAsset=!0,ml(zp),du(zp),jp(zp),Wu(zp);const Wp={width:300,height:150,noiseEngine:Lr,seed:Qe,size:256,scale:50,octaves:1,octaveFunction:tn,persistence:.5,lacunarity:2,smoothing:"quintic",sumFunction:tn,sineFrequencyCoeff:1,sumAmplitude:5,worleyOutput:"X",worleyDepth:0};zp.defs=cc(zp.defs,Wp),delete zp.defs.source,delete zp.defs.sourceLoaded,zp.stringifyFunction=Ua,zp.processPacketOut=Ua,zp.finalizePacketOut=Ua,zp.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},zp.clone=_a;const Vp=zp.setters;Vp.source=Ua,Vp.subscribers=Ua,Vp.octaveFunction=function(t){this.octaveFunction=null!=this.octaveFunctions[t]?this.octaveFunctions[t]:Za,this.dirtyNoise=!0,this.dirtyOutput=!0},Vp.sumFunction=function(t){this.sumFunction=null!=this.sumFunctions[t]?this.sumFunctions[t]:Za,this.dirtyNoise=!0,this.dirtyOutput=!0},Vp.smoothing=function(t){this.smoothing=null!=gc[t]?gc[t]:Za,this.dirtyNoise=!0,this.dirtyOutput=!0},Vp.noiseEngine=function(t){this.noiseEngine=null!=this.noiseEngines[t]?this.noiseEngines[t]:this.noiseEngines[Lr],this.dirtyNoise=!0,this.dirtyOutput=!0},Vp.octaves=function(t){t.toFixed&&(this.octaves=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.seed=function(t){t.substring&&(this.seed=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.scale=function(t){t.toFixed&&(this.scale=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.size=function(t){t.toFixed&&(this.size=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.persistence=function(t){t.toFixed&&(this.persistence=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.lacunarity=function(t){t.toFixed&&(this.lacunarity=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.sineFrequencyCoeff=function(t){t.toFixed&&(this.sineFrequencyCoeff=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.modularAmplitude=function(t){t.toFixed&&(this.sumAmplitude=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.sumAmplitude=function(t){t.toFixed&&(this.sumAmplitude=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.width=function(t){t.toFixed&&(this.width=t,this.sourceNaturalWidth=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.height=function(t){t.toFixed&&(this.height=t,this.sourceNaturalHeight=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.worleyDepth=function(t){t.toFixed&&(this.worleyDepth=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},Vp.worleyOutput=function(t){t.substring&&Fa.includes(t)&&(this.worleyOutput=t,this.dirtyNoise=!0,this.dirtyOutput=!0)},zp.cleanOutput=function(){this.dirtyNoise&&this.cleanNoise(),this.dirtyOutput&&this.paintCanvas()},zp.cleanNoise=function(){if(this.dirtyNoise){this.dirtyNoise=!1;const{noiseEngine:t,seed:e,width:i,height:s,octaves:n,lacunarity:r,persistence:o,scale:a,octaveFunction:c,sumFunction:l}=this;if(t&&t.init){this.rndEngine=Th(e),this.generatePermutationTable(),t.init.call(this);const h=Kc();let u,d,f,p,m,g,y,b;for(d=0;d<s;d++)for(h[d]=[],u=0;u<i;u++)h[d][u]=[];const S=ot(i,-a/100);let k=-1e3,A=1e3;const v=t.name;if(re.includes(v))for(d=0;d<s;d++)for(u=0;u<i;u++)p=u*S,m=d*S,g=t.getNoiseValue.call(this,p,m),h[d][u]=g,A=tt(A,g),k=J(k,g);else for(d=0;d<s;d++)for(u=0;u<i;u++){for(p=u*S,m=d*S,g=0,y=1,b=1,f=0;f<n;f++){let e=t.getNoiseValue.call(this,p*b,m*b);e=c(e,p,m,f+1),e*=y,g+=e,b*=r,y*=o}h[d][u]=g,A=tt(A,g),k=J(k,g)}const P=k-A;for(d=0;d<s;d++)for(u=0;u<i;u++){p=u*S,m=d*S;const t=(h[d][u]-A)/P;h[d][u]=l.call(this,t,u*S,d*S)}this.noiseValues||(this.noiseValues=[]),this.noiseValues.length=0,this.noiseValues.push(...h),qc(h)}else this.dirtyNoise=!0}},zp.checkOutputValuesExist=function(){return null!=this.noiseValues},zp.getOutputValue=function(t,e){const i=V(t/e),s=t-i*e;return this.noiseValues[i][s]};const Up=.5*(ft(3)-1),Zp=(3-ft(3))/6,_p=(3-ft(3))/6*2,Kp=U([U([1,1]),U([-1,1]),U([1,-1]),U([-1,-1]),U([1,0]),U([-1,0]),U([0,1]),U([0,-1])]);zp.noiseEngines={[gn]:{name:gn,init:function(){const{grad:t,size:e,rndEngine:i}=this;let s;t.length=0;for(let n=0;n<e;n++)t[n]=[2*i.random()-1,2*i.random()-1],s=ft(t[n][0]*t[n][0]+t[n][1]*t[n][1]),t[n][0]/=s,t[n][1]/=s},getNoiseValue:function(t,e){const{size:i,perm:s,grad:n,smoothing:r}=this;let o,a;const c=V(t)%i,l=(c+1)%i,h=t-V(t),u=h-1,d=V(e)%i,f=(d+1)%i,p=e-V(e),m=p-1,g=s[c],y=s[l],b=s[g+d],S=s[y+d],k=s[g+f],A=s[y+f],v=r(h),P=r(p);o=h*n[b][0]+p*n[b][1],a=u*n[S][0]+p*n[S][1];const C=tc(v,o,a);o=h*n[k][0]+m*n[k][1],a=u*n[A][0]+m*n[A][1];const w=tc(v,o,a);return.5*(1+tc(P,C,w))}},[is]:{name:is,init:Ua,getNoiseValue:function(t,e){const{size:i,perm:s,permMod8:n,smoothing:r}=this;let o,a;const c=V(t)%i,l=(c+1)%i,h=t-V(t),u=h-1,d=V(e)%i,f=(d+1)%i,p=e-V(e),m=p-1,g=s[c],y=s[l],b=n[g+d],S=n[y+d],k=n[g+f],A=n[y+f],v=r(h),P=r(p);o=h*Kp[b][0]+p*Kp[b][1],a=u*Kp[S][0]+p*Kp[S][1];const C=tc(v,o,a);o=h*Kp[k][0]+m*Kp[k][1],a=u*Kp[A][0]+m*Kp[A][1];const w=tc(v,o,a);return.5*(1+tc(P,C,w))}},[Lr]:{name:Lr,init:Ua,getNoiseValue:function(t,e){const i=function(t,e,i){const s=.5-t*t-e*e;if(s<0)return 0;const[n,r]=Kp[i];return s*s*(n*t+r*e)},{size:s,perm:n,permMod8:r}=this,o=(t+e)*Up,a=V(t+o),c=V(e+o),l=(a+c)*Zp,h=t-(a-l),u=e-(c-l),d=a%s,f=c%s;let p=r[d+n[f]],m=i(h,u,p);p=r[d+1+n[f+1]],m+=i(h-1+_p,u-1+_p,p);let g=0,y=1;return h>u&&(g=1,y=0),p=r[d+g+n[f+y]],m+=i(h-g+Zp,u-y+Zp,p),.5+35*m}},[va]:{name:va,init:function(){const{values:t,size:e,rndEngine:i}=this;t.length=0;for(let s=0;s<e;s++)t[s]=t[s+e]=i.random()},getNoiseValue:function(t,e){const{values:i,size:s,perm:n,smoothing:r}=this,o=V(t)%s,a=V(e)%s,c=(o+1)%s,l=(a+1)%s,h=t-V(t),u=e-V(e),d=r(h),f=r(u),p=n[o],m=n[c],g=n[p+a],y=n[m+a],b=n[p+l],S=n[m+l],k=tc(d,i[g],i[y]),A=tc(d,i[b],i[S]);return tc(f,k,A)}},[lo]:{name:lo,init:Ua,getNoiseValue:function(t,e){return t/5+e/5}},[Wr]:{name:Wr,init:Ua,getNoiseValue:function(t,e){const{smoothing:i}=this;return i(t)/5+i(e)/5}},[Da]:{name:Da,init:function(){this.worleySeed=V(1e6*this.rndEngine.random())},getNoiseValue:function(t,e){const{worleyDepth:i,worleyDistanceFunctions:s,worleyOutputFunctions:n,worleyOutput:r}=this,o=s[yi],a=n[r];return this.worleyNoise({x:t,y:e,z:i},o,a)}},[Ra]:{name:Ra,init:function(){this.worleySeed=V(1e6*this.rndEngine.random())},getNoiseValue:function(t,e){const{worleyDepth:i,worleyDistanceFunctions:s,worleyOutputFunctions:n,worleyOutput:r}=this,o=s[Os],a=n[r];return this.worleyNoise({x:t,y:e,z:i},o,a)}}},zp.generatePermutationTable=function(){const{perm:t,permMod8:e,rndEngine:i,size:s}=this;let n,r,o;for(t.length=0,e.length=0,n=0;n<s;n++)t[n]=n;for(;--n;)r=V(i.random()*s),o=t[n],t[n]=t[r],t[r]=o;for(n=0;n<s;n++)t[n+s]=t[n],e[n]=e[n+s]=t[n]%8},zp.octaveFunctions={none:Za,absolute:function(t){return B(2*t-1)}},zp.sumFunctions={none:Za,"sine-x":function(t,e){return.5+dt(e*this.sineFrequencyCoeff+t)/2},"sine-y":function(t,e,i){return.5+dt(i*this.sineFrequencyCoeff+t)/2},sine:function(t,e,i){return.5+dt(e*this.sineFrequencyCoeff+t)/4+dt(i*this.sineFrequencyCoeff+t)/4},modular:function(t){const e=t*this.sumAmplitude;return e-V(e)},random:function(t){const e=this.sumAmplitude;let i=t+(ct()/e-.5/e);return i>1?i=1:i<0&&(i=0),i}},zp.wXorshift=function(t){let e=t^t>>12;return e^=e<<25,e^=e>>27,2*e},zp.wHash=function(t,e,i){return 16777619*(16777619*(16777619*(2166136261^t)^e)^i)&4294967295},zp.worleyDistanceFunctions={[yi]:function(t,e){return function(t,e){return[t.x-e.x,t.y-e.y,t.z-e.z]}(t,e).reduce(((t,e)=>t+e*e),0)},[Os]:function(t,e){return function(t,e){return[t.x-e.x,t.y-e.y,t.z-e.z]}(t,e).reduce(((t,e)=>t+B(e)),0)}},zp.wProbLookup=function(t){return(t&=4294967295)<393325350?1:t<1022645910?2:t<1861739990?3:t<2700834071?4:t<3372109335?5:t<3819626178?6:t<4075350088?7:t<4203212043?8:9},zp.wInsert=function(t,e){let i;for(let s=t.length-1;s>=0&&!(e>t[s]);s--)i=t[s],t[s]=e,s+1<t.length&&(t[s+1]=i)},zp.worleyOutputFunctions={X:function(t){return t[0]},Y:function(t){return t[1]},Z:function(t){return t[2]},XminusY:function(t){return t[0]-t[1]},XminusZ:function(t){return t[0]-t[2]},YminusX:function(t){return t[1]-t[0]},YminusZ:function(t){return t[1]-t[2]},ZminusX:function(t){return t[2]-t[0]},ZminusY:function(t){return t[2]-t[1]},XaddY:function(t){return t[0]+t[1]},XaddZ:function(t){return t[0]+t[2]},YaddZ:function(t){return t[1]+t[2]},XaddYminusZ:function(t){return t[0]+t[1]-t[2]},XaddZminusY:function(t){return t[0]+t[2]-t[1]},YaddZminusX:function(t){return t[1]+t[2]-t[0]},XmultiplyY:function(t){return t[0]*t[1]},XmultiplyZ:function(t){return t[0]*t[2]},YmultiplyZ:function(t){return t[1]*t[2]},XmultiplyYaddZ:function(t){return t[0]*t[1]+t[2]},XmultiplyZaddY:function(t){return t[0]*t[2]+t[1]},YmultiplyZaddX:function(t){return t[1]*t[2]+t[0]},XmultiplyYminusZ:function(t){return t[0]*t[1]-t[2]},XmultiplyZminusY:function(t){return t[0]*t[2]-t[1]},YmultiplyZminusX:function(t){return t[1]*t[2]-t[0]},sum:function(t){return t[0]+t[1]+t[2]}},zp.worleyNoise=function(t,e,i){let s,n,r={x:0,y:0,z:0};const o={x:0,y:0,z:0};let a,c,l;const h=[9999999,9999999,9999999];let{x:u,y:d,z:f}=t;u=V(u),d=V(d),f=V(f);for(let i=-1;i<2;++i)for(let p=-1;p<2;++p)for(let m=-1;m<2;++m){a=u+i,c=d+p,l=f+m,s=this.wXorshift(this.wHash(a+this.worleySeed&4294967295,4294967295&c,4294967295&l)),n=this.wProbLookup(s);for(let i=0;i<n;++i)s=this.wXorshift(s),o.X=s/4294967296,s=this.wXorshift(s),o.Y=s/4294967296,s=this.wXorshift(s),o.Z=s/4294967296,r={x:o.X+a,y:o.Y+c,z:o.Z+l},this.wInsert(h,e(t,r))}return i(h.map((t=>t<0?0:t>1?1:t)))};const qp=function(t){return!!t&&new NoiseAsset(t)},Qp=function(t){return!!t&&new NoiseAsset(t)};I.NoiseAsset=NoiseAsset;const Jp=function(t=qa){if(!fc(t.event,t.origin,t.updates))return!1;const e=t.target.substring&&t.targetLibrarySection?T[t.targetLibrarySection][t.target]:t.target;if(!e)return!1;const i=t.event,s=t.origin,n=t.useNativeListener?dl:al,r=t.useNativeListener?fl:cl;let o=Ua;t.preventDefault&&(o=t=>{t.preventDefault(),t.returnValue=!1});const a=nc(t.setup)?t.setup:Ua,c=nc(t.callback)?t.callback:Ua,l=function(i){o(i);const s=!(!i||!i.target)&&i.target.id;if(s){const n=t.updates[s];if(n){a();const t=n[0],s=n[1],r=i.target.value;let o,l=!0;switch(s){case"float":o=parseFloat(r);break;case"int":o=parseInt(r,10);break;case"round":o=lt(r);break;case"roundDown":o=V(r);break;case"roundUp":o=X(r);break;case"raw":o=r;break;case"string":o=`${r}`;break;case"boolean":o=!!dc(r)&&(r.substring?ca==r.toLowerCase()||"false"!=r.toLowerCase()&&!!parseFloat(r):!!r);break;default:s.substring?o=`${parseFloat(r)}${s}`:l=!1}l&&(e.type==Co?e.setArtefacts({[t]:o}):e.set({[t]:o}),c())}}};return n(i,l,s),function(){r(i,l,s)}},tm=(t=qa)=>Jp(t),Oval=function(t=qa){return this.shapeInit(t),this},em=Oval.prototype=yc();em.type="Oval",em.lib=gi,em.isArtefact=!0,em.isAsset=!1,ml(em),hf(em);em.defs=cc(em.defs,{radiusX:5,radiusY:5,intersectX:.5,intersectY:.5,offshootA:.55,offshootB:0});const im=em.setters,sm=em.deltaSetters;im.radius=function(t){this.setRectHelper(t,lr)},im.radiusX=function(t){this.setRectHelper(t,cr)},im.radiusY=function(t){this.setRectHelper(t,hr)},sm.radius=function(t){this.deltaRectHelper(t,lr)},sm.radiusX=function(t){this.deltaRectHelper(t,cr)},sm.radiusY=function(t){this.deltaRectHelper(t,hr)},im.offshootA=function(t){this.offshootA=t,this.updateDirty()},im.offshootB=function(t){this.offshootB=t,this.updateDirty()},sm.offshootA=function(t){t.toFixed&&(this.offshootA+=t,this.updateDirty())},sm.offshootB=function(t){t.toFixed&&(this.offshootB+=t,this.updateDirty())},im.intersectA=function(t){this.intersectA=t,this.updateDirty()},im.intersectB=function(t){this.intersectB=t,this.updateDirty()},sm.intersectA=function(t){t.toFixed&&(this.intersectA+=t,this.updateDirty())},sm.intersectB=function(t){t.toFixed&&(this.intersectB+=t,this.updateDirty())},em.setRectHelper=function(t,e){this.updateDirty(),e.forEach((e=>{this[e]=t}),this)},em.deltaRectHelper=function(t,e){this.updateDirty(),e.forEach((e=>{this[e]=Ga(this[e],t)}),this)},em.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeOvalPath()},em.makeOvalPath=function(){const t=parseFloat(this.offshootA.toFixed(6)),e=parseFloat(this.offshootB.toFixed(6)),i=this.radiusX,s=this.radiusY;let n,r;if(i.substring||s.substring){const t=this.getHost();if(t){const[e,o]=t.currentDimensions;n=2*(i.substring?parseFloat(i)/100*e:i),r=2*(s.substring?parseFloat(s)/100*o:s)}}else n=2*i,r=2*s;const o=parseFloat((n*this.intersectX).toFixed(2)),a=parseFloat((n-o).toFixed(2)),c=parseFloat((r*this.intersectY).toFixed(2)),l=parseFloat((r-c).toFixed(2));let h=Ma;return h+=`c${a*t},${c*e} ${a-a*e},${c-c*t}, ${a},${c} `,h+=`${-a*e},${l*t} ${a*t-a},${l-l*e} ${-a},${l} `,h+=`${-o*t},${-l*e} ${o*e-o},${l*t-l} ${-o},${-l} `,h+=`${o*e},${-c*t} ${o-o*t},${c*e-c} ${o},${-c}z`,h},em.calculateLocalPathAdditionalActions=function(){const[t,e]=this.localBox;this.pathDefinition=this.pathDefinition.replace(Ma,`m${-t},${-e}`),this.pathCalculatedOnce=!1,this.calculateLocalPath(this.pathDefinition,!0)};const nm=function(t){return!!t&&(t.species="oval",new Oval(t))};I.Oval=Oval;const rm=U(["video_audioTracks","video_autoPlay","video_buffered","video_controller","video_controls","video_controlsList","video_crossOrigin","video_currentSrc","video_currentTime","video_defaultMuted","video_defaultPlaybackRate","video_disableRemotePlayback","video_duration","video_ended","video_error","video_loop","video_mediaGroup","video_mediaKeys","video_muted","video_networkState","video_paused","video_playbackRate","video_readyState","video_seekable","video_seeking","video_sinkId","video_src","video_srcObject","video_textTracks","video_videoTracks","video_volume"]),om=U(["video_autoPlay","video_controller","video_controls","video_crossOrigin","video_currentTime","video_defaultMuted","video_defaultPlaybackRate","video_disableRemotePlayback","video_loop","video_mediaGroup","video_muted","video_playbackRate","video_src","video_srcObject","video_volume"]),VideoAsset=function(t=qa){return this.assetConstructor(t)},am=VideoAsset.prototype=yc();am.type=Wo,am.lib=Jt,am.isArtefact=!1,am.isAsset=!0,ml(am),du(am),am.saveAsPacket=function(){return[this.name,this.type,this.lib,{}]},am.stringifyFunction=Ua,am.processPacketOut=Ua,am.finalizePacketOut=Ua,am.clone=_a;am.setters.source=function(t){t&&(t.tagName.toUpperCase()==Tt&&(this.source=t,this.sourceNaturalWidth=t.videoWidth||0,this.sourceNaturalHeight=t.videoHeight||0,this.sourceLoaded=t.readyState>2),this.sourceLoaded&&this.notifySubscribers())},am.checkSource=function(t,e){const i=this.source;i&&i.readyState>2?(this.sourceLoaded=!0,this.sourceNaturalWidth===i.videoWidth&&this.sourceNaturalHeight===i.videoHeight&&this.sourceNaturalWidth===t&&this.sourceNaturalHeight===e||(this.sourceNaturalWidth=i.videoWidth,this.sourceNaturalHeight=i.videoHeight,this.notifySubscribers())):this.sourceLoaded=!1},am.addTextTrack=function(t,e,i){const s=this.source;s&&s.addTextTrack&&s.addTextTrack(t,e,i)},am.captureStream=function(){const t=this.source;return!(!t||!t.captureStream)&&t.captureStream()},am.canPlayType=function(t){const e=this.source;return e?e.canPlayType(t):"maybe"},am.fastSeek=function(t){const e=this.source;e&&e.fastSeek&&e.fastSeek(t)},am.load=function(){const t=this.source;t&&t.load()},am.pause=function(){const t=this.source;t&&t.pause()},am.play=function(){const t=this.source;return t?t.play().catch((t=>console.log(t.code,t.name,t.message))):Promise.reject("Source not defined")},am.setMediaKeys=function(t){const e=this.source;return e?e.setMediaKeys?e.setMediaKeys(t):Promise.reject("setMediaKeys not supported"):Promise.reject("Source not defined")},am.setSinkId=function(){const t=this.source;return t?t.setSinkId?t.setSinkId():Promise.reject("setSinkId not supported"):Promise.reject("Source not defined")};const cm=function(t){document.querySelectorAll(t).forEach((t=>{let e;if(t.tagName.toUpperCase()==Tt){if(t.id||t.name)e=t.id||t.name;else{const i=te.exec(t.src);e=i&&i[1]?i[1]:Na}const i=dm({name:e,source:t});t.readyState<=2&&(t.oncanplay=()=>{i.set({source:t})})}}))},lm=function(t=qa){const e={};e.audio=!dc(t.audio)||t.audio,e.video={};const i=e.video.width={};t.minWidth&&(i.min=t.minWidth),t.maxWidth&&(i.max=t.maxWidth),i.ideal=t.width?t.width:1280;const s=e.video.height={};t.minHeight&&(s.min=t.minHeight),t.maxHeight&&(s.max=t.maxHeight),s.ideal=t.height?t.height:720,t.facing&&(e.video.facingMode=t.facing);const n=t.name||Ja(),r=document.createElement(Ca),o=dm({name:n,source:r});return new Promise(((t,i)=>{navigator&&navigator.mediaDevices?navigator.mediaDevices.getUserMedia(e).then((e=>{const i=e.getVideoTracks();let s;K(i)&&i[0]&&(s=i[0].getConstraints()),r.id=o.name,s&&(r.width=s.width,r.height=s.height),r.srcObject=e,r.onloadedmetadata=function(){r.play()},t(o)})).catch((e=>{console.log(e),t(o)})):i("Navigator.mediaDevices object not found")}))},hm=function(t=qa){const e={video:{displaySurface:"browser"},audio:{suppressLocalAudioPlayback:!1},preferCurrentTab:!1,selfBrowserSurface:"exclude",systemAudio:"include",surfaceSwitching:"include",monitorTypeSurfaces:"include"},i=t.name||Ja(),s=document.createElement(Ca),n=dm({name:i,source:s});return new Promise(((i,r)=>{navigator&&navigator.mediaDevices?navigator.mediaDevices.getDisplayMedia({...e,...t}).then((t=>{const e=t.getVideoTracks();let r;K(e)&&e[0]&&(r=e[0].getConstraints()),s.id=n.name,r&&(s.width=r.width,s.height=r.height),s.srcObject=t,s.onloadedmetadata=function(){s.play()},i(n)})).catch((t=>{console.log(t.message),i(n)})):r("Navigator.mediaDevices object not found")}))},um=function(...t){let e=Na;if(t.length){let i,s,n,r,o,a,c=!1;const l=t[0];if(l.substring){const e=te.exec(l);i=e&&e[1]?e[1]:Na,o=[...t],s=Na,n=!1,r=null,a=ee,c=!0}else l&&l.src&&(i=l.name||Na,o=[...l.src],s=l.className||Na,n=l.visibility||!1,r=document.querySelector(r),a=l.preload||ee,c=!0);const h=dm({name:i});if(c){const t=document.createElement(Ca);t.name=i,t.className=s,t.style.display=n?ue:tn,t.crossOrigin=Ut,t.preload=a,o.forEach((e=>{const i=document.createElement(Vr);i.src=e,t.appendChild(i)})),t.onload=()=>{h.set({source:t}),r&&r.appendChild(t)},h.set({source:t}),e=i}}return e},dm=function(t){return!!t&&new VideoAsset(t)};I.VideoAsset=VideoAsset;const SpriteAsset=function(t=qa){return this.assetConstructor(t),this},fm=SpriteAsset.prototype=yc();fm.type=Xo,fm.lib=Jt,fm.isArtefact=!1,fm.isAsset=!0,ml(fm),du(fm);fm.defs=cc(fm.defs,{manifest:null}),fm.saveAsPacket=function(){return[this.name,this.type,this.lib,{}]},fm.stringifyFunction=Ua,fm.processPacketOut=Ua,fm.finalizePacketOut=Ua,fm.clone=_a;fm.setters.source=function(t=[]){if(t&&t[0]){this.sourceHold||(this.sourceHold={});const e=this.sourceHold;t.forEach((t=>{const i=t.id||t.name;i&&(e[i]=t)})),this.source=t[0],this.sourceNaturalWidth=t[0].naturalWidth,this.sourceNaturalHeight=t[0].naturalHeight,this.sourceLoaded=t[0].complete}},fm.checkSource=Ua;const pm=function(...t){const e=/\.(jpeg|jpg|png|gif|webp|svg|JPEG|JPG|PNG|GIF|WEBP|SVG)/,i=[];return t.forEach((t=>{let s,n,r,o,a,c=!1,l=!1;if(t.substring){const i=te.exec(t);s=i&&i[1]?i[1]:Na,n=[t],r=Na,o=!1,a=t.replace(e,".json"),l=!0}else oc(t)&&t.imageSrc&&t.manifestSrc?(s=t.name||Na,n=K(t.imageSrc)?t.imageSrc:[t.imageSrc],a=t.manifestSrc,r=t.className||Na,o=t.visibility||!1,c=document.querySelector(t.parent),l=!0):i.push(!1);if(l){const t=mm({name:s});oc(a)?t.manifest=a:fetch(a).then((t=>{if(200!=t.status)throw new Error("Failed to load manifest");return t.json()})).then((e=>t.manifest=e)).catch((t=>console.log(t.message)));const l=[];n.forEach((t=>{const i=document.createElement(es);let n,a;e.test(t)&&(a=te.exec(t),n=a&&a[1]?a[1]:Na),i.name=n||s,i.className=r,i.crossorigin=Ut,i.style.display=o?ue:tn,c&&c.appendChild(i),i.src=t,l.push(i)})),t.set({source:l}),i.push(s)}else i.push(!1)})),i},mm=function(t){return!!t&&new SpriteAsset(t)};function gm(t=qa){const e={asset:null,removeAssetOnKill:!1,spriteIsRunning:!1,spriteLastFrameChange:0,spriteCurrentFrame:0,spriteTrack:qe,spriteForward:!0,spriteFrameDuration:100,spriteWillLoop:!0};t.defs=cc(t.defs,e);const i=t.getters,s=t.setters;i.sourceDimensions=function(){return[this.sourceNaturalWidth,this.sourceNaturalHeight]},s.asset=function(t){const e=this.asset,i=t&&t.name?t.name:t;e&&!e.substring&&e.unsubscribe(this),this.asset=i,this.dirtyAsset=!0},s.imageSource=function(t){const e=bu(t);if(e){const t=c[e[0]];if(t){const e=this.asset;e&&e.unsubscribe&&e.unsubscribe(this),t.subscribe(this)}}},s.videoSource=function(t){const e=um(t);if(e){const t=c[e];if(t){const e=this.asset;e&&e.unsubscribe&&e.unsubscribe(this),t.subscribe(this)}}},s.spriteSource=function(t){const e=pm(t);if(e){const t=c[e];if(t){const e=this.asset;e&&e.unsubscribe&&e.unsubscribe(this),t.subscribe(this)}}},t.cleanAsset=function(){const t=this.asset;if(t&&t.substring){const e=c[t];e&&(this.dirtyAsset=!1,e.subscribe(this))}},t.videoAction=function(t,...e){const i=this.asset;if(i&&i.type==Wo)return i[t](...e)},t.videoPromiseAction=function(t,...e){const i=this.asset;return i&&i.type==Wo?i[t](...e):Promise.reject("Asset not a video")},t.videoAddTextTrack=function(t,e,i){return this.videoAction("addTextTrack",t,e,i)},t.videoCaptureStream=function(){return this.videoAction("captureStream")},t.videoCanPlayType=function(t){return this.videoAction("canPlayType",t)},t.videoFastSeek=function(t){return this.videoAction("fastSeek",t)},t.videoLoad=function(){return this.videoAction("load")},t.videoPause=function(){return this.videoAction("pause")},t.videoPlay=function(){return this.videoPromiseAction("play")},t.videoSetMediaKeys=function(t){return this.videoPromiseAction("setMediaKeys",t)},t.videoSetSinkId=function(){return this.videoPromiseAction("setSinkId")},t.checkSpriteFrame=function(){const t=this.asset;if(t&&t.type==Xo&&t.manifest){const e=this.copyArray;if(this.spriteIsRunning){const i=this.spriteLastFrameChange,s=this.spriteFrameDuration,n=et();if(n>i+s){const i=t.manifest;if(i){const s=i[this.spriteTrack],r=s.length,o=this.spriteWillLoop;let a=this.spriteCurrentFrame;a=this.spriteForward?a+1:a-1,a<0&&(a=o?r-1:0),a>=r&&(a=o?0:r-1);const[c,l,h,u,d]=s[a];e.length=0,e.push(l,h,u,d),this.dirtyCopyStart=!1,this.dirtyCopyDimensions=!1;if(c!=(this.source.id||this.source.name)){const e=t.sourceHold[c];e&&(this.source=e)}this.spriteCurrentFrame=a,this.spriteLastFrameChange=n}}}else{const[,i,s,n,r]=t.manifest[this.spriteTrack][this.spriteCurrentFrame],[o,a,c,l]=e;o==i&&a==s&&c==n&&l==r||(e.length=0,e.push(i,s,n,r),this.dirtyCopyStart=!1,this.dirtyCopyDimensions=!1)}}},t.playSprite=function(t,e,i,s,n){dc(t)&&(this.spriteFrameDuration=t),dc(e)&&(this.spriteWillLoop=e),dc(i)&&(this.spriteTrack=i),dc(s)&&(this.spriteForward=s),dc(n)&&(this.spriteCurrentFrame=n),this.spriteLastFrameChange=et(),this.spriteIsRunning=!0},t.haltSprite=function(t,e,i,s,n){dc(t)&&(this.spriteFrameDuration=t),dc(e)&&(this.spriteWillLoop=e),dc(i)&&(this.spriteTrack=i),dc(s)&&(this.spriteForward=s),dc(n)&&(this.spriteCurrentFrame=n),this.spriteIsRunning=!1}}I.SpriteAsset=SpriteAsset;const Pattern=function(t=qa){return this.makeName(t.name),this.register(),this.set(this.defs),this.set(t),this},ym=Pattern.prototype=yc();ym.type="Pattern",ym.lib=uo,ym.isArtefact=!1,ym.isAsset=!1,ml(ym),Wu(ym),gm(ym),ym.packetObjects=hc(ym.packetObjects,["asset"]),ym.finalizePacketOut=function(t,e){if(K(e.patternMatrix))t.patternMatrix=e.patternMatrix;else{const e=this.patternMatrix;e&&(t.patternMatrix=[e.a,e.b,e.c,e.d,e.e,e.f])}return t},ym.kill=function(){const{name:t,asset:e,removeAssetOnKill:i}=this;let s,n,r,o;return oc(e)&&e.unsubscribe(this),bt(f).forEach((e=>{s=e.state,n=s.defs,s&&(r=s.fillStyle,o=s.strokeStyle,oc(r)&&r.name==t&&(s.fillStyle=n.fillStyle),oc(o)&&o.name==t&&(s.strokeStyle=n.strokeStyle))})),i&&(i.substring?e.kill(!0):e.kill()),this.deregister(),this},ym.get=function(t){const e=this.source;if(0!=t.indexOf(At)&&0!=t.indexOf(kt)||!e){const e=this.getters[t];if(e)return e.call(this);{const e=this.defs[t];if(typeof e!=pa){const i=this[t];return typeof i!=pa?i:e}return}}return rm.includes(t)||gu.includes(t)?e[t.substring(6)]:void 0},ym.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.source,r=this.defs;let o,a,c,l;for(a=0;a<i;a++)c=e[a],l=t[c],0!=c.indexOf(At)&&0!=c.indexOf(kt)||!n?c&&c!=Vs&&null!=l&&(o=s[c],o?o.call(this,l):typeof r[c]!=pa&&(this[c]=l)):(om.includes(c)||yu.includes(c))&&(n[c.substring(6)]=l);this.dirtyFilterIdentifier=!0}return this},ym.getData=function(t,e){return this.dirtyAsset&&this.cleanAsset(),this.asset.checkSource(this.sourceNaturalWidth,this.sourceNaturalHeight),this.buildStyle(e)};const bm=function(t){return!!t&&new Pattern(t)};I.Pattern=Pattern;const FontAttributes=function(t=qa){return this.makeName(t.name),this.set(this.defs),this.set(t),this},Sm=FontAttributes.prototype=yc();Sm.type="FontAttributes",Sm.lib="fontattribute",ml(Sm);const km={style:sn,variant:sn,weight:sn,sizeValue:12,sizeMetric:En,family:Ir};Sm.defs=cc(Sm.defs,km);const Am=Sm.getters,vm=Sm.setters;Am.size=function(){return this.sizeValue?`${this.sizeValue}${this.sizeMetric}`:this.sizeMetric},vm.size=function(t){if(dc(t)){let e,i,s=0,n=Is;t.includes(Ta)?n=Ta:t.includes(Ea)?n=Ea:t.includes(Gr)?n=Gr:t.includes(Xr)?n=Xr:t.includes(Is)?n=Is:t.includes(Ba)?n=Ba:t.includes(Ia)?n=Ia:t.includes(Ha)?n=Ha:t.includes(ps)?n=ps:t.includes(fs)?n=fs:(s=12,n=En);let r=t.match(/(\d+\.\d+|\d+|\.\d+)(rem|em|rlh|lh|ex|cap|ch|ic|%|vw|vh|vmax|vmin|vi|vb|in|cm|mm|Q|pc|pt|px)?/i);K(r)?([,e,i]=r,e&&i&&"."!=e&&(s=e,n=i)):(r=t.match(/\/(\d+\.\d+|\d+|\.\d+)(rem|em|rlh|lh|ex|cap|ch|ic|%|vw|vh|vmax|vmin|vi|vb|in|cm|mm|Q|pc|pt|px)?/i),K(r)&&([,e,i]=r,e&&i&&"."!=e&&(s=e,n=i))),s!=this.sizeValue&&(this.sizeValue=s,this.dirtyFont=!0),n!=this.sizeMetric&&(this.sizeMetric=n,this.dirtyFont=!0)}},vm.sizeValue=function(t){dc(t)&&t!==this.sizeValue&&(this.sizeValue=t,this.dirtyFont=!0)},vm.sizeMetric=function(t){dc(t)&&t!==this.sizeMetric&&(this.sizeMetric=t,this.dirtyFont=!0)},vm.font=function(t){dc(t)&&(vm.style.call(this,t),vm.variant.call(this,t),vm.weight.call(this,t),vm.size.call(this,t),vm.family.call(this,t))},vm.style=function(t){if(dc(t)){let e=sn;e=t.includes(os)?os:e,e=t.includes(nn)?nn:e,e!=this.style&&(this.style=e,this.dirtyFont=!0)}},vm.variant=function(t){if(dc(t)){let e=sn;e=t.includes(Yr)?Yr:e,e!==this.variant&&(this.variant=e,this.dirtyFont=!0)}},vm.weight=function(t){if(dc(t)){let e=sn;t.toFixed?e=t:(e=t.includes(ge)?ge:e,e=t.includes(Ss)?Ss:e,e=t.includes(ye)?ye:e,e=t.includes(" 100 ")?"100":e,e=t.includes(" 200 ")?"200":e,e=t.includes(" 300 ")?"300":e,e=t.includes(" 400 ")?"400":e,e=t.includes(" 500 ")?"500":e,e=t.includes(" 600 ")?"600":e,e=t.includes(" 700 ")?"700":e,e=t.includes(" 800 ")?"800":e,e=t.includes(" 900 ")?"900":e,e=/^\d00$/.test(t)?t:e),e!=this.weight&&(this.weight=e,this.dirtyFont=!0)}},vm.family=function(t){if(dc(t)){let e=Ir;const i=t.split(Kr),s=i.length;1===s&&(e=t);let n=0,r=!0;for(;r;)if(n===s)r=!1;else{const t=i[n];t.length?Dr.includes(t)||Rr.includes(t[0])?n++:r=!1:n++}n<s&&(e=i.slice(n).join(Kr)),e!=this.family&&(this.family=e,this.dirtyFont=!0)}},Sm.getFontString=function(){return!this.dirtyFont&&this.temperedFontString?this.temperedFontString:this.buildFont()},Sm.updateMetadata=function(t,e,i){t&&t.toFixed&&t>0&&t!==this.scale&&(this.scale=t,this.dirtyFont=!0),e&&e.toFixed&&e>0&&e!==this.lineHeight&&(this.lineHeight=e,this.dirtyFont=!0);const s=this.host&&this.host.type&&this.host.type==bo?this.host.name:Na;i&&i.type&&i.type==bo&&i.name!==s&&(this.host=i,this.dirtyFont=!0)},Sm.calculateSize=function(){if(this.host){const{scale:t,lineHeight:e,host:i,sizeMetric:s}=this,n=i.getComputedFontSizes();let r,o,a,c,l=this.sizeValue;if(n)[r,o,a,c]=i.getComputedFontSizes();else if(!Mr.includes(s))return this.dirtyFont=!0,"12px";isNaN(l)&&(l=12);let h=r;switch(s){case"rem":h=o*l;break;case"em":h=r*l;break;case"rlh":h=o*e*l;break;case"lh":h=r*e*l;break;case"ex":h=r/2*l;break;case"cap":case"ch":case"ic":h=r*l;break;case dn:h=r/100*l;break;case"vw":h=a/100*l;break;case"vh":h=c/100*l;break;case"vmax":h=J(a,c)/100*l;break;case"vmin":h=tt(a,c)/100*l;break;case"vi":h=a/100*l;break;case"vb":h=c/100*l;break;case"in":h=96*l;break;case"cm":h=37.8*l;break;case"mm":h=3.78*l;break;case"Q":h=.95*l;break;case"pc":h=16*l;break;case"pt":h=1.33*l;break;case En:h=l;break;case Ta:h=.6*r;break;case Ea:h=.75*r;break;case Gr:h=.8*r;break;case Xr:h=.89*r;break;case Ba:h=3*r;break;case Ia:h=2*r;break;case Ha:h=1.5*r;break;case ps:h=1.3*r;break;case fs:h=1.2*r}return h*t+"px"}return 12*this.scale+"px"},Sm.buildFont=function(){this.dirtyFont=!1;let t=Na;this.style!=sn&&(t+=`${this.style} `),this.variant!=sn&&(t+=`${this.variant} `),this.weight!=sn&&(t+=`${this.weight} `),t+=`${this.calculateSize()} `,t+=`${this.family}`;const e=qh();return e.engine.font=t,t=e.engine.font,Qh(e),this.temperedFontString=t,t},Sm.update=function(t){return t&&this.set(t),this.getFontString()};I.FontAttributes=FontAttributes;const Pm="|/}qwertyd0123456789QWERTY",Cm=document.createElement(ri);Cm.style.padding=0,Cm.style.border=0,Cm.style.margin=0,Cm.style.height=ee,Cm.style.lineHeight=1,Cm.style.boxSizing=be,Cm.innerHTML=Pm,Cm.setAttribute(Kt,ca),ql.appendChild(Cm);const wm=document.createElement("textarea"),xm=(t,e)=>(t=parseFloat(t),rc(t)||(t=0),rc(e)||(e=0),parseFloat(t.toFixed(e))),Om=(t,e)=>(t=parseFloat(t),rc(t)||(t=0),rc(e)||(e=0),B(parseFloat(t.toFixed(e)))),Phrase=function(t=qa){return this.fontAttributes=function(t){return!!t&&new FontAttributes(t)}(qa),this.entityInit(t),this.dirtyDimensions=!0,this.dirtyText=!0,this.dirtyFont=!0,this.dirtyPathObject=!0,this},Dm=Phrase.prototype=yc();Dm.type=Ho,Dm.lib=gi,Dm.isArtefact=!0,Dm.isAsset=!1,ml(Dm),tf(Dm),Dm.midInitActions=function(){this.sectionStyles=[]};const Rm={text:Na,width:ee,exposeText:!0,lineHeight:1.15,letterSpacing:0,justify:bs,sectionClassMarker:"[<>]",overlinePosition:-.1,overlineStyle:Ke,overlineWidth:1,noOverlineGlyphs:Na,underlinePosition:.6,underlineStyle:Ke,underlineWidth:1,noUnderlineGlyphs:Na,highlightStyle:"rgb(250 218 94 / 0.4)",boundingBoxColor:ji,showBoundingBox:!1,textPath:Na,textPathPosition:0,textPathLoop:!0,addTextPathRoll:!0,textPathDirection:xs,treatWordAsGlyph:!1};Dm.defs=cc(Dm.defs,Rm),Dm.packetExclusions=hc(Dm.packetExclusions,["textPositions","textLines","textLineWidths","textLineWords","textGlyphs","textGlyphWidths","fontAttributes"]),Dm.finalizePacketOut=function(t,e){const i=it(this.state.saveAsPacket(e))[3];t=cc(t,i);const s=it(this.fontAttributes.saveAsPacket(e))[3];return delete s.name,t=cc(t,s),t=this.handlePacketAnchor(t,e)},Dm.factoryKill=function(){this.exposedTextHold&&this.exposedTextHold.remove()};const Fm=Dm.getters,Hm=Dm.setters,Em=Dm.deltaSetters;Hm.handleX=function(t){null!=t&&(this.handle[0]=t,this.dirtyHandle=!0,this.dirtyText=!0,this.dirtyPathObject=!0)},Hm.handleY=function(t){null!=t&&(this.handle[1]=t,this.dirtyHandle=!0,this.dirtyText=!0,this.dirtyPathObject=!0)},Hm.handle=function(t,e){this.setCoordinateHelper(zi,t,e),this.dirtyHandle=!0,this.dirtyText=!0,this.dirtyPathObject=!0},Em.handleX=function(t){const e=this.handle;e[0]=Ga(e[0],t),this.dirtyHandle=!0,this.dirtyText=!0,this.dirtyPathObject=!0},Em.handleY=function(t){const e=this.handle;e[1]=Ga(e[1],t),this.dirtyHandle=!0,this.dirtyText=!0,this.dirtyPathObject=!0},Em.handle=function(t,e){this.setDeltaCoordinateHelper(zi,t,e),this.dirtyHandle=!0,this.dirtyText=!0,this.dirtyPathObject=!0},Fm.text=function(){return this.currentText||this.text||Na},Hm.text=function(t){var e;this.text=(e=t).substring?e:e.toString,this.dirtyText=!0,this.dirtyPathObject=!0,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0},Hm.justify=function(t){as.includes(t)&&(this.justify=t),this.dirtyText=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Hm.width=function(t){this.dimensions[0]=t,this.dirtyDimensions=!0,this.dirtyHandle=!0,this.dirtyPathObject=!0,this.dirtyText=!0},Em.width=function(t){const e=this.dimensions;e[0]=Ga(e[0],t),this.dirtyDimensions=!0,this.dirtyHandle=!0,this.dirtyPathObject=!0,this.dirtyText=!0},Hm.scale=function(t){this.scale=t,this.dirtyDimensions=!0,this.dirtyHandle=!0,this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyScale=!0},Em.scale=function(t){this.scale+=t,this.dirtyDimensions=!0,this.dirtyHandle=!0,this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyScale=!0},Hm.lineHeight=function(t){this.lineHeight=Om(t,3),this.lineHeight<.5&&(this.lineHeight=.5),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Em.lineHeight=function(t){this.lineHeight+=xm(t,3),this.lineHeight<.5&&(this.lineHeight=.5),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Hm.letterSpacing=function(t){this.letterSpacing=Om(t,3),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Em.letterSpacing=function(t){this.letterSpacing+=xm(t,3),this.letterSpacing<0&&(this.letterSpacing=0),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Hm.overlinePosition=function(t){this.overlinePosition=xm(t,3),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Em.overlinePosition=function(t){this.overlinePosition+=xm(t,3),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Hm.noOverlineGlyphs=function(t){t.substring&&(this.noOverlineGlyphs=t)},Hm.underlinePosition=function(t){this.underlinePosition=xm(t,3),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Em.underlinePosition=function(t){this.underlinePosition+=xm(t,3),this.dirtyPathObject=!0,this.dirtyText=!0,this.dirtyFilterIdentifier=!0},Hm.noUnderlineGlyphs=function(t){t.substring&&(this.noUnderlineGlyphs=t)},Hm.textPath=function(t){this.textPath=t,this.dirtyHandle=!0,this.dirtyText=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Hm.textPathPosition=function(t){this.textPathLoop?(t<0&&(t=B(t)),t>1&&(t%=1),this.textPathPosition=parseFloat(t.toFixed(6))):this.textPathPosition=t,this.dirtyFilterIdentifier=!0},Em.textPathPosition=function(t){let e=this.textPathPosition+t;this.textPathLoop?(e<0&&(e+=1),e>1&&(e%=1),this.textPathPosition=parseFloat(e.toFixed(6))):this.textPathPosition=e,this.dirtyFilterIdentifier=!0},Fm.font=function(){return this.fontAttributes.getFontString()},Hm.font=function(t){this.fontAttributes.set({font:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Fm.style=function(){return this.fontAttributes.get("style")},Hm.style=function(t){this.fontAttributes.set({style:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Fm.variant=function(){return this.fontAttributes.get("variant")},Hm.variant=function(t){this.fontAttributes.set({variant:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Fm.weight=function(){return this.fontAttributes.get("weight")},Hm.weight=function(t){this.fontAttributes.set({weight:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Fm.size=function(){return this.fontAttributes.get("size")},Hm.size=function(t){this.fontAttributes.set({size:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Fm.sizeValue=function(){return this.fontAttributes.get("sizeValue")},Hm.sizeValue=function(t){this.fontAttributes.set({sizeValue:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Em.sizeValue=function(t){this.fontAttributes.deltaSet({sizeValue:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Fm.sizeMetric=function(){return this.fontAttributes.get("sizeMetric")},Hm.sizeMetric=function(t){this.fontAttributes.set({sizeMetric:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Fm.family=function(){return this.fontAttributes.get("family")},Hm.family=function(t){this.fontAttributes.set({family:t}),this.dirtyFont=!0,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Dm.cleanDimensionsAdditionalActions=function(){if(this.fontAttributes.dirtyFont=!0,this.fontAttributes.updateMetadata(this.scale,this.lineHeight,this.getHost()),this.dimensions[0]==ee){this.buildText();const t=qh(),e=t.engine;e.font=this.fontAttributes.getFontString(),this.currentDimensions[0]=X(e.measureText(this.currentText).width/this.scale),Qh(t)}this.textLines?this.currentDimensions[1]=X(this.textHeight*this.textLines.length*this.lineHeight/this.scale):this.dirtyDimensions=!0},Dm.setSectionStyles=function(t){const e=new RegExp(this.sectionClassMarker),i=t.split(e),s=this.sectionStyles,n=E,r=[];let o,a,c;return s.length=0,i.forEach((t=>{o=n[t],o?(a=r.length,c=s[a],c?L(c,o):s[a]=L({},o)):dc(t)&&r.push(...t)})),r.join("")},Dm.addSectionClass=function(t,e){return fc(t,e)&&t.substring&&oc(e)&&(E[t]=e),this.dirtyText=!0,this.dirtyPathObject=!0,this},Dm.removeSectionClass=function(t){return delete E[t],this.dirtyText=!0,this.dirtyPathObject=!0,this},Dm.getTextPath=function(){let t=this.textPath;return t&&t.substring&&(t=this.textPath=o[this.textPath],t.type==No&&t.useAsPath?t.pathed.push(this.name):t=this.path=!1),t},Dm.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject){this.dirtyFont&&this.fontAttributes&&(this.dirtyFont=!1,this.dirtyText=!0,this.dirtyMimicDimensions=!0,this.dirtyPositionSubscribers=!0),this.dirtyText&&this.buildText(),this.dirtyHandle&&this.cleanHandle();const t=this.pathObject=new Path2D,e=this.currentHandle,i=this.currentDimensions,s=this.currentScale,n=-e[0]*s,r=-e[1]*s,o=i[0]*s,a=i[1]*s;this.boxStartValues=[n,r],t.rect(n,r,o,a)}},Dm.buildText=function(){this.dirtyText=!1;let t=this.convertTextEntityCharacters(this.text);if(t=this.setSectionStyles(t),this.currentText=t,isNaN(this.currentDimensions[0]))this.dirtyText=!0;else if(this.calculateTextPositions(t),this.exposeText){if(!this.exposedTextHold){const t=document.createElement(ri);t.id=`${this.name}-text-hold`,t.setAttribute(qt,On),this.exposedTextHold=t,this.exposedTextHoldAttached=!1}if(this.exposedTextHold.textContent=t,!this.exposedTextHoldAttached&&this.currentHost){const t=this.getCanvasTextHold(this.currentHost);t&&t.textHold&&(t.textHold.appendChild(this.exposedTextHold),this.exposedTextHoldAttached=!0)}}},Dm.getCanvasTextHold=function(t){return t&&t.type==bo&&t.controller&&t.controller.type==yo&&t.controller.textHold?t.controller:!(!t||t.type!=bo||!t.currentHost)&&this.getCanvasTextHold(t.currentHost)},Dm.convertTextEntityCharacters=function(t){let e=t.trim();return e=e.replace(Fe,Kr),wm.innerHTML=e,e=wm.value,e},Dm.calculateTextPositions=function(t){const e=function(t){if(!r)return n.dirtyPathObject=!0,n.dirtyText=!0,ae;if(t.substring){let e=!1;if(R.includes(t)?e=D[t]:d.includes(t)&&(e=u[t]),e)return e}return t},i=qh(),s=i.engine,n=this,r=!(!this.group||!this.group.getHost)&&this.group.getHost(),o=Kc(),a=Kc(),c=Kc(),l=Kc(),h=Kc();let f,p,m,g,y,b,S,k,A,v,P,C;const w=Kc(),x=Kc(),O=this.getTextPath();let F,H,E,I,T,B,$,L;const M=this.fontAttributes,N=Object.create(M),Y=this.sectionStyles,G=this.state,j={},z=Kc();let W=this.currentScale;const U=this.currentDimensions,Z=U[0]*W,_=this.treatWordAsGlyph,K=this.lineHeight,q=this.justify;M.updateMetadata(W,K,r),N.updateMetadata(W,K,r);const Q=M.getFontString(),tt=e(G.fillStyle),et=e(G.strokeStyle),it=this.letterSpacing*W;let st=Q,nt=tt,rt=et,ot=it;this.highlightStyle&&e(this.highlightStyle),this.underlineStyle&&e(this.underlineStyle),this.overlineStyle&&e(this.overlineStyle);let at=!1,ct=!1,lt=!1,ht=0;const ut=Kc();for(_?ut.push(...t.join("").split(Kr)):ut.push(...t),z.push(st),A=0,v=ut.length;A<v;A++)m=ut[A],h[A]=[,,,,,,m,0,0,0];for(Y[0]||(Y[0]={family:N.family,size:N.sizeValue?`${N.sizeValue}${N.sizeMetric}`:N.sizeMetric,style:N.style,variant:N.variant,weight:N.weight}),A=0,v=Y.length;A<v;A++)f=Y[A],f&&(p=h[A],p&&(0===A&&(p[0]=st,p[3]=at,p[4]=ct,p[5]=lt),f.defaults&&(st=N.update(M),rt=et,nt=tt,ot=it,p[0]=st,p[1]=rt,p[2]=nt,p[3]=at,p[4]=ct,p[5]=lt),m=f.stroke,m&&m!==rt&&(rt=qe==m?et:e(f.stroke),p[1]=rt),m=f.fill,m&&m!==nt&&(nt=qe==m?tt:e(f.fill),p[2]=nt),m=f.space,dc(m)&&m!==ot&&(ot=m*W),m=f.highlight,dc(m)&&m!==at&&(at=m,p[3]=at),m=f.underline,dc(m)&&m!==ct&&(ct=m,p[4]=ct),m=f.overline,dc(m)&&m!==lt&&(lt=m,p[5]=lt),0!==A&&(f.variant||f.weight||f.style||f.size||f.sizeValue||f.sizeMetric||f.family||f.font)&&(m=N.update(f),m!==st&&(st=m,p[0]=st,z.includes(st)||z.push(st))))),o[A]=ot;for(A=0,v=ut.length;A<v;A++)dc(o[A])&&(ot=o[A]),o[A]=ot;for(s.save(),z.forEach((t=>{s.font=t;const e=s.measureText(Pm);null!=e.actualBoundingBoxAscent&&null!=e.actualBoundingBoxDescent?j[t]=X(e.actualBoundingBoxAscent+e.actualBoundingBoxDescent):(Cm.style.font=t,m=Cm.clientHeight,j[t]=m)})),s.restore(),ht=J(...bt(j)),L=$=g=y=0,A=0,v=h.length;A<v;A++)E=h[A],I=E[6],E[0]&&(s.font=E[0]),w.push(s.measureText(I).width),E=h[A+1],T=!(_||!E)&&E[6],H=!!T&&s.measureText(`${I}${T}`).width,x.push(H);for(A=0,v=x.length;A<v;A++)I=x[A],I&&(H=w[A]+w[A+1],p=h[A+1],H>I&&!p[0]&&(w[A]-=H-I));for(A=0,v=h.length;A<v;A++)E=h[A],I=E[6],B=w[A]+o[A],o[A]=B,(_||I==Kr)&&(y=A),$+=B,L+=B,$>=Z&&g<y&&(F=ut.slice(g,y).join(Na),a.push(F),H=_?F.split(Kr).length-1:F.split(Kr).length,l.push(H),H=o.slice(g,y).reduce(((t,e)=>t+e),0),c.push(H),$-=H,g=y+1),A+1==v&&($==L?(F=t,a.push(F),l.push(_?F.split(Kr).length-1:F.split(Kr).length),c.push(L)):(F=ut.slice(g).join(Na),a.push(F),H=_?F.split(Kr).length-1:F.split(Kr).length,l.push(H),H=o.slice(g).reduce(((t,e)=>t+e),0),c.push(H))),dc(E[3])&&(at=E[3]),dc(E[4])&&(ct=E[4]),dc(E[5])&&(lt=E[5]),E[3]=at,E[4]=ct,E[5]=lt;W<=0&&(W=1),U[1]=X(ht*a.length*K/W),this.cleanHandle(),this.dirtyHandle=!1;const dt=this.currentHandle,ft=-dt[0]*W,pt=-dt[1]*W;if(!O)if("full"==q)for(b=0,S=pt,A=0,v=c.length;A<v;A++){for(H=ft,k=A<v-1&&l[A]>1?(Z-c[A])/(l[A]-1):0,P=0,C=[...a[A]].length;P<C;P++)m=h[b],m[6]==Kr&&(o[b]+=k),m[7]=V(H),m[8]=V(S),m[9]=o[b],H+=o[b],b++;b++,S+=ht*K}else for(b=0,S=pt,A=0,v=c.length;A<v;A++){for(H=q==Hr?Z-c[A]+ft:q==Ce?(Z-c[A])/2+ft:ft,P=0,C=[...a[A]].length;P<C;P++)m=h[b],m&&(m[7]=V(H),m[8]=V(S),m[9]=o[b]),H+=o[b],b++;b++,S+=ht*K}this.textGlyphs||(this.textGlyphs=[]),this.textGlyphs.length=0,this.textGlyphs.push(...ut),qc(ut),this.textGlyphWidths||(this.textGlyphWidths=[]),this.textGlyphWidths.length=0,this.textGlyphWidths.push(...o),qc(o),this.textLines||(this.textLines=[]),this.textLines.length=0,this.textLines.push(...a),qc(a),this.textLineWidths||(this.textLineWidths=[]),this.textLineWidths.length=0,this.textLineWidths.push(...c),qc(c),this.textLineWords||(this.textLineWords=[]),this.textLineWords.length=0,this.textLineWords.push(...l),qc(l),this.textPositions||(this.textPositions=[]),this.textPositions.length=0,this.textPositions.push(...h),qc(h),this.textHeight=ht,this.textLength=L,this.fontLibrary=j,qc(z),qc(w),qc(x),Qh(i)},Dm.regularStamp=function(){if(this.currentHost){const{currentHost:t,method:e,preStamper:i,stamper:s,addTextPathRoll:n,currentHandle:r}=this,o=t.engine;let a,c,l,h;if(e==tn)this.performRotation(o);else if("clip"==e)this.performRotation(o),o.clip(this.pathObject,this.winding);else if(this.textPath){let u,d;this.noCanvasEngineUpdates||t.setEngine(this),o.textBaseline=ea,o.textAlign=bs,this.getTextPath(),this.calculateGlyphPathPositions(),l=this.textPositions;const f=this.currentRotation,p=this.addPathRotation;for(this.addPathRotation=n,a=0,c=l.length;a<c;a++)u=l[a],d=u[10],d&&(this.currentPathData=d,n&&(this.currentRotation=d.angle),t.rotateDestination(o,d.x,d.y,this),o.translate(-r[0],-r[1]),h=i(t,o,this,u),s[e](o,this,h));this.addPathRotation=p,this.currentRotation=f}else{for(this.performRotation(o),this.noCanvasEngineUpdates||t.setEngine(this),o.textBaseline=ea,o.textAlign=bs,l=this.textPositions,a=0,c=l.length;a<c;a++)h=i(t,o,this,l[a]),s[e](o,this,h);this.showBoundingBox&&this.drawBoundingBox(o)}}},Dm.calculateGlyphPathPositions=function(){const t=this.getTextPath(),e=t.length,i=this.textPositions,s=this.textGlyphWidths,n=this.textPathDirection==xs,r=this.justify,o=this.textPathLoop,a=this.constantPathSpeed;let c,l,h,u,d,f=this.textPathPosition;for(l=0,h=i.length;l<h;l++){switch(c=i[l],u=s[l],r){case Ce:d=f+u/2/e,c[7]=-u/2;break;case Hr:d=f+u/e,c[7]=-u;break;default:d=f}o&&(d>1||d<0)&&(d=d>.5?d-1:d+1),c[10]=d<=1&&d>=0&&t.getPathPositionData(d,a),c[9]=u,n?f+=u/e:f-=u/e,o&&(f>1||f<0)&&(f=f>.5?f-1:f+1)}},Dm.preStamper=function(t,e,i,s){const n=function(e){return e.getData?e.getData(i,t):e},[r,o,a,c,l,h,...u]=s;if(r&&(e.font=r),c||l||h){const{highlightStyle:t,textHeight:s,underlineStyle:r,underlineWidth:o,underlinePosition:a,noUnderlineGlyphs:d,overlineStyle:f,overlineWidth:p,overlinePosition:m}=i;e.save(),c&&(e.fillStyle=n(t),e.fillRect(u[1],u[2],u[3],s)),l&&!d.includes(u[0])&&(e.fillStyle=n(r),e.fillRect(u[1],u[2]+s*a,u[3],o)),h&&(e.fillStyle=n(f),e.fillRect(u[1],u[2]+s*m,u[3],p)),e.restore()}return o&&(e.strokeStyle=n(o)),a&&(e.fillStyle=n(a)),u},Dm.stamper={draw:function(t,e,i){t.strokeText(...i)},fill:function(t,e,i){t.fillText(...i)},drawAndFill:function(t,e,i){t.strokeText(...i),t.fillText(...i),e.currentHost.clearShadow(),t.strokeText(...i),t.fillText(...i),e.currentHost.restoreShadow(e)},fillAndDraw:function(t,e,i){t.fillText(...i),t.strokeText(...i),e.currentHost.clearShadow(),t.fillText(...i),t.strokeText(...i),e.currentHost.restoreShadow(e)},drawThenFill:function(t,e,i){t.strokeText(...i),t.fillText(...i)},fillThenDraw:function(t,e,i){t.fillText(...i),t.strokeText(...i)},clear:function(t,e,i){const s=t.globalCompositeOperation;t.globalCompositeOperation=ti,t.fillText(...i),t.globalCompositeOperation=s}},Dm.drawBoundingBox=function(t){t.save(),t.strokeStyle=this.boundingBoxColor,t.lineWidth=1,t.globalCompositeOperation=_r,t.globalAlpha=1,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.stroke(this.pathObject),t.restore()},Dm.performRotation=function(t){const e=this.currentHost;if(e){const[i,s]=this.currentStampPosition;e.rotateDestination(t,i,s,this)}};const Im=function(t){return!!t&&new Phrase(t)};I.Phrase=Phrase;const Picture=function(t=qa){return this.copyStart=su(),this.currentCopyStart=su(),this.copyDimensions=su(),this.currentCopyDimensions=su(),this.copyArray=[],this.pasteArray=[],this.entityInit(t),t.copyStart||(t.copyStartX||(this.copyStart[0]=0),t.copyStartY||(this.copyStart[1]=0)),t.copyDimensions||(t.copyWidth||(this.copyDimensions[0]=1),t.copyHeight||(this.copyDimensions[1]=1)),this.imageSubscribers=[],this.dirtyCopyStart=!0,this.dirtyCopyDimensions=!0,this.dirtyImage=!0,this},Tm=Picture.prototype=yc();Tm.type=Eo,Tm.lib=gi,Tm.isArtefact=!0,Tm.isAsset=!1,ml(Tm),tf(Tm),gm(Tm);Tm.defs=cc(Tm.defs,{copyStart:null,copyDimensions:null,checkHitIgnoreTransparency:!1}),Tm.packetCoordinates=hc(Tm.packetCoordinates,["copyStart","copyDimensions"]),Tm.packetObjects=hc(Tm.packetObjects,["asset"]),Tm.factoryKill=function(){const{asset:t,removeAssetOnKill:e}=this;oc(t)&&(t.unsubscribe(this),e&&t.kill(!0))};const Bm=Tm.getters,$m=Tm.setters,Lm=Tm.deltaSetters;Bm.copyStart=function(){return[].concat(this.currentCopyStart)},Bm.copyStartX=function(){return this.currentCopyStart[0]},Bm.copyStartY=function(){return this.currentCopyStart[1]},$m.copyStartX=function(t){null!=t&&(this.copyStart[0]=t,this.dirtyCopyStart=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0)},$m.copyStartY=function(t){null!=t&&(this.copyStart[1]=t,this.dirtyCopyStart=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0)},$m.copyStart=function(t,e){this.setCoordinateHelper(Ge,t,e),this.dirtyCopyStart=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0},Lm.copyStartX=function(t){const e=this.copyStart;e[0]=Ga(e[0],t),this.dirtyCopyStart=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0},Lm.copyStartY=function(t){const e=this.copyStart;e[1]=Ga(e[1],t),this.dirtyCopyStart=!0,this.dirtyFilterIdentifier=!0},Lm.copyStart=function(t,e){this.setDeltaCoordinateHelper(Ge,t,e),this.dirtyCopyStart=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0},Bm.copyWidth=function(){return this.currentCopyDimensions[0]},Bm.copyHeight=function(){return this.currentCopyDimensions[1]},Bm.copyDimensions=function(){return[].concat(this.currentCopyDimensions)},$m.copyWidth=function(t){null!=t&&(this.copyDimensions[0]=t,this.dirtyCopyDimensions=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0)},$m.copyHeight=function(t){null!=t&&(this.copyDimensions[1]=t,this.dirtyCopyDimensions=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0)},$m.copyDimensions=function(t,e){this.setCoordinateHelper(Ye,t,e),this.dirtyCopyDimensions=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0},Lm.copyWidth=function(t){const e=this.copyDimensions;e[0]=Ga(e[0],t),this.dirtyCopyDimensions=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0},Lm.copyHeight=function(t){const e=this.copyDimensions;e[1]=Ga(e[1],t),this.dirtyCopyDimensions=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0},Lm.copyDimensions=function(t,e){this.setDeltaCoordinateHelper(Ye,t,e),this.dirtyCopyDimensions=!0,this.dirtyImageSubscribers=!0,this.dirtyFilterIdentifier=!0},$m.checkHitIgnoreTransparency=function(t){this.checkHitIgnoreTransparency=t,t&&(this.stashOutput=!0)},Tm.get=function(t){const e=this.source;if(0!=t.indexOf(At)&&0!=t.indexOf(kt)||!e){const e=this.getters[t];if(e)return e.call(this);{const e=this.state;let i,s=this.defs[t];return typeof s!=pa?(i=this[t],typeof i!=pa?i:s):(s=e.defs[t],typeof s!=pa?(i=e[t],typeof i!=pa?i:s):void 0)}}return rm.includes(t)||gu.includes(t)?e[t.substring(6)]:void 0},Tm.set=function(t=qa){const e=Q(t),i=e.length;if(i){const s=this.setters,n=this.defs,r=this.source,o=this.state,a=o?o.setters:qa,c=o?o.defs:qa;let l,h,u,d;for(h=0;h<i;h++)u=e[h],d=t[u],0!=u.indexOf(At)&&0!=u.indexOf(kt)||!r?u&&u!=Vs&&null!=d&&(so.includes(u)?(l=a[u],l?l.call(o,d):typeof c[u]!=pa&&(o[u]=d)):(l=s[u],l?l.call(this,d):typeof n[u]!=pa&&(this[u]=d))):(om.includes(u)||yu.includes(u))&&(r[u.substring(6)]=d)}return this},Tm.updateImageSubscribers=function(){this.dirtyImageSubscribers=!1,this.imageSubscribers.length&&this.imageSubscribers.forEach((t=>{const e=o[t];e&&(e.dirtyInput=!0)}))},Tm.imageSubscribe=function(t){t&&t.substring&&hc(this.imageSubscribers,t)},Tm.imageUnsubscribe=function(t){t&&t.substring&&uc(this.imageSubscribers,t)},Tm.cleanImage=function(){const t=this.sourceNaturalWidth,e=this.sourceNaturalHeight;if(fc(t,e)&&t>0&&e>0){this.dirtyImage=!1;const i=this.currentCopyStart,s=i[0],n=i[1],r=this.currentCopyDimensions,o=r[0],a=r[1];s+o>t&&(i[0]=t-o),n+a>e&&(i[1]=e-a);const c=this.copyArray;c.length=0,c.push(~~i[0],~~i[1],~~o,~~a)}},Tm.cleanCopyStart=function(){const t=this.sourceNaturalWidth,e=this.sourceNaturalHeight;if(fc(t,e)&&t>0&&e>0){this.dirtyCopyStart=!1,this.cleanPosition(this.currentCopyStart,this.copyStart,[t,e]);const i=this.currentCopyStart,s=i[0],n=i[1];(s<0||s>t)&&(i[0]=s<0?0:t-1),(n<0||n>e)&&(i[1]=n<0?0:e-1),this.dirtyImage=!0}},Tm.cleanCopyDimensions=function(){const t=this.sourceNaturalWidth,e=this.sourceNaturalHeight;if(fc(t,e)&&t>0&&e>0){this.dirtyCopyDimensions=!1;const i=this.copyDimensions,s=this.currentCopyDimensions,n=i[0],r=i[1];n.substring?s[0]=parseFloat(n)/100*t:s[0]=n,r.substring?s[1]=parseFloat(r)/100*e:s[1]=r;const o=s[0],a=s[1];(o<=0||o>t)&&(s[0]=o<=0?1:t),(a<=0||a>e)&&(s[1]=a<=0?1:e),this.dirtyImage=!0}},Tm.prepareStamp=function(){this.dirtyAsset&&this.cleanAsset(),this.asset&&(this.asset.type==Xo?this.checkSpriteFrame(this):this.asset.checkSource?this.asset.checkSource(this.sourceNaturalWidth,this.sourceNaturalHeight):this.dirtyAsset=!0),(this.dirtyDimensions||this.dirtyHandle||this.dirtyScale)&&(this.dirtyPaste=!0),(this.dirtyScale||this.dirtyDimensions||this.dirtyStart||this.dirtyOffset||this.dirtyHandle)&&(this.dirtyPathObject=!0),this.dirtyScale&&this.cleanScale(),this.dirtyDimensions&&this.cleanDimensions(),this.dirtyLock&&this.cleanLock(),this.dirtyStart&&this.cleanStart(),this.dirtyOffset&&this.cleanOffset(),this.dirtyHandle&&this.cleanHandle(),this.dirtyRotation&&this.cleanRotation(),(this.isBeingDragged||this.lockTo.includes($s)||this.lockTo.includes(hn))&&(this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtyStampHandlePositions&&this.cleanStampHandlePositions(),this.dirtyCopyStart&&this.cleanCopyStart(),this.dirtyCopyDimensions&&this.cleanCopyDimensions(),this.dirtyImage&&this.cleanImage(),this.dirtyPaste&&this.preparePasteObject(),this.dirtyPathObject&&this.cleanPathObject(),this.dirtyPositionSubscribers&&this.updatePositionSubscribers(),this.dirtyImageSubscribers&&this.updateImageSubscribers(),this.prepareStampTabsHelper()},Tm.preparePasteObject=function(){this.dirtyPaste=!1;const t=this.currentStampHandlePosition,e=this.currentDimensions,i=this.currentScale,s=-t[0]*i,n=-t[1]*i,r=e[0]*i,o=e[1]*i,a=this.pasteArray;a.length=0,a.push(~~s,~~n,~~r,~~o),this.dirtyPathObject=!0},Tm.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject)if(this.pasteArray&&4==this.pasteArray.length||this.preparePasteObject(),4!=this.pasteArray.length)this.dirtyPathObject=!0;else{(this.pathObject=new Path2D).rect(...this.pasteArray)}},Tm.draw=function(t){t.stroke(this.pathObject)},Tm.fill=function(t){const[e,i,s,n]=this.copyArray;this.source&&s&&n&&t.drawImage(this.source,e,i,s,n,...this.pasteArray)},Tm.drawAndFill=function(t){const[e,i,s,n]=this.copyArray,[r,o,a,c]=this.pasteArray;this.source&&s&&n&&(t.stroke(this.pathObject),t.drawImage(this.source,e,i,s,n,r,o,a,c),this.currentHost.clearShadow(),t.stroke(this.pathObject),t.drawImage(this.source,e,i,s,n,r,o,a,c))},Tm.fillAndDraw=function(t){const[e,i,s,n]=this.copyArray,[r,o,a,c]=this.pasteArray;this.source&&s&&n&&(t.drawImage(this.source,e,i,s,n,r,o,a,c),t.stroke(this.pathObject),this.currentHost.clearShadow(),t.drawImage(this.source,e,i,s,n,r,o,a,c),t.stroke(this.pathObject)),t.stroke(this.pathObject)},Tm.drawThenFill=function(t){const[e,i,s,n]=this.copyArray;this.source&&s&&n&&(t.stroke(this.pathObject),t.drawImage(this.source,e,i,s,n,...this.pasteArray))},Tm.fillThenDraw=function(t){const[e,i,s,n]=this.copyArray;this.source&&s&&n&&(t.drawImage(this.source,e,i,s,n,...this.pasteArray),t.stroke(this.pathObject))},Tm.checkHitReturn=function(t,e,i){if(this.checkHitIgnoreTransparency&&i&&i.engine){const[s,n,r,o]=this.copyArray;if(fc(s,n,r,o)){const a=this.pasteArray[2],[c,l]=this.currentStampPosition,h=4*((e-l)*a+(t-c))+3;if(i.engine.getImageData(s,n,r,o).data[h])return{x:t,y:e,artefact:this}}return!1}return{x:t,y:e,artefact:this}};const Mm=function(t){return!!t&&new Picture(t)};I.Picture=Picture;const Polygon=function(t=qa){return this.shapeInit(t),this},Nm=Polygon.prototype=yc();Nm.type="Polygon",Nm.lib=gi,Nm.isArtefact=!0,Nm.isAsset=!1,ml(Nm),hf(Nm);Nm.defs=cc(Nm.defs,{sides:0,sideLength:0,radius:0});const Xm=Nm.setters,Ym=Nm.deltaSetters;Xm.sides=function(t){this.sides=t,this.updateDirty()},Ym.sides=function(t){this.sides+=t,this.updateDirty()},Xm.sideLength=function(t){this.sideLength=t,this.updateDirty()},Ym.sideLength=function(t){this.sideLength+=t,this.updateDirty()},Xm.radius=function(t){this.radius=t,this.updateDirty()},Ym.radius=function(t){this.radius+=t,this.updateDirty()},Nm.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makePolygonPath()},Nm.makePolygonPath=function(){const t=this.sideLength||this.radius,e=this.sides,i=360/e,s=Kc();let n=0,r=Na;const o=td({x:0,y:-t});for(let t=0;t<e;t++)o.rotate(i),n+=o.y,s.push(n),r+=`${o.x.toFixed(1)},${o.y.toFixed(1)} `;ed(o);const a=tt(...s),c=J(...s);return r=`m0,${((B(a)+B(c)-t)/2).toFixed(1)}l${r}z`,qc(s),r};const Gm=function(t){return!!t&&(t.species="polygon",new Polygon(t))};I.Polygon=Polygon;const Polyline=function(t=qa){return this.pins=[],this.currentPins=[],this.controlledLineOffset=su(),this.shapeInit(t),this},jm=Polyline.prototype=yc();jm.type=Io,jm.lib=gi,jm.isArtefact=!0,jm.isAsset=!1,ml(jm),hf(jm);jm.defs=cc(jm.defs,{pins:null,tension:0,closed:!1,mapToPins:!1,useParticlesAsPins:!1}),jm.packetExclusions=hc(jm.packetExclusions,["controlledLineOffset"]),jm.finalizePacketOut=function(t,e){const i=it(this.state.saveAsPacket(e))[3];return t=cc(t,i),t=this.handlePacketAnchor(t,e),Q(t).forEach((e=>{if("pins"==e){const e=[];t.pins.forEach((t=>{oc(t)?e.push(t.name):K(t)?e.push([].concat(t)):e.push(t)})),t.pins=e}})),t};const zm=jm.getters,Wm=jm.setters,Vm=jm.deltaSetters;zm.pins=function(t){return dc(t)?this.getPinAt(t):this.currentPins.concat()},Wm.pins=function(t){if(dc(t)){const e=this.pins;if(K(t))e.forEach(((t,e)=>this.removePinAt(e))),e.length=0,e.push(...t),this.updateDirty();else if(oc(t)&&dc(t.index)){const i=e[t.index];K(i)&&(dc(t.x)&&(i[0]=t.x),dc(t.y)&&(i[1]=t.y),this.updateDirty())}}},Vm.pins=function(t){if(dc(t)){const e=this.pins;if(oc(t)&&dc(t.index)){const i=e[t.index];K(i)&&(dc(t.x)&&(i[0]=Ga(i[0],t.x)),dc(t.y)&&(i[1]=Ga(i[1],t.y)),this.updateDirty())}}},Wm.tension=function(t){t.toFixed&&(this.tension=t,this.updateDirty())},Vm.tension=function(t){t.toFixed&&(this.tension+=t,this.updateDirty())},Wm.closed=function(t){this.closed=t,this.updateDirty()},Wm.mapToPins=function(t){this.mapToPins=t,this.updateDirty()},Wm.flipUpend=function(t){this.flipUpend=t,this.updateDirty()},Wm.flipReverse=function(t){this.flipReverse=t,this.updateDirty()},Wm.useAsPath=function(t){this.useAsPath=t,this.updateDirty()},Wm.pivot=function(t){if(ec(t)&&!t)this.pivot=null,this.lockTo[0]==Sn&&(this.lockTo[0]=Qr),this.lockTo[1]==Sn&&(this.lockTo[1]=Qr),this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0;else{const e=this.pivot,i=t.substring?o[t]:t,s=this.name;i&&i.name&&(e&&e.name!=i.name&&uc(e.pivoted,s),hc(i.pivoted,s),this.pivot=i,this.dirtyStampPositions=!0,this.dirtyStampHandlePositions=!0)}this.updateDirty()},jm.updateDirty=function(){this.dirtySpecies=!0,this.dirtyPathObject=!0,this.dirtyPins=!0},jm.getPinAt=function(t){const e=V(t);if(this.useAsPath){const t=this.getPathPositionData(this.unitPartials[e]);return[t.x,t.y]}{const t=this.currentPins,i=t[e],[s,n]=this.localBox,[r,o]=i,[a]=t[0],[c,l]=this.localOffset,[h,u]=this.currentStampPosition;let d,f;return this.mapToPins?(d=r-a+s,f=o-a+n):(d=r-c,f=o-l),[h+d,u+f]}},jm.updatePinAt=function(t,e){if(fc(t,e)){e=V(e);const i=this.pins;if(e<i.length&&e>=0){const s=i[e];oc(s)&&s.pivoted&&uc(s.pivoted,this.name),i[e]=t,this.updateDirty()}}},jm.removePinAt=function(t){t=V(t);const e=this.pins;if(t<e.length&&t>=0){const i=e[t];oc(i)&&i.pivoted&&uc(i.pivoted,this.name),e[t]=null,this.updateDirty()}},jm.prepareStamp=function(){this.dirtyHost&&(this.dirtyHost=!1),this.useParticlesAsPins&&(this.dirtyPins=!0),(this.dirtyPins||this.dirtyLock)&&(this.dirtySpecies=!0),(this.dirtyScale||this.dirtySpecies||this.dirtyDimensions||this.dirtyStart||this.dirtyHandle)&&(this.dirtyPathObject=!0,(this.dirtyScale||this.dirtySpecies)&&(this.pathCalculatedOnce=!1)),(this.isBeingDragged||this.lockTo.includes($s)||this.lockTo.includes(hn))&&(this.dirtyStampPositions=!0),this.dirtyScale&&this.cleanScale(),this.dirtyStart&&this.cleanStart(),this.dirtyOffset&&this.cleanOffset(),this.dirtyRotation&&this.cleanRotation(),this.dirtyStampPositions&&this.cleanStampPositions(),this.dirtySpecies&&this.cleanSpecies(),this.dirtyPathObject&&(this.cleanPathObject(),this.updatePathSubscribers()),this.dirtyPositionSubscribers&&this.updatePositionSubscribers(),this.prepareStampTabsHelper()},jm.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makePolylinePath()},jm.getPathParts=function(t,e,i,s,n,r,o){const a=ft(ot(i-t,2)+ot(s-e,2)),c=ft(ot(n-i,2)+ot(r-s,2)),l=o*a/(a+c),h=o*c/(a+c);return[i-l*(n-t),s-l*(r-e),i,s,i+h*(n-t),s+h*(r-e)]},jm.buildLine=function(t,e,i){let s=`${Ma}l`;for(let n=2;n<i.length;n+=6)s+=`${Va(i[n]-t)},${Va(i[n+1]-e)} `,t=i[n],e=i[n+1];return s},jm.buildCurve=function(t,e,i){let s=`${Ma}c`,n=0;for(let r=0;r<i.length;r+=2)s+=`${Va(i[r]-t)},${Va(i[r+1]-e)} `,n++,n>2&&(t=i[r],e=i[r+1],n=0);return s},jm.cleanCoordinate=function(t,e){return t.toFixed?t:t==bs||t==ea?0:t==Hr||t==Se?e:t==Ce?e/2:parseFloat(t)/100*e},jm.cleanPinsArray=function(){this.dirtyPins=!1;const t=this.pins,e=this.currentPins;if(e.length=0,this.useParticlesAsPins)t.forEach(((i,s)=>{let n;i&&i.substring?(n=b[i],n&&(t[s]=n)):n=i;const r=!(!n||!n.position)&&n.position;r&&e.push([r.x,r.y])})),e.length||(this.dirtyPins=!0);else{const i=this.getHost(),s=this.cleanCoordinate;let n,r,a,c=1,l=1;i&&(a=i.currentDimensions,a&&([c,l]=a)),t.forEach(((i,a)=>{let h;if(i&&i.substring?(h=o[i],t[a]=h):h=i,h)if(K(h))[n,r]=h,e.push([s(n,c),s(r,l)]);else if(oc(h)&&h.currentStart){const t=this.name;h.pivoted.includes(t)||hc(h.pivoted,t),e.push([...h.currentStampPosition])}}))}if(e.length){let t=e[0][0],i=e[0][1];e.forEach((e=>{e[0]<t&&(t=e[0]),e[1]<i&&(i=e[1])})),this.localOffset=[t,i],this.updatePivotSubscribers()}},jm.makePolylinePath=function(){const t=this.getPathParts,e=this.buildLine,i=this.buildCurve,s=this.currentPins,n=this.tension,r=this.closed;if(this.dirtyPins&&this.cleanPinsArray(),s.length){const o=s.length,a=s[0],c=s[o-1],l=Kc();let h,u=Ma;if(r){const r=Kc();for(r.push(...t(...c,...a,...s[1],n)),h=0;h<o-2;h++)l.push(...t(...s[h],...s[h+1],...s[h+2],n));l.push(...t(...s[o-2],...c,...a,n)),l.unshift(r[4],r[5]),l.push(r[0],r[1],r[2],r[3]),u=n?i(a[0],a[1],l)+"z":e(a[0],a[1],l)+"z",qc(r)}else{for(l.push(a[0],a[1]),h=0;h<o-2;h++)l.push(...t(...s[h],...s[h+1],...s[h+2],n));l.push(c[0],c[1],c[0],c[1]),u=n?i(a[0],a[1],l):e(a[0],a[1],l)}return qc(l),u}return Ma},jm.calculateLocalPathAdditionalActions=function(){const[t,e]=this.localBox,i=this.pathDefinition;this.mapToPins?this.set({start:this.currentPins[0]}):this.pathDefinition=i.replace(Ma,`m${-t},${-e}`),this.pathCalculatedOnce=!1,this.calculateLocalPath(this.pathDefinition,!0)},jm.updatePathSubscribers=function(){this.pathed.forEach((t=>{const e=o[t];e&&(e.dirtyStart=!0)}))};const Um=function(t){return!!t&&(t.species="polyline",new Polyline(t))};I.Polyline=Polyline;const Quadratic=function(t=qa){return this.control=su(),this.currentControl=su(),this.controlLockTo="coord",this.curveInit(t),this.shapeInit(t),this.dirtyControl=!0,this},Zm=Quadratic.prototype=yc();Zm.type=To,Zm.lib=gi,Zm.isArtefact=!0,Zm.isAsset=!1,ml(Zm),hf(Zm),df(Zm);const _m={control:null,controlPivot:Na,controlPivotCorner:Na,addControlPivotHandle:!1,addControlPivotOffset:!1,controlPath:Na,controlPathPosition:0,addControlPathHandle:!1,addControlPathOffset:!0,controlParticle:Na,controlLockTo:Na};Zm.defs=cc(Zm.defs,_m),Zm.packetCoordinates=hc(Zm.packetCoordinates,["control"]),Zm.packetObjects=hc(Zm.packetObjects,["controlPivot","controlPath"]);const Km=Zm.getters,qm=Zm.setters,Qm=Zm.deltaSetters;qm.controlPivot=function(t){this.setControlHelper(t,"controlPivot",Ne),this.updateDirty(),this.dirtyControl=!0},qm.controlParticle=function(t){this.setControlHelper(t,"controlParticle",Ne),this.updateDirty(),this.dirtyControl=!0},qm.controlPath=function(t){this.setControlHelper(t,"controlPath",Ne),this.updateDirty(),this.dirtyControl=!0,this.currentControlPathData=!1},qm.controlPathPosition=function(t){this.controlPathPosition=t,this.dirtyControl=!0,this.currentControlPathData=!1,this.dirtyFilterIdentifier=!0},Qm.controlPathPosition=function(t){this.controlPathPosition+=t,this.dirtyControl=!0,this.currentControlPathData=!1,this.dirtyFilterIdentifier=!0},Km.controlPositionX=function(){return this.currentControl[0]},Km.controlPositionY=function(){return this.currentControl[1]},Km.controlPosition=function(){return[].concat(this.currentControl)},qm.controlX=function(t){null!=t&&(this.control[0]=t,this.updateDirty(),this.dirtyControl=!0,this.currentControlPathData=!1)},qm.controlY=function(t){null!=t&&(this.control[1]=t,this.updateDirty(),this.dirtyControl=!0,this.currentControlPathData=!1)},qm.control=function(t,e){this.setCoordinateHelper(Ne,t,e),this.updateDirty(),this.dirtyControl=!0,this.currentControlPathData=!1},Qm.controlX=function(t){const e=this.control;e[0]=Ga(e[0],t),this.updateDirty(),this.dirtyControl=!0,this.currentControlPathData=!1},Qm.controlY=function(t){const e=this.control;e[1]=Ga(e[1],t),this.updateDirty(),this.dirtyControl=!0,this.currentControlPathData=!1},Qm.control=function(t,e){this.setDeltaCoordinateHelper(Ne,t,e),this.updateDirty(),this.dirtyControl=!0,this.currentControlPathData=!1},qm.controlLockTo=function(t){this.controlLockTo=t,this.updateDirty(),this.dirtyControlLock=!0,this.currentControlPathData=!1},Zm.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeQuadraticPath()},Zm.makeQuadraticPath=function(){const[t,e]=this.currentStampPosition,[i,s]=this.currentControl,[n,r]=this.currentEnd;return`${Ma}q${(i-t).toFixed(2)},${(s-e).toFixed(2)} ${(n-t).toFixed(2)},${(r-e).toFixed(2)}`},Zm.cleanDimensions=function(){this.dirtyDimensions=!1,this.dirtyHandle=!0,this.dirtyOffset=!0,this.dirtyStart=!0,this.dirtyControl=!0,this.dirtyEnd=!0,this.dirtyFilterIdentifier=!0},Zm.preparePinsForStamp=function(){const t=this.dirtyPins,e=this.endPivot,i=this.endPath,s=this.controlPivot,n=this.controlPath;for(let r,o=0,a=t.length;o<a;o++)r=t[o],(s&&s.name==r||n&&n.name==r)&&(this.dirtyControl=!0,this.controlLockTo.includes(un)&&(this.currentControlPathData=!1)),(e&&e.name==r||i&&i.name==r)&&(this.dirtyEnd=!0,this.endLockTo.includes(un)&&(this.currentEndPathData=!1));t.length=0};const Jm=function(t=qa){return!!t&&(t.species=Tn,new Quadratic(t))};I.Quadratic=Quadratic;const RadialGradient=function(t=qa){return this.stylesInit(t),this},tg=RadialGradient.prototype=yc();tg.type="RadialGradient",tg.lib=uo,tg.isArtefact=!1,tg.isAsset=!1,ml(tg),Df(tg);tg.defs=cc(tg.defs,{startRadius:0,endRadius:0}),tg.packetObjects=hc(tg.packetObjects,["palette"]);const eg=tg.getters,ig=tg.setters,sg=tg.deltaSetters;eg.startRadius=function(){return this.currentStartRadius},eg.endRadius=function(){return this.currentEndRadius},ig.startRadius=function(t){this.startRadius=t,this.dirtyStyle=!0},ig.endRadius=function(t){this.endRadius=t,this.dirtyStyle=!0},sg.startRadius=function(t){this.startRadius=Ga(this.startRadius,t),this.dirtyStyle=!0},sg.endRadius=function(t){this.endRadius=Ga(this.endRadius,t),this.dirtyStyle=!0},tg.cleanRadius=function(t){const e=(t,e)=>{if(rc(t))return t;switch(t){case ea:case bs:return 0;case Se:case Hr:return e;case Ce:return e/2;default:return t=parseFloat(t),rc(t)?t/100*e:0}};this.currentStartRadius=t?e(this.startRadius,t):this.defs.startRadius,this.currentEndRadius=t?e(this.endRadius,t):this.defs.endRadius},tg.buildStyle=function(t){if(t){const e=t.engine;if(e){const t=e.createRadialGradient(...this.gradientArgs);return this.addStopsToGradient(t,this.paletteStart,this.paletteEnd,this.cyclePalette)}}return le},tg.updateGradientArgs=function(t,e){const i=this.gradientArgs,s=this.currentStart,n=this.currentEnd,r=this.currentStartRadius;let o=this.currentEndRadius;const a=s[0]+t,c=s[1]+e,l=n[0]+t,h=n[1]+e;a==l&&c==h&&r==o&&o++,i.length=0,i.push(a,c,r,l,h,o)};const ng=function(t){return!!t&&new RadialGradient(t)};I.RadialGradient=RadialGradient;const RawAsset=function(t=qa){this.makeName(t.name),this.register(),this.subscribers=[],this.set(this.defs),this.updateSource=Ua;const e=t.keytypes||{};t.userAttributes&&t.userAttributes.forEach((t=>{this.addAttribute(t),t.type&&(e[t.key]=t.type)})),this.initializeAttributes(e),this.set(t);const i=document.createElement(ve);return i.width=0,i.height=0,this.element=i,this.engine=i.getContext(Pt,{willReadFrequently:!0}),t.subscribe&&this.subscribers.push(t.subscribe),this},rg=RawAsset.prototype=yc();rg.type="RawAsset",rg.lib=Jt,rg.isArtefact=!1,rg.isAsset=!0,ml(rg),du(rg);rg.defs=cc(rg.defs,{keytypes:null,data:null,updateSource:null}),rg.saveAsPacket=function(){return[this.name,this.type,this.lib,{}]},rg.stringifyFunction=Ua,rg.processPacketOut=Ua,rg.finalizePacketOut=Ua,rg.clone=_a;const og=rg.getters,ag=rg.setters,cg=rg.deltaSetters;ag.source=Ua,ag.element=Ua,ag.engine=Ua,ag.data=function(t){t&&(this.data=t,this.dirtyData=!0)},ag.updateSource=function(t){t&&nc(t)&&(this.updateSource=t,this.dirtyData=!0)},rg.checkSource=function(t,e){this.source||(this.source=this.element);const i=this.source;if(i){let s=!1;this.dirtyData&&(this.dirtyData=!1,this.updateSource(this),s=!0),this.sourceLoaded=!0,this.sourceNaturalWidth&&this.sourceNaturalHeight&&this.sourceNaturalWidth==t&&this.sourceNaturalHeight==e||(this.sourceNaturalWidth=i.width,this.sourceNaturalHeight=i.height,s=!0),s&&this.sourceNaturalWidth&&this.sourceNaturalHeight&&this.notifySubscribers()}else this.sourceLoaded=!1},rg.subscribeAction=function(t={}){this.subscribers.push(t),t.asset=this,t.source=this.element,this.notifySubscriber(t)},rg.addAttribute=function(t=qa){const{key:e,defaultValue:i,setter:s,deltaSetter:n,getter:r}=t;return e&&e.substring&&(this.defs[e]=dc(i)?i:null,this[e]=dc(i)?i:null,nc(s)&&(ag[e]=s),nc(n)&&(cg[e]=n),nc(r)&&(og[e]=r)),this},rg.removeAttribute=function(t){return t&&t.substring&&(delete this.defs[t],delete this[t],delete og[t],delete ag[t],delete cg[t]),this},rg.initializeAttributes=function(t){for(const[e,i]of z(t))switch(i){case Bo:this[e]=ad();break;case zo:this[e]=id();break;case Ao:this[e]=su()}};const lg=function(t){return!!t&&new RawAsset(t)};I.RawAsset=RawAsset;const RdAsset=function(t=qa){return this.makeName(t.name),this.register(),this.installElement(this.name),this.subscribers=[],this.set(this.defs),this.set(t),t.subscribe&&this.subscribers.push(t.subscribe),this.currentGeneration=0,this.dataArrays=[],this.dirtyScene=!0,this.dirtyOutput=!0,this},hg=RdAsset.prototype=yc();hg.type="RdAsset",hg.lib=Jt,hg.isArtefact=!1,hg.isAsset=!0,ml(hg),du(hg),jp(hg),Wu(hg);const ug={width:300,height:150,diffusionRateA:.2097,diffusionRateB:.105,feedRate:.054,killRate:.062,initialSettingPreference:ur,randomEngineSeed:Qe,initialRandomSeedLevel:.0045,initialSettingEntity:null,drawEvery:10,maxGenerations:4e3};hg.defs=cc(hg.defs,ug),delete hg.defs.source,delete hg.defs.sourceLoaded,hg.stringifyFunction=Ua,hg.processPacketOut=Ua,hg.finalizePacketOut=Ua,hg.saveAsPacket=function(){return`[${this.name}, ${this.type}, ${this.lib}, {}]`},hg.clone=_a;const dg=hg.setters;dg.subscribers=Ua,dg.width=function(t){t.toFixed&&(this.width=t,this.sourceNaturalWidth=t,this.dirtyScene=!0)},dg.height=function(t){t.toFixed&&(this.height=t,this.sourceNaturalHeight=t,this.dirtyScene=!0)},dg.initialRandomSeedLevel=function(t){t.toFixed&&(this.initialRandomSeedLevel=t,this.dirtyScene=!0)},dg.diffusionRateA=function(t){t.toFixed&&(this.diffusionRateA=t,this.dirtyScene=!0)},dg.diffusionRateB=function(t){t.toFixed&&(this.diffusionRateB=t,this.dirtyScene=!0)},dg.feedRate=function(t){t.toFixed&&(this.feedRate=t,this.dirtyScene=!0)},dg.killRate=function(t){t.toFixed&&(this.killRate=t,this.dirtyScene=!0)},dg.drawEvery=function(t){t.toFixed&&(this.drawEvery=t,this.dirtyScene=!0)},dg.maxGenerations=function(t){t.toFixed&&(this.maxGenerations=t,this.dirtyScene=!0)},dg.initialSettingPreference=function(t){t.substring&&pr.includes(t)&&(this.initialSettingPreference=t,this.dirtyScene=!0)},dg.randomEngineSeed=function(t){t.substring&&(this.randomEngineSeed=t,this.dirtyScene=!0)},dg.initialSettingEntity=function(t){t&&(t.substring||(t=t.name||Na),t&&(this.initialSettingEntity=t,this.dirtyScene=!0))},dg.preset=function(t){if(t.substring){switch(t){case"negativeBubbles":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.098,this.killRate=.0555,this.maxGenerations=4e3,this.initialRandomSeedLevel=.05;break;case"positiveBubbles":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.098,this.killRate=.057,this.maxGenerations=4e3,this.initialRandomSeedLevel=.1;break;case"precriticalBubbles":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.082,this.killRate=.059,this.maxGenerations=4e3,this.initialRandomSeedLevel=.08;break;case"wormsAndLoops":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.082,this.killRate=.06,this.maxGenerations=4e3,this.initialRandomSeedLevel=.08;break;case"stableSolitons":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.074,this.killRate=.064,this.maxGenerations=4e3,this.initialRandomSeedLevel=.15;break;case"uSkateWorld":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.062,this.killRate=.0609,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"worms":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.058,this.killRate=.065,this.maxGenerations=4e3,this.initialRandomSeedLevel=.1;break;case"wormsJoinIntoMazes":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.046,this.killRate=.063,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"negatons":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.046,this.killRate=.0594,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"turingPatterns":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.042,this.killRate=.059,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"chaosToTuringNegatons":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.039,this.killRate=.058,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"fingerprints":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.037,this.killRate=.06,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"chaosWithNegatons":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.0353,this.killRate=.0566,this.maxGenerations=0,this.initialRandomSeedLevel=.0045;break;case"spotsAndWorms":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.034,this.killRate=.0618,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"selfReplicatingSpots":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.03,this.killRate=.063,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"superResonantMazes":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.03,this.killRate=.0565,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"mazes":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.029,this.killRate=.057,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045;break;case"mazesWithSomeChaos":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.026,this.killRate=.055,this.maxGenerations=0,this.initialRandomSeedLevel=.0045;break;case"chaos":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.026,this.killRate=.051,this.maxGenerations=0,this.initialRandomSeedLevel=.009;break;case"warringMicrobes":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.022,this.killRate=.059,this.maxGenerations=0,this.initialRandomSeedLevel=.0045;break;case"spotsAndLoops":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.018,this.killRate=.051,this.maxGenerations=0,this.initialRandomSeedLevel=.0045;break;case"movingSpots":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.014,this.killRate=.054,this.maxGenerations=0,this.initialRandomSeedLevel=.0045;break;case"waves":this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.014,this.killRate=.045,this.maxGenerations=0,this.initialRandomSeedLevel=.0045;break;default:this.diffusionRateA=.2097,this.diffusionRateB=.105,this.feedRate=.054,this.killRate=.062,this.maxGenerations=4e3,this.initialRandomSeedLevel=.0045}this.dirtyScene=!0}},hg.update=function(){this.dirtyOutput=!0},hg.cleanOutput=function(t=0){if(this.dirtyScene&&this.cleanScene(),!this.dirtyScene){const{dataArrays:e,diffusionRateA:i,diffusionRateB:s,feedRate:n,killRate:r,currentSource:o,drawEvery:a,maxGenerations:c,currentGeneration:l}=this;let h,u,d,f,p,m,g,y,b,S;if(!c||l<c)if(o?[u,h,f,d]=e:[h,u,d,f]=e,t<a){for(g=0,y=h.length;g<y;g++)p=h[g],m=d[g],b=p+i*this.calculateLaplacian(g,h)-p*m*m+n*(1-p),S=m+s*this.calculateLaplacian(g,d)+p*m*m-(r+n)*m,u[g]=ja(b,0,1),f[g]=ja(S,0,1);this.currentSource=o?0:1,this.currentGeneration=l+1,this.cleanOutput(t+1)}else this.paintCanvas();else this.dirtyOutput&&this.paintCanvas()}},hg.cleanScene=function(){const{element:t,width:e,height:i,dataArrays:s,initialRandomSeedLevel:n,initialSettingPreference:r,randomEngineSeed:o,initialSettingEntity:a}=this;if(e&&i&&this.dirtyScene){this.dirtyScene=!1,t.width=e,t.height=i;const c=e*i;s.length=0;for(let t=0;t<4;t++)s.push(new Float64Array(c));this.currentSource=0;const[l,h,u,d]=s;if(l.fill(1),h.fill(1),u.fill(0),d.fill(0),gi==r&&f[a]){const t=f[a],s=qh(),{engine:n,element:r}=s;r.width=e,r.height=i,t.simpleStamp(s,{fillStyle:xa,strokeStyle:xa});const o=n.getImageData(0,0,e,i).data;let c=0;for(let t=3,e=o.length;t<e;t+=4)u[c]=o[t]/255,c++;Qh(s)}else{const t=Th(o);for(let e=0;e<c;e++)u[e]=t.random()<n?1:0}this.currentGeneration=0}},hg.calculateLaplacian=function(t,e){const i=this.width,s=V(t/i),n=this.checkRow(s-1)*i,r=this.checkRow(s+1)*i,o=s*i,a=t-o,c=this.checkCol(a-1),l=this.checkCol(a+1);let h,u=0;return u+=-1*e[t],h=n+c,u+=.05*e[h],h=n+l,u+=.05*e[h],h=r+c,u+=.05*e[h],h=r+l,u+=.05*e[h],h=n+a,u+=.2*e[h],h=o+l,u+=.2*e[h],h=o+c,u+=.2*e[h],h=r+a,u+=.2*e[h],u},hg.checkRow=function(t){const e=this.height;return t<0?e-1:t>=e?0:t},hg.checkCol=function(t){const e=this.width;return t<0?e-1:t>=e?0:t},hg.checkOutputValuesExist=function(){return!!this.dataArrays.length},hg.getOutputValue=function(t){let e,i;const{dataArrays:s,currentSource:n}=this;return n?[e,,i]=s:[,e,,i]=s,(e[t]-i[t]+1)/2};const fg=function(t){return!!t&&new RdAsset(t)};I.RdAsset=RdAsset;const Rectangle=function(t=qa){return this.shapeInit(t),this.currentRectangleWidth=1,this.currentRectangleHeight=1,this},pg=Rectangle.prototype=yc();pg.type="Rectangle",pg.lib=gi,pg.isArtefact=!0,pg.isAsset=!1,ml(pg),hf(pg);pg.defs=cc(pg.defs,{rectangleWidth:10,rectangleHeight:10,radiusTLX:0,radiusTLY:0,radiusTRX:0,radiusTRY:0,radiusBRX:0,radiusBRY:0,radiusBLX:0,radiusBLY:0,offshootA:.55,offshootB:0});const mg=pg.setters,gg=pg.deltaSetters;mg.radius=function(t){this.setRectHelper(t,Bn)},mg.radiusX=function(t){this.setRectHelper(t,or)},mg.radiusY=function(t){this.setRectHelper(t,ar)},mg.radiusT=function(t){this.setRectHelper(t,qn)},mg.radiusB=function(t){this.setRectHelper(t,$n)},mg.radiusL=function(t){this.setRectHelper(t,Wn)},mg.radiusR=function(t){this.setRectHelper(t,Zn)},mg.radiusTX=function(t){this.setRectHelper(t,nr)},mg.radiusBX=function(t){this.setRectHelper(t,jn)},mg.radiusLX=function(t){this.setRectHelper(t,Vn)},mg.radiusRX=function(t){this.setRectHelper(t,_n)},mg.radiusTY=function(t){this.setRectHelper(t,rr)},mg.radiusBY=function(t){this.setRectHelper(t,zn)},mg.radiusLY=function(t){this.setRectHelper(t,Un)},mg.radiusRY=function(t){this.setRectHelper(t,Kn)},mg.radiusTL=function(t){this.setRectHelper(t,Qn)},mg.radiusTR=function(t){this.setRectHelper(t,er)},mg.radiusBL=function(t){this.setRectHelper(t,Ln)},mg.radiusBR=function(t){this.setRectHelper(t,Xn)},mg.radiusTLX=function(t){this.setRectHelper(t,Jn)},mg.radiusTLY=function(t){this.setRectHelper(t,tr)},mg.radiusTRX=function(t){this.setRectHelper(t,ir)},mg.radiusTRY=function(t){this.setRectHelper(t,sr)},mg.radiusBRX=function(t){this.setRectHelper(t,Yn)},mg.radiusBRY=function(t){this.setRectHelper(t,Gn)},mg.radiusBLX=function(t){this.setRectHelper(t,Mn)},mg.radiusBLY=function(t){this.setRectHelper(t,Nn)},gg.radius=function(t){this.deltaRectHelper(t,Bn)},gg.radiusX=function(t){this.deltaRectHelper(t,or)},gg.radiusY=function(t){this.deltaRectHelper(t,ar)},gg.radiusT=function(t){this.deltaRectHelper(t,qn)},gg.radiusB=function(t){this.deltaRectHelper(t,$n)},gg.radiusL=function(t){this.deltaRectHelper(t,Wn)},gg.radiusR=function(t){this.deltaRectHelper(t,Zn)},gg.radiusTX=function(t){this.deltaRectHelper(t,nr)},gg.radiusBX=function(t){this.deltaRectHelper(t,jn)},gg.radiusLX=function(t){this.deltaRectHelper(t,Vn)},gg.radiusRX=function(t){this.deltaRectHelper(t,_n)},gg.radiusTY=function(t){this.deltaRectHelper(t,rr)},gg.radiusBY=function(t){this.deltaRectHelper(t,zn)},gg.radiusLY=function(t){this.deltaRectHelper(t,Un)},gg.radiusRY=function(t){this.deltaRectHelper(t,Kn)},gg.radiusTL=function(t){this.deltaRectHelper(t,Qn)},gg.radiusTR=function(t){this.deltaRectHelper(t,er)},gg.radiusBL=function(t){this.deltaRectHelper(t,Ln)},gg.radiusBR=function(t){this.deltaRectHelper(t,Xn)},gg.radiusTLX=function(t){this.deltaRectHelper(t,Jn)},gg.radiusTLY=function(t){this.deltaRectHelper(t,tr)},gg.radiusTRX=function(t){this.deltaRectHelper(t,ir)},gg.radiusTRY=function(t){this.deltaRectHelper(t,sr)},gg.radiusBRX=function(t){this.deltaRectHelper(t,Yn)},gg.radiusBRY=function(t){this.deltaRectHelper(t,Gn)},gg.radiusBLX=function(t){this.deltaRectHelper(t,Mn)},gg.radiusBLY=function(t){this.deltaRectHelper(t,Nn)},mg.offshootA=function(t){this.offshootA=t,this.updateDirty()},mg.offshootB=function(t){this.offshootB=t,this.updateDirty()},gg.offshootA=function(t){t.toFixed&&(this.offshootA+=t,this.updateDirty())},gg.offshootB=function(t){t.toFixed&&(this.offshootB+=t,this.updateDirty())},mg.rectangleWidth=function(t){null!=t&&(this.rectangleWidth=t,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0)},mg.rectangleHeight=function(t){null!=t&&(this.rectangleHeight=t,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0)},gg.rectangleWidth=function(t){this.rectangleWidth=Ga(this.rectangleWidth,t),this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0},gg.rectangleHeight=function(t){this.rectangleHeight=Ga(this.rectangleHeight,t),this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0},pg.setRectHelper=function(t,e){this.updateDirty(),e.forEach((e=>{this[e]=t}),this)},pg.deltaRectHelper=function(t,e){this.updateDirty(),e.forEach((e=>{this[e]=Ga(this[e],t)}),this)},pg.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeRectanglePath()},pg.cleanDimensions=function(){this.dirtyDimensions=!1;const t=this.getHost();if(t){const e=t.currentDimensions?t.currentDimensions:[t.w,t.h],i=this.currentRectangleWidth||1,s=this.currentRectangleHeight||1;let n=this.rectangleWidth,r=this.rectangleHeight;n.substring&&(n=parseFloat(n)/100*e[0]),r.substring&&(r=parseFloat(r)/100*e[1]);const o=this.mimic;let a;o&&o.name&&this.useMimicDimensions&&(a=o.currentDimensions),a?(this.currentRectangleWidth=this.addOwnDimensionsToMimic?a[0]+n:a[0],this.currentRectangleHeight=this.addOwnDimensionsToMimic?a[1]+r:a[1]):(this.currentRectangleWidth=n,this.currentRectangleHeight=r),this.currentDimensions[0]=this.currentRectangleWidth,this.currentDimensions[1]=this.currentRectangleHeight,this.dirtyStart=!0,this.dirtyHandle=!0,this.dirtyOffset=!0,i===this.currentRectangleWidth&&s===this.currentRectangleHeight||(this.dirtyPositionSubscribers=!0),this.mimicked&&this.mimicked.length&&(this.dirtyMimicDimensions=!0)}else this.dirtyDimensions=!0},pg.makeRectanglePath=function(){this.dirtyDimensions&&this.cleanDimensions();const t=this.currentRectangleWidth,e=this.currentRectangleHeight,i=this.offshootA,s=this.offshootB;let n=this.radiusTLX,r=this.radiusTLY,o=this.radiusTRX,a=this.radiusTRY,c=this.radiusBRX,l=this.radiusBRY,h=this.radiusBLX,u=this.radiusBLY;(n.substring||r.substring||o.substring||a.substring||c.substring||l.substring||h.substring||u.substring)&&(n=n.substring?parseFloat(n)/100*t:n,r=r.substring?parseFloat(r)/100*e:r,o=o.substring?parseFloat(o)/100*t:o,a=a.substring?parseFloat(a)/100*e:a,c=c.substring?parseFloat(c)/100*t:c,l=l.substring?parseFloat(l)/100*e:l,h=h.substring?parseFloat(h)/100*t:h,u=u.substring?parseFloat(u)/100*e:u);let d=Ma;return t-n-o!=0&&(d+="h"+(t-n-o)),o+a!==0&&(d+=`c${o*i},${a*s} ${o-o*s},${a-a*i}, ${o},${a}`),e-a-l!=0&&(d+="v"+(e-a-l)),c+l!==0&&(d+=`c${-c*s},${l*i} ${c*i-c},${l-l*s} ${-c},${l}`),-t+h+c!==0&&(d+=`h${-t+h+c}`),h+u!==0&&(d+=`c${-h*i},${-u*s} ${h*s-h},${u*i-u} ${-h},${-u}`),-e+r+u!==0&&(d+=`v${-e+r+u}`),n+r!==0&&(d+=`c${n*s},${-r*i} ${n-n*i},${r*s-r} ${n},${-r}`),d+="z",d},pg.calculateLocalPathAdditionalActions=function(){const[t,e]=this.localBox;this.pathDefinition=this.pathDefinition.replace(Ma,`m${-t},${-e}`),this.pathCalculatedOnce=!1,this.calculateLocalPath(this.pathDefinition,!0)};const yg=function(t){return!!t&&(t.species=gr,new Rectangle(t))};I.Rectangle=Rectangle;const Shape=function(t=qa){return this.shapeInit(t),this},bg=Shape.prototype=yc();bg.type=No,bg.lib=gi,bg.isArtefact=!0,bg.isAsset=!1,ml(bg),hf(bg),bg.cleanSpecies=function(){this.dirtySpecies=!1},bg.cleanStampHandlePositionsAdditionalActions=function(){const t=this.localBox,e=this.currentStampHandlePosition;e[0]+=t[0],e[1]+=t[1]};const Sg=function(t){return!!t&&new Shape(t)};I.Shape=Shape;const kg=U([U([.043,0,.082,-.035,.088,-.088]),U([.007,-.057,-.024,-.121,-.088,-.162]),U([-.07,-.045,-.169,-.054,-.265,-.015]),U([-.106,.043,-.194,.138,-.235,.265]),U([-.044,.139,-.026,.3,.058,.442]),U([.091,.153,.25,.267,.442,.308]),U([.206,.044,.431,-.001,.619,-.131]),U([.2,-.139,.34,-.361,.381,-.619])]),Ag=U([U([0,-.27,-.11,-.52,-.29,-.71]),U([-.19,-.19,-.44,-.29,-.71,-.29]),U([-.27,0,-.52,.11,-.71,.29]),U([-.19,.19,-.29,.44,-.29,.71]),U([0,.27,.11,.52,.29,.71]),U([.19,.19,.44,.29,.71,.29]),U([.27,0,.52,-.11,.71,-.29]),U([.19,-.19,.29,-.44,.29,-.71])]),Spiral=function(t=qa){return this.shapeInit(t),this},vg=Spiral.prototype=yc();vg.type="Spiral",vg.lib=gi,vg.isArtefact=!0,vg.isAsset=!1,ml(vg),hf(vg);vg.defs=cc(vg.defs,{loops:1,loopIncrement:1,drawFromLoop:0});const Pg=vg.setters,Cg=vg.deltaSetters;Pg.loops=function(t){this.loops=t,this.updateDirty()},Cg.loops=function(t){this.loops+=t,this.updateDirty()},Pg.loopIncrement=function(t){this.loopIncrement=t,this.updateDirty()},Cg.loopIncrement=function(t){this.loopIncrement+=t,this.updateDirty()},Pg.drawFromLoop=function(t){this.drawFromLoop=V(t),this.updateDirty()},Cg.drawFromLoop=function(t){this.drawFromLoop=V(this.drawFromLoop+t),this.updateDirty()},vg.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeSpiralPath()},vg.makeSpiralPath=function(){const t=V(this.loops),e=this.loopIncrement,i=V(this.drawFromLoop),s=Kc();let n,r,o,a,c,l,h,u,d,f,p,m;for(let t=0,i=kg.length;t<i;t++)[n,r,o,a,c,l]=kg[t],s.push([n*e,r*e,o*e,a*e,c*e,l*e]);let g=Ma;for(let y=0;y<t;y++)for(let t=0,b=s.length;t<b;t++)[n,r,o,a,c,l]=s[t],y>=i&&(g+=`c${n},${r} ${o},${a} ${c},${l}`),[h,u,d,f,p,m]=Ag[t],s[t]=[n+h*e,r+u*e,o+d*e,a+f*e,c+p*e,l+m*e];return qc(s),g},vg.calculateLocalPathAdditionalActions=function(){const[t,e]=this.localBox,i=this.scale;this.pathDefinition=this.pathDefinition.replace(Ma,`m${-t/i},${-e/i}`),this.pathCalculatedOnce=!1,this.calculateLocalPath(this.pathDefinition,!0)};const wg=function(t){return!!t&&(t.species="spiral",new Spiral(t))};I.Spiral=Spiral;const Star=function(t=qa){return this.shapeInit(t),this},xg=Star.prototype=yc();xg.type="Star",xg.lib=gi,xg.isArtefact=!0,xg.isAsset=!1,ml(xg),hf(xg);xg.defs=cc(xg.defs,{radius1:0,radius2:0,points:0,twist:0});const Og=xg.setters,Dg=xg.deltaSetters;Og.radius1=function(t){this.radius1=t,this.updateDirty()},Dg.radius1=function(t){this.radius1+=t,this.updateDirty()},Og.radius2=function(t){this.radius2=t,this.updateDirty()},Dg.radius2=function(t){this.radius2+=t,this.updateDirty()},Og.points=function(t){this.points=t,this.updateDirty()},Dg.points=function(t){this.points+=t,this.updateDirty()},Og.twist=function(t){this.twist=t,this.updateDirty()},Dg.twist=function(t){this.twist+=t,this.updateDirty()},xg.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeStarPath()},xg.makeStarPath=function(){const t=this.points,e=this.twist,i=360/t,s=Kc();let n,r,o,a,c=this.radius1,l=this.radius2,h=Na;if(c.substring||l.substring){const t=this.getHost();if(t){const e=t.currentDimensions[0];c=c.substring?parseFloat(c)/100*e:c,l=l.substring?parseFloat(l)/100*e:l}}const u=td({x:0,y:-c}),d=td({x:0,y:-l});n=u.x,r=u.y,s.push(n),d.rotate(-i/2),d.rotate(e);for(let e=0;e<t;e++)d.rotate(i),o=parseFloat((d.x-n).toFixed(1)),n+=o,s.push(n),a=parseFloat((d.y-r).toFixed(1)),r+=a,h+=`${o},${a} `,u.rotate(i),o=parseFloat((u.x-n).toFixed(1)),n+=o,s.push(n),a=parseFloat((u.y-r).toFixed(1)),r+=a,h+=`${o},${a} `;ed(u),ed(d);const f=tt(...s);return h=`m${B(f).toFixed(1)},0l${h}z`,qc(s),h};const Rg=function(t){return!!t&&(t.species="star",new Star(t))};I.Star=Star;const Tetragon=function(t=qa){return this.shapeInit(t),this},Fg=Tetragon.prototype=yc();Fg.type="Tetragon",Fg.lib=gi,Fg.isArtefact=!0,Fg.isAsset=!1,ml(Fg),hf(Fg);Fg.defs=cc(Fg.defs,{radiusX:5,radiusY:5,intersectX:.5,intersectY:.5});const Hg=Fg.setters,Eg=Fg.deltaSetters;Hg.radius=function(t){this.setRectHelper(t,lr)},Hg.radiusX=function(t){this.setRectHelper(t,cr)},Hg.radiusY=function(t){this.setRectHelper(t,hr)},Eg.radius=function(t){this.deltaRectHelper(t,lr)},Eg.radiusX=function(t){this.deltaRectHelper(t,cr)},Eg.radiusY=function(t){this.deltaRectHelper(t,hr)},Hg.intersectA=function(t){this.intersectA=t,this.updateDirty()},Hg.intersectB=function(t){this.intersectB=t,this.updateDirty()},Eg.intersectA=function(t){t.toFixed&&(this.intersectA+=t,this.updateDirty())},Eg.intersectB=function(t){t.toFixed&&(this.intersectB+=t,this.updateDirty())},Fg.setRectHelper=function(t,e){this.updateDirty(),e.forEach((e=>{this[e]=t}),this)},Fg.deltaRectHelper=function(t,e){this.updateDirty(),e.forEach((e=>{this[e]=Ga(this[e],t)}),this)},Fg.cleanSpecies=function(){this.dirtySpecies=!1,this.pathDefinition=this.makeTetragonPath()},Fg.makeTetragonPath=function(){const t=this.radiusX,e=this.radiusY;let i,s;if(t.substring||e.substring){const n=this.getHost();if(n){const[r,o]=n.currentDimensions;i=2*(t.substring?parseFloat(t)/100*r:t),s=2*(e.substring?parseFloat(e)/100*o:e)}}else i=2*t,s=2*e;const n=parseFloat((i*this.intersectX).toFixed(2)),r=parseFloat((i-n).toFixed(2)),o=parseFloat((s*this.intersectY).toFixed(2)),a=parseFloat((s-o).toFixed(2));let c=Ma;return c+=`l${r},${o} ${-r},${a} ${-n},${-a} ${n},${-o}z`,c},Fg.calculateLocalPathAdditionalActions=function(){const[t,e]=this.localBox;this.pathDefinition=this.pathDefinition.replace(Ma,`m${-t},${-e}`),this.pathCalculatedOnce=!1,this.calculateLocalPath(this.pathDefinition,!0)};const Ig=function(t){return!!t&&(t.species="tetragon",new Tetragon(t))};I.Tetragon=Tetragon;const Ticker=function(t=qa){return this.makeName(t.name),this.register(),this.subscribers=[],this.subscriberObjects=[],this.set(this.defs),this.set(t),this.cycleCount=0,this.active=!1,this.effectiveDuration=0,this.startTime=0,this.currentTime=0,this.tick=0,this.lastEvent=0,t.subscribers&&this.subscribe(t.subscribers),this.setEffectiveDuration(),this},Tg=Ticker.prototype=yc();Tg.type=Go,Tg.lib="animationtickers",Tg.isArtefact=!1,Tg.isAsset=!1,ml(Tg);Tg.defs=cc(Tg.defs,{order:1,duration:0,subscribers:null,killOnComplete:!1,cycles:1,eventChoke:0,observer:null,onRun:null,onHalt:null,onReverse:null,onResume:null,onSeekTo:null,onSeekFor:null,onComplete:null,onReset:null}),Tg.packetExclusions=hc(Tg.packetExclusions,["subscribers"]),Tg.packetFunctions=hc(Tg.packetFunctions,["onRun","onHalt","onReverse","onResume","onSeekTo","onSeekFor","onComplete","onReset"]),Tg.kill=function(){return this.active&&this.halt(),uc(Lg,this.name),Mg=!0,this.deregister(),!0},Tg.killTweens=function(t=!1){let e,i,s;for(e=0,i=this.subscribers.length;e<i;e++)s=x[this.subscribers[e]],s.completeAction(),s.kill();return t?(this.kill(),!0):this};const Bg=Tg.getters,$g=Tg.setters;Bg.subscribers=function(){return[].concat(this.subscribers)},$g.subscribers=function(t){this.subscribers=[],this.subscribe(t)},$g.order=function(t){this.order=t,this.active&&(Mg=!0)},$g.cycles=function(t){this.cycles=t,this.cycles||(this.cycleCount=0)},$g.duration=function(t){let e,i,s;const n=this.subscribers;if(this.duration=t,this.setEffectiveDuration(),dc(n))for(e=0,i=n.length;e<i;e++)s=x[n[e]],s&&(s.calculateEffectiveTime(),s.type==jo&&s.calculateEffectiveDuration())},Tg.subscribe=function(t){const e=Kc();let i,s,n,r;for(K(t)?e.push(...t):e.push(t),i=0,s=e.length;i<s;i++)n=e[i],null!=n&&(r=n.substring?n:!(!oc(n)||!n.name)&&n.name,r&&hc(this.subscribers,r));return e.length&&(this.sortSubscribers(),this.recalculateEffectiveDuration()),qc(e),this},Tg.unsubscribe=function(t){const e=Kc();let i,s,n,r;for(K(t)?e.push(...t):e.push(t),i=0,s=e.length;i<s;i++)n=t[i],r=n.substring?n:!(!oc(n)||!n.name)&&n.name,r&&uc(this.subscribers,r);return e.length&&(this.sortSubscribers(),this.recalculateEffectiveDuration()),qc(e),this},Tg.repopulateSubscriberObjects=function(){const t=this.subscriberObjects,e=this.subscribers;let i;t.length=0,e.forEach((e=>{i=x[e],i&&t.push(i)}))},Tg.getSubscriberObjects=function(){return this.subscribers.length&&!this.subscriberObjects.length&&this.repopulateSubscriberObjects(),this.subscriberObjects},Tg.sortSubscribers=function(){const t=this.subscribers,e=t.length;if(e>1){const i=Kc();let s,n,r,o;for(s=0;s<e;s++)r=t[s],o=V(r.effectiveTime)||0,i[o]||(i[o]=Kc()),i[o].push(r);for(t.length=0,s=0,n=i.length;s<n;s++)r=i[s],r&&(t.push(...r),qc(r));qc(i)}this.repopulateSubscriberObjects()},Tg.updateSubscribers=function(t,e){e=!!dc(e)&&e;const i=this.getSubscriberObjects();let s,n;if(e)for(s=i.length-1;s>=0;s--)i[s].set(t);else for(s=0,n=i.length;s<n;s++)i[s].set(t);return this},Tg.changeSubscriberDirection=function(){return this.getSubscriberObjects().forEach((t=>t.reversed=!t.reversed)),this},Tg.makeTickerUpdateEvent=function(){return new CustomEvent("tickerupdate",{detail:{name:this.name,type:Go,tick:this.tick,reverseTick:this.effectiveDuration-this.tick},bubbles:!0,cancelable:!0})},Tg.recalculateEffectiveDuration=function(){const t=this.getSubscriberObjects();let e,i=0;return this.duration?this.setEffectiveDuration():(t.forEach((t=>{e=t.getEndTime(),e>i&&(i=e)})),this.effectiveDuration=i),this},Tg.setEffectiveDuration=function(){let t;return this.duration&&(t=za(this.duration),t[0]==dn?(this.duration=0,this.recalculateEffectiveDuration()):this.effectiveDuration=t[1]),this},Tg.checkObserverRunningState=function(){let t=this.observer;if(t){if(t.substring){const e=i[t];if(!e||e.type!=Mo)return!0;t=this.observer=e}if(t.type==Mo)return t.isRunning()}return!0},Tg.fn=function(t){t=!!dc(t)&&t;const e=Xg(),i=this.startTime,s=this.cycles,n=this.effectiveDuration,r=this.eventChoke;let o,a,c,l,h,u,d,f,p=this.active,m=this.cycleCount;if(p&&i&&(!s||m<s)){if(d=this.currentTime=et(),f=this.tick=d-i,!s||m+1<s?(f>=n?(f=this.tick=0,this.startTime=this.currentTime,e.tick=n,e.reverseTick=0,e.willLoop=!0,s&&(m++,this.cycleCount=m)):(e.tick=f,e.reverseTick=n-f),e.next=!0):f>=n?(e.tick=n,e.reverseTick=0,p=this.active=!1,s&&(m++,this.cycleCount=m)):(e.tick=f,e.reverseTick=n-f,e.next=!0),c=this.getSubscriberObjects(),t)for(o=c.length-1;o>=0;o--)c[o].update(e);else for(o=0,a=c.length;o<a;o++)c[o].update(e);r&&(l=this.lastEvent+r,h=et(),l<h&&(u=this.makeTickerUpdateEvent(),window.dispatchEvent(u),this.lastEvent=h)),p||this.halt(),this.killOnComplete&&m>=s&&this.killTweens(!0)}Yg(e)},Tg.run=function(){return this.active||(this.startTime=this.currentTime=et(),this.cycleCount=0,this.updateSubscribers({reversed:!1}),this.active=!0,hc(Lg,this.name),Mg=!0,typeof this.onRun==Ei&&this.onRun()),this},Tg.isRunning=function(){return this.active},Tg.reset=function(){return this.active&&this.halt(),this.startTime=this.currentTime=et(),this.cycleCount=0,this.updateSubscribers({reversed:!1}),this.active=!0,this.fn(!0),this.active=!1,typeof this.onReset==Ei&&this.onReset(),this},Tg.complete=function(){return this.active&&this.halt(),this.startTime=this.currentTime=et(),this.cycleCount=0,this.updateSubscribers({reversed:!0}),this.active=!0,this.fn(),this.active=!1,typeof this.onComplete==Ei&&this.onComplete(),this},Tg.reverse=function(t=!1){t=pc(t,!1),this.active&&this.halt();const e=this.currentTime-this.startTime;return this.startTime=this.currentTime-(this.effectiveDuration-e),this.changeSubscriberDirection(),this.active=!0,this.fn(),this.active=!1,typeof this.onReverse==Ei&&this.onReverse(),t&&this.resume(),this},Tg.halt=function(){return this.active=!1,uc(Lg,this.name),Mg=!0,typeof this.onHalt==Ei&&this.onHalt(),this},Tg.resume=function(){let t,e,i;return this.active||(t=et(),e=this.currentTime,i=this.startTime,this.startTime=t-(e-i),this.currentTime=t,this.active=!0,hc(Lg,this.name),Mg=!0,typeof this.onResume==Ei&&this.onResume()),this},Tg.seekTo=function(t,e=!1){let i=!1;return t=pc(t,0),this.active&&this.halt(),this.cycles&&this.cycleCount>=this.cycles&&(this.cycleCount=this.cycles-1),t<this.tick&&(i=!0),this.currentTime=et(),this.startTime=this.currentTime-t,this.active=!0,this.fn(i),this.active=!1,typeof this.onSeekTo==Ei&&this.onSeekTo(),e&&this.resume(),this},Tg.seekFor=function(t,e=!1){let i=!1;return t=pc(t,0),this.active&&this.halt(),this.cycles&&this.cycleCount>=this.cycles&&(this.cycleCount=this.cycles-1),this.startTime-=t,t<0&&(i=!0),this.active=!0,this.fn(i),this.active=!1,typeof this.onSeekFor==Ei&&this.onSeekFor(),e&&this.resume(),this};const Lg=[];let Mg=!0;yl({name:"coreTickersAnimation",order:0,fn:function(){let t,e,i,s,r,o;if(Mg){Mg=!1;const n=Kc();for(s=0,r=Lg.length;s<r;s++)e=Lg[s],e&&(i=V(e.order)||0,n[i]||(n[i]=Kc()),n[i].push(e));for(Lg.length=0,s=0,r=n.length;s<r;s++)t=n[s],t&&(Lg.push(...t),qc(t));qc(n)}for(s=0,r=Lg.length;s<r;s++)o=Lg[s],e=n[o],e&&e.fn&&e.checkObserverRunningState()&&e.fn()}});const Ng=[],Xg=function(){return Ng.length||Ng.push(ht({tick:0,reverseTick:0,willLoop:!1,next:!1})),Ng.shift()},Yg=function(t){t&&(t.tick=0,t.reverseTick=0,t.willLoop=!1,t.next=!1,Ng.push(t))},Gg=function(t){return!!t&&new Ticker(t)};I.Ticker=Ticker;const Tracer=function(t=qa){return this.makeName(t.name),this.register(),this.initializePositions(),this.set(this.defs),this.onEnter=Ua,this.onLeave=Ua,this.onDown=Ua,this.onUp=Ua,this.stampAction=Ua,this.trace=Wf(t),t.group||(t.group=bd),this.set(t),this.purge&&this.purgeArtefact(this.purge),this},jg=Tracer.prototype=yc();jg.type="Tracer",jg.lib=gi,jg.isArtefact=!0,jg.isAsset=!1,ml(jg),tf(jg);const zg={artefact:null,historyLength:1,hitRadius:10,showHitRadius:!1,hitRadiusColor:ae};jg.defs=cc(jg.defs,zg),jg.packetObjects=hc(jg.packetObjects,["artefact","particle"]),jg.packetFunctions=hc(jg.packetFunctions,["stampAction"]),jg.finalizePacketOut=function(t){return t},jg.postCloneAction=function(t,e){return t.trace=Wf({name:t.name,historyLength:e.historyLength||this.historyLength||1}),t},jg.factoryKill=function(t){t&&this.artefact.kill(),this.trace.kill()};const Wg=jg.setters;Wg.stampAction=function(t){nc(t)&&(this.stampAction=t)},Wg.artefact=function(t){let e;t.substring?e=o[t]:oc(t)&&t.isArtefact&&(e=t),e&&(this.artefact=e,this.dirtyFilterIdentifier=!0)},jg.regularStamp=function(){const{artefact:t,trace:e,stampAction:i,showHitRadius:s,hitRadius:n,hitRadiusColor:r,currentStampPosition:o}=this,a=this.currentHost;if(e.set({position:o}),e.manageHistory(0,a),i.call(this,t,e,a),s){const t=a.engine;t.save(),t.lineWidth=1,t.strokeStyle=r,t.setTransform(1,0,0,1,0,0),t.beginPath(),t.arc(o[0],o[1],n,0,nt),t.stroke(),t.restore()}},jg.checkHit=function(t=[],e){if(this.noUserInteraction)return!1;const i=K(t)?t:[t],s=this.currentStampPosition;let n,r,o=!1;if(i.some((t=>{if(K(t))n=t[0],r=t[1];else{if(!fc(t,t.x,t.y))return!1;n=t.x,r=t.y}if(!n.toFixed||!r.toFixed||isNaN(n)||isNaN(r))return!1;const e=td(s).vectorSubtract(t);return e.getMagnitude()<this.hitRadius&&(o=!0),ed(e),o}),this)){return this.checkHitReturn(n,r,e)}return!1};const Vg=function(t){return!!t&&new Tracer(t)};I.Tracer=Tracer;const Tween=function(t=qa){let e;return this.makeName(t.name),this.register(),this.set(this.defs),this.set(t),this.setDefinitionsValues(),this.status=-1,this.calculateEffectiveTime(),this.calculateEffectiveDuration(),n[t.ticker]?this.addToTicker(t.ticker):(e=`${this.name}_ticker`,Gg({name:e,order:this.order,subscribers:this.name,duration:this.effectiveDuration,eventChoke:pc(t.eventChoke,0),cycles:pc(t.cycles,1),killOnComplete:pc(t.killOnComplete,!1),observer:t.observer}),this.ticker=e,n[e].recalculateEffectiveDuration()),this},Ug=Tween.prototype=yc();Ug.type=jo,Ug.lib=la,Ug.isArtefact=!1,Ug.isAsset=!1,ml(Ug),Kd(Ug);Ug.defs=cc(Ug.defs,{definitions:null,duration:0,killOnComplete:!1,commenceAction:null,onRun:null,onHalt:null,onResume:null,onReverse:null,onSeekTo:null,onSeekFor:null,completeAction:null}),Ug.packetExclusions=hc(Ug.packetExclusions,["definitions","targets"]),Ug.packetFunctions=hc(Ug.packetFunctions,["commenceAction","completeAction","onRun","onHalt","onResume","onReverse","onSeekTo","onSeekFor","action"]),Ug.finalizePacketOut=function(t){return K(this.targets)&&(t.targets=this.targets.map((t=>t.name))),K(this.definitions)&&(t.definitions=this.definitions.map((t=>{const e={};if(e.attribute=t.attribute,e.start=t.start,e.end=t.end,t.engine&&t.engine.substring)e.engine=t.engine.substring;else if(dc(t.engine)&&null!==t.engine){const i=this.stringifyFunction(t.engine);i&&(e.engine=i,e.engineIsFunction=!0)}return e}))),t},Ug.postCloneAction=function(t,e){if(e.useNewTicker){const i=n[this.ticker];dc(e.cycles)?t.cycles=e.cycles:t.cycles=i?i.cycles:1;const s=n[t.ticker];s.cycles=t.cycles,dc(e.duration)&&(t.duration=e.duration,t.calculateEffectiveDuration(),s&&s.recalculateEffectiveDuration())}return K(t.definitions)&&t.definitions.forEach(((t,e)=>{t.engineIsFunction&&(t.engine=this.definitions[e].engine)})),t};const Zg=Ug.getters,_g=Ug.setters;Zg.definitions=function(){return[].concat(this.definitions)},_g.definitions=function(t){this.definitions=[].concat(t),this.setDefinitionsValues()},_g.commenceAction=function(t){this.commenceAction=t,typeof this.commenceAction!=Ei&&(this.commenceAction=Ua)},_g.completeAction=function(t){this.completeAction=t,typeof this.completeAction!=Ei&&(this.completeAction=Ua)},Ug.set=function(t=qa){const e=this.setters,i=Q(t),s=this.defs,n=!!dc(t.ticker)&&this.ticker;let r,o,a,c;for(o=0,a=i.length;o<a;o++)r=i[o],r!=Vs&&(c=e[r],c?c.call(this,t[r]):typeof s[r]!=pa&&(this[r]=t[r]));return n?(this.ticker=n,this.addToTicker(t.ticker)):mc(t.time,t.duration)&&(this.calculateEffectiveTime(),this.calculateEffectiveDuration()),this},Ug.getEndTime=function(){return this.effectiveTime+this.effectiveDuration},Ug.calculateEffectiveDuration=function(t){const e=pc(t,this.duration),i=za(e),s=i[1],r=i[0],o=this.ticker;let a,c=0;return this.effectiveDuration=0,r==dn?o&&(a=n[o],a&&(c=a.effectiveDuration,this.effectiveDuration=c*(s/100))):this.effectiveDuration=s,this},Ug.update=function(t=qa){const e=t.tick||0,i=t.reverseTick||0,s=this.effectiveTime,n=this.effectiveDuration,r=this.reversed;let o,a,c=0;r?(o=s+n,a=s,i>o?c=1:i<a&&(c=-1)):(o=s,a=s+n,e<o?c=-1:e>a&&(c=1)),n?c&&c==this.status||(this.status=c,this.doSimpleUpdate(t),t.next||(this.status=r?-1:1)):c!=this.status&&(this.status=c,this.doSimpleUpdate(t),t.next||(this.status=r?-1:1)),t.willLoop&&(this.reverseOnCycleEnd?this.reversed=!r:this.status=-1)},Ug.doSimpleUpdate=function(t=qa){const e=this.effectiveTime,i=this.engineActions,s=this.effectiveDuration,n=this.status,r=this.definitions,o=this.targets,a=this.action,c=this.setObj||{};let l,h,u,d,f,p,m,g,y,b,S,k,A;const v=this.reversed?t.reverseTick-e:t.tick-e;for(A=s&&!n?v/s:n>0?1:0,y=0,b=r.length;y<b;y++)l=r[y],h=l.engine,d=l.effectiveStart,f=l.effectiveChange,p=l.integer,m=l.suffix,g=l.attribute,u=h.substring?i(h,d,f,A):h(d,f,A),p&&(u=lt(u)),m&&(u+=m),c[g]=u;for(S=0,k=o.length;S<k;S++){const t=o[S];Co==t.type?t.setArtefacts(c):t.set(c)}this.setObj=c,a&&a()},Ug.engineActions=function(t,e,i,s){const n=null!=gc[t]?t:As;return e+i*gc[n](s)},Ug.setDefinitionsValues=function(){const t=this.parseDefinitionsValue,e=this.definitions;let i,s,n,r;for(i=0,s=e.length;i<s;i++)r=e[i],r&&(n=t(r.start),r.effectiveStart=n[1],r.suffix=n[0],n=t(r.end),r.effectiveEnd=n[1],dc(r.engine)||(r.engine=As),r.effectiveChange=r.effectiveEnd-r.effectiveStart);return this},Ug.parseDefinitionsValue=function(t){const e=[Na,0];if(dc(t))if(t.toFixed)e[1]=t;else if(t.substring){const i=t.match(/^-?\d+\.?\d*(\D*)/);dc(i[0])&&(e[1]=parseFloat(i)),dc(i[1])&&(e[0]=i[1])}return e},Ug.run=function(){const t=n[this.ticker];return t&&(this.commenceAction(),t.run(),typeof this.onRun==Ei&&this.onRun()),this},Ug.isRunning=function(){const t=n[this.ticker];return!!t&&t.isRunning()},Ug.halt=function(){const t=n[this.ticker];return t&&(t.halt(),typeof this.onHalt==Ei&&this.onHalt()),this},Ug.reverse=function(){const t=n[this.ticker];return t&&(t.reverse(),typeof this.onReverse==Ei&&this.onReverse()),this},Ug.resume=function(){const t=n[this.ticker];return t&&(t.resume(),typeof this.onResume==Ei&&this.onResume()),this},Ug.seekTo=function(t){const e=n[this.ticker];return e&&(e.seekTo(t),typeof this.onSeekTo==Ei&&this.onSeekTo()),this},Ug.seekFor=function(t){const e=n[this.ticker];return e&&(e.seekFor(t),typeof this.onSeekFor==Ei&&this.onSeekFor()),this};const Kg=function(t){return!!t&&new Tween(t)};I.Tween=Tween;const qg=(t,e)=>(t=parseFloat(t),rc(t)||(t=0),rc(e)||(e=0),parseFloat(t.toFixed(e))),Wheel=function(t=qa){return mc(t.dimensions,t.width,t.height,t.radius)||(t.radius=5),this.entityInit(t),this},Qg=Wheel.prototype=yc();Qg.type="Wheel",Qg.lib=gi,Qg.isArtefact=!0,Qg.isAsset=!1,ml(Qg),tf(Qg);Qg.defs=cc(Qg.defs,{radius:5,startAngle:0,endAngle:360,clockwise:!0,includeCenter:!1,closed:!0});const Jg=Qg.setters,ty=Qg.deltaSetters;Jg.width=function(t){if(null!=t){const e=this.dimensions;e[0]=e[1]=t,this.dimensionsHelper()}},ty.width=function(t){const e=this.dimensions;e[0]=e[1]=Ga(e[0],t),this.dimensionsHelper()},Jg.height=function(t){if(null!=t){const e=this.dimensions;e[0]=e[1]=t,this.dimensionsHelper()}},ty.height=function(t){const e=this.dimensions;e[0]=e[1]=Ga(e[0],t),this.dimensionsHelper()},Jg.dimensions=function(t,e){this.setCoordinateHelper(ei,t,e),this.dimensionsHelper()},ty.dimensions=function(t,e){this.setDeltaCoordinateHelper(ei,t,e),this.dimensionsHelper()},Jg.radius=function(t){this.radius=t,this.radiusHelper()},ty.radius=function(t){this.radius=Ga(this.radius,t),this.radiusHelper()},Jg.startAngle=function(t){this.startAngle=qg(t,4),this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},ty.startAngle=function(t){this.startAngle+=qg(t,4),this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Jg.endAngle=function(t){this.endAngle=qg(t,4),this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},ty.endAngle=function(t){this.endAngle+=qg(t,4),this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0},Jg.closed=function(t){dc(t)&&(this.closed=!!t,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0)},Jg.includeCenter=function(t){dc(t)&&(this.includeCenter=!!t,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0)},Jg.clockwise=function(t){dc(t)&&(this.clockwise=!!t,this.dirtyPathObject=!0,this.dirtyFilterIdentifier=!0)},Qg.dimensionsHelper=function(){const t=this.dimensions[0];t.substring?this.radius=parseFloat(t)/2+"%":this.radius=t/2,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0},Qg.radiusHelper=function(){const t=this.radius,e=this.dimensions;t.substring?e[0]=e[1]=2*parseFloat(t)+dn:e[0]=e[1]=2*t,this.dirtyDimensions=!0,this.dirtyFilterIdentifier=!0},Qg.cleanDimensionsAdditionalActions=function(){const t=this.radius,e=this.currentDimensions,i=t.substring?parseFloat(t)/100*e[0]:t;e[0]!==2*i?(e[1]=e[0],this.currentRadius=e[0]/2):this.currentRadius=i},Qg.cleanPathObject=function(){if(this.dirtyPathObject=!1,!this.noPathUpdates||!this.pathObject){const t=this.pathObject=new Path2D,e=this.currentStampHandlePosition,i=this.currentScale,s=this.currentRadius*i,n=s-e[0]*i,r=s-e[1]*i,o=this.startAngle*at,a=this.endAngle*at;t.arc(n,r,s,o,a,!this.clockwise),this.includeCenter?(t.lineTo(n,r),t.closePath()):this.closed&&t.closePath()}};const ey=function(t){return!!t&&new Wheel(t)};I.Wheel=Wheel;const World=function(t=qa){this.makeName(t.name),this.register(),this.set(this.defs);const e=t.keytypes||{};return e.gravity||(e.gravity=zo),t.gravity||(t.gravity=[0,9.81,0]),t.userAttributes&&t.userAttributes.forEach((t=>{this.addAttribute(t),t.type&&(e[t.key]=t.type)})),this.initializeAttributes(e),this.set(t),this},iy=World.prototype=yc();iy.type=Vo,iy.lib="world",iy.isArtefact=!1,iy.isAsset=!1,ml(iy);iy.defs=cc(iy.defs,{gravity:null,tickMultiplier:1,keytypes:null}),iy.kill=function(){return this.deregister(),!0};const sy=iy.getters,ny=iy.setters,ry=iy.deltaSetters;ny.gravityX=function(t){this.gravity&&dc(t)&&this.gravity.setX(t)},ny.gravityY=function(t){this.gravity&&dc(t)&&this.gravity.setY(t)},ny.gravityZ=function(t){this.gravity&&dc(t)&&this.gravity.setZ(t)},ny.gravity=function(t){this.gravity&&dc(t)&&this.gravity.set(t)},iy.addAttribute=function(t=qa){const{key:e,defaultValue:i,setter:s,deltaSetter:n,getter:r}=t;return e&&e.substring&&(this.defs[e]=dc(i)?i:null,this[e]=dc(i)?i:null,nc(s)&&(ny[e]=s),nc(n)&&(ry[e]=n),nc(r)&&(sy[e]=r)),this},iy.removeAttribute=function(t){return t&&t.substring&&(delete this.defs[t],delete this[t],delete sy[t],delete ny[t],delete ry[t]),this},iy.initializeAttributes=function(t){for(const[e,i]of z(t))switch(i){case Bo:this[e]=ad();break;case zo:this[e]=id();break;case Ao:this[e]=su()}};const oy=function(t){return!!t&&new World(t)};I.World=World;const ay=$d;"undefined"!=typeof window&&$d();export{Ad as addCanvas,al as addListener,dl as addNativeListener,Td as addStack,Nd as clear,Xd as compile,ku as createImageFromCell,vu as createImageFromEntity,Au as createImageFromGroup,Sl as currentCorePosition,Vc as forceUpdate,yd as getCanvas,Dl as getIgnorePixelRatio,xl as getPixelRatio,Bd as getStack,Ml as getTouchActionChoke,Su as importDomImage,cm as importDomVideo,bu as importImage,lm as importMediaStream,hm as importScreenCapture,pm as importSprite,um as importVideo,ay as init,T as library,Jd as makeAction,yl as makeAnimation,ol as makeAnimationObserver,bf as makeBezier,sf as makeBlock,Pf as makeCog,Oh as makeColor,Ff as makeConicGradient,Tf as makeCrescent,$f as makeDragZone,wd as makeElement,tp as makeEmitter,ap as makeFilter,lp as makeForce,ip as makeGradient,pp as makeGrid,Du as makeGroup,gp as makeKeyboardZone,bp as makeLine,vp as makeLineSpiral,Dp as makeLoom,Ip as makeMesh,Gp as makeNet,Qp as makeNoise,qp as makeNoiseAsset,nm as makeOval,bm as makePattern,Im as makePhrase,Mm as makePicture,Gm as makePolygon,Um as makePolyline,Jm as makeQuadratic,ng as makeRadialGradient,lg as makeRawAsset,fg as makeReactionDiffusionAsset,yg as makeRectangle,zd as makeRender,Sg as makeShape,Vd as makeSnippet,wg as makeSpiral,$p as makeSpring,Rg as makeStar,Ig as makeTetragon,Gg as makeTicker,Vg as makeTracer,Kg as makeTween,tm as makeUpdater,ey as makeWheel,oy as makeWorld,Jp as observeAndUpdate,iu as releaseCoordinate,od as releaseQuaternion,ed as releaseVector,cl as removeListener,fl as removeNativeListener,Gd as render,eu as requestCoordinate,rd as requestQuaternion,td as requestVector,Th as seededRandomNumberGenerator,kd as setCurrentCanvas,Nh as setFilterMemoizationChoke,Rl as setIgnorePixelRatio,Hl as setPixelRatioChangeAction,Nl as setTouchActionChoke,Mh as setWorkstoreLifetimeLength,Wh as setWorkstorePurgeChoke,Yd as show,nl as startCoreAnimationLoop,zl as startCoreListeners,rl as stopCoreAnimationLoop,Wl as stopCoreListeners};
