<!DOCTYPE html>

<html>
<head>
  <title>Demo Canvas 009</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="canvas-001.html">
                  ./demo/canvas-001.js
                </a>
              
                
                <a class="source" href="canvas-002.html">
                  ./demo/canvas-002.js
                </a>
              
                
                <a class="source" href="canvas-003.html">
                  ./demo/canvas-003.js
                </a>
              
                
                <a class="source" href="canvas-004.html">
                  ./demo/canvas-004.js
                </a>
              
                
                <a class="source" href="canvas-005.html">
                  ./demo/canvas-005.js
                </a>
              
                
                <a class="source" href="canvas-006.html">
                  ./demo/canvas-006.js
                </a>
              
                
                <a class="source" href="canvas-007.html">
                  ./demo/canvas-007.js
                </a>
              
                
                <a class="source" href="canvas-008.html">
                  ./demo/canvas-008.js
                </a>
              
                
                <a class="source" href="canvas-009.html">
                  ./demo/canvas-009.js
                </a>
              
                
                <a class="source" href="canvas-010.html">
                  ./demo/canvas-010.js
                </a>
              
                
                <a class="source" href="canvas-011.html">
                  ./demo/canvas-011.js
                </a>
              
                
                <a class="source" href="canvas-012.html">
                  ./demo/canvas-012.js
                </a>
              
                
                <a class="source" href="canvas-013.html">
                  ./demo/canvas-013.js
                </a>
              
                
                <a class="source" href="canvas-014.html">
                  ./demo/canvas-014.js
                </a>
              
                
                <a class="source" href="canvas-015.html">
                  ./demo/canvas-015.js
                </a>
              
                
                <a class="source" href="canvas-015a.html">
                  ./demo/canvas-015a.js
                </a>
              
                
                <a class="source" href="canvas-016.html">
                  ./demo/canvas-016.js
                </a>
              
                
                <a class="source" href="canvas-017.html">
                  ./demo/canvas-017.js
                </a>
              
                
                <a class="source" href="canvas-018.html">
                  ./demo/canvas-018.js
                </a>
              
                
                <a class="source" href="canvas-019.html">
                  ./demo/canvas-019.js
                </a>
              
                
                <a class="source" href="canvas-019a.html">
                  ./demo/canvas-019a.js
                </a>
              
                
                <a class="source" href="canvas-020.html">
                  ./demo/canvas-020.js
                </a>
              
                
                <a class="source" href="canvas-021.html">
                  ./demo/canvas-021.js
                </a>
              
                
                <a class="source" href="canvas-022.html">
                  ./demo/canvas-022.js
                </a>
              
                
                <a class="source" href="canvas-023.html">
                  ./demo/canvas-023.js
                </a>
              
                
                <a class="source" href="canvas-024.html">
                  ./demo/canvas-024.js
                </a>
              
                
                <a class="source" href="canvas-025.html">
                  ./demo/canvas-025.js
                </a>
              
                
                <a class="source" href="canvas-026.html">
                  ./demo/canvas-026.js
                </a>
              
                
                <a class="source" href="canvas-027.html">
                  ./demo/canvas-027.js
                </a>
              
                
                <a class="source" href="canvas-028.html">
                  ./demo/canvas-028.js
                </a>
              
                
                <a class="source" href="canvas-029.html">
                  ./demo/canvas-029.js
                </a>
              
                
                <a class="source" href="canvas-030.html">
                  ./demo/canvas-030.js
                </a>
              
                
                <a class="source" href="canvas-031.html">
                  ./demo/canvas-031.js
                </a>
              
                
                <a class="source" href="canvas-032.html">
                  ./demo/canvas-032.js
                </a>
              
                
                <a class="source" href="canvas-033.html">
                  ./demo/canvas-033.js
                </a>
              
                
                <a class="source" href="canvas-034.html">
                  ./demo/canvas-034.js
                </a>
              
                
                <a class="source" href="canvas-035.html">
                  ./demo/canvas-035.js
                </a>
              
                
                <a class="source" href="canvas-036.html">
                  ./demo/canvas-036.js
                </a>
              
                
                <a class="source" href="canvas-037.html">
                  ./demo/canvas-037.js
                </a>
              
                
                <a class="source" href="canvas-038.html">
                  ./demo/canvas-038.js
                </a>
              
                
                <a class="source" href="canvas-039.html">
                  ./demo/canvas-039.js
                </a>
              
                
                <a class="source" href="canvas-040.html">
                  ./demo/canvas-040.js
                </a>
              
                
                <a class="source" href="canvas-041.html">
                  ./demo/canvas-041.js
                </a>
              
                
                <a class="source" href="canvas-042.html">
                  ./demo/canvas-042.js
                </a>
              
                
                <a class="source" href="canvas-043.html">
                  ./demo/canvas-043.js
                </a>
              
                
                <a class="source" href="canvas-044.html">
                  ./demo/canvas-044.js
                </a>
              
                
                <a class="source" href="canvas-045.html">
                  ./demo/canvas-045.js
                </a>
              
                
                <a class="source" href="canvas-046.html">
                  ./demo/canvas-046.js
                </a>
              
                
                <a class="source" href="canvas-047.html">
                  ./demo/canvas-047.js
                </a>
              
                
                <a class="source" href="canvas-048.html">
                  ./demo/canvas-048.js
                </a>
              
                
                <a class="source" href="canvas-049.html">
                  ./demo/canvas-049.js
                </a>
              
                
                <a class="source" href="canvas-050.html">
                  ./demo/canvas-050.js
                </a>
              
                
                <a class="source" href="canvas-051.html">
                  ./demo/canvas-051.js
                </a>
              
                
                <a class="source" href="canvas-052.html">
                  ./demo/canvas-052.js
                </a>
              
                
                <a class="source" href="canvas-053.html">
                  ./demo/canvas-053.js
                </a>
              
                
                <a class="source" href="canvas-054.html">
                  ./demo/canvas-054.js
                </a>
              
                
                <a class="source" href="canvas-055.html">
                  ./demo/canvas-055.js
                </a>
              
                
                <a class="source" href="canvas-056.html">
                  ./demo/canvas-056.js
                </a>
              
                
                <a class="source" href="canvas-057.html">
                  ./demo/canvas-057.js
                </a>
              
                
                <a class="source" href="canvas-058.html">
                  ./demo/canvas-058.js
                </a>
              
                
                <a class="source" href="canvas-059.html">
                  ./demo/canvas-059.js
                </a>
              
                
                <a class="source" href="canvas-060.html">
                  ./demo/canvas-060.js
                </a>
              
                
                <a class="source" href="canvas-061.html">
                  ./demo/canvas-061.js
                </a>
              
                
                <a class="source" href="canvas-062.html">
                  ./demo/canvas-062.js
                </a>
              
                
                <a class="source" href="canvas-063.html">
                  ./demo/canvas-063.js
                </a>
              
                
                <a class="source" href="canvas-064.html">
                  ./demo/canvas-064.js
                </a>
              
                
                <a class="source" href="canvas-065.html">
                  ./demo/canvas-065.js
                </a>
              
                
                <a class="source" href="delaunator-001.html">
                  ./demo/delaunator-001.js
                </a>
              
                
                <a class="source" href="delaunator-002.html">
                  ./demo/delaunator-002.js
                </a>
              
                
                <a class="source" href="dom-001.html">
                  ./demo/dom-001.js
                </a>
              
                
                <a class="source" href="dom-002.html">
                  ./demo/dom-002.js
                </a>
              
                
                <a class="source" href="dom-003.html">
                  ./demo/dom-003.js
                </a>
              
                
                <a class="source" href="dom-004.html">
                  ./demo/dom-004.js
                </a>
              
                
                <a class="source" href="dom-005.html">
                  ./demo/dom-005.js
                </a>
              
                
                <a class="source" href="dom-006.html">
                  ./demo/dom-006.js
                </a>
              
                
                <a class="source" href="dom-007.html">
                  ./demo/dom-007.js
                </a>
              
                
                <a class="source" href="dom-008.html">
                  ./demo/dom-008.js
                </a>
              
                
                <a class="source" href="dom-009.html">
                  ./demo/dom-009.js
                </a>
              
                
                <a class="source" href="dom-010.html">
                  ./demo/dom-010.js
                </a>
              
                
                <a class="source" href="dom-011.html">
                  ./demo/dom-011.js
                </a>
              
                
                <a class="source" href="dom-012.html">
                  ./demo/dom-012.js
                </a>
              
                
                <a class="source" href="dom-013.html">
                  ./demo/dom-013.js
                </a>
              
                
                <a class="source" href="dom-015.html">
                  ./demo/dom-015.js
                </a>
              
                
                <a class="source" href="dom-016.html">
                  ./demo/dom-016.js
                </a>
              
                
                <a class="source" href="dom-017.html">
                  ./demo/dom-017.js
                </a>
              
                
                <a class="source" href="dom-018.html">
                  ./demo/dom-018.js
                </a>
              
                
                <a class="source" href="dom-019.html">
                  ./demo/dom-019.js
                </a>
              
                
                <a class="source" href="dom-020.html">
                  ./demo/dom-020.js
                </a>
              
                
                <a class="source" href="dom-021.html">
                  ./demo/dom-021.js
                </a>
              
                
                <a class="source" href="filters-001.html">
                  ./demo/filters-001.js
                </a>
              
                
                <a class="source" href="filters-002.html">
                  ./demo/filters-002.js
                </a>
              
                
                <a class="source" href="filters-002a.html">
                  ./demo/filters-002a.js
                </a>
              
                
                <a class="source" href="filters-003.html">
                  ./demo/filters-003.js
                </a>
              
                
                <a class="source" href="filters-004.html">
                  ./demo/filters-004.js
                </a>
              
                
                <a class="source" href="filters-005.html">
                  ./demo/filters-005.js
                </a>
              
                
                <a class="source" href="filters-006.html">
                  ./demo/filters-006.js
                </a>
              
                
                <a class="source" href="filters-007.html">
                  ./demo/filters-007.js
                </a>
              
                
                <a class="source" href="filters-008.html">
                  ./demo/filters-008.js
                </a>
              
                
                <a class="source" href="filters-009.html">
                  ./demo/filters-009.js
                </a>
              
                
                <a class="source" href="filters-010.html">
                  ./demo/filters-010.js
                </a>
              
                
                <a class="source" href="filters-011.html">
                  ./demo/filters-011.js
                </a>
              
                
                <a class="source" href="filters-012.html">
                  ./demo/filters-012.js
                </a>
              
                
                <a class="source" href="filters-013.html">
                  ./demo/filters-013.js
                </a>
              
                
                <a class="source" href="filters-014.html">
                  ./demo/filters-014.js
                </a>
              
                
                <a class="source" href="filters-015.html">
                  ./demo/filters-015.js
                </a>
              
                
                <a class="source" href="filters-016.html">
                  ./demo/filters-016.js
                </a>
              
                
                <a class="source" href="filters-017.html">
                  ./demo/filters-017.js
                </a>
              
                
                <a class="source" href="filters-018.html">
                  ./demo/filters-018.js
                </a>
              
                
                <a class="source" href="filters-019.html">
                  ./demo/filters-019.js
                </a>
              
                
                <a class="source" href="filters-020.html">
                  ./demo/filters-020.js
                </a>
              
                
                <a class="source" href="filters-021.html">
                  ./demo/filters-021.js
                </a>
              
                
                <a class="source" href="filters-022.html">
                  ./demo/filters-022.js
                </a>
              
                
                <a class="source" href="filters-023.html">
                  ./demo/filters-023.js
                </a>
              
                
                <a class="source" href="filters-024.html">
                  ./demo/filters-024.js
                </a>
              
                
                <a class="source" href="filters-025.html">
                  ./demo/filters-025.js
                </a>
              
                
                <a class="source" href="filters-026.html">
                  ./demo/filters-026.js
                </a>
              
                
                <a class="source" href="filters-027.html">
                  ./demo/filters-027.js
                </a>
              
                
                <a class="source" href="filters-028.html">
                  ./demo/filters-028.js
                </a>
              
                
                <a class="source" href="filters-101.html">
                  ./demo/filters-101.js
                </a>
              
                
                <a class="source" href="filters-102.html">
                  ./demo/filters-102.js
                </a>
              
                
                <a class="source" href="filters-103.html">
                  ./demo/filters-103.js
                </a>
              
                
                <a class="source" href="filters-104.html">
                  ./demo/filters-104.js
                </a>
              
                
                <a class="source" href="filters-105.html">
                  ./demo/filters-105.js
                </a>
              
                
                <a class="source" href="filters-501.html">
                  ./demo/filters-501.js
                </a>
              
                
                <a class="source" href="filters-502.html">
                  ./demo/filters-502.js
                </a>
              
                
                <a class="source" href="filters-503.html">
                  ./demo/filters-503.js
                </a>
              
                
                <a class="source" href="filters-504.html">
                  ./demo/filters-504.js
                </a>
              
                
                <a class="source" href="filters-505.html">
                  ./demo/filters-505.js
                </a>
              
                
                <a class="source" href="mediapipe-001.html">
                  ./demo/mediapipe-001.js
                </a>
              
                
                <a class="source" href="mediapipe-002.html">
                  ./demo/mediapipe-002.js
                </a>
              
                
                <a class="source" href="mediapipe-003.html">
                  ./demo/mediapipe-003.js
                </a>
              
                
                <a class="source" href="modules-001.html">
                  ./demo/modules-001.js
                </a>
              
                
                <a class="source" href="modules-002.html">
                  ./demo/modules-002.js
                </a>
              
                
                <a class="source" href="modules-003.html">
                  ./demo/modules-003.js
                </a>
              
                
                <a class="source" href="modules-004.html">
                  ./demo/modules-004.js
                </a>
              
                
                <a class="source" href="modules-005.html">
                  ./demo/modules-005.js
                </a>
              
                
                <a class="source" href="modules-006.html">
                  ./demo/modules-006.js
                </a>
              
                
                <a class="source" href="packets-001.html">
                  ./demo/packets-001.js
                </a>
              
                
                <a class="source" href="packets-002.html">
                  ./demo/packets-002.js
                </a>
              
                
                <a class="source" href="particles-001.html">
                  ./demo/particles-001.js
                </a>
              
                
                <a class="source" href="particles-002.html">
                  ./demo/particles-002.js
                </a>
              
                
                <a class="source" href="particles-003.html">
                  ./demo/particles-003.js
                </a>
              
                
                <a class="source" href="particles-004.html">
                  ./demo/particles-004.js
                </a>
              
                
                <a class="source" href="particles-005.html">
                  ./demo/particles-005.js
                </a>
              
                
                <a class="source" href="particles-006.html">
                  ./demo/particles-006.js
                </a>
              
                
                <a class="source" href="particles-007.html">
                  ./demo/particles-007.js
                </a>
              
                
                <a class="source" href="particles-008.html">
                  ./demo/particles-008.js
                </a>
              
                
                <a class="source" href="particles-009.html">
                  ./demo/particles-009.js
                </a>
              
                
                <a class="source" href="particles-010.html">
                  ./demo/particles-010.js
                </a>
              
                
                <a class="source" href="particles-011.html">
                  ./demo/particles-011.js
                </a>
              
                
                <a class="source" href="particles-012.html">
                  ./demo/particles-012.js
                </a>
              
                
                <a class="source" href="particles-013.html">
                  ./demo/particles-013.js
                </a>
              
                
                <a class="source" href="particles-014.html">
                  ./demo/particles-014.js
                </a>
              
                
                <a class="source" href="particles-015.html">
                  ./demo/particles-015.js
                </a>
              
                
                <a class="source" href="particles-016.html">
                  ./demo/particles-016.js
                </a>
              
                
                <a class="source" href="rapier-001.html">
                  ./demo/rapier-001.js
                </a>
              
                
                <a class="source" href="snippets-001.html">
                  ./demo/snippets-001.js
                </a>
              
                
                <a class="source" href="snippets-002.html">
                  ./demo/snippets-002.js
                </a>
              
                
                <a class="source" href="snippets-003.html">
                  ./demo/snippets-003.js
                </a>
              
                
                <a class="source" href="snippets-004.html">
                  ./demo/snippets-004.js
                </a>
              
                
                <a class="source" href="snippets-005.html">
                  ./demo/snippets-005.js
                </a>
              
                
                <a class="source" href="snippets-006.html">
                  ./demo/snippets-006.js
                </a>
              
                
                <a class="source" href="tensorflow-001.html">
                  ./demo/tensorflow-001.js
                </a>
              
                
                <a class="source" href="tensorflow-002.html">
                  ./demo/tensorflow-002.js
                </a>
              
                
                <a class="source" href="utilities.html">
                  ./demo/utilities.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              <h1 id="demo-canvas-009">Demo Canvas 009</h1>
<p>Pattern styles; Entity web link anchors; Dynamic accessibility</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <p><a href="../../demo/canvas-009.html">Run code</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> {
    addListener,
    importDomImage,
    library <span class="hljs-keyword">as</span> L,
    makeBlock,
    makePattern,
    makeRender,
} <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../source/scrawl.js&#x27;</span>

<span class="hljs-keyword">import</span> { reportSpeed, killArtefactAndAnchor, killStyle } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./utilities.js&#x27;</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <h4 id="google-analytics">Google Analytics</h4>
<p>We load GA code in the normal way through markup in the dom-006.html file (lines 11-21), and get a handle on the <strong>ga</strong> object here</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> ga = <span class="hljs-variable language_">window</span>[<span class="hljs-variable language_">window</span>[<span class="hljs-string">&#x27;GoogleAnalyticsObject&#x27;</span>] || <span class="hljs-string">&#x27;ga&#x27;</span>];

<span class="hljs-keyword">let</span> myTracker;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <p>Create a new tracker to handle tween and ticker action/progress, and set some attributes on it.
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">ga</span>(<span class="hljs-string">&#x27;create&#x27;</span>, <span class="hljs-string">&#x27;UA-000000-0&#x27;</span>, <span class="hljs-string">&#x27;auto&#x27;</span>, <span class="hljs-string">&#x27;demoCanvasTracker&#x27;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              <p>We can then incorporate the tracker’s functionality in our various hook functions defined further down in this script
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">ga</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {

    <span class="hljs-keyword">const</span> ga = <span class="hljs-variable language_">window</span>[<span class="hljs-variable language_">window</span>[<span class="hljs-string">&#x27;GoogleAnalyticsObject&#x27;</span>] || <span class="hljs-string">&#x27;ga&#x27;</span>];</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <p>@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    myTracker = ga.<span class="hljs-title function_">getByName</span>(<span class="hljs-string">&#x27;demoCanvasTracker&#x27;</span>);
    myTracker.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;transport&#x27;</span>, <span class="hljs-string">&#x27;beacon&#x27;</span>);
    myTracker.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;campaignKeyword&#x27;</span>, <span class="hljs-string">&#x27;Scrawl-canvas demo&#x27;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              <p>Uncomment the next line to suppress tracker packets (so they don’t show up in the console)</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    myTracker.<span class="hljs-title function_">set</span>(<span class="hljs-string">&#x27;sendHitTask&#x27;</span>, <span class="hljs-literal">null</span>);
});</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <h4 id="scene-setup">Scene setup</h4>
<p>Get a handle to the Canvas wrapper</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> canvas = L.<span class="hljs-property">artefact</span>.<span class="hljs-property">mycanvas</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              <p>Namespacing boilerplate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> namespace = <span class="hljs-string">&#x27;demo&#x27;</span>;
<span class="hljs-keyword">const</span> <span class="hljs-title function_">name</span> = (<span class="hljs-params">n</span>) =&gt; <span class="hljs-string">`<span class="hljs-subst">${namespace}</span>-<span class="hljs-subst">${n}</span>`</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-10">&#x00a7;</a>
              </div>
              <p>Get images from DOM</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">importDomImage</span>(<span class="hljs-string">&#x27;.mypatterns&#x27;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-11">&#x00a7;</a>
              </div>
              <p>Create Pattern styles using imported images</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">makePattern</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;brick-pattern&#x27;</span>),
    <span class="hljs-attr">asset</span>: <span class="hljs-string">&#x27;brick&#x27;</span>,

}).<span class="hljs-title function_">clone</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;leaves-pattern&#x27;</span>),
    <span class="hljs-attr">asset</span>: <span class="hljs-string">&#x27;leaves&#x27;</span>,

});</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-12">&#x00a7;</a>
              </div>
              <p>Create Pattern styles dynamically</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">makePattern</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;water-pattern&#x27;</span>),
    <span class="hljs-attr">imageSource</span>: <span class="hljs-string">&#x27;img/water.png&#x27;</span>,

}).<span class="hljs-title function_">clone</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-pattern&#x27;</span>),
    <span class="hljs-attr">imageSource</span>: <span class="hljs-string">&#x27;img/marble.png&#x27;</span>,

});</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-13">&#x00a7;</a>
              </div>
              <p>Create a canvas-based Cell pattern</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>canvas.<span class="hljs-title function_">buildCell</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;cell-pattern&#x27;</span>),

    <span class="hljs-attr">width</span>: <span class="hljs-number">50</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">50</span>,

    <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;lightblue&#x27;</span>,

    <span class="hljs-attr">shown</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">useAsPattern</span>: <span class="hljs-literal">true</span>,
});

canvas.<span class="hljs-property">base</span>.<span class="hljs-title function_">set</span>({

    <span class="hljs-attr">compileOrder</span>: <span class="hljs-number">1</span>,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-14">&#x00a7;</a>
              </div>
              <p>Create a Block entity to display in the new Cell pattern</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">makeBlock</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;cell-pattern-block&#x27;</span>),
    <span class="hljs-attr">group</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;cell-pattern&#x27;</span>),

    <span class="hljs-attr">width</span>: <span class="hljs-number">40</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">40</span>,

    <span class="hljs-attr">startX</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">startY</span>: <span class="hljs-string">&#x27;center&#x27;</span>,

    <span class="hljs-attr">handleX</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">handleY</span>: <span class="hljs-string">&#x27;center&#x27;</span>,

    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;fill&#x27;</span>,

    <span class="hljs-attr">fillStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;water-pattern&#x27;</span>),

    <span class="hljs-attr">delta</span>: {
        <span class="hljs-attr">roll</span>: -<span class="hljs-number">0.3</span>
    },
});</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-15">&#x00a7;</a>
              </div>
              <p>Main canvas display - create Block entitys which will use the patterns defined above</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">makeBlock</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;water-in-leaves&#x27;</span>),
    <span class="hljs-attr">group</span>: canvas.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;baseGroup&#x27;</span>),

    <span class="hljs-attr">width</span>: <span class="hljs-string">&#x27;40%&#x27;</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-string">&#x27;40%&#x27;</span>,

    <span class="hljs-attr">startX</span>: <span class="hljs-string">&#x27;25%&#x27;</span>,
    <span class="hljs-attr">startY</span>: <span class="hljs-string">&#x27;25%&#x27;</span>,

    <span class="hljs-attr">handleX</span>: <span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">handleY</span>: <span class="hljs-string">&#x27;center&#x27;</span>,

    <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">20</span>,
    <span class="hljs-attr">lineJoin</span>: <span class="hljs-string">&#x27;round&#x27;</span>,

    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;fillThenDraw&#x27;</span>,

    <span class="hljs-attr">fillStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;cell-pattern&#x27;</span>),
    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;leaves-pattern&#x27;</span>),</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-16">&#x00a7;</a>
              </div>
              <p>To be aware: adding shadows to entitys using patterns for their fill and/or stroke styles can lead to a serious decrease in frame rate</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">shadowOffsetX</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">shadowOffsetY</span>: <span class="hljs-number">5</span>,
    <span class="hljs-attr">shadowBlur</span>: <span class="hljs-number">3</span>,
    <span class="hljs-attr">shadowColor</span>: <span class="hljs-string">&#x27;black&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-17">&#x00a7;</a>
              </div>
              <p>Include an anchor (href) link which can be tied to user interaction (in this case, mouse clicks on the canvas element) through events defined further down in this script.</p>

            </div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-18">&#x00a7;</a>
              </div>
              <p>ALWAYS include a description! We will be using the anchor’s description string later as part of our asistive technology solution for this demo.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">anchor</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;wikipedia-water-link&#x27;</span>,
        <span class="hljs-attr">href</span>: <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Water&#x27;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;Link to the Wikipedia article on water (opens in new tab)&#x27;</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-19">&#x00a7;</a>
              </div>
              <p>The clickAction attribute captures both Scrawl-canvas trigger clicks and also non-mouse ‘clicks’ on the anchor element hidden at the top of the web page, for example using the keyboard (tab, return) or other assistive technology.</p>

            </div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-20">&#x00a7;</a>
              </div>
              <p>This function gets invoked by an event listener added to the &lt;a&gt; link element in the DOM. <code>this</code> refers to the element, not the SC anchor wrapper or the Block entity object. The <code>myTracker</code> object is not recognised by the link element (the object’s scope is local to this module), so instead we fire the <code>ga</code> analytics object directly as that lives in the global space - see line 19 above.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-attr">clickAction</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-21">&#x00a7;</a>
              </div>
              <p>@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-title function_">ga</span>(<span class="hljs-string">&#x27;demoCanvasTracker.send&#x27;</span>, <span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-string">&#x27;Outbound link&#x27;</span>, <span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">href</span>);
        },
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-22">&#x00a7;</a>
              </div>
              <p>Accessibility functionality to be used by event functions defined below in response to user activity - this time moving the mouse cursor across the &lt;canvas&gt; element. Note that ‘this’ refers to the entity object, meaning the functions can be safely cloned into other entitys.</p>
<ul>
<li>Scrawl-canvas TypeScript definitions don’t (at this time) extend as far as identifying types within a function set up as part of an SC object instantiation; be prepared to include TS error suppression markup wherever justified (for instance, when using <code>this</code>).</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-23">&#x00a7;</a>
              </div>
              <p>Update the block entity’s visual display
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>({
            <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">30</span>,
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-24">&#x00a7;</a>
              </div>
              <p>This is where we update the accessibility information tied to the canvas element. We’re using the anchor attribute object’s description value to supply details of what actions will happen when the user clicks on the canvas while the mouse is over the block entity.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        canvas.<span class="hljs-title function_">set</span>({</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-25">&#x00a7;</a>
              </div>
              <p>@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-attr">title</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.get(<span class="hljs-string">&#x27;name&#x27;</span>)}</span> tile`</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-26">&#x00a7;</a>
              </div>
              <p>@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-attr">label</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;anchorDescription&#x27;</span>),
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-27">&#x00a7;</a>
              </div>
              <p>Track the action in Google Analytics
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        myTracker.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-string">&#x27;Canvas Entity&#x27;</span>, <span class="hljs-string">&#x27;hover start&#x27;</span>, <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>`</span>);
    },

    <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-28">&#x00a7;</a>
              </div>
              <p>Reset the block entity’s visual display
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>({
            <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">20</span>,
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-29">&#x00a7;</a>
              </div>
              <p>Reset the accessibility information tied to the canvas element.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        canvas.<span class="hljs-title function_">set</span>({
            <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;&#x27;</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">`<span class="hljs-subst">${canvas.name}</span> canvas element`</span>,
        });</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-30">&#x00a7;</a>
              </div>
              <p>Track the action in Google Analytics
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        myTracker.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-string">&#x27;Canvas Entity&#x27;</span>, <span class="hljs-string">&#x27;hover end&#x27;</span>, <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>`</span>);
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-31">&#x00a7;</a>
              </div>
              <p>Used by the Scrawl-canvas click event, below. This hit report will only be generated from user interaction on the canvas element, thus will supply different numbers to the anchor’s clickAction function above - a useful way to help calculate the volume of users bypassing the canvas and opening the Wikipedia page using the keyboard or assistive technology</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">onUp</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-32">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-32">&#x00a7;</a>
              </div>
              <p>Track the action in Google Analytics
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        myTracker.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-string">&#x27;Canvas Entity Link&#x27;</span>, <span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.get(<span class="hljs-string">&#x27;anchorHref&#x27;</span>)}</span>`</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-33">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-33">&#x00a7;</a>
              </div>
              <p>Trigger the click event on the anchor element we added to the DOM
@ts-expect-error</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clickAnchor</span>();
    },

}).<span class="hljs-title function_">clone</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;leaves-in-brick&#x27;</span>),

    <span class="hljs-attr">startX</span>: <span class="hljs-string">&#x27;75%&#x27;</span>,

    <span class="hljs-attr">fillStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;leaves-pattern&#x27;</span>),
    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;brick-pattern&#x27;</span>),

    <span class="hljs-attr">anchor</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;wikipedia-leaf-link&#x27;</span>,
        <span class="hljs-attr">href</span>: <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Leaf&#x27;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;Link to the Wikipedia article on leaves (opens in new tab)&#x27;</span>,
    },

}).<span class="hljs-title function_">clone</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;brick-in-marble&#x27;</span>),

    <span class="hljs-attr">startY</span>: <span class="hljs-string">&#x27;75%&#x27;</span>,

    <span class="hljs-attr">fillStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;brick-pattern&#x27;</span>),
    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-pattern&#x27;</span>),

    <span class="hljs-attr">anchor</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;wikipedia-brick-link&#x27;</span>,
        <span class="hljs-attr">href</span>: <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Brick&#x27;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;Link to the Wikipedia article on bricks (opens in new tab)&#x27;</span>,
    },

}).<span class="hljs-title function_">clone</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-in-water&#x27;</span>),

    <span class="hljs-attr">startX</span>: <span class="hljs-string">&#x27;25%&#x27;</span>,

    <span class="hljs-attr">fillStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-pattern&#x27;</span>),
    <span class="hljs-attr">strokeStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;water-pattern&#x27;</span>),

    <span class="hljs-attr">anchor</span>: {
        <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;wikipedia-marble-link&#x27;</span>,
        <span class="hljs-attr">href</span>: <span class="hljs-string">&#x27;https://en.wikipedia.org/wiki/Marble&#x27;</span>,
        <span class="hljs-attr">description</span>: <span class="hljs-string">&#x27;Link to the Wikipedia article on marble (opens in new tab)&#x27;</span>,
    },
});</pre></div></div>
            
        </li>
        
        
        <li id="section-34">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-34">&#x00a7;</a>
              </div>
              <p>Demonstrate zoned actions on a canvas element as a result of user interaction</p>
<ul>
<li>Available cascadeEventAction arguments are: ‘enter’, ‘leave’, ‘down’, or ‘up’</li>
<li>Also, the ‘move’ argument will trigger enter and leave actions on the entitys, as appropriate to each</li>
</ul>
<p>In this case, moving the mouse cursor over a block entity will increase its line width, as specified in the <strong>onEnter</strong> and <strong>onLeave</strong> functions in the block factories above.</p>
<p>Additionally, it will update the &lt;canvas&gt; element’s title attribute (for tool tips) and its ARIA label value (for accessibility)</p>
<p>The cascadeEventAction function returns an Array of name Strings for the entitys at the current mouse cursor coordinates</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> interactionResults = <span class="hljs-string">&#x27;&#x27;</span>;
<span class="hljs-keyword">const</span> interactions = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

    <span class="hljs-keyword">if</span> (canvas.<span class="hljs-property">here</span>.<span class="hljs-property">active</span>) interactionResults = canvas.<span class="hljs-title function_">cascadeEventAction</span>(<span class="hljs-string">&#x27;move&#x27;</span>);
    <span class="hljs-keyword">else</span> interactionResults = <span class="hljs-string">&#x27;&#x27;</span>;
};
<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;move&#x27;</span>, interactions, canvas.<span class="hljs-property">domElement</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-35">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-35">&#x00a7;</a>
              </div>
              <p>To capture other user interaction with the &lt;a&gt; DOM elements which, while being visually hidden, are still accessible - for instance when a user keyboard-tabs through the web page</p>
<p>In this case, clicking on one of the tiles will open a related Wikipedia page in a new browser tab - as defined in the  <strong>onUp</strong> function in the block factories above</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> mylinks = <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {

    <span class="hljs-keyword">if</span> (canvas.<span class="hljs-property">here</span>.<span class="hljs-property">active</span>) canvas.<span class="hljs-title function_">cascadeEventAction</span>(<span class="hljs-string">&#x27;up&#x27;</span>);
};
<span class="hljs-title function_">addListener</span>(<span class="hljs-string">&#x27;up&#x27;</span>, mylinks, canvas.<span class="hljs-property">domElement</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-36">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-36">&#x00a7;</a>
              </div>
              <h4 id="scene-animation">Scene animation</h4>
<p>Function to display frames-per-second data, and other information relevant to the demo</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> report = <span class="hljs-title function_">reportSpeed</span>(<span class="hljs-string">&#x27;#reportmessage&#x27;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
    <span class="hljs-keyword">return</span> <span class="hljs-string">`Hits: <span class="hljs-subst">${interactionResults}</span>`</span>;
});</pre></div></div>
            
        </li>
        
        
        <li id="section-37">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-37">&#x00a7;</a>
              </div>
              <p>Create the Display cycle animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">makeRender</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;animation&#x27;</span>),
    <span class="hljs-attr">target</span>: canvas,
    <span class="hljs-attr">afterShow</span>: report,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-38">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-38">&#x00a7;</a>
              </div>
              <h4 id="development-and-testing">Development and testing</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(L);

<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Performing tests ...&#x27;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-39">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-39">&#x00a7;</a>
              </div>
              <p>We use the <strong>canvas</strong> and <strong>myTracker</strong> variables in our blocks’ onEnter, onLeave and onUp functions. While this works fine for the blocks created in the scope of this module file’s code, it will fail when we kill and resurrect a block - in the resurrected block the canvas and myTracker variables will be ‘undefined’. So we need to reset the block’s ‘on…’ functions (in this module file’s code) after the block has resurrected</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-title function_">killArtefactAndAnchor</span>(canvas, <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;brick-in-marble&#x27;</span>), <span class="hljs-string">&#x27;wikipedia-brick-link&#x27;</span>, <span class="hljs-number">2000</span>, <span class="hljs-function">() =&gt;</span> {

    L.<span class="hljs-property">artefact</span>[<span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;brick-in-marble&#x27;</span>)].<span class="hljs-title function_">set</span>({

        <span class="hljs-attr">onEnter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>({ <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">30</span> });
            canvas.<span class="hljs-title function_">set</span>({
                <span class="hljs-attr">title</span>: <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> tile`</span>,
                <span class="hljs-attr">label</span>: <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;anchorDescription&#x27;</span>),
            });
            myTracker.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-string">&#x27;Canvas Entity&#x27;</span>, <span class="hljs-string">&#x27;hover start&#x27;</span>, <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>`</span>);
        },
        <span class="hljs-attr">onLeave</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">set</span>({ <span class="hljs-attr">lineWidth</span>: <span class="hljs-number">20</span> });
            canvas.<span class="hljs-title function_">set</span>({
                <span class="hljs-attr">title</span>: <span class="hljs-string">&#x27;&#x27;</span>,
                <span class="hljs-attr">label</span>: <span class="hljs-string">`<span class="hljs-subst">${canvas.name}</span> canvas element`</span>,
            });
            myTracker.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-string">&#x27;Canvas Entity&#x27;</span>, <span class="hljs-string">&#x27;hover end&#x27;</span>, <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span>`</span>);
        },
        <span class="hljs-attr">onUp</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {
            myTracker.<span class="hljs-title function_">send</span>(<span class="hljs-string">&#x27;event&#x27;</span>, <span class="hljs-string">&#x27;Canvas Entity Link&#x27;</span>, <span class="hljs-string">&#x27;click&#x27;</span>, <span class="hljs-string">`<span class="hljs-subst">${<span class="hljs-variable language_">this</span>.name}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.type}</span> <span class="hljs-subst">${<span class="hljs-variable language_">this</span>.anchor.href}</span>`</span>);
            <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clickAnchor</span>();
        },
    });
});

<span class="hljs-title function_">killStyle</span>(canvas, <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-pattern&#x27;</span>), <span class="hljs-number">3000</span>, <span class="hljs-function">() =&gt;</span> {</pre></div></div>
            
        </li>
        
        
        <li id="section-40">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-40">&#x00a7;</a>
              </div>
              <p>Reset entitys, whose fill/strokeStyles will have been set to default values when the Pattern died</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    L.<span class="hljs-property">entity</span>[<span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;brick-in-marble&#x27;</span>)].<span class="hljs-title function_">set</span>({
        <span class="hljs-attr">strokeStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-pattern&#x27;</span>),
    });

    L.<span class="hljs-property">entity</span>[<span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-in-water&#x27;</span>)].<span class="hljs-title function_">set</span>({
        <span class="hljs-attr">fillStyle</span>: <span class="hljs-title function_">name</span>(<span class="hljs-string">&#x27;marble-pattern&#x27;</span>),
    });
});</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
