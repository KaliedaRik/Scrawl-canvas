<!DOCTYPE html>

<html>
<head>
  <title>Demo Canvas 052</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="../docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="canvas-001.html">
                  ./demo/canvas-001.js
                </a>
              
                
                <a class="source" href="canvas-002.html">
                  ./demo/canvas-002.js
                </a>
              
                
                <a class="source" href="canvas-003.html">
                  ./demo/canvas-003.js
                </a>
              
                
                <a class="source" href="canvas-004.html">
                  ./demo/canvas-004.js
                </a>
              
                
                <a class="source" href="canvas-005.html">
                  ./demo/canvas-005.js
                </a>
              
                
                <a class="source" href="canvas-006.html">
                  ./demo/canvas-006.js
                </a>
              
                
                <a class="source" href="canvas-007.html">
                  ./demo/canvas-007.js
                </a>
              
                
                <a class="source" href="canvas-008.html">
                  ./demo/canvas-008.js
                </a>
              
                
                <a class="source" href="canvas-009.html">
                  ./demo/canvas-009.js
                </a>
              
                
                <a class="source" href="canvas-010.html">
                  ./demo/canvas-010.js
                </a>
              
                
                <a class="source" href="canvas-011.html">
                  ./demo/canvas-011.js
                </a>
              
                
                <a class="source" href="canvas-012.html">
                  ./demo/canvas-012.js
                </a>
              
                
                <a class="source" href="canvas-013.html">
                  ./demo/canvas-013.js
                </a>
              
                
                <a class="source" href="canvas-014.html">
                  ./demo/canvas-014.js
                </a>
              
                
                <a class="source" href="canvas-015.html">
                  ./demo/canvas-015.js
                </a>
              
                
                <a class="source" href="canvas-015a.html">
                  ./demo/canvas-015a.js
                </a>
              
                
                <a class="source" href="canvas-016.html">
                  ./demo/canvas-016.js
                </a>
              
                
                <a class="source" href="canvas-017.html">
                  ./demo/canvas-017.js
                </a>
              
                
                <a class="source" href="canvas-018.html">
                  ./demo/canvas-018.js
                </a>
              
                
                <a class="source" href="canvas-019.html">
                  ./demo/canvas-019.js
                </a>
              
                
                <a class="source" href="canvas-019a.html">
                  ./demo/canvas-019a.js
                </a>
              
                
                <a class="source" href="canvas-020.html">
                  ./demo/canvas-020.js
                </a>
              
                
                <a class="source" href="canvas-021.html">
                  ./demo/canvas-021.js
                </a>
              
                
                <a class="source" href="canvas-022.html">
                  ./demo/canvas-022.js
                </a>
              
                
                <a class="source" href="canvas-023.html">
                  ./demo/canvas-023.js
                </a>
              
                
                <a class="source" href="canvas-024.html">
                  ./demo/canvas-024.js
                </a>
              
                
                <a class="source" href="canvas-025.html">
                  ./demo/canvas-025.js
                </a>
              
                
                <a class="source" href="canvas-026.html">
                  ./demo/canvas-026.js
                </a>
              
                
                <a class="source" href="canvas-027.html">
                  ./demo/canvas-027.js
                </a>
              
                
                <a class="source" href="canvas-028.html">
                  ./demo/canvas-028.js
                </a>
              
                
                <a class="source" href="canvas-029.html">
                  ./demo/canvas-029.js
                </a>
              
                
                <a class="source" href="canvas-030.html">
                  ./demo/canvas-030.js
                </a>
              
                
                <a class="source" href="canvas-031.html">
                  ./demo/canvas-031.js
                </a>
              
                
                <a class="source" href="canvas-032.html">
                  ./demo/canvas-032.js
                </a>
              
                
                <a class="source" href="canvas-033.html">
                  ./demo/canvas-033.js
                </a>
              
                
                <a class="source" href="canvas-034.html">
                  ./demo/canvas-034.js
                </a>
              
                
                <a class="source" href="canvas-035.html">
                  ./demo/canvas-035.js
                </a>
              
                
                <a class="source" href="canvas-036.html">
                  ./demo/canvas-036.js
                </a>
              
                
                <a class="source" href="canvas-037.html">
                  ./demo/canvas-037.js
                </a>
              
                
                <a class="source" href="canvas-038.html">
                  ./demo/canvas-038.js
                </a>
              
                
                <a class="source" href="canvas-039.html">
                  ./demo/canvas-039.js
                </a>
              
                
                <a class="source" href="canvas-040.html">
                  ./demo/canvas-040.js
                </a>
              
                
                <a class="source" href="canvas-041.html">
                  ./demo/canvas-041.js
                </a>
              
                
                <a class="source" href="canvas-042.html">
                  ./demo/canvas-042.js
                </a>
              
                
                <a class="source" href="canvas-043.html">
                  ./demo/canvas-043.js
                </a>
              
                
                <a class="source" href="canvas-044.html">
                  ./demo/canvas-044.js
                </a>
              
                
                <a class="source" href="canvas-045.html">
                  ./demo/canvas-045.js
                </a>
              
                
                <a class="source" href="canvas-046.html">
                  ./demo/canvas-046.js
                </a>
              
                
                <a class="source" href="canvas-047.html">
                  ./demo/canvas-047.js
                </a>
              
                
                <a class="source" href="canvas-048.html">
                  ./demo/canvas-048.js
                </a>
              
                
                <a class="source" href="canvas-049.html">
                  ./demo/canvas-049.js
                </a>
              
                
                <a class="source" href="canvas-050.html">
                  ./demo/canvas-050.js
                </a>
              
                
                <a class="source" href="canvas-051.html">
                  ./demo/canvas-051.js
                </a>
              
                
                <a class="source" href="canvas-052.html">
                  ./demo/canvas-052.js
                </a>
              
                
                <a class="source" href="canvas-053.html">
                  ./demo/canvas-053.js
                </a>
              
                
                <a class="source" href="canvas-054.html">
                  ./demo/canvas-054.js
                </a>
              
                
                <a class="source" href="canvas-055.html">
                  ./demo/canvas-055.js
                </a>
              
                
                <a class="source" href="canvas-056.html">
                  ./demo/canvas-056.js
                </a>
              
                
                <a class="source" href="canvas-057.html">
                  ./demo/canvas-057.js
                </a>
              
                
                <a class="source" href="core-001.html">
                  ./demo/core-001.js
                </a>
              
                
                <a class="source" href="delaunator-001.html">
                  ./demo/delaunator-001.js
                </a>
              
                
                <a class="source" href="delaunator-002.html">
                  ./demo/delaunator-002.js
                </a>
              
                
                <a class="source" href="dom-001.html">
                  ./demo/dom-001.js
                </a>
              
                
                <a class="source" href="dom-002.html">
                  ./demo/dom-002.js
                </a>
              
                
                <a class="source" href="dom-003.html">
                  ./demo/dom-003.js
                </a>
              
                
                <a class="source" href="dom-004.html">
                  ./demo/dom-004.js
                </a>
              
                
                <a class="source" href="dom-005.html">
                  ./demo/dom-005.js
                </a>
              
                
                <a class="source" href="dom-006.html">
                  ./demo/dom-006.js
                </a>
              
                
                <a class="source" href="dom-007.html">
                  ./demo/dom-007.js
                </a>
              
                
                <a class="source" href="dom-008.html">
                  ./demo/dom-008.js
                </a>
              
                
                <a class="source" href="dom-009.html">
                  ./demo/dom-009.js
                </a>
              
                
                <a class="source" href="dom-010.html">
                  ./demo/dom-010.js
                </a>
              
                
                <a class="source" href="dom-011.html">
                  ./demo/dom-011.js
                </a>
              
                
                <a class="source" href="dom-012.html">
                  ./demo/dom-012.js
                </a>
              
                
                <a class="source" href="dom-013.html">
                  ./demo/dom-013.js
                </a>
              
                
                <a class="source" href="dom-015.html">
                  ./demo/dom-015.js
                </a>
              
                
                <a class="source" href="dom-016.html">
                  ./demo/dom-016.js
                </a>
              
                
                <a class="source" href="filters-001.html">
                  ./demo/filters-001.js
                </a>
              
                
                <a class="source" href="filters-002.html">
                  ./demo/filters-002.js
                </a>
              
                
                <a class="source" href="filters-002a.html">
                  ./demo/filters-002a.js
                </a>
              
                
                <a class="source" href="filters-003.html">
                  ./demo/filters-003.js
                </a>
              
                
                <a class="source" href="filters-004.html">
                  ./demo/filters-004.js
                </a>
              
                
                <a class="source" href="filters-005.html">
                  ./demo/filters-005.js
                </a>
              
                
                <a class="source" href="filters-006.html">
                  ./demo/filters-006.js
                </a>
              
                
                <a class="source" href="filters-007.html">
                  ./demo/filters-007.js
                </a>
              
                
                <a class="source" href="filters-008.html">
                  ./demo/filters-008.js
                </a>
              
                
                <a class="source" href="filters-009.html">
                  ./demo/filters-009.js
                </a>
              
                
                <a class="source" href="filters-010.html">
                  ./demo/filters-010.js
                </a>
              
                
                <a class="source" href="filters-011.html">
                  ./demo/filters-011.js
                </a>
              
                
                <a class="source" href="filters-012.html">
                  ./demo/filters-012.js
                </a>
              
                
                <a class="source" href="filters-013.html">
                  ./demo/filters-013.js
                </a>
              
                
                <a class="source" href="filters-014.html">
                  ./demo/filters-014.js
                </a>
              
                
                <a class="source" href="filters-015.html">
                  ./demo/filters-015.js
                </a>
              
                
                <a class="source" href="filters-016.html">
                  ./demo/filters-016.js
                </a>
              
                
                <a class="source" href="filters-017.html">
                  ./demo/filters-017.js
                </a>
              
                
                <a class="source" href="filters-018.html">
                  ./demo/filters-018.js
                </a>
              
                
                <a class="source" href="filters-019.html">
                  ./demo/filters-019.js
                </a>
              
                
                <a class="source" href="filters-020.html">
                  ./demo/filters-020.js
                </a>
              
                
                <a class="source" href="filters-021.html">
                  ./demo/filters-021.js
                </a>
              
                
                <a class="source" href="filters-022.html">
                  ./demo/filters-022.js
                </a>
              
                
                <a class="source" href="filters-023.html">
                  ./demo/filters-023.js
                </a>
              
                
                <a class="source" href="filters-024.html">
                  ./demo/filters-024.js
                </a>
              
                
                <a class="source" href="filters-025.html">
                  ./demo/filters-025.js
                </a>
              
                
                <a class="source" href="filters-026.html">
                  ./demo/filters-026.js
                </a>
              
                
                <a class="source" href="filters-501.html">
                  ./demo/filters-501.js
                </a>
              
                
                <a class="source" href="filters-502.html">
                  ./demo/filters-502.js
                </a>
              
                
                <a class="source" href="filters-503.html">
                  ./demo/filters-503.js
                </a>
              
                
                <a class="source" href="filters-504.html">
                  ./demo/filters-504.js
                </a>
              
                
                <a class="source" href="filters-505.html">
                  ./demo/filters-505.js
                </a>
              
                
                <a class="source" href="mediapipe-001.html">
                  ./demo/mediapipe-001.js
                </a>
              
                
                <a class="source" href="mediapipe-002.html">
                  ./demo/mediapipe-002.js
                </a>
              
                
                <a class="source" href="mediapipe-003.html">
                  ./demo/mediapipe-003.js
                </a>
              
                
                <a class="source" href="modules-001.html">
                  ./demo/modules-001.js
                </a>
              
                
                <a class="source" href="modules-002.html">
                  ./demo/modules-002.js
                </a>
              
                
                <a class="source" href="modules-003.html">
                  ./demo/modules-003.js
                </a>
              
                
                <a class="source" href="packets-001.html">
                  ./demo/packets-001.js
                </a>
              
                
                <a class="source" href="packets-002.html">
                  ./demo/packets-002.js
                </a>
              
                
                <a class="source" href="particles-001.html">
                  ./demo/particles-001.js
                </a>
              
                
                <a class="source" href="particles-002.html">
                  ./demo/particles-002.js
                </a>
              
                
                <a class="source" href="particles-003.html">
                  ./demo/particles-003.js
                </a>
              
                
                <a class="source" href="particles-004.html">
                  ./demo/particles-004.js
                </a>
              
                
                <a class="source" href="particles-005.html">
                  ./demo/particles-005.js
                </a>
              
                
                <a class="source" href="particles-006.html">
                  ./demo/particles-006.js
                </a>
              
                
                <a class="source" href="particles-007.html">
                  ./demo/particles-007.js
                </a>
              
                
                <a class="source" href="particles-008.html">
                  ./demo/particles-008.js
                </a>
              
                
                <a class="source" href="particles-009.html">
                  ./demo/particles-009.js
                </a>
              
                
                <a class="source" href="particles-010.html">
                  ./demo/particles-010.js
                </a>
              
                
                <a class="source" href="particles-011.html">
                  ./demo/particles-011.js
                </a>
              
                
                <a class="source" href="particles-012.html">
                  ./demo/particles-012.js
                </a>
              
                
                <a class="source" href="particles-013.html">
                  ./demo/particles-013.js
                </a>
              
                
                <a class="source" href="particles-014.html">
                  ./demo/particles-014.js
                </a>
              
                
                <a class="source" href="particles-015.html">
                  ./demo/particles-015.js
                </a>
              
                
                <a class="source" href="particles-016.html">
                  ./demo/particles-016.js
                </a>
              
                
                <a class="source" href="rapier-001.html">
                  ./demo/rapier-001.js
                </a>
              
                
                <a class="source" href="snippets-001.html">
                  ./demo/snippets-001.js
                </a>
              
                
                <a class="source" href="snippets-002.html">
                  ./demo/snippets-002.js
                </a>
              
                
                <a class="source" href="snippets-003.html">
                  ./demo/snippets-003.js
                </a>
              
                
                <a class="source" href="snippets-004.html">
                  ./demo/snippets-004.js
                </a>
              
                
                <a class="source" href="snippets-005.html">
                  ./demo/snippets-005.js
                </a>
              
                
                <a class="source" href="temp-000.html">
                  ./demo/temp-000.js
                </a>
              
                
                <a class="source" href="temp-001.html">
                  ./demo/temp-001.js
                </a>
              
                
                <a class="source" href="temp-002.html">
                  ./demo/temp-002.js
                </a>
              
                
                <a class="source" href="temp-003.html">
                  ./demo/temp-003.js
                </a>
              
                
                <a class="source" href="temp-004.html">
                  ./demo/temp-004.js
                </a>
              
                
                <a class="source" href="temp-005.html">
                  ./demo/temp-005.js
                </a>
              
                
                <a class="source" href="temp-006.html">
                  ./demo/temp-006.js
                </a>
              
                
                <a class="source" href="temp-007.html">
                  ./demo/temp-007.js
                </a>
              
                
                <a class="source" href="temp-008.html">
                  ./demo/temp-008.js
                </a>
              
                
                <a class="source" href="temp-009.html">
                  ./demo/temp-009.js
                </a>
              
                
                <a class="source" href="temp-010.html">
                  ./demo/temp-010.js
                </a>
              
                
                <a class="source" href="temp-011.html">
                  ./demo/temp-011.js
                </a>
              
                
                <a class="source" href="temp-012.html">
                  ./demo/temp-012.js
                </a>
              
                
                <a class="source" href="temp-013.html">
                  ./demo/temp-013.js
                </a>
              
                
                <a class="source" href="temp-014.html">
                  ./demo/temp-014.js
                </a>
              
                
                <a class="source" href="temp-015.html">
                  ./demo/temp-015.js
                </a>
              
                
                <a class="source" href="temp-016.html">
                  ./demo/temp-016.js
                </a>
              
                
                <a class="source" href="temp-017.html">
                  ./demo/temp-017.js
                </a>
              
                
                <a class="source" href="temp-018.html">
                  ./demo/temp-018.js
                </a>
              
                
                <a class="source" href="temp-018a.html">
                  ./demo/temp-018a.js
                </a>
              
                
                <a class="source" href="temp-019.html">
                  ./demo/temp-019.js
                </a>
              
                
                <a class="source" href="temp-020.html">
                  ./demo/temp-020.js
                </a>
              
                
                <a class="source" href="temp-021.html">
                  ./demo/temp-021.js
                </a>
              
                
                <a class="source" href="temp-022.html">
                  ./demo/temp-022.js
                </a>
              
                
                <a class="source" href="temp-023.html">
                  ./demo/temp-023.js
                </a>
              
                
                <a class="source" href="temp-024.html">
                  ./demo/temp-024.js
                </a>
              
                
                <a class="source" href="temp-025.html">
                  ./demo/temp-025.js
                </a>
              
                
                <a class="source" href="temp-026.html">
                  ./demo/temp-026.js
                </a>
              
                
                <a class="source" href="temp-027.html">
                  ./demo/temp-027.js
                </a>
              
                
                <a class="source" href="temp-028.html">
                  ./demo/temp-028.js
                </a>
              
                
                <a class="source" href="temp-029.html">
                  ./demo/temp-029.js
                </a>
              
                
                <a class="source" href="temp-030.html">
                  ./demo/temp-030.js
                </a>
              
                
                <a class="source" href="temp-100.html">
                  ./demo/temp-100.js
                </a>
              
                
                <a class="source" href="temp-101.html">
                  ./demo/temp-101.js
                </a>
              
                
                <a class="source" href="temp-102.html">
                  ./demo/temp-102.js
                </a>
              
                
                <a class="source" href="temp-103.html">
                  ./demo/temp-103.js
                </a>
              
                
                <a class="source" href="temp-104.html">
                  ./demo/temp-104.js
                </a>
              
                
                <a class="source" href="temp-inkscapeSvgFilters.html">
                  ./demo/temp-inkscapeSvgFilters.js
                </a>
              
                
                <a class="source" href="tensorflow-001.html">
                  ./demo/tensorflow-001.js
                </a>
              
                
                <a class="source" href="tensorflow-002.html">
                  ./demo/tensorflow-002.js
                </a>
              
                
                <a class="source" href="utilities.html">
                  ./demo/utilities.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-1">&#x00a7;</a>
              </div>
              <h1 id="demo-canvas-052">Demo Canvas 052</h1>
<p>Create and use a RawAsset object to modify an image asset</p>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-2">&#x00a7;</a>
              </div>
              <p><a href="../../demo/canvas-052.html">Run code</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">import</span> scrawl <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../source/scrawl.js&#x27;</span>

<span class="hljs-keyword">import</span> { reportSpeed } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./utilities.js&#x27;</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-3">&#x00a7;</a>
              </div>
              <p>Get Scrawl-canvas to recognise and act on device pixel ratios greater than 1</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>scrawl.<span class="hljs-title function_">setIgnorePixelRatio</span>(<span class="hljs-literal">false</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-4">&#x00a7;</a>
              </div>
              <h4 id="scene-setup">Scene setup</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> canvas = scrawl.<span class="hljs-property">library</span>.<span class="hljs-property">artefact</span>.<span class="hljs-property">mycanvas</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-5">&#x00a7;</a>
              </div>
              <p>Magic numbers</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> dimension = <span class="hljs-number">600</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-6">&#x00a7;</a>
              </div>
              <p>Make the canvas responsive</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>canvas.<span class="hljs-title function_">set</span>({
    <span class="hljs-attr">fit</span>: <span class="hljs-string">&#x27;cover&#x27;</span>,
    <span class="hljs-attr">checkForResize</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">ignoreCanvasCssDimensions</span>: <span class="hljs-literal">true</span>,
}).<span class="hljs-title function_">setBase</span>({
    <span class="hljs-attr">dimensions</span>: [dimension, dimension],
});</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-7">&#x00a7;</a>
              </div>
              <p>Import image from DOM, and create Picture entity using it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>scrawl.<span class="hljs-title function_">importDomImage</span>(<span class="hljs-string">&#x27;.flowers&#x27;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-8">&#x00a7;</a>
              </div>
              <p>We need a background image to act as the template on which we will draw</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> backgroundImage = scrawl.<span class="hljs-title function_">makePicture</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;background&#x27;</span>,
    <span class="hljs-attr">asset</span>: <span class="hljs-string">&#x27;iris&#x27;</span>,
    <span class="hljs-attr">dimensions</span>: [dimension, dimension],
    <span class="hljs-attr">copyDimensions</span>: [<span class="hljs-string">&#x27;100%&#x27;</span>, <span class="hljs-string">&#x27;100%&#x27;</span>],
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;none&#x27;</span>,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-9">&#x00a7;</a>
              </div>
              <p>We will use Perlin noise to determine brush stroke length and direction</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> noiseAsset = scrawl.<span class="hljs-title function_">makeNoiseAsset</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;my-noise-generator&#x27;</span>,
    <span class="hljs-attr">width</span>: dimension,
    <span class="hljs-attr">height</span>: dimension,
    <span class="hljs-attr">noiseEngine</span>: <span class="hljs-string">&#x27;improved-perlin&#x27;</span>,
    <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;gradient&#x27;</span>,
    <span class="hljs-attr">scale</span>: <span class="hljs-number">80</span>,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-10">&#x00a7;</a>
              </div>
              <p>We’ll code up the painting effect in a RawAsset, which can then be used by Picture entitys, Pattern styles, and filters</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">let</span> impressionistAsset = scrawl.<span class="hljs-title function_">makeRawAsset</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;pretend-van-gogh&#x27;</span>,

    <span class="hljs-attr">userAttributes</span>: [{</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-11">&#x00a7;</a>
              </div>
              <p><strong>lineWidth</strong>, <strong>lineLengthMultiplier</strong>, <strong>lineLengthStart</strong>, <strong>linesToAdd</strong>, <strong>lineBlend</strong>, <strong>lineOpacity</strong> - some brush attributes that we’ll allow the user to modify in real time.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;lineWidth&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">4</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;lineLengthMultiplier&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">20</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;lineLengthStart&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">5</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;linesToAdd&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">50</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;lineBlend&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-string">&#x27;source-over&#x27;</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;lineOpacity&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">1</span>,
    },{</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-12">&#x00a7;</a>
              </div>
              <p><strong>offsetX</strong>, <strong>offsetY</strong>, <strong>rotationMultiplier</strong>, <strong>rotationStart</strong> - some additional brush rotation attributes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;offsetX&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">0</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;offsetY&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">0</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;rotationMultiplier&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">90</span>,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;rotationStart&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-number">0</span>,
    },{</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-13">&#x00a7;</a>
              </div>
              <p><strong>canvasWidth</strong>, <strong>canvasHeight</strong> - make the RawAsset’s dimensions the same as our canvas base Cell’s dimensions</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;canvasWidth&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: dimension,
    },{
        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;canvasHeight&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: dimension,
    },{</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-14">&#x00a7;</a>
              </div>
              <p><strong>background</strong> - a handle to our background Picture entity, from which we will be extracting color values</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;background&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">setter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">background</span> = item;
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyBackground</span> = <span class="hljs-literal">true</span>;
        },
    },{</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-15">&#x00a7;</a>
              </div>
              <p><strong>noise</strong> - a handle to our Noise asset, from which we will be extracting brushstroke direction and length data</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;noise&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">setter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">noise</span> = item;
            <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyData</span> = <span class="hljs-literal">true</span>;
        },
    },{</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-16">&#x00a7;</a>
              </div>
              <p><strong>trigger</strong> - we update the RawAsset at the start of each Display cycle by setting its <code>trigger</code> attribute. </p>
<ul>
<li>It’s at this point that we fill the RawAsset canvas with the background image, if required</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-attr">key</span>: <span class="hljs-string">&#x27;trigger&#x27;</span>, 
        <span class="hljs-attr">defaultValue</span>: <span class="hljs-literal">false</span>,
        <span class="hljs-attr">setter</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">item</span>) {

            <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyBackground</span>) {

                <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyBackground</span> = <span class="hljs-literal">false</span>;

                <span class="hljs-keyword">const</span> { element, engine, canvasWidth, canvasHeight, background } = <span class="hljs-variable language_">this</span>;

                element.<span class="hljs-property">width</span> = canvasWidth;
                element.<span class="hljs-property">height</span> = canvasHeight;

                <span class="hljs-keyword">const</span> { source, copyArray, pasteArray } = background;

                <span class="hljs-keyword">if</span> (source &amp;&amp; copyArray &amp;&amp; pasteArray ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-17">&#x00a7;</a>
              </div>
              <p>Strictly speaking, copyArray and pasteArray are Picture entity internal data structures but that doesn’t stop us using them here.</p>
<ul>
<li>TODO: consider whether the RawAsset object should be using a Cell wrapper rather than a raw &lt;canvas&gt; element </li>
<li>if we did it that way, then we would be able to simpleStamp the Picture entity onto the canvas</li>
<li>the reason why we’re NOT doing it that way at the moment is to keep RawAsset canvases out of the SC library</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    engine.<span class="hljs-title function_">drawImage</span>(background.<span class="hljs-property">source</span>, ...background.<span class="hljs-property">copyArray</span>, ...background.<span class="hljs-property">pasteArray</span>);

                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">backgroundData</span> = engine.<span class="hljs-title function_">getImageData</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, dimension, dimension);

                    <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyData</span> = <span class="hljs-literal">true</span>;
                }
                <span class="hljs-keyword">else</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyBackground</span> = <span class="hljs-literal">true</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">dirtyData</span> = <span class="hljs-literal">true</span>;
        },
    }],</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-18">&#x00a7;</a>
              </div>
              <p><code>assetWrapper</code> is the same as <code>this</code> when function is declared with the function keyword</p>
<ul>
<li>We clear the RawAsset’s canvas, then draw the updated Voronoi web onto it</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">updateSource</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">assetWrapper</span>) {

        <span class="hljs-keyword">const</span> { engine, noise, backgroundData, lineWidth, lineLengthMultiplier, lineLengthStart, linesToAdd, lineBlend, lineOpacity, offsetX, offsetY, rotationMultiplier, rotationStart } = assetWrapper;

        <span class="hljs-keyword">if</span> (noise &amp;&amp; backgroundData) {

            <span class="hljs-keyword">const</span> { data, width, height } = backgroundData;

            <span class="hljs-keyword">const</span> { noiseValues } = noise;

            <span class="hljs-keyword">if</span> (noiseValues) {

                engine.<span class="hljs-property">lineWidth</span> = lineWidth;
                engine.<span class="hljs-property">lineCap</span> = <span class="hljs-string">&#x27;round&#x27;</span>;
                engine.<span class="hljs-property">globalCompositeOperation</span> = lineBlend;
                engine.<span class="hljs-property">globalAlpha</span> = lineOpacity;

                <span class="hljs-keyword">let</span> x, y, pos, len, rx, ry, dx, dy, roll, r, g, b, a;

                <span class="hljs-keyword">const</span> coord = scrawl.<span class="hljs-title function_">requestCoordinate</span>();

                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; linesToAdd; i++) {

                    x = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * width);
                    y = <span class="hljs-title class_">Math</span>.<span class="hljs-title function_">floor</span>(<span class="hljs-title class_">Math</span>.<span class="hljs-title function_">random</span>() * height);

                    len = (noiseValues[y][x] * lineLengthMultiplier) + lineLengthStart;

                    pos = ((y * width) + x) * <span class="hljs-number">4</span>;

                    r = data[pos];
                    g = data[++pos];
                    b = data[++pos];
                    a = data[++pos];

                    engine.<span class="hljs-property">strokeStyle</span> = <span class="hljs-string">`rgba(<span class="hljs-subst">${r}</span>,<span class="hljs-subst">${g}</span>,<span class="hljs-subst">${b}</span>,<span class="hljs-subst">${a/<span class="hljs-number">255</span>}</span>)`</span>;

                    rx = (x + offsetX);
                    <span class="hljs-keyword">if</span> (rx &lt; <span class="hljs-number">0</span> || rx &gt;= width) {
                        rx = (rx &lt; <span class="hljs-number">0</span>) ? rx + width : rx - width;
                    }

                    ry = (y + offsetY);
                    <span class="hljs-keyword">if</span> (ry &lt; <span class="hljs-number">0</span> || ry &gt;= height) {
                        ry = (ry &lt; <span class="hljs-number">0</span>) ? ry + height : ry - height;
                    }

                    roll = (noiseValues[ry][rx] * rotationMultiplier) + rotationStart;

                    coord.<span class="hljs-title function_">set</span>(len, <span class="hljs-number">0</span>).<span class="hljs-title function_">rotate</span>(roll);
                    [dx, dy] = coord;

                    engine.<span class="hljs-title function_">beginPath</span>();
                    engine.<span class="hljs-title function_">moveTo</span>(x, y);
                    engine.<span class="hljs-title function_">lineTo</span>(x + dx, y + dy);
                    engine.<span class="hljs-title function_">stroke</span>();
                }
                scrawl.<span class="hljs-title function_">releaseCoordinate</span>(coord);
            }
        }
    },
});

impressionistAsset.<span class="hljs-title function_">set</span>({
    <span class="hljs-attr">background</span>: backgroundImage,
    <span class="hljs-attr">noise</span>: noiseAsset,
});

scrawl.<span class="hljs-title function_">makePicture</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;noise-image&#x27;</span>,
    <span class="hljs-attr">asset</span>: <span class="hljs-string">&#x27;my-noise-generator&#x27;</span>,
    <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;none&#x27;</span>,
});

<span class="hljs-keyword">const</span> displayImage = scrawl.<span class="hljs-title function_">makePicture</span>({
    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;display-image&#x27;</span>,
    <span class="hljs-attr">asset</span>: <span class="hljs-string">&#x27;pretend-van-gogh&#x27;</span>,
    <span class="hljs-attr">dimensions</span>: [dimension, dimension],
    <span class="hljs-attr">copyDimensions</span>: [<span class="hljs-string">&#x27;100%&#x27;</span>, <span class="hljs-string">&#x27;100%&#x27;</span>],
});</pre></div></div>
            
        </li>
        
        
        <li id="section-19">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-19">&#x00a7;</a>
              </div>
              <h4 id="scene-animation">Scene animation</h4>
<p>Function to display frames-per-second data, and other information relevant to the demo</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> report = <span class="hljs-title function_">reportSpeed</span>(<span class="hljs-string">&#x27;#reportmessage&#x27;</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-20">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-20">&#x00a7;</a>
              </div>
              <p>Create the Display cycle animation</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>scrawl.<span class="hljs-title function_">makeRender</span>({

    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;demo-animation&#x27;</span>,
    <span class="hljs-attr">target</span>: canvas,</pre></div></div>
            
        </li>
        
        
        <li id="section-21">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-21">&#x00a7;</a>
              </div>
              <p>We need to trigger the RawAsset object to update its output at the start of each Display cycle</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-attr">commence</span>: <span class="hljs-function">() =&gt;</span> impressionistAsset.<span class="hljs-title function_">set</span>({ <span class="hljs-attr">trigger</span>: <span class="hljs-literal">true</span> }),
    
    <span class="hljs-attr">afterShow</span>: report,
});</pre></div></div>
            
        </li>
        
        
        <li id="section-22">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-22">&#x00a7;</a>
              </div>
              <h4 id="drag-and-drop-image-loading-functionality">Drag-and-Drop image loading functionality</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> store = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#my-image-store&#x27;</span>);
<span class="hljs-keyword">const</span> timeoutDelay = <span class="hljs-number">200</span>;

<span class="hljs-keyword">let</span> counter = <span class="hljs-number">0</span>;

scrawl.<span class="hljs-title function_">addNativeListener</span>([<span class="hljs-string">&#x27;dragenter&#x27;</span>, <span class="hljs-string">&#x27;dragover&#x27;</span>, <span class="hljs-string">&#x27;dragleave&#x27;</span>], <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {

    e.<span class="hljs-title function_">preventDefault</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();

}, canvas.<span class="hljs-property">domElement</span>);

scrawl.<span class="hljs-title function_">addNativeListener</span>(<span class="hljs-string">&#x27;drop&#x27;</span>, <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {

    e.<span class="hljs-title function_">preventDefault</span>();
    e.<span class="hljs-title function_">stopPropagation</span>();

    <span class="hljs-keyword">const</span> dt = e.<span class="hljs-property">dataTransfer</span>;

    <span class="hljs-keyword">if</span> (dt) [...dt.<span class="hljs-property">files</span>].<span class="hljs-title function_">forEach</span>(addImageAsset);

}, canvas.<span class="hljs-property">domElement</span>);

<span class="hljs-keyword">const</span> <span class="hljs-title function_">addImageAsset</span> = (<span class="hljs-params">file</span>) =&gt; {

    <span class="hljs-keyword">if</span> (file.<span class="hljs-property">type</span>.<span class="hljs-title function_">indexOf</span>(<span class="hljs-string">&#x27;image/&#x27;</span>) === <span class="hljs-number">0</span>) {

        <span class="hljs-keyword">const</span> reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>();

        reader.<span class="hljs-title function_">readAsDataURL</span>(file);

        reader.<span class="hljs-property">onloadend</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {</pre></div></div>
            
        </li>
        
        
        <li id="section-23">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-23">&#x00a7;</a>
              </div>
              <p>Create a name for our new asset</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">const</span> name = <span class="hljs-string">`user-upload-<span class="hljs-subst">${counter}</span>`</span>;
            counter++;</pre></div></div>
            
        </li>
        
        
        <li id="section-24">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-24">&#x00a7;</a>
              </div>
              <p>Add the image to the DOM and create our asset from it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-keyword">const</span> img = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&#x27;img&#x27;</span>);
            img.<span class="hljs-property">src</span> = reader.<span class="hljs-property">result</span>;
            img.<span class="hljs-property">id</span> = name;
            store.<span class="hljs-title function_">appendChild</span>(img);

            scrawl.<span class="hljs-title function_">importDomImage</span>(<span class="hljs-string">`#<span class="hljs-subst">${name}</span>`</span>);</pre></div></div>
            
        </li>
        
        
        <li id="section-25">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-25">&#x00a7;</a>
              </div>
              <p>Update our Picture entity’s asset attribute so it displays the new image</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            backgroundImage.<span class="hljs-title function_">set</span>({
                <span class="hljs-attr">asset</span>: name,
            });</pre></div></div>
            
        </li>
        
        
        <li id="section-26">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-26">&#x00a7;</a>
              </div>
              <p>HOW TO: set the Picture entity’s copy dimensions to take into account any difference between the old and new image’s dimensions</p>
<ul>
<li>Because of asynch stuff, we need to wait for stuff to complete before performing this functionality</li>
<li>The Picture entity copies (for the sake of our sanity) a square part of the image. Thus we shall use the new image’s shorter dimension as the copy dimension and offset the longer copy start so we are viewing the middle of it</li>
</ul>

            </div>
            
            <div class="content"><div class='highlight'><pre>            <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {

                <span class="hljs-keyword">const</span> asset = scrawl.<span class="hljs-property">library</span>.<span class="hljs-property">asset</span>[name];

                <span class="hljs-keyword">const</span> width = asset.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;width&#x27;</span>),
                    height = asset.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;height&#x27;</span>);

                <span class="hljs-keyword">let</span> copyStartX = <span class="hljs-number">0</span>,
                    copyStartY = <span class="hljs-number">0</span>,
                    dim = <span class="hljs-number">0</span>;

                <span class="hljs-keyword">if</span> (width &gt; height) {

                    copyStartX = (width - height) / <span class="hljs-number">2</span>;
                    dim = height;
                }
                <span class="hljs-keyword">else</span> {

                    copyStartY = (height - width) / <span class="hljs-number">2</span>;
                    dim = width;
                }

                backgroundImage.<span class="hljs-title function_">set</span>({
                    copyStartX,
                    copyStartY,
                    <span class="hljs-attr">copyWidth</span>: dim,
                    <span class="hljs-attr">copyHeight</span>: dim,
                });</pre></div></div>
            
        </li>
        
        
        <li id="section-27">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-27">&#x00a7;</a>
              </div>
              <p>The background image won’t settle until it has completed the next Display cycle, after which we can tell our RawAsset that the user has decided to load up a new image for it to paint over … so, another timeout.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {

                    impressionistAsset.<span class="hljs-title function_">set</span>({
                        <span class="hljs-attr">background</span>: backgroundImage,
                    });
                }, timeoutDelay);
            }, timeoutDelay);
        }
    }
};</pre></div></div>
            
        </li>
        
        
        <li id="section-28">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-28">&#x00a7;</a>
              </div>
              <h4 id="user-interaction">User interaction</h4>
<p>Setup form observer functionality</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>scrawl.<span class="hljs-title function_">observeAndUpdate</span>({

    <span class="hljs-attr">event</span>: [<span class="hljs-string">&#x27;input&#x27;</span>, <span class="hljs-string">&#x27;change&#x27;</span>],
    <span class="hljs-attr">origin</span>: <span class="hljs-string">&#x27;.controlItem&#x27;</span>,

    <span class="hljs-attr">target</span>: impressionistAsset,

    <span class="hljs-attr">useNativeListener</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">preventDefault</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-attr">updates</span>: {

        <span class="hljs-attr">lineBlend</span>: [<span class="hljs-string">&#x27;lineBlend&#x27;</span>, <span class="hljs-string">&#x27;raw&#x27;</span>],
        <span class="hljs-attr">lineLengthMultiplier</span>: [<span class="hljs-string">&#x27;lineLengthMultiplier&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
        <span class="hljs-attr">lineLengthStart</span>: [<span class="hljs-string">&#x27;lineLengthStart&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
        <span class="hljs-attr">lineWidth</span>: [<span class="hljs-string">&#x27;lineWidth&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
        <span class="hljs-attr">linesToAdd</span>: [<span class="hljs-string">&#x27;linesToAdd&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
        <span class="hljs-attr">lineOpacity</span>: [<span class="hljs-string">&#x27;lineOpacity&#x27;</span>, <span class="hljs-string">&#x27;float&#x27;</span>],
        <span class="hljs-attr">offsetX</span>: [<span class="hljs-string">&#x27;offsetX&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
        <span class="hljs-attr">offsetY</span>: [<span class="hljs-string">&#x27;offsetY&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
        <span class="hljs-attr">rotationMultiplier</span>: [<span class="hljs-string">&#x27;rotationMultiplier&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
        <span class="hljs-attr">rotationStart</span>: [<span class="hljs-string">&#x27;rotationStart&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
    },
});

scrawl.<span class="hljs-title function_">observeAndUpdate</span>({

    <span class="hljs-attr">event</span>: [<span class="hljs-string">&#x27;input&#x27;</span>, <span class="hljs-string">&#x27;change&#x27;</span>],
    <span class="hljs-attr">origin</span>: <span class="hljs-string">&#x27;#noiseScale&#x27;</span>,

    <span class="hljs-attr">target</span>: noiseAsset,

    <span class="hljs-attr">useNativeListener</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">preventDefault</span>: <span class="hljs-literal">true</span>,

    <span class="hljs-attr">updates</span>: {

        <span class="hljs-attr">noiseScale</span>: [<span class="hljs-string">&#x27;scale&#x27;</span>, <span class="hljs-string">&#x27;round&#x27;</span>],
    },
});</pre></div></div>
            
        </li>
        
        
        <li id="section-29">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-29">&#x00a7;</a>
              </div>
              <p>Setup form</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#lineBlend&#x27;</span>).<span class="hljs-property">options</span>.<span class="hljs-property">selectedIndex</span> = <span class="hljs-number">0</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#lineWidth&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">4</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#lineLengthMultiplier&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">20</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#lineLengthStart&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">5</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#linesToAdd&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">50</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#lineOpacity&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">1</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#noiseScale&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">80</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#offsetX&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#offsetY&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#rotationMultiplier&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">90</span>;
<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;#rotationStart&#x27;</span>).<span class="hljs-property">value</span> = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-30">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-30">&#x00a7;</a>
              </div>
              <h4 id="video-recording-and-download-functionality">Video recording and download functionality</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-keyword">const</span> videoButton = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;#my-record-video-button&quot;</span>);

<span class="hljs-keyword">let</span> recording = <span class="hljs-literal">false</span>;
<span class="hljs-keyword">let</span> myRecorder;
<span class="hljs-keyword">let</span> recordedChunks;

videoButton.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function">() =&gt;</span> {
    recording = !recording;

    <span class="hljs-keyword">if</span> (recording) {

        videoButton.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;Stop recording&quot;</span>;

        <span class="hljs-keyword">const</span> stream = canvas.<span class="hljs-property">domElement</span>.<span class="hljs-title function_">captureStream</span>(<span class="hljs-number">25</span>);

        myRecorder = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MediaRecorder</span>(stream, {
            <span class="hljs-attr">mimeType</span>: <span class="hljs-string">&quot;video/webm;codecs=vp8&quot;</span>
        });

        recordedChunks = [];

        myRecorder.<span class="hljs-property">ondataavailable</span> = <span class="hljs-function">(<span class="hljs-params">e</span>) =&gt;</span> {

            <span class="hljs-keyword">if</span> (e.<span class="hljs-property">data</span>.<span class="hljs-property">size</span> &gt; <span class="hljs-number">0</span>) recordedChunks.<span class="hljs-title function_">push</span>(e.<span class="hljs-property">data</span>);
        };

        myRecorder.<span class="hljs-title function_">start</span>();
    } 
    <span class="hljs-keyword">else</span> {

        videoButton.<span class="hljs-property">textContent</span> = <span class="hljs-string">&quot;Record a video&quot;</span>;

        myRecorder.<span class="hljs-title function_">stop</span>();

        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> {
            
            <span class="hljs-keyword">const</span> blob = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Blob</span>(recordedChunks, { <span class="hljs-attr">type</span>: <span class="hljs-string">&quot;video/webm&quot;</span> });

            <span class="hljs-keyword">const</span> url = <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">createObjectURL</span>(blob);
            <span class="hljs-keyword">const</span> a = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;a&quot;</span>);

            a.<span class="hljs-property">href</span> = url;
            a.<span class="hljs-property">download</span> = <span class="hljs-string">`Scrawl-canvas-art-recording-<span class="hljs-subst">${<span class="hljs-built_in">Date</span>().slice(<span class="hljs-number">4</span>, <span class="hljs-number">24</span>)}</span>.webm`</span>;
            a.<span class="hljs-title function_">click</span>();

            <span class="hljs-variable constant_">URL</span>.<span class="hljs-title function_">revokeObjectURL</span>(url);
        }, <span class="hljs-number">0</span>);
    }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-31">
            <div class="annotation">
              
              <div class="sswrap ">
                <a class="ss" href="#section-31">&#x00a7;</a>
              </div>
              <h4 id="development-and-testing">Development and testing</h4>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(scrawl.<span class="hljs-property">library</span>);</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
